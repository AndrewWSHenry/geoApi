!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.geoapi=t()}}(function(){var t;return function e(t,n,i){function r(a,o){if(!n[a]){if(!t[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return r(n?n:e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===c?62:e===o||e===f?63:h>e?-1:h+10>e?e-h+26+26:l+26>e?e-l:u+26>e?e-u+26:void 0}function n(t){function n(t){u[c++]=t}var i,r,a,o,h,u;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;h="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,u=new s(3*t.length/4-h),a=h>0?t.length-4:t.length;var c=0;for(i=0,r=0;a>i;i+=4,r+=3)o=e(t.charAt(i))<<18|e(t.charAt(i+1))<<12|e(t.charAt(i+2))<<6|e(t.charAt(i+3)),n((16711680&o)>>16),n((65280&o)>>8),n(255&o);return 2===h?(o=e(t.charAt(i))<<2|e(t.charAt(i+1))>>4,n(255&o)):1===h&&(o=e(t.charAt(i))<<10|e(t.charAt(i+1))<<4|e(t.charAt(i+2))>>2,n(o>>8&255),n(255&o)),u}function r(t){function e(t){return i.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var r,s,a,o=t.length%3,h="";for(r=0,a=t.length-o;a>r;r+=3)s=(t[r]<<16)+(t[r+1]<<8)+t[r+2],h+=n(s);switch(o){case 1:s=t[t.length-1],h+=e(s>>2),h+=e(s<<4&63),h+="==";break;case 2:s=(t[t.length-2]<<8)+t[t.length-1],h+=e(s>>10),h+=e(s>>4&63),h+=e(s<<2&63),h+="="}return h}var s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),o="/".charCodeAt(0),h="0".charCodeAt(0),u="a".charCodeAt(0),l="A".charCodeAt(0),c="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=r}("undefined"==typeof n?this.base64js={}:n)},{}],2:[function(t,e,n){(function(e){"use strict";function i(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}function r(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t){return this instanceof s?(s.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?a(this,t):"string"==typeof t?o(this,t,arguments.length>1?arguments[1]:"utf8"):h(this,t)):arguments.length>1?new s(t,arguments[1]):new s(t)}function a(t,e){if(t=m(t,0>e?0:0|y(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;e>n;n++)t[n]=0;return t}function o(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");var i=0|v(e,n);return t=m(t,i),t.write(e,n),t}function h(t,e){if(s.isBuffer(e))return u(t,e);if(Q(e))return l(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return c(t,e);if(e instanceof ArrayBuffer)return f(t,e)}return e.length?d(t,e):p(t,e)}function u(t,e){var n=0|y(e.length);return t=m(t,n),e.copy(t,0,0,n),t}function l(t,e){var n=0|y(e.length);t=m(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function c(t,e){var n=0|y(e.length);t=m(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function f(t,e){return s.TYPED_ARRAY_SUPPORT?(e.byteLength,t=s._augment(new Uint8Array(e))):t=c(t,new Uint8Array(e)),t}function d(t,e){var n=0|y(e.length);t=m(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function p(t,e){var n,i=0;"Buffer"===e.type&&Q(e.data)&&(n=e.data,i=0|y(n.length)),t=m(t,i);for(var r=0;i>r;r+=1)t[r]=255&n[r];return t}function m(t,e){s.TYPED_ARRAY_SUPPORT?(t=s._augment(new Uint8Array(e)),t.__proto__=s.prototype):(t.length=e,t._isBuffer=!0);var n=0!==e&&e<=s.poolSize>>>1;return n&&(t.parent=J),t}function y(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function g(t,e){if(!(this instanceof g))return new g(t,e);var n=new s(t,e);return delete n.parent,n}function v(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(i)return q(t).length;e=(""+e).toLowerCase(),i=!0}}function b(t,e,n){var i=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return A(this,e,n);case"binary":return T(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function x(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var s=e.length;if(s%2!==0)throw new Error("Invalid hex string");i>s/2&&(i=s/2);for(var a=0;i>a;a++){var o=parseInt(e.substr(2*a,2),16);if(isNaN(o))throw new Error("Invalid hex string");t[n+a]=o}return a}function w(t,e,n,i){return Y(q(e,t.length-n),t,n,i)}function _(t,e,n,i){return Y(V(e),t,n,i)}function M(t,e,n,i){return _(t,e,n,i)}function E(t,e,n,i){return Y(W(e),t,n,i)}function P(t,e,n,i){return Y(X(e,t.length-n),t,n,i)}function S(t,e,n){return 0===e&&n===t.length?H.fromByteArray(t):H.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;n>r;){var s=t[r],a=null,o=s>239?4:s>223?3:s>191?2:1;if(n>=r+o){var h,u,l,c;switch(o){case 1:128>s&&(a=s);break;case 2:h=t[r+1],128===(192&h)&&(c=(31&s)<<6|63&h,c>127&&(a=c));break;case 3:h=t[r+1],u=t[r+2],128===(192&h)&&128===(192&u)&&(c=(15&s)<<12|(63&h)<<6|63&u,c>2047&&(55296>c||c>57343)&&(a=c));break;case 4:h=t[r+1],u=t[r+2],l=t[r+3],128===(192&h)&&128===(192&u)&&128===(192&l)&&(c=(15&s)<<18|(63&h)<<12|(63&u)<<6|63&l,c>65535&&1114112>c&&(a=c))}}null===a?(a=65533,o=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=o}return C(i)}function C(t){var e=t.length;if(K>=e)return String.fromCharCode.apply(String,t);for(var n="",i=0;e>i;)n+=String.fromCharCode.apply(String,t.slice(i,i+=K));return n}function A(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;n>r;r++)i+=String.fromCharCode(127&t[r]);return i}function T(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;n>r;r++)i+=String.fromCharCode(t[r]);return i}function I(t,e,n){var i=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>i)&&(n=i);for(var r="",s=e;n>s;s++)r+=G(t[s]);return r}function L(t,e,n){for(var i=t.slice(e,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}function j(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,i,r,a){if(!s.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>r||a>e)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range")}function R(t,e,n,i){0>e&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-n,2);s>r;r++)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function B(t,e,n,i){0>e&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-n,4);s>r;r++)t[n+r]=e>>>8*(i?r:3-r)&255}function N(t,e,n,i,r,s){if(e>r||s>e)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function F(t,e,n,i,r){return r||N(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,n,i,23,4),n+4}function D(t,e,n,i,r){return r||N(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,n,i,52,8),n+8}function z(t){if(t=U(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function U(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return 16>t?"0"+t.toString(16):t.toString(16)}function q(t,e){e=e||1/0;for(var n,i=t.length,r=null,s=[],a=0;i>a;a++){if(n=t.charCodeAt(a),n>55295&&57344>n){if(!r){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(56320>n){(e-=3)>-1&&s.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,128>n){if((e-=1)<0)break;s.push(n)}else if(2048>n){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function V(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function X(t,e){for(var n,i,r,s=[],a=0;a<t.length&&!((e-=2)<0);a++)n=t.charCodeAt(a),i=n>>8,r=n%256,s.push(r),s.push(i);return s}function W(t){return H.toByteArray(z(t))}function Y(t,e,n,i){for(var r=0;i>r&&!(r+n>=e.length||r>=t.length);r++)e[r+n]=t[r];return r}var H=t("base64-js"),Z=t("ieee754"),Q=t("isarray");n.Buffer=s,n.SlowBuffer=g,n.INSPECT_MAX_BYTES=50,s.poolSize=8192;var J={};s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:i(),s.TYPED_ARRAY_SUPPORT?(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array):(s.prototype.length=void 0,s.prototype.parent=void 0),s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,a=Math.min(n,i);a>r&&t[r]===e[r];)++r;return r!==a&&(n=t[r],i=e[r]),i>n?-1:n>i?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Q(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new s(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var i=new s(e),r=0;for(n=0;n<t.length;n++){var a=t[n];a.copy(i,r),r+=a.length}return i},s.byteLength=v,s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):b.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:s.compare(this,t)},s.prototype.indexOf=function(t,e){function n(t,e,n){for(var i=-1,r=0;n+r<t.length;r++)if(t[n+r]===e[-1===i?0:r-i]){if(-1===i&&(i=r),r-i+1===e.length)return n+i}else i=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(s.isBuffer(t))return n(this,t,e);if("number"==typeof t)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):n(this,[t],e);throw new TypeError("val must be string, number or Buffer")},s.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},s.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},s.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0);else{var r=i;i=e,e=0|n,n=r}var s=this.length-e;if((void 0===n||n>s)&&(n=s),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return x(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return _(this,t,e,n);case"binary":return M(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;s.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t);var i;if(s.TYPED_ARRAY_SUPPORT)i=s._augment(this.subarray(t,e));else{var r=e-t;i=new s(r,void 0);for(var a=0;r>a;a++)i[a]=this[a+t]}return i.length&&(i.parent=this.parent||this),i},s.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||j(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i},s.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||j(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},s.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||j(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},s.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||j(t,e,this.length);for(var i=e,r=1,s=this[t+--i];i>0&&(r*=256);)s+=this[t+--i]*r;return r*=128,s>=r&&(s-=Math.pow(2,8*e)),s},s.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),Z.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),Z.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),Z.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),Z.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||O(this,t,e,n,Math.pow(2,8*n),0);var r=1,s=0;for(this[e]=255&t;++s<n&&(r*=256);)this[e+s]=t/r&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||O(this,t,e,n,Math.pow(2,8*n),0);var r=n-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}var s=0,a=1,o=0>t?1:0;for(this[e]=255&t;++s<n&&(a*=256);)this[e+s]=(t/a>>0)-o&255;return e+n},s.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}var s=n-1,a=1,o=0>t?1:0;for(this[e+s]=255&t;--s>=0&&(a*=256);)this[e+s]=(t/a>>0)-o&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e=0|e,n||O(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,a=i-n;if(this===t&&e>n&&i>e)for(r=a-1;r>=0;r--)t[r+e]=this[r+n];else if(1e3>a||!s.TYPED_ARRAY_SUPPORT)for(r=0;a>r;r++)t[r+e]=this[r+n];else t._set(this.subarray(n,n+a),e);return a},s.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof t)for(i=e;n>i;i++)this[i]=t;else{var r=q(t.toString()),s=r.length;for(i=e;n>i;i++)this[i]=r[i%s]}return this}},s.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(s.TYPED_ARRAY_SUPPORT)return new s(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var $=s.prototype;s._augment=function(t){return t.constructor=s,t._isBuffer=!0,t._set=t.set,t.get=$.get,t.set=$.set,t.write=$.write,t.toString=$.toString,t.toLocaleString=$.toString,t.toJSON=$.toJSON,t.equals=$.equals,t.compare=$.compare,t.indexOf=$.indexOf,t.copy=$.copy,t.slice=$.slice,t.readUIntLE=$.readUIntLE,t.readUIntBE=$.readUIntBE,t.readUInt8=$.readUInt8,t.readUInt16LE=$.readUInt16LE,t.readUInt16BE=$.readUInt16BE,t.readUInt32LE=$.readUInt32LE,t.readUInt32BE=$.readUInt32BE,t.readIntLE=$.readIntLE,t.readIntBE=$.readIntBE,t.readInt8=$.readInt8,t.readInt16LE=$.readInt16LE,t.readInt16BE=$.readInt16BE,t.readInt32LE=$.readInt32LE,t.readInt32BE=$.readInt32BE,t.readFloatLE=$.readFloatLE,t.readFloatBE=$.readFloatBE,t.readDoubleLE=$.readDoubleLE,t.readDoubleBE=$.readDoubleBE,t.writeUInt8=$.writeUInt8,t.writeUIntLE=$.writeUIntLE,t.writeUIntBE=$.writeUIntBE,t.writeUInt16LE=$.writeUInt16LE,t.writeUInt16BE=$.writeUInt16BE,t.writeUInt32LE=$.writeUInt32LE,t.writeUInt32BE=$.writeUInt32BE,t.writeIntLE=$.writeIntLE,t.writeIntBE=$.writeIntBE,t.writeInt8=$.writeInt8,t.writeInt16LE=$.writeInt16LE,t.writeInt16BE=$.writeInt16BE,t.writeInt32LE=$.writeInt32LE,t.writeInt32BE=$.writeInt32BE,t.writeFloatLE=$.writeFloatLE,t.writeFloatBE=$.writeFloatBE,t.writeDoubleLE=$.writeDoubleLE,t.writeDoubleBE=$.writeDoubleBE,t.fill=$.fill,t.inspect=$.inspect,t.toArrayBuffer=$.toArrayBuffer,t};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:7,isarray:3}],3:[function(t,e,n){var i={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},{}],4:[function(e,n,r){!function(i,r){"use strict";"undefined"!=typeof t&&t.amd?t("canvgModule",["rgbcolor","stackblur"],r):"undefined"!=typeof n&&n.exports&&(n.exports=r(e("rgbcolor"),e("stackblur"))),i.canvg=r(i.RGBColor,i.stackBlur)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=[0,0,0],n=function(n,i){var r=t.match(n);null!=r&&(e[i]+=r.length,t=t.replace(n," "))};return t=t.replace(/:not\(([^\)]*)\)/g,"     $1 "),t=t.replace(/{[\s\S]*/gm," "),n(o,1),n(h,0),n(u,1),n(l,2),n(c,1),n(f,1),t=t.replace(/[\*\s\+>~]/g," "),t=t.replace(/[#\.]/g," "),n(d,2),e.join("")}function r(r){var a={opts:r};a.FRAMERATE=30,a.MAX_VIRTUAL_PIXELS=3e4,a.log=function(t){},1==a.opts.log&&"undefined"!=typeof console&&(a.log=function(t){console.log(t)}),a.init=function(t){var e=0;a.UniqueId=function(){return e++,"canvg"+e},a.Definitions={},a.Styles={},a.StylesSpecificity={},a.Animations=[],a.Images=[],a.ctx=t,a.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},a.init(),a.ImagesLoaded=function(){for(var t=0;t<a.Images.length;t++)if(!a.Images[t].loaded)return!1;return!0},a.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},a.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},a.ajax=function(t){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e?(e.open("GET",t,!1),e.send(null),e.responseText):null},a.parseXml=function(t){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,n=new Windows.Data.Xml.Dom.XmlLoadSettings;return n.prohibitDtd=!1,e.loadXml(t,n),e}if(window.DOMParser){var i=new DOMParser;return i.parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},a.Property=function(t,e){this.name=t,this.value=e},a.Property.prototype.getValue=function(){return this.value},a.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},a.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},a.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},a.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},a.Property.prototype.addOpacity=function(e){var n=this.value;if(null!=e.value&&""!=e.value&&"string"==typeof this.value){var i=new t(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+e.numValue()+")")}return new a.Property(this.name,n)},a.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),a.Definitions[t]},a.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},a.Property.prototype.getFillStyleDefinition=function(t,e){var n=this.getDefinition();if(null!=n&&n.createGradient)return n.createGradient(a.ctx,t,e);if(null!=n&&n.createPattern){if(n.getHrefAttribute().hasValue()){var i=n.attribute("patternTransform");n=n.getHrefAttribute().getDefinition(),i.hasValue()&&(n.attribute("patternTransform",!0).value=i.value)}return n.createPattern(a.ctx,t)}return null},a.Property.prototype.getDPI=function(t){return 96},a.Property.prototype.getEM=function(t){var e=12,n=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);return n.hasValue()&&(e=n.toPixels(t)),e},a.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},a.Property.prototype.toPixels=function(t,e){if(!this.hasValue())return 0;var n=this.value+"";if(n.match(/em$/))return this.numValue()*this.getEM(t);if(n.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(n.match(/px$/))return this.numValue();if(n.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(n.match(/pc$/))return 15*this.numValue();if(n.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(n.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(n.match(/in$/))return this.numValue()*this.getDPI(t);if(n.match(/%$/))return this.numValue()*a.ViewPort.ComputeSize(t);var i=this.numValue();return e&&1>i?i*a.ViewPort.ComputeSize(t):i},a.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():t.match(/ms$/)?this.numValue():this.numValue()},a.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var o={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return a.Property.prototype.toTextBaseline=function(){return this.hasValue()?o[this.value]:null},a.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,e,n,i,r,s){var o=null!=s?this.Parse(s):this.CreateFont("","","","","",a.ctx.font);return{fontFamily:r||o.fontFamily,fontSize:i||o.fontSize,fontStyle:t||o.fontStyle,fontWeight:n||o.fontWeight,fontVariant:e||o.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(e){for(var n={},i=a.trim(a.compressSpaces(e||"")).split(" "),r={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},s="",o=0;o<i.length;o++)r.fontStyle||-1==t.Styles.indexOf(i[o])?r.fontVariant||-1==t.Variants.indexOf(i[o])?r.fontWeight||-1==t.Weights.indexOf(i[o])?r.fontSize?"inherit"!=i[o]&&(s+=i[o]):("inherit"!=i[o]&&(n.fontSize=i[o].split("/")[0]),r.fontStyle=r.fontVariant=r.fontWeight=r.fontSize=!0):("inherit"!=i[o]&&(n.fontWeight=i[o]),r.fontStyle=r.fontVariant=r.fontWeight=!0):("inherit"!=i[o]&&(n.fontVariant=i[o]),r.fontStyle=r.fontVariant=!0):("inherit"!=i[o]&&(n.fontStyle=i[o]),r.fontStyle=!0);return""!=s&&(n.fontFamily=s),n}},a.ToNumberArray=function(t){for(var e=a.trim(a.compressSpaces((t||"").replace(/,/g," "))).split(" "),n=0;n<e.length;n++)e[n]=parseFloat(e[n]);return e},a.Point=function(t,e){this.x=t,this.y=e},a.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},a.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},a.CreatePoint=function(t){var e=a.ToNumberArray(t);return new a.Point(e[0],e[1])},a.CreatePath=function(t){for(var e=a.ToNumberArray(t),n=[],i=0;i<e.length;i+=2)n.push(new a.Point(e[i],e[i+1]));return n},a.BoundingBox=function(t,e,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,i,r,s){var a=t+2/3*(n-t),o=e+2/3*(i-e),h=a+1/3*(r-t),u=o+1/3*(s-e);this.addBezierCurve(t,e,a,h,o,u,r,s)},this.addBezierCurve=function(t,e,n,r,s,a,o,h){var u=[t,e],l=[n,r],c=[s,a],f=[o,h];for(this.addPoint(u[0],u[1]),this.addPoint(f[0],f[1]),i=0;i<=1;i++){var d=function(t){return Math.pow(1-t,3)*u[i]+3*Math.pow(1-t,2)*t*l[i]+3*(1-t)*Math.pow(t,2)*c[i]+Math.pow(t,3)*f[i]},p=6*u[i]-12*l[i]+6*c[i],m=-3*u[i]+9*l[i]-9*c[i]+3*f[i],y=3*l[i]-3*u[i];if(0!=m){var g=Math.pow(p,2)-4*y*m;if(!(0>g)){var v=(-p+Math.sqrt(g))/(2*m);v>0&&1>v&&(0==i&&this.addX(d(v)),1==i&&this.addY(d(v)));var b=(-p-Math.sqrt(g))/(2*m);b>0&&1>b&&(0==i&&this.addX(d(b)),1==i&&this.addY(d(b)))}}else{if(0==p)continue;var x=-y/p;x>0&&1>x&&(0==i&&this.addX(d(x)),1==i&&this.addY(d(x)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},a.Transform=function(t){var e=this;this.Type={},this.Type.translate=function(t){this.p=a.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var e=a.ToNumberArray(t);this.angle=new a.Property("angle",e[0]),this.cx=e[1]||0,this.cy=e[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=a.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=a.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],n=this.m[2],i=this.m[4],r=this.m[1],s=this.m[3],a=this.m[5],o=0,h=0,u=1,l=1/(e*(s*u-a*h)-n*(r*u-a*o)+i*(r*h-s*o));t.transform(l*(s*u-a*h),l*(a*o-r*u),l*(i*h-n*u),l*(e*u-i*o),l*(n*a-i*s),l*(i*r-e*a))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=e.Type.matrix,this.base(t),this.angle=new a.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=e.Type.SkewBase,
this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var n=a.trim(a.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),i=0;i<n.length;i++){var r=a.trim(n[i].split("(")[0]),s=n[i].split("(")[1].replace(")",""),o=this.Type[r];if("undefined"!=typeof o){var h=new o(s);h.type=r,this.transforms.push(h)}}},a.AspectRatio=function(t,e,n,i,r,s,o,h,u,l){e=a.compressSpaces(e),e=e.replace(/^defer\s/,"");var c=e.split(" ")[0]||"xMidYMid",f=e.split(" ")[1]||"meet",d=n/i,p=r/s,m=Math.min(d,p),y=Math.max(d,p);"meet"==f&&(i*=m,s*=m),"slice"==f&&(i*=y,s*=y),u=new a.Property("refX",u),l=new a.Property("refY",l),u.hasValue()&&l.hasValue()?t.translate(-m*u.toPixels("x"),-m*l.toPixels("y")):(c.match(/^xMid/)&&("meet"==f&&m==p||"slice"==f&&y==p)&&t.translate(n/2-i/2,0),c.match(/YMid$/)&&("meet"==f&&m==d||"slice"==f&&y==d)&&t.translate(0,r/2-s/2),c.match(/^xMax/)&&("meet"==f&&m==p||"slice"==f&&y==p)&&t.translate(n-i,0),c.match(/YMax$/)&&("meet"==f&&m==d||"slice"==f&&y==d)&&t.translate(0,r-s)),"none"==c?t.scale(d,p):"meet"==f?t.scale(m,m):"slice"==f&&t.scale(y,y),t.translate(null==o?0:-o,null==h?0:-h)},a.Element={},a.EmptyProperty=new a.Property("EMPTY",""),a.Element.ElementBase=function(t){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(t,e){var n=this.attributes[t];return null!=n?n:(1==e&&(n=new a.Property(t,""),this.attributes[t]=n),n||a.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if("href"==t||t.match(/:href$/))return this.attributes[t];return a.EmptyProperty},this.style=function(t,e,n){var i=this.styles[t];if(null!=i)return i;var r=this.attribute(t);if(null!=r&&r.hasValue())return this.styles[t]=r,r;if(1!=n){var s=this.parent;if(null!=s){var o=s.style(t);if(null!=o&&o.hasValue())return o}}return 1==e&&(i=new a.Property(t,""),this.styles[t]=i),i||a.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.style("mask").hasValue()){var e=this.style("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,e){var n=t;e&&(n=a.CreateElement(t)),n.parent=this,"title"!=n.type&&this.children.push(n)},this.addStylesFromStyleDefinition=function(){for(var e in a.Styles)if("@"!=e[0]&&s(t,e)){var n=a.Styles[e],i=a.StylesSpecificity[e];if(null!=n)for(var r in n){var o=this.stylesSpecificity[r];"undefined"==typeof o&&(o="000"),i>o&&(this.styles[r]=n[r],this.stylesSpecificity[r]=i)}}};var e=new RegExp("^[A-Z-]+$"),n=function(t){return e.test(t)?t.toLowerCase():t};if(null!=t&&1==t.nodeType){for(var i=0;i<t.attributes.length;i++){var r=t.attributes[i],o=n(r.nodeName);this.attributes[o]=new a.Property(o,r.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var h=this.attribute("style").value.split(";"),i=0;i<h.length;i++)if(""!=a.trim(h[i])){var u=h[i].split(":"),l=a.trim(u[0]),c=a.trim(u[1]);this.styles[l]=new a.Property(l,c)}this.attribute("id").hasValue()&&null==a.Definitions[this.attribute("id").value]&&(a.Definitions[this.attribute("id").value]=this);for(var i=0;i<t.childNodes.length;i++){var f=t.childNodes[i];if(1==f.nodeType&&this.addChild(f,!0),this.captureTextNodes&&(3==f.nodeType||4==f.nodeType)){var d=f.value||f.text||f.textContent||"";""!=a.compressSpaces(d)&&this.addChild(new a.Element.tspan(f),!1)}}}},a.Element.RenderedElementBase=function(t){this.base=a.Element.ElementBase,this.base(t),this.setContext=function(t){if(this.style("fill").isUrlDefinition()){var e=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=e&&(t.fillStyle=e)}else if(this.style("fill").hasValue()){var n=this.style("fill");"currentColor"==n.value&&(n.value=this.style("color").value),"inherit"!=n.value&&(t.fillStyle="none"==n.value?"rgba(0,0,0,0)":n.value)}if(this.style("fill-opacity").hasValue()){var n=new a.Property("fill",t.fillStyle);n=n.addOpacity(this.style("fill-opacity")),t.fillStyle=n.value}if(this.style("stroke").isUrlDefinition()){var e=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=e&&(t.strokeStyle=e)}else if(this.style("stroke").hasValue()){var i=this.style("stroke");"currentColor"==i.value&&(i.value=this.style("color").value),"inherit"!=i.value&&(t.strokeStyle="none"==i.value?"rgba(0,0,0,0)":i.value)}if(this.style("stroke-opacity").hasValue()){var i=new a.Property("stroke",t.strokeStyle);i=i.addOpacity(this.style("stroke-opacity")),t.strokeStyle=i.value}if(this.style("stroke-width").hasValue()){var r=this.style("stroke-width").toPixels();t.lineWidth=0==r?.001:r}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var s=a.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof t.setLineDash?t.setLineDash(s):"undefined"!=typeof t.webkitLineDash?t.webkitLineDash=s:"undefined"==typeof t.mozDash||1==s.length&&0==s[0]||(t.mozDash=s);var o=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof t.lineDashOffset?t.lineDashOffset=o:"undefined"!=typeof t.webkitLineDashOffset?t.webkitLineDashOffset=o:"undefined"!=typeof t.mozDashOffset&&(t.mozDashOffset=o)}if("undefined"!=typeof t.font&&(t.font=a.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()){var h=new a.Transform(this.style("transform",!1,!0).value);h.apply(t)}if(this.style("clip-path",!1,!0).hasValue()){var u=this.style("clip-path",!1,!0).getDefinition();null!=u&&u.apply(t)}this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},a.Element.RenderedElementBase.prototype=new a.Element.ElementBase,a.Element.PathElementBase=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new a.BoundingBox},this.renderChildren=function(t){this.path(t),a.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var e=this.getMarkers();if(null!=e){if(this.style("marker-start").isUrlDefinition()){var n=this.style("marker-start").getDefinition();n.render(t,e[0][0],e[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var n=this.style("marker-mid").getDefinition(),i=1;i<e.length-1;i++)n.render(t,e[i][0],e[i][1]);if(this.style("marker-end").isUrlDefinition()){var n=this.style("marker-end").getDefinition();n.render(t,e[e.length-1][0],e[e.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},a.Element.PathElementBase.prototype=new a.Element.RenderedElementBase,a.Element.svg=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),a.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,"undefined"!=typeof t.font&&"undefined"!=typeof window.getComputedStyle&&(t.font=window.getComputedStyle(t.canvas).getPropertyValue("font")),this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var e=a.ViewPort.width(),n=a.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){e=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y");var i=0,r=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(i=-this.attribute("refX").toPixels("x"),r=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(i,r),t.lineTo(e,r),t.lineTo(e,n),t.lineTo(i,n),t.closePath(),t.clip())}if(a.ViewPort.SetCurrent(e,n),this.attribute("viewBox").hasValue()){var s=a.ToNumberArray(this.attribute("viewBox").value),o=s[0],h=s[1];e=s[2],n=s[3],a.AspectRatio(t,this.attribute("preserveAspectRatio").value,a.ViewPort.width(),e,a.ViewPort.height(),n,o,h,this.attribute("refX").value,this.attribute("refY").value),a.ViewPort.RemoveCurrent(),a.ViewPort.SetCurrent(s[2],s[3])}}},a.Element.svg.prototype=new a.Element.RenderedElementBase,a.Element.rect=function(t){this.base=a.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y"),s=this.attribute("rx").toPixels("x"),o=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(o=s),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(s=o),s=Math.min(s,i/2),o=Math.min(o,r/2),null!=t&&(t.beginPath(),t.moveTo(e+s,n),t.lineTo(e+i-s,n),t.quadraticCurveTo(e+i,n,e+i,n+o),t.lineTo(e+i,n+r-o),t.quadraticCurveTo(e+i,n+r,e+i-s,n+r),t.lineTo(e+s,n+r),t.quadraticCurveTo(e,n+r,e,n+r-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+s,n),t.closePath()),new a.BoundingBox(e,n,e+i,n+r)}},a.Element.rect.prototype=new a.Element.PathElementBase,a.Element.circle=function(t){this.base=a.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("cx").toPixels("x"),n=this.attribute("cy").toPixels("y"),i=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(e,n,i,0,2*Math.PI,!0),t.closePath()),new a.BoundingBox(e-i,n-i,e+i,n+i)}},a.Element.circle.prototype=new a.Element.PathElementBase,a.Element.ellipse=function(t){this.base=a.Element.PathElementBase,this.base(t),this.path=function(t){var e=4*((Math.sqrt(2)-1)/3),n=this.attribute("rx").toPixels("x"),i=this.attribute("ry").toPixels("y"),r=this.attribute("cx").toPixels("x"),s=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(r,s-i),t.bezierCurveTo(r+e*n,s-i,r+n,s-e*i,r+n,s),t.bezierCurveTo(r+n,s+e*i,r+e*n,s+i,r,s+i),t.bezierCurveTo(r-e*n,s+i,r-n,s+e*i,r-n,s),t.bezierCurveTo(r-n,s-e*i,r-e*n,s-i,r,s-i),t.closePath()),new a.BoundingBox(r-n,s-i,r+n,s+i)}},a.Element.ellipse.prototype=new a.Element.PathElementBase,a.Element.line=function(t){this.base=a.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new a.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new a.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var e=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y)),new a.BoundingBox(e[0].x,e[0].y,e[1].x,e[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},a.Element.line.prototype=new a.Element.PathElementBase,a.Element.polyline=function(t){this.base=a.Element.PathElementBase,this.base(t),this.points=a.CreatePath(this.attribute("points").value),this.path=function(t){var e=new a.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var n=1;n<this.points.length;n++)e.addPoint(this.points[n].x,this.points[n].y),null!=t&&t.lineTo(this.points[n].x,this.points[n].y);return e},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.length>0&&t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},a.Element.polyline.prototype=new a.Element.PathElementBase,a.Element.polygon=function(t){this.base=a.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},a.Element.polygon.prototype=new a.Element.polyline,a.Element.path=function(t){this.base=a.Element.PathElementBase,this.base(t);var e=this.attribute("d").value;e=e.replace(/,/gm," ");for(var n=0;2>n;n++)e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([0-9])([+\-])/gm,"$1 $2");for(var n=0;2>n;n++)e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),e=a.compressSpaces(e),e=a.trim(e),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new a.Point(0,0),this.control=new a.Point(0,0),this.current=new a.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new a.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var t=new a.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return t},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(e),this.path=function(t){var e=this.PathParser;e.reset();var n=new a.BoundingBox;for(null!=t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":var i=e.getAsCurrentPoint();for(e.addMarker(i),n.addPoint(i.x,i.y),null!=t&&t.moveTo(i.x,i.y),e.start=e.current;!e.isCommandOrEnd();){var i=e.getAsCurrentPoint();e.addMarker(i,e.start),n.addPoint(i.x,i.y),null!=t&&t.lineTo(i.x,i.y)}break;case"L":case"l":for(;!e.isCommandOrEnd();){var r=e.current,i=e.getAsCurrentPoint();e.addMarker(i,r),n.addPoint(i.x,i.y),null!=t&&t.lineTo(i.x,i.y)}break;case"H":case"h":for(;!e.isCommandOrEnd();){var s=new a.Point((e.isRelativeCommand()?e.current.x:0)+e.getScalar(),e.current.y);e.addMarker(s,e.current),e.current=s,n.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y)}break;case"V":case"v":for(;!e.isCommandOrEnd();){var s=new a.Point(e.current.x,(e.isRelativeCommand()?e.current.y:0)+e.getScalar());e.addMarker(s,e.current),e.current=s,n.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y)}break;case"C":case"c":for(;!e.isCommandOrEnd();){var o=e.current,h=e.getPoint(),u=e.getAsControlPoint(),l=e.getAsCurrentPoint();e.addMarker(l,u,h),n.addBezierCurve(o.x,o.y,h.x,h.y,u.x,u.y,l.x,l.y),null!=t&&t.bezierCurveTo(h.x,h.y,u.x,u.y,l.x,l.y)}break;case"S":case"s":for(;!e.isCommandOrEnd();){var o=e.current,h=e.getReflectedControlPoint(),u=e.getAsControlPoint(),l=e.getAsCurrentPoint();e.addMarker(l,u,h),n.addBezierCurve(o.x,o.y,h.x,h.y,u.x,u.y,l.x,l.y),null!=t&&t.bezierCurveTo(h.x,h.y,u.x,u.y,l.x,l.y)}break;case"Q":case"q":for(;!e.isCommandOrEnd();){var o=e.current,u=e.getAsControlPoint(),l=e.getAsCurrentPoint();e.addMarker(l,u,u),n.addQuadraticCurve(o.x,o.y,u.x,u.y,l.x,l.y),null!=t&&t.quadraticCurveTo(u.x,u.y,l.x,l.y)}break;case"T":case"t":for(;!e.isCommandOrEnd();){var o=e.current,u=e.getReflectedControlPoint();e.control=u;var l=e.getAsCurrentPoint();e.addMarker(l,u,u),n.addQuadraticCurve(o.x,o.y,u.x,u.y,l.x,l.y),null!=t&&t.quadraticCurveTo(u.x,u.y,l.x,l.y)}break;case"A":case"a":for(;!e.isCommandOrEnd();){var o=e.current,c=e.getScalar(),f=e.getScalar(),d=e.getScalar()*(Math.PI/180),p=e.getScalar(),m=e.getScalar(),l=e.getAsCurrentPoint(),y=new a.Point(Math.cos(d)*(o.x-l.x)/2+Math.sin(d)*(o.y-l.y)/2,-Math.sin(d)*(o.x-l.x)/2+Math.cos(d)*(o.y-l.y)/2),g=Math.pow(y.x,2)/Math.pow(c,2)+Math.pow(y.y,2)/Math.pow(f,2);g>1&&(c*=Math.sqrt(g),f*=Math.sqrt(g));var v=(p==m?-1:1)*Math.sqrt((Math.pow(c,2)*Math.pow(f,2)-Math.pow(c,2)*Math.pow(y.y,2)-Math.pow(f,2)*Math.pow(y.x,2))/(Math.pow(c,2)*Math.pow(y.y,2)+Math.pow(f,2)*Math.pow(y.x,2)));isNaN(v)&&(v=0);var b=new a.Point(v*c*y.y/f,v*-f*y.x/c),x=new a.Point((o.x+l.x)/2+Math.cos(d)*b.x-Math.sin(d)*b.y,(o.y+l.y)/2+Math.sin(d)*b.x+Math.cos(d)*b.y),w=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(w(t)*w(e))},M=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},E=M([1,0],[(y.x-b.x)/c,(y.y-b.y)/f]),P=[(y.x-b.x)/c,(y.y-b.y)/f],S=[(-y.x-b.x)/c,(-y.y-b.y)/f],k=M(P,S);_(P,S)<=-1&&(k=Math.PI),_(P,S)>=1&&(k=0);var C=1-m?1:-1,A=E+C*(k/2),T=new a.Point(x.x+c*Math.cos(A),x.y+f*Math.sin(A));if(e.addMarkerAngle(T,A-C*Math.PI/2),e.addMarkerAngle(l,A-C*Math.PI),n.addPoint(l.x,l.y),null!=t){var _=c>f?c:f,I=c>f?1:c/f,L=c>f?f/c:1;t.translate(x.x,x.y),t.rotate(d),t.scale(I,L),t.arc(0,0,_,E,E+k,1-m),t.scale(1/I,1/L),t.rotate(-d),t.translate(-x.x,-x.y)}}break;case"Z":case"z":null!=t&&t.closePath(),e.current=e.start}return n},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}},a.Element.path.prototype=new a.Element.PathElementBase,a.Element.pattern=function(t){this.base=a.Element.ElementBase,this.base(t),this.createPattern=function(t,e){var n=this.attribute("width").toPixels("x",!0),i=this.attribute("height").toPixels("y",!0),r=new a.Element.svg;r.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new a.Property("width",n+"px"),r.attributes.height=new a.Property("height",i+"px"),r.attributes.transform=new a.Property("transform",this.attribute("patternTransform").value),r.children=this.children;var s=document.createElement("canvas");s.width=n,s.height=i;var o=s.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&o.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var h=-1;1>=h;h++)for(var u=-1;1>=u;u++)o.save(),r.attributes.x=new a.Property("x",h*s.width),r.attributes.y=new a.Property("y",u*s.height),r.render(o),o.restore();var l=t.createPattern(s,"repeat");return l}},a.Element.pattern.prototype=new a.Element.ElementBase,a.Element.marker=function(t){this.base=a.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,e,n){t.translate(e.x,e.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(n),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var i=new a.Element.svg;i.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value),i.attributes.refX=new a.Property("refX",this.attribute("refX").value),i.attributes.refY=new a.Property("refY",this.attribute("refY").value),i.attributes.width=new a.Property("width",this.attribute("markerWidth").value),i.attributes.height=new a.Property("height",this.attribute("markerHeight").value),i.attributes.fill=new a.Property("fill",this.attribute("fill").valueOrDefault("black")),i.attributes.stroke=new a.Property("stroke",this.attribute("stroke").valueOrDefault("none")),i.children=this.children,i.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-n),t.translate(-e.x,-e.y)}},a.Element.marker.prototype=new a.Element.ElementBase,a.Element.defs=function(t){this.base=a.Element.ElementBase,this.base(t),this.render=function(t){}},a.Element.defs.prototype=new a.Element.ElementBase,a.Element.GradientBase=function(t){this.base=a.Element.ElementBase,this.base(t),this.stops=[];for(var e=0;e<this.children.length;e++){var n=this.children[e];"stop"==n.type&&this.stops.push(n)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(t){for(var e=0;e<this.attributesToInherit.length;e++){var n=this.attributesToInherit[e];!this.attribute(n).hasValue()&&t.attribute(n).hasValue()&&(this.attribute(n,!0).value=t.attribute(n).value)}},this.createGradient=function(t,e,n){var i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var r=function(t){if(n.hasValue()){var e=new a.Property("color",t);return e.addOpacity(n).value}return t},s=this.getGradient(t,e);if(null==s)return r(i.stops[i.stops.length-1].color);for(var o=0;o<i.stops.length;o++)s.addColorStop(i.stops[o].offset,r(i.stops[o].color));if(this.attribute("gradientTransform").hasValue()){var h=a.ViewPort.viewPorts[0],u=new a.Element.rect;u.attributes.x=new a.Property("x",-a.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new a.Property("y",-a.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new a.Property("width",a.MAX_VIRTUAL_PIXELS),u.attributes.height=new a.Property("height",a.MAX_VIRTUAL_PIXELS);var l=new a.Element.g;l.attributes.transform=new a.Property("transform",this.attribute("gradientTransform").value),l.children=[u];var c=new a.Element.svg;c.attributes.x=new a.Property("x",0),c.attributes.y=new a.Property("y",0),c.attributes.width=new a.Property("width",h.width),c.attributes.height=new a.Property("height",h.height),c.children=[l];var f=document.createElement("canvas");f.width=h.width,f.height=h.height;var d=f.getContext("2d");return d.fillStyle=s,c.render(d),d.createPattern(f,"no-repeat")}return s}},a.Element.GradientBase.prototype=new a.Element.ElementBase,a.Element.linearGradient=function(t){this.base=a.Element.GradientBase,this.base(t),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(t,e){var n="objectBoundingBox"==this.gradientUnits()?e.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),s="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),a="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==s&&r==a?null:t.createLinearGradient(i,r,s,a)}},a.Element.linearGradient.prototype=new a.Element.GradientBase,a.Element.radialGradient=function(t){this.base=a.Element.GradientBase,this.base(t),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),s=i,a=r;this.attribute("fx").hasValue()&&(s="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(a="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var o="objectBoundingBox"==this.gradientUnits()?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(s,a,0,i,r,o)}},a.Element.radialGradient.prototype=new a.Element.GradientBase,a.Element.stop=function(t){this.base=a.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var e=this.style("stop-color",!0);""===e.value&&(e.value="#000"),this.style("stop-opacity").hasValue()&&(e=e.addOpacity(this.style("stop-opacity"))),this.color=e.value},a.Element.stop.prototype=new a.Element.ElementBase,a.Element.AnimateBase=function(t){this.base=a.Element.ElementBase,this.base(t),a.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var i=this.attribute("type").value;n=i+"("+n+")"}this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var e=t.progress*(this.values.value.length-1),n=Math.floor(e),i=Math.ceil(e);t.from=new a.Property("from",parseFloat(this.values.value[n])),t.to=new a.Property("to",parseFloat(this.values.value[i])),t.progress=(e-n)/(i-n)}else t.from=this.from,t.to=this.to;return t}},a.Element.AnimateBase.prototype=new a.Element.ElementBase,a.Element.animate=function(t){this.base=a.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return e+this.initialUnits}},a.Element.animate.prototype=new a.Element.AnimateBase,a.Element.animateColor=function(e){this.base=a.Element.AnimateBase,this.base(e),this.calcValue=function(){var e=this.progress(),n=new t(e.from.value),i=new t(e.to.value);if(n.ok&&i.ok){var r=n.r+(i.r-n.r)*e.progress,s=n.g+(i.g-n.g)*e.progress,a=n.b+(i.b-n.b)*e.progress;return"rgb("+parseInt(r,10)+","+parseInt(s,10)+","+parseInt(a,10)+")"}return this.attribute("from").value}},a.Element.animateColor.prototype=new a.Element.AnimateBase,a.Element.animateTransform=function(t){this.base=a.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),e=a.ToNumberArray(t.from.value),n=a.ToNumberArray(t.to.value),i="",r=0;r<e.length;r++)i+=e[r]+(n[r]-e[r])*t.progress+" ";return i}},a.Element.animateTransform.prototype=new a.Element.animate,a.Element.font=function(t){this.base=a.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var e=0;e<this.children.length;e++){var n=this.children[e];"font-face"==n.type?(this.fontFace=n,n.style("font-family").hasValue()&&(a.Definitions[n.style("font-family").value]=this)):"missing-glyph"==n.type?this.missingGlyph=n:"glyph"==n.type&&(""!=n.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[n.unicode]&&(this.glyphs[n.unicode]=[]),this.glyphs[n.unicode][n.arabicForm]=n):this.glyphs[n.unicode]=n)}},a.Element.font.prototype=new a.Element.ElementBase,a.Element.fontface=function(t){this.base=a.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},a.Element.fontface.prototype=new a.Element.ElementBase,a.Element.missingglyph=function(t){this.base=a.Element.path,this.base(t),this.horizAdvX=0},a.Element.missingglyph.prototype=new a.Element.path,a.Element.glyph=function(t){this.base=a.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},a.Element.glyph.prototype=new a.Element.path,a.Element.text=function(t){this.captureTextNodes=!0,this.base=a.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),n=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize);return new a.BoundingBox(t,e-n,t+Math.floor(2*n/3)*this.children[0].getText().length,e)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),
this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,this,e)},this.getAnchorDelta=function(t,e,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"!=i){for(var r=0,s=n;s<e.children.length;s++){var a=e.children[s];if(s>n&&a.attribute("x").hasValue())break;r+=a.measureTextRecursive(t)}return-1*("end"==i?r:r/2)}return 0},this.renderChild=function(t,e,n,i){var r=n.children[i];r.attribute("x").hasValue()?(r.x=r.attribute("x").toPixels("x")+e.getAnchorDelta(t,n,i),r.attribute("dx").hasValue()&&(r.x+=r.attribute("dx").toPixels("x"))):(r.attribute("dx").hasValue()&&(e.x+=r.attribute("dx").toPixels("x")),r.x=e.x),e.x=r.x+r.measureText(t),r.attribute("y").hasValue()?(r.y=r.attribute("y").toPixels("y"),r.attribute("dy").hasValue()&&(r.y+=r.attribute("dy").toPixels("y"))):(r.attribute("dy").hasValue()&&(e.y+=r.attribute("dy").toPixels("y")),r.y=e.y),e.y=r.y,r.render(t);for(var i=0;i<r.children.length;i++)e.renderChild(t,e,r,i)}},a.Element.text.prototype=new a.Element.RenderedElementBase,a.Element.TextElementBase=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,n){var i=e[n],r=null;if(t.isArabic){var s="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(s="terminal"),n>0&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(s="medial"),n>0&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(s="initial"),"undefined"!=typeof t.glyphs[i]&&(r=t.glyphs[i][s],null==r&&"glyph"==t.glyphs[i].type&&(r=t.glyphs[i]))}else r=t.glyphs[i];return null==r&&(r=t.missingGlyph),r},this.renderChildren=function(t){var e=this.parent.style("font-family").getDefinition();if(null==e)""!=t.fillStyle&&t.fillText(a.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(a.compressSpaces(this.getText()),this.x,this.y);else{var n=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),i=this.parent.style("font-style").valueOrDefault(a.Font.Parse(a.ctx.font).fontStyle),r=this.getText();e.isRTL&&(r=r.split("").reverse().join(""));for(var s=a.ToNumberArray(this.parent.attribute("dx").value),o=0;o<r.length;o++){var h=this.getGlyph(e,r,o),u=n/e.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(u,-u);var l=t.lineWidth;t.lineWidth=t.lineWidth*e.fontFace.unitsPerEm/n,"italic"==i&&t.transform(1,0,.4,1,0,0),h.render(t),"italic"==i&&t.transform(1,0,-.4,1,0,0),t.lineWidth=l,t.scale(1/u,-1/u),t.translate(-this.x,-this.y),this.x+=n*(h.horizAdvX||e.horizAdvX)/e.fontFace.unitsPerEm,"undefined"==typeof s[o]||isNaN(s[o])||(this.x+=s[o])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(t){var e=this.parent.style("font-family").getDefinition();if(null!=e){var n=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),i=0,r=this.getText();e.isRTL&&(r=r.split("").reverse().join(""));for(var s=a.ToNumberArray(this.parent.attribute("dx").value),o=0;o<r.length;o++){var h=this.getGlyph(e,r,o);i+=(h.horizAdvX||e.horizAdvX)*n/e.fontFace.unitsPerEm,"undefined"==typeof s[o]||isNaN(s[o])||(i+=s[o])}return i}var u=a.compressSpaces(this.getText());if(!t.measureText)return 10*u.length;t.save(),this.setContext(t);var l=t.measureText(u).width;return t.restore(),l}},a.Element.TextElementBase.prototype=new a.Element.RenderedElementBase,a.Element.tspan=function(t){this.captureTextNodes=!0,this.base=a.Element.TextElementBase,this.base(t),this.text=a.compressSpaces(t.value||t.text||t.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},a.Element.tspan.prototype=new a.Element.TextElementBase,a.Element.tref=function(t){this.base=a.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();return null!=t?t.children[0].getText():void 0}},a.Element.tref.prototype=new a.Element.TextElementBase,a.Element.a=function(t){this.base=a.Element.TextElementBase,this.base(t),this.hasText=t.childNodes.length>0;for(var e=0;e<t.childNodes.length;e++)3!=t.childNodes[e].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var e=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);a.Mouse.checkBoundingBox(this,new a.BoundingBox(this.x,this.y-e.toPixels("y"),this.x+this.measureText(t),this.y))}else if(this.children.length>0){var n=new a.Element.g;n.children=this.children,n.parent=this,n.render(t)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){a.ctx.canvas.style.cursor="pointer"}},a.Element.a.prototype=new a.Element.TextElementBase,a.Element.image=function(t){this.base=a.Element.RenderedElementBase,this.base(t);var e=this.getHrefAttribute().value;if(""!=e){var n=e.match(/\.svg$/);if(a.Images.push(this),this.loaded=!1,n)this.img=a.ajax(e),this.loaded=!0;else{this.img=document.createElement("img"),1==a.opts.useCORS&&(this.img.crossOrigin="Anonymous");var i=this;this.img.onload=function(){i.loaded=!0},this.img.onerror=function(){a.log('ERROR: image "'+e+'" not found'),i.loaded=!0},this.img.src=e}this.renderChildren=function(t){var e=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");0!=r&&0!=s&&(t.save(),n?t.drawSvg(this.img,e,i,r,s):(t.translate(e,i),a.AspectRatio(t,this.attribute("preserveAspectRatio").value,r,this.img.width,s,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");return new a.BoundingBox(t,e,t+n,e+i)}}},a.Element.image.prototype=new a.Element.RenderedElementBase,a.Element.g=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(){for(var t=new a.BoundingBox,e=0;e<this.children.length;e++)t.addBoundingBox(this.children[e].getBoundingBox());return t}},a.Element.g.prototype=new a.Element.RenderedElementBase,a.Element.symbol=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.render=function(t){}},a.Element.symbol.prototype=new a.Element.RenderedElementBase,a.Element.style=function(t){this.base=a.Element.ElementBase,this.base(t);for(var e="",i=0;i<t.childNodes.length;i++)e+=t.childNodes[i].data;e=e.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),e=a.compressSpaces(e);for(var r=e.split("}"),i=0;i<r.length;i++)if(""!=a.trim(r[i]))for(var s=r[i].split("{"),o=s[0].split(","),h=s[1].split(";"),u=0;u<o.length;u++){var l=a.trim(o[u]);if(""!=l){for(var c=a.Styles[l]||{},f=0;f<h.length;f++){var d=h[f].indexOf(":"),p=h[f].substr(0,d),m=h[f].substr(d+1,h[f].length-d);null!=p&&null!=m&&(c[a.trim(p)]=new a.Property(a.trim(p),a.trim(m)))}if(a.Styles[l]=c,a.StylesSpecificity[l]=n(l),"@font-face"==l)for(var y=c["font-family"].value.replace(/"/g,""),g=c.src.value.split(","),v=0;v<g.length;v++)if(g[v].indexOf('format("svg")')>0)for(var b=g[v].indexOf("url"),x=g[v].indexOf(")",b),w=g[v].substr(b+5,x-b-6),_=a.parseXml(a.ajax(w)),M=_.getElementsByTagName("font"),E=0;E<M.length;E++){var P=a.CreateElement(M[E]);a.Definitions[y]=P}}}},a.Element.style.prototype=new a.Element.ElementBase,a.Element.use=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var e=this.getHrefAttribute().getDefinition();this.path=function(t){null!=e&&e.path(t)},this.getBoundingBox=function(){return null!=e?e.getBoundingBox():void 0},this.renderChildren=function(t){if(null!=e){var n=e;"symbol"==e.type&&(n=new a.Element.svg,n.type="svg",n.attributes.viewBox=new a.Property("viewBox",e.attribute("viewBox").value),n.attributes.preserveAspectRatio=new a.Property("preserveAspectRatio",e.attribute("preserveAspectRatio").value),n.attributes.overflow=new a.Property("overflow",e.attribute("overflow").value),n.children=e.children),"svg"==n.type&&(this.attribute("width").hasValue()&&(n.attributes.width=new a.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(n.attributes.height=new a.Property("height",this.attribute("height").value)));var i=n.parent;n.parent=null,n.render(t),n.parent=i}}},a.Element.use.prototype=new a.Element.RenderedElementBase,a.Element.mask=function(t){this.base=a.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==r&&0==s){for(var o=new a.BoundingBox,h=0;h<this.children.length;h++)o.addBoundingBox(this.children[h].getBoundingBox());var n=Math.floor(o.x1),i=Math.floor(o.y1),r=Math.floor(o.width()),s=Math.floor(o.height())}var u=e.attribute("mask").value;e.attribute("mask").value="";var l=document.createElement("canvas");l.width=n+r,l.height=i+s;var c=l.getContext("2d");this.renderChildren(c);var f=document.createElement("canvas");f.width=n+r,f.height=i+s;var d=f.getContext("2d");e.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=c.createPattern(l,"no-repeat"),d.fillRect(0,0,n+r,i+s),t.fillStyle=d.createPattern(f,"no-repeat"),t.fillRect(0,0,n+r,i+s),e.attribute("mask").value=u},this.render=function(t){}},a.Element.mask.prototype=new a.Element.ElementBase,a.Element.clipPath=function(t){this.base=a.Element.ElementBase,this.base(t),this.apply=function(t){var e=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var n=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},e.call(t);for(var i=0;i<this.children.length;i++){var r=this.children[i];if("undefined"!=typeof r.path){var s=null;r.style("transform",!1,!0).hasValue()&&(s=new a.Transform(r.style("transform",!1,!0).value),s.apply(t)),r.path(t),CanvasRenderingContext2D.prototype.closePath=n,s&&s.unapply(t)}}n.call(t),t.clip(),CanvasRenderingContext2D.prototype.beginPath=e,CanvasRenderingContext2D.prototype.closePath=n},this.render=function(t){}},a.Element.clipPath.prototype=new a.Element.ElementBase,a.Element.filter=function(t){this.base=a.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=e.getBoundingBox(),i=Math.floor(n.x1),r=Math.floor(n.y1),s=Math.floor(n.width()),a=Math.floor(n.height()),o=e.style("filter").value;e.style("filter").value="";for(var h=0,u=0,l=0;l<this.children.length;l++){var c=this.children[l].extraFilterDistance||0;h=Math.max(h,c),u=Math.max(u,c)}var f=document.createElement("canvas");f.width=s+2*h,f.height=a+2*u;var d=f.getContext("2d");d.translate(-i+h,-r+u),e.render(d);for(var l=0;l<this.children.length;l++)"function"==typeof this.children[l].apply&&this.children[l].apply(d,0,0,s+2*h,a+2*u);t.drawImage(f,0,0,s+2*h,a+2*u,i-h,r-u,s+2*h,a+2*u),e.style("filter",!0).value=o},this.render=function(t){}},a.Element.filter.prototype=new a.Element.ElementBase,a.Element.feMorphology=function(t){this.base=a.Element.ElementBase,this.base(t),this.apply=function(t,e,n,i,r){}},a.Element.feMorphology.prototype=new a.Element.ElementBase,a.Element.feComposite=function(t){this.base=a.Element.ElementBase,this.base(t),this.apply=function(t,e,n,i,r){}},a.Element.feComposite.prototype=new a.Element.ElementBase,a.Element.feColorMatrix=function(t){function e(t,e,n,i,r,s){return t[n*i*4+4*e+s]}function n(t,e,n,i,r,s,a){t[n*i*4+4*e+s]=a}function i(t,e){var n=r[t];return n*(0>n?e-255:e)}this.base=a.Element.ElementBase,this.base(t);var r=a.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var s=r[0];r=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var o=r[0]*Math.PI/180,h=function(t,e,n){return t+Math.cos(o)*e+Math.sin(o)*n};r=[h(.213,.787,-.213),h(.715,-.715,-.715),h(.072,-.072,.928),0,0,h(.213,-.213,.143),h(.715,.285,.14),h(.072,-.072,-.283),0,0,h(.213,-.213,-.787),h(.715,-.715,.715),h(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(t,r,s,a,o){for(var h=t.getImageData(0,0,a,o),s=0;o>s;s++)for(var r=0;a>r;r++){var u=e(h.data,r,s,a,o,0),l=e(h.data,r,s,a,o,1),c=e(h.data,r,s,a,o,2),f=e(h.data,r,s,a,o,3);n(h.data,r,s,a,o,0,i(0,u)+i(1,l)+i(2,c)+i(3,f)+i(4,1)),n(h.data,r,s,a,o,1,i(5,u)+i(6,l)+i(7,c)+i(8,f)+i(9,1)),n(h.data,r,s,a,o,2,i(10,u)+i(11,l)+i(12,c)+i(13,f)+i(14,1)),n(h.data,r,s,a,o,3,i(15,u)+i(16,l)+i(17,c)+i(18,f)+i(19,1))}t.clearRect(0,0,a,o),t.putImageData(h,0,0)}},a.Element.feColorMatrix.prototype=new a.Element.ElementBase,a.Element.feGaussianBlur=function(t){this.base=a.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,n,i,r,s){return"undefined"==typeof e.canvasRGBA?void a.log("ERROR: StackBlur.js must be included for blur to work"):(t.canvas.id=a.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),e.canvasRGBA(t.canvas.id,n,i,r,s,this.blurRadius),void document.body.removeChild(t.canvas))}},a.Element.feGaussianBlur.prototype=new a.Element.ElementBase,a.Element.title=function(t){},a.Element.title.prototype=new a.Element.ElementBase,a.Element.desc=function(t){},a.Element.desc.prototype=new a.Element.ElementBase,a.Element.MISSING=function(t){a.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},a.Element.MISSING.prototype=new a.Element.ElementBase,a.CreateElement=function(t){var e=t.nodeName.replace(/^[^:]+:/,"");e=e.replace(/\-/g,"");var n=null;return n="undefined"!=typeof a.Element[e]?new a.Element[e](t):new a.Element.MISSING(t),n.type=t.nodeName,n},a.load=function(t,e){a.loadXml(t,a.ajax(e))},a.loadXml=function(t,e){a.loadXmlDoc(t,a.parseXml(e))},a.loadXmlDoc=function(t,e){a.init(t);var n=function(e){for(var n=t.canvas;n;)e.x-=n.offsetLeft,e.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(e.x+=window.scrollX),window.scrollY&&(e.y+=window.scrollY),e};1!=a.opts.ignoreMouse&&(t.canvas.onclick=function(t){var e=n(new a.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));a.Mouse.onclick(e.x,e.y)},t.canvas.onmousemove=function(t){var e=n(new a.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));a.Mouse.onmousemove(e.x,e.y)});var i=a.CreateElement(e.documentElement);i.root=!0,i.addStylesFromStyleDefinition();var r=!0,s=function(){a.ViewPort.Clear(),t.canvas.parentNode&&a.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=a.opts.ignoreDimensions&&(i.style("width").hasValue()&&(t.canvas.width=i.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),i.style("height").hasValue()&&(t.canvas.height=i.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px"));var n=t.canvas.clientWidth||t.canvas.width,s=t.canvas.clientHeight||t.canvas.height;if(1==a.opts.ignoreDimensions&&i.style("width").hasValue()&&i.style("height").hasValue()&&(n=i.style("width").toPixels("x"),s=i.style("height").toPixels("y")),a.ViewPort.SetCurrent(n,s),null!=a.opts.offsetX&&(i.attribute("x",!0).value=a.opts.offsetX),null!=a.opts.offsetY&&(i.attribute("y",!0).value=a.opts.offsetY),null!=a.opts.scaleWidth||null!=a.opts.scaleHeight){var o=null,h=null,u=a.ToNumberArray(i.attribute("viewBox").value);null!=a.opts.scaleWidth&&(i.attribute("width").hasValue()?o=i.attribute("width").toPixels("x")/a.opts.scaleWidth:isNaN(u[2])||(o=u[2]/a.opts.scaleWidth)),null!=a.opts.scaleHeight&&(i.attribute("height").hasValue()?h=i.attribute("height").toPixels("y")/a.opts.scaleHeight:isNaN(u[3])||(h=u[3]/a.opts.scaleHeight)),null==o&&(o=h),null==h&&(h=o),i.attribute("width",!0).value=a.opts.scaleWidth,i.attribute("height",!0).value=a.opts.scaleHeight,i.style("transform",!0,!0).value+=" scale("+1/o+","+1/h+")"}1!=a.opts.ignoreClear&&t.clearRect(0,0,n,s),i.render(t),r&&(r=!1,"function"==typeof a.opts.renderCallback&&a.opts.renderCallback(e))},o=!0;a.ImagesLoaded()&&(o=!1,s()),a.intervalID=setInterval(function(){var t=!1;if(o&&a.ImagesLoaded()&&(o=!1,t=!0),1!=a.opts.ignoreMouse&&(t|=a.Mouse.hasEvents()),1!=a.opts.ignoreAnimation)for(var e=0;e<a.Animations.length;e++)t|=a.Animations[e].update(1e3/a.FRAMERATE);"function"==typeof a.opts.forceRedraw&&1==a.opts.forceRedraw()&&(t=!0),t&&(s(),a.Mouse.runEvents())},1e3/a.FRAMERATE)},a.stop=function(){a.intervalID&&clearInterval(a.intervalID)},a.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInPath&&e.isPointInPath(i.x,i.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInBox(i.x,i.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){a.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var e=this.events[t],n=this.eventElements[t];n;)e.run(n),n=n.parent;this.events=[],this.eventElements=[]}},a}var s,a=function(t,e,n){if(null!=t||null!=e||null!=n){"string"==typeof t&&(t=document.getElementById(t)),null!=t.svg&&t.svg.stop();var i=r(n||{});(1!=t.childNodes.length||"OBJECT"!=t.childNodes[0].nodeName)&&(t.svg=i);var s=t.getContext("2d");"undefined"!=typeof e.documentElement?i.loadXmlDoc(s,e):"<"==e.substr(0,1)?i.loadXml(s,e):i.load(s,e)}else for(var o=document.querySelectorAll("svg"),h=0;h<o.length;h++){var u=o[h],l=document.createElement("canvas");l.width=u.clientWidth,l.height=u.clientHeight,u.parentNode.insertBefore(l,u),u.parentNode.removeChild(u);var c=document.createElement("div");c.appendChild(u),a(l,c.innerHTML)}};"undefined"!=typeof Element.prototype.matches?s=function(t,e){return t.matches(e)}:"undefined"!=typeof Element.prototype.webkitMatchesSelector?s=function(t,e){return t.webkitMatchesSelector(e)}:"undefined"!=typeof Element.prototype.mozMatchesSelector?s=function(t,e){return t.mozMatchesSelector(e)}:"undefined"!=typeof Element.prototype.msMatchesSelector?s=function(t,e){return t.msMatchesSelector(e)}:"undefined"!=typeof Element.prototype.oMatchesSelector?s=function(t,e){return t.oMatchesSelector(e)}:(("function"==typeof jQuery||"function"==typeof Zepto)&&(s=function(t,e){return $(t).is(e)}),"undefined"==typeof s&&(s=Sizzle.matchesSelector));var o=/(\[[^\]]+\])/g,h=/(#[^\s\+>~\.\[:]+)/g,u=/(\.[^\s\+>~\.\[:]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,c=/(:[\w-]+\([^\)]*\))/gi,f=/(:[^\s\+>~\.\[:]+)/g,d=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,i,r,s){var o={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:i,scaleHeight:r};for(var h in s)s.hasOwnProperty(h)&&(o[h]=s[h]);a(this.canvas,t,o)}),a})},{rgbcolor:135,stackblur:142}],5:[function(t,e,n){function i(t){return!!t.match(/(Lat)(itude)?/gi)}function r(t){return!!t.match(/(L)(on|ng)(gitude)?/i)}function s(t){return"object"==typeof t?Object.keys(t).length:0}function a(t){var e=[",",";","	","|"],n=[];return e.forEach(function(e){var i=c(e).parse(t);if(i.length>=1){for(var r=s(i[0]),a=0;a<i.length;a++)if(s(i[a])!==r)return;n.push({delimiter:e,arity:Object.keys(i[0]).length})}}),n.length?n.sort(function(t,e){return e.arity-t.arity})[0].delimiter:null}function o(t){var e=a(t);return e?c(e).parse(t):null}function h(t,e,n){n||(n=e,e={}),e.delimiter=e.delimiter||",";var s=e.latfield||"",o=e.lonfield||"",h=e.crs||"",u=[],l={type:"FeatureCollection",features:u};if(""!==h&&(l.crs={type:"name",properties:{name:h}}),"auto"===e.delimiter&&"string"==typeof t&&(e.delimiter=a(t),!e.delimiter))return n({type:"Error",message:"Could not autodetect delimiter"});var d="string"==typeof t?c(e.delimiter).parse(t):t;if(!d.length)return n(null,l);if(!s||!o){for(var p in d[0])!s&&i(p)&&(s=p),!o&&r(p)&&(o=p);if(!s||!o){var m=[];for(var y in d[0])m.push(y);return n({type:"Error",message:"Latitude and longitude fields not present",data:d,fields:m})}}for(var g=[],v=0;v<d.length;v++)if(void 0!==d[v][o]&&void 0!==d[v][o]){var b,x,w,_=d[v][o],M=d[v][s];w=f(_,"EW"),w&&(_=w),w=f(M,"NS"),w&&(M=w),b=parseFloat(_),x=parseFloat(M),isNaN(b)||isNaN(x)?g.push({message:"A row contained an invalid value for latitude or longitude",row:d[v]}):(e.includeLatLon||(delete d[v][o],delete d[v][s]),u.push({type:"Feature",properties:d[v],geometry:{type:"Point",coordinates:[parseFloat(b),parseFloat(x)]}}))}n(g.length?g:null,l)}function u(t){for(var e=t.features,n={type:"Feature",geometry:{type:"LineString",coordinates:[]}},i=0;i<e.length;i++)n.geometry.coordinates.push(e[i].geometry.coordinates);return n.properties=e.reduce(function(t,e){for(var n in e.properties)t[n]||(t[n]=[]),t[n].push(e.properties[n]);return t},{}),{type:"FeatureCollection",features:[n]}}function l(t){for(var e=t.features,n={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},i=0;i<e.length;i++)n.geometry.coordinates[0].push(e[i].geometry.coordinates);return n.properties=e.reduce(function(t,e){for(var n in e.properties)t[n]||(t[n]=[]),t[n].push(e.properties[n]);return t},{}),{type:"FeatureCollection",features:[n]}}var c=t("dsv"),f=t("sexagesimal");e.exports={isLon:r,isLat:i,csv:c.csv.parse,tsv:c.tsv.parse,dsv:c,auto:o,csv2geojson:h,toLine:u,toPolygon:l}},{dsv:6,sexagesimal:136}],6:[function(t,e,n){e.exports=new Function('dsv.version = "0.0.3";\n\ndsv.tsv = dsv("\\t");\ndsv.csv = dsv(",");\n\nfunction dsv(delimiter) {\n  var dsv = {},\n      reFormat = new RegExp("[\\"" + delimiter + "\\n]"),\n      delimiterCode = delimiter.charCodeAt(0);\n\n  dsv.parse = function(text, f) {\n    var o;\n    return dsv.parseRows(text, function(row, i) {\n      if (o) return o(row, i - 1);\n      var a = new Function("d", "return {" + row.map(function(name, i) {\n        return JSON.stringify(name) + ": d[" + i + "]";\n      }).join(",") + "}");\n      o = f ? function(row, i) { return f(a(row), i); } : a;\n    });\n  };\n\n  dsv.parseRows = function(text, f) {\n    var EOL = {}, // sentinel value for end-of-line\n        EOF = {}, // sentinel value for end-of-file\n        rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // the current line number\n        t, // the current token\n        eol; // is the current token followed by EOL?\n\n    function token() {\n      if (I >= N) return EOF; // special case: end of file\n      if (eol) return eol = false, EOL; // special case: end of line\n\n      // special case: quotes\n      var j = I;\n      if (text.charCodeAt(j) === 34) {\n        var i = j;\n        while (i++ < N) {\n          if (text.charCodeAt(i) === 34) {\n            if (text.charCodeAt(i + 1) !== 34) break;\n            ++i;\n          }\n        }\n        I = i + 2;\n        var c = text.charCodeAt(i + 1);\n        if (c === 13) {\n          eol = true;\n          if (text.charCodeAt(i + 2) === 10) ++I;\n        } else if (c === 10) {\n          eol = true;\n        }\n        return text.substring(j + 1, i).replace(/""/g, "\\"");\n      }\n\n      // common case: find next delimiter or newline\n      while (I < N) {\n        var c = text.charCodeAt(I++), k = 1;\n        if (c === 10) eol = true; // \\n\n        else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n        else if (c !== delimiterCode) continue;\n        return text.substring(j, I - k);\n      }\n\n      // special case: last token before EOF\n      return text.substring(j);\n    }\n\n    while ((t = token()) !== EOF) {\n      var a = [];\n      while (t !== EOL && t !== EOF) {\n        a.push(t);\n        t = token();\n      }\n      if (f && !(a = f(a, n++))) continue;\n      rows.push(a);\n    }\n\n    return rows;\n  };\n\n  dsv.format = function(rows) {\n    if (Array.isArray(rows[0])) return dsv.formatRows(rows); // deprecated; use formatRows\n    var fieldSet = {}, fields = [];\n\n    // Compute unique fields in order of discovery.\n    rows.forEach(function(row) {\n      for (var field in row) {\n        if (!(field in fieldSet)) {\n          fields.push(fieldSet[field] = field);\n        }\n      }\n    });\n\n    return [fields.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n      return fields.map(function(field) {\n        return formatValue(row[field]);\n      }).join(delimiter);\n    })).join("\\n");\n  };\n\n  dsv.formatRows = function(rows) {\n    return rows.map(formatRow).join("\\n");\n  };\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return reFormat.test(text) ? "\\"" + text.replace(/\\"/g, "\\"\\"") + "\\"" : text;\n  }\n\n  return dsv;\n}\n;return dsv')()},{}],7:[function(t,e,n){n.read=function(t,e,n,i,r){var s,a,o=8*r-i-1,h=(1<<o)-1,u=h>>1,l=-7,c=n?r-1:0,f=n?-1:1,d=t[e+c];for(c+=f,s=d&(1<<-l)-1,d>>=-l,l+=o;l>0;s=256*s+t[e+c],c+=f,l-=8);for(a=s&(1<<-l)-1,s>>=-l,l+=i;l>0;a=256*a+t[e+c],c+=f,l-=8);if(0===s)s=1-u;else{if(s===h)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,i),s-=u}return(d?-1:1)*a*Math.pow(2,s-i)},n.write=function(t,e,n,i,r,s){var a,o,h,u=8*s-r-1,l=(1<<u)-1,c=l>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,p=i?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),e+=a+c>=1?f/h:f*Math.pow(2,1-c),e*h>=2&&(a++,h/=2),a+c>=l?(o=0,a=l):a+c>=1?(o=(e*h-1)*Math.pow(2,r),a+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,r),a=0));r>=8;t[n+d]=255&o,d+=p,o/=256,r-=8);for(a=a<<r|o,u+=r;u>0;t[n+d]=255&a,d+=p,a/=256,u-=8);t[n+d-p]|=128*m}},{}],8:[function(t,e,n){(function(t){"use strict";function n(){l=!0;for(var t,e,n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}l=!1}function i(t){1!==c.push(t)||l||r()}var r,s=t.MutationObserver||t.WebKitMutationObserver;if(s){var a=0,o=new s(n),h=t.document.createTextNode("");o.observe(h,{characterData:!0}),r=function(){h.data=a=++a%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var u=new t.MessageChannel;u.port1.onmessage=n,r=function(){u.port2.postMessage(0)}}var l,c=[];e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))}e.exports=function(t){return null!=t&&(i(t)||r(t)||!!t._isBuffer)}},{}],10:[function(t,e,n){"use strict";function i(t){if(t){this.data=t,this.length=this.data.length,this.index=0,this.zero=0;for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}}var r=t("./dataReader");i.prototype=new r,i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===e&&this.data[s+1]===n&&this.data[s+2]===i&&this.data[s+3]===r)return s-this.zero;return-1},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"./dataReader":15}],11:[function(t,e,n){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t,e){for(var n,r,s,a,o,h,u,l="",c=0;c<t.length;)n=t.charCodeAt(c++),r=t.charCodeAt(c++),s=t.charCodeAt(c++),a=n>>2,o=(3&n)<<4|r>>4,h=(15&r)<<2|s>>6,u=63&s,isNaN(r)?h=u=64:isNaN(s)&&(u=64),l=l+i.charAt(a)+i.charAt(o)+i.charAt(h)+i.charAt(u);return l},n.decode=function(t,e){var n,r,s,a,o,h,u,l="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)a=i.indexOf(t.charAt(c++)),o=i.indexOf(t.charAt(c++)),h=i.indexOf(t.charAt(c++)),u=i.indexOf(t.charAt(c++)),n=a<<2|o>>4,r=(15&o)<<4|h>>2,s=(3&h)<<6|u,l+=String.fromCharCode(n),64!=h&&(l+=String.fromCharCode(r)),64!=u&&(l+=String.fromCharCode(s));return l}},{}],12:[function(t,e,n){"use strict";function i(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}i.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=i},{}],13:[function(t,e,n){"use strict";n.STORE={magic:"\x00\x00",compress:function(t,e){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},n.DEFLATE=t("./flate")},{"./flate":18}],14:[function(t,e,n){"use strict";var i=t("./utils"),r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];
e.exports=function(t,e){if("undefined"==typeof t||!t.length)return 0;var n="string"!==i.getTypeOf(t);"undefined"==typeof e&&(e=0);var s=0,a=0,o=0;e=-1^e;for(var h=0,u=t.length;u>h;h++)o=n?t[h]:t.charCodeAt(h),a=255&(e^o),s=r[a],e=e>>>8^s;return-1^e}},{"./utils":31}],15:[function(t,e,n){"use strict";function i(t){this.data=null,this.length=0,this.index=0,this.zero=0}var r=t("./utils");i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||0>t)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=i},{"./utils":31}],16:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!1,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],17:[function(t,e,n){"use strict";var i=t("./utils");n.string2binary=function(t){return i.string2binary(t)},n.string2Uint8Array=function(t){return i.transformTo("uint8array",t)},n.uint8Array2String=function(t){return i.transformTo("string",t)},n.string2Blob=function(t){var e=i.transformTo("arraybuffer",t);return i.arrayBuffer2Blob(e)},n.arrayBuffer2Blob=function(t){return i.arrayBuffer2Blob(t)},n.transformTo=function(t,e){return i.transformTo(t,e)},n.getTypeOf=function(t){return i.getTypeOf(t)},n.checkSupport=function(t){return i.checkSupport(t)},n.MAX_VALUE_16BITS=i.MAX_VALUE_16BITS,n.MAX_VALUE_32BITS=i.MAX_VALUE_32BITS,n.pretty=function(t){return i.pretty(t)},n.findCompression=function(t){return i.findCompression(t)},n.isRegExp=function(t){return i.isRegExp(t)}},{"./utils":31}],18:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako");n.uncompressInputType=i?"uint8array":"array",n.compressInputType=i?"uint8array":"array",n.magic="\b\x00",n.compress=function(t,e){return r.deflateRaw(t,{level:e.level||-1})},n.uncompress=function(t){return r.inflateRaw(t)}},{pako:34}],19:[function(t,e,n){"use strict";function i(t,e){return this instanceof i?(this.files={},this.comment=null,this.root="",t&&this.load(t,e),void(this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t})):new i(t,e)}var r=t("./base64");i.prototype=t("./object"),i.prototype.load=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.utils=t("./deprecatedPublicUtils"),i.base64={encode:function(t){return r.encode(t)},decode:function(t){return r.decode(t)}},i.compressions=t("./compressions"),e.exports=i},{"./base64":11,"./compressions":13,"./defaults":16,"./deprecatedPublicUtils":17,"./load":20,"./object":23,"./support":27}],20:[function(t,e,n){"use strict";var i=t("./base64"),r=t("./utf8"),s=t("./utils"),a=t("./zipEntries");e.exports=function(t,e){var n,o,h,u;for(e=s.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),e.base64&&(t=i.decode(t)),o=new a(t,e),n=o.files,h=0;h<n.length;h++)u=n[h],this.file(u.fileNameStr,u.decompressed,{binary:!0,optimizedBinaryString:!0,date:u.date,dir:u.dir,comment:u.fileCommentStr.length?u.fileCommentStr:null,unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions,createFolders:e.createFolders});return o.zipComment.length&&(this.comment=o.zipComment),this}},{"./base64":11,"./utf8":30,"./utils":31,"./zipEntries":32}],21:[function(t,e,n){(function(t){"use strict";e.exports=function(e,n){return new t(e,n)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,t("buffer").Buffer)},{buffer:2}],22:[function(t,e,n){"use strict";function i(t){this.data=t,this.length=this.data.length,this.index=0,this.zero=0}var r=t("./uint8ArrayReader");i.prototype=new r,i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"./uint8ArrayReader":28}],23:[function(t,e,n){"use strict";var i=t("./support"),r=t("./utils"),s=t("./crc32"),a=t("./signature"),o=t("./defaults"),h=t("./base64"),u=t("./compressions"),l=t("./compressedObject"),c=t("./nodeBuffer"),f=t("./utf8"),d=t("./stringWriter"),p=t("./uint8ArrayWriter"),m=function(t){if(t._data instanceof l&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===r.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},y=function(t){var e=m(t),n=r.getTypeOf(e);return"string"===n?!t.options.binary&&i.nodebuffer?c(e,"utf-8"):t.asBinary():e},g=function(t){var e=m(this);return null===e||"undefined"==typeof e?"":(this.options.base64&&(e=h.decode(e)),e=t&&this.options.binary?A.utf8decode(e):r.transformTo("string",e),t||this.options.binary||(e=r.transformTo("string",A.utf8encode(e))),e)},v=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this.options=n,this._initialMetadata={dir:n.dir,date:n.date}};v.prototype={asText:function(){return g.call(this,!0)},asBinary:function(){return g.call(this,!1)},asNodeBuffer:function(){var t=y(this);return r.transformTo("nodebuffer",t)},asUint8Array:function(){var t=y(this);return r.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var b=function(t,e){var n,i="";for(n=0;e>n;n++)i+=String.fromCharCode(255&t),t>>>=8;return i},x=function(t){return t=t||{},t.base64!==!0||null!==t.binary&&void 0!==t.binary||(t.binary=!0),t=r.extend(t,o),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},w=function(t,e,n){var i,s=r.getTypeOf(e);if(n=x(n),"string"==typeof n.unixPermissions&&(n.unixPermissions=parseInt(n.unixPermissions,8)),n.unixPermissions&&16384&n.unixPermissions&&(n.dir=!0),n.dosPermissions&&16&n.dosPermissions&&(n.dir=!0),n.dir&&(t=M(t)),n.createFolders&&(i=_(t))&&E.call(this,i,!0),n.dir||null===e||"undefined"==typeof e)n.base64=!1,n.binary=!1,e=null,s=null;else if("string"===s)n.binary&&!n.base64&&n.optimizedBinaryString!==!0&&(e=r.string2binary(e));else{if(n.base64=!1,n.binary=!0,!(s||e instanceof l))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===s&&(e=r.transformTo("uint8array",e))}var a=new v(t,e,n);return this.files[t]=a,a},_=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},M=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},E=function(t,e){return e="undefined"!=typeof e?e:!1,t=M(t),this.files[t]||w.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},P=function(t,e,n){var i,a=new l;return t._data instanceof l?(a.uncompressedSize=t._data.uncompressedSize,a.crc32=t._data.crc32,0===a.uncompressedSize||t.dir?(e=u.STORE,a.compressedContent="",a.crc32=0):t._data.compressionMethod===e.magic?a.compressedContent=t._data.getCompressedContent():(i=t._data.getContent(),a.compressedContent=e.compress(r.transformTo(e.compressInputType,i),n))):(i=y(t),(!i||0===i.length||t.dir)&&(e=u.STORE,i=""),a.uncompressedSize=i.length,a.crc32=s(i),a.compressedContent=e.compress(r.transformTo(e.compressInputType,i),n)),a.compressedSize=a.compressedContent.length,a.compressionMethod=e.magic,a},S=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16},k=function(t,e){return 63&(t||0)},C=function(t,e,n,i,o,h){var u,l,c,d,p=(n.compressedContent,h!==f.utf8encode),m=r.transformTo("string",h(e.name)),y=r.transformTo("string",f.utf8encode(e.name)),g=e.comment||"",v=r.transformTo("string",h(g)),x=r.transformTo("string",f.utf8encode(g)),w=y.length!==e.name.length,_=x.length!==g.length,M=e.options,E="",P="",C="";c=e._initialMetadata.dir!==e.dir?e.dir:M.dir,d=e._initialMetadata.date!==e.date?e.date:M.date;var A=0,T=0;c&&(A|=16),"UNIX"===o?(T=798,A|=S(e.unixPermissions,c)):(T=20,A|=k(e.dosPermissions,c)),u=d.getHours(),u<<=6,u|=d.getMinutes(),u<<=5,u|=d.getSeconds()/2,l=d.getFullYear()-1980,l<<=4,l|=d.getMonth()+1,l<<=5,l|=d.getDate(),w&&(P=b(1,1)+b(s(m),4)+y,E+="up"+b(P.length,2)+P),_&&(C=b(1,1)+b(this.crc32(v),4)+x,E+="uc"+b(C.length,2)+C);var I="";I+="\n\x00",I+=p||!w&&!_?"\x00\x00":"\x00\b",I+=n.compressionMethod,I+=b(u,2),I+=b(l,2),I+=b(n.crc32,4),I+=b(n.compressedSize,4),I+=b(n.uncompressedSize,4),I+=b(m.length,2),I+=b(E.length,2);var L=a.LOCAL_FILE_HEADER+I+m+E,j=a.CENTRAL_FILE_HEADER+b(T,2)+I+b(v.length,2)+"\x00\x00\x00\x00"+b(A,4)+b(i,4)+m+E+v;return{fileRecord:L,dirRecord:j,compressedObject:n}},A={load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,n,i,s,a=[];for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],s=new v(i.name,i._data,r.extend(i.options)),n=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(n,s)&&a.push(s));return a},file:function(t,e,n){if(1===arguments.length){if(r.isRegExp(t)){var i=t;return this.filter(function(t,e){return!e.dir&&i.test(t)})}return this.filter(function(e,n){return!n.dir&&e===t})[0]||null}return t=this.root+t,w.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(r.isRegExp(t))return this.filter(function(e,n){return n.dir&&t.test(e)});var e=this.root+t,n=E.call(this,e),i=this.clone();return i.root=n.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter(function(e,n){return n.name.slice(0,t.length)===t}),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(t){t=r.extend(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode}),r.checkSupport(t.type),("darwin"===t.platform||"freebsd"===t.platform||"linux"===t.platform||"sunos"===t.platform)&&(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e,n,i=[],s=0,o=0,l=r.transformTo("string",t.encodeFileName(t.comment||this.comment||""));for(var c in this.files)if(this.files.hasOwnProperty(c)){var m=this.files[c],y=m.options.compression||t.compression.toUpperCase(),g=u[y];if(!g)throw new Error(y+" is not a valid compression method !");var v=m.options.compressionOptions||t.compressionOptions||{},x=P.call(this,m,g,v),w=C.call(this,c,m,x,s,t.platform,t.encodeFileName);s+=w.fileRecord.length+x.compressedSize,o+=w.dirRecord.length,i.push(w)}var _="";_=a.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+b(i.length,2)+b(i.length,2)+b(o,4)+b(s,4)+b(l.length,2)+l;var M=t.type.toLowerCase();for(e="uint8array"===M||"arraybuffer"===M||"blob"===M||"nodebuffer"===M?new p(s+o+_.length):new d(s+o+_.length),n=0;n<i.length;n++)e.append(i[n].fileRecord),e.append(i[n].compressedObject.compressedContent);for(n=0;n<i.length;n++)e.append(i[n].dirRecord);e.append(_);var E=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return r.transformTo(t.type.toLowerCase(),E);case"blob":return r.arrayBuffer2Blob(r.transformTo("arraybuffer",E),t.mimeType);case"base64":return t.base64?h.encode(E):E;default:return E}},crc32:function(t,e){return s(t,e)},utf8encode:function(t){return r.transformTo("string",f.utf8encode(t))},utf8decode:function(t){return f.utf8decode(t)}};e.exports=A},{"./base64":11,"./compressedObject":12,"./compressions":13,"./crc32":14,"./defaults":16,"./nodeBuffer":21,"./signature":24,"./stringWriter":26,"./support":27,"./uint8ArrayWriter":29,"./utf8":30,"./utils":31}],24:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],25:[function(t,e,n){"use strict";function i(t,e){this.data=t,e||(this.data=s.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}var r=t("./dataReader"),s=t("./utils");i.prototype=new r,i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"./dataReader":15,"./utils":31}],26:[function(t,e,n){"use strict";var i=t("./utils"),r=function(){this.data=[]};r.prototype={append:function(t){t=i.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=r},{"./utils":31}],27:[function(t,e,n){(function(t){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof t,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var e=new ArrayBuffer(0);try{n.blob=0===new Blob([e],{type:"application/zip"}).size}catch(i){try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,s=new r;s.append(e),n.blob=0===s.getBlob("application/zip").size}catch(i){n.blob=!1}}}}).call(this,t("buffer").Buffer)},{buffer:2}],28:[function(t,e,n){"use strict";function i(t){t&&(this.data=t,this.length=this.data.length,this.index=0,this.zero=0)}var r=t("./arrayReader");i.prototype=new r,i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"./arrayReader":10}],29:[function(t,e,n){"use strict";var i=t("./utils"),r=function(t){this.data=new Uint8Array(t),this.index=0};r.prototype={append:function(t){0!==t.length&&(t=i.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=r},{"./utils":31}],30:[function(t,e,n){"use strict";for(var i=t("./utils"),r=t("./support"),s=t("./nodeBuffer"),a=new Array(256),o=0;256>o;o++)a[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;a[254]=a[254]=1;var h=function(t){var e,n,i,s,a,o=t.length,h=0;for(s=0;o>s;s++)n=t.charCodeAt(s),55296===(64512&n)&&o>s+1&&(i=t.charCodeAt(s+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),s++)),h+=128>n?1:2048>n?2:65536>n?3:4;for(e=r.uint8array?new Uint8Array(h):new Array(h),a=0,s=0;h>a;s++)n=t.charCodeAt(s),55296===(64512&n)&&o>s+1&&(i=t.charCodeAt(s+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),s++)),128>n?e[a++]=n:2048>n?(e[a++]=192|n>>>6,e[a++]=128|63&n):65536>n?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},u=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&128===(192&t[n]);)n--;return 0>n?e:0===n?e:n+a[t[n]]>e?n:e},l=function(t){var e,n,r,s,o=t.length,h=new Array(2*o);for(n=0,e=0;o>e;)if(r=t[e++],128>r)h[n++]=r;else if(s=a[r],s>4)h[n++]=65533,e+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&o>e;)r=r<<6|63&t[e++],s--;s>1?h[n++]=65533:65536>r?h[n++]=r:(r-=65536,h[n++]=55296|r>>10&1023,h[n++]=56320|1023&r)}return h.length!==n&&(h.subarray?h=h.subarray(0,n):h.length=n),i.applyFromCharCode(h)};n.utf8encode=function(t){return r.nodebuffer?s(t,"utf-8"):h(t)},n.utf8decode=function(t){if(r.nodebuffer)return i.transformTo("nodebuffer",t).toString("utf-8");t=i.transformTo(r.uint8array?"uint8array":"array",t);for(var e=[],n=0,s=t.length,a=65536;s>n;){var o=u(t,Math.min(n+a,s));r.uint8array?e.push(l(t.subarray(n,o))):e.push(l(t.slice(n,o))),n=o}return e.join("")}},{"./nodeBuffer":21,"./support":27,"./utils":31}],31:[function(t,e,n){"use strict";function i(t){return t}function r(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}function s(t){var e=65536,i=[],r=t.length,s=n.getTypeOf(t),a=0,o=!0;try{switch(s){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,u(0))}}catch(h){o=!1}if(!o){for(var l="",c=0;c<t.length;c++)l+=String.fromCharCode(t[c]);return l}for(;r>a&&e>1;)try{"array"===s||"nodebuffer"===s?i.push(String.fromCharCode.apply(null,t.slice(a,Math.min(a+e,r)))):i.push(String.fromCharCode.apply(null,t.subarray(a,Math.min(a+e,r)))),a+=e}catch(h){e=Math.floor(e/2)}return i.join("")}function a(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}var o=t("./support"),h=t("./compressions"),u=t("./nodeBuffer");n.string2binary=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n));return e},n.arrayBuffer2Blob=function(t,e){n.checkSupport("blob"),e=e||"application/zip";try{return new Blob([t],{type:e})}catch(i){try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,s=new r;return s.append(t),s.getBlob(e)}catch(i){throw new Error("Bug : can't construct the Blob.")}}},n.applyFromCharCode=s;var l={};l.string={string:i,array:function(t){return r(t,new Array(t.length))},arraybuffer:function(t){return l.string.uint8array(t).buffer},uint8array:function(t){return r(t,new Uint8Array(t.length))},nodebuffer:function(t){return r(t,u(t.length))}},l.array={string:s,array:i,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return u(t)}},l.arraybuffer={string:function(t){return s(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:i,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return u(new Uint8Array(t))}},l.uint8array={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:i,nodebuffer:function(t){return u(t)}},l.nodebuffer={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return l.nodebuffer.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:i},n.transformTo=function(t,e){if(e||(e=""),!t)return e;n.checkSupport(t);var i=n.getTypeOf(e),r=l[i][t](e);return r},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":o.nodebuffer&&u.test(t)?"nodebuffer":o.uint8array&&t instanceof Uint8Array?"uint8array":o.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){var e=o[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this browser")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,i="";for(n=0;n<(t||"").length;n++)e=t.charCodeAt(n),i+="\\x"+(16>e?"0":"")+e.toString(16).toUpperCase();return i},n.findCompression=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&"undefined"==typeof n[e]&&(n[e]=arguments[t][e]);return n}},{"./compressions":13,"./nodeBuffer":21,"./support":27}],32:[function(t,e,n){"use strict";function i(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var r=t("./stringReader"),s=t("./nodeBufferReader"),a=t("./uint8ArrayReader"),o=t("./arrayReader"),h=t("./utils"),u=t("./signature"),l=t("./zipEntry"),c=t("./support");t("./object");i.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+h.pretty(e)+", expected "+h.pretty(t)+")")},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4),r=i===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=c.uint8array?"uint8array":"array",n=h.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,i=this.zip64EndOfCentralSize-44,r=0;i>r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===u.CENTRAL_FILE_HEADER;)t=new l({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(0>t){var e=!this.isSignature(0,u.LOCAL_FILE_HEADER);throw e?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(t);var n=t;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===h.MAX_VALUE_16BITS||this.diskWithCentralDirStart===h.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===h.MAX_VALUE_16BITS||this.centralDirRecords===h.MAX_VALUE_16BITS||this.centralDirSize===h.MAX_VALUE_32BITS||this.centralDirOffset===h.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>t)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var r=n-i;if(r>0)this.isSignature(n,u.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(0>r)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){var e=h.getTypeOf(t);if(h.checkSupport(e),"string"!==e||c.uint8array)if("nodebuffer"===e)this.reader=new s(t);else if(c.uint8array)this.reader=new a(h.transformTo("uint8array",t));else{if(!c.array)throw new Error("Unexpected error: unsupported type '"+e+"'");this.reader=new o(h.transformTo("array",t))}else this.reader=new r(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=i},{"./arrayReader":10,"./nodeBufferReader":22,"./object":23,"./signature":24,"./stringReader":25,"./support":27,"./uint8ArrayReader":28,"./utils":31,"./zipEntry":33}],33:[function(t,e,n){"use strict";function i(t,e){this.options=t,this.loadOptions=e}var r=t("./stringReader"),s=t("./utils"),a=t("./compressedObject"),o=t("./object"),h=t("./support"),u=0,l=3;i.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(t,e,n){return function(){var i=t.index;t.setIndex(e);var r=t.readData(n);return t.setIndex(i),r}},prepareContent:function(t,e,n,i,r){return function(){var t=s.transformTo(i.uncompressInputType,this.getCompressedContent()),e=i.uncompress(t);if(e.length!==r)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(e=s.findCompression(this.compressionMethod),null===e)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=s.transformTo("string",this.decompressed.getContent()),o.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readData(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=16&this.externalFileAttributes?!0:!1,t===u&&(this.dosPermissions=63&this.externalFileAttributes),t===l&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=new r(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,i,r=t.index;for(this.extraFields=this.extraFields||{};t.index<r+this.extraFieldsLength;)e=t.readInt(2),n=t.readInt(2),i=t.readString(n),this.extraFields[e]={id:e,length:n,value:i}},handleUTF8:function(){var t=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=s.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var r=s.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new r(t.value);return 1!==e.readInt(1)?null:o.crc32(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new r(t.value);return 1!==e.readInt(1)?null:o.crc32(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readString(t.length-5))}return null}},e.exports=i},{"./compressedObject":12,"./object":23,"./stringReader":25,"./support":27,"./utils":31}],34:[function(t,e,n){"use strict";var i=t("./lib/utils/common").assign,r=t("./lib/deflate"),s=t("./lib/inflate"),a=t("./lib/zlib/constants"),o={};i(o,r,s,a),e.exports=o},{"./lib/deflate":35,"./lib/inflate":36,"./lib/utils/common":37,"./lib/zlib/constants":40}],35:[function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=h.assign({level:v,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==m)throw new Error(l[n]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?u.string2buf(e.dictionary):"[object ArrayBuffer]"===f.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=o.deflateSetDictionary(this.strm,r),n!==m)throw new Error(l[n]);this._dict_set=!0}}function r(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg||l[n.err];return n.result}function s(t,e){return e=e||{},e.raw=!0,r(t,e)}function a(t,e){return e=e||{},e.gzip=!0,r(t,e)}var o=t("./zlib/deflate"),h=t("./utils/common"),u=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),f=Object.prototype.toString,d=0,p=4,m=0,y=1,g=2,v=-1,b=0,x=8;i.prototype.push=function(t,e){var n,i,r=this.strm,s=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:e===!0?p:d,"string"==typeof t?r.input=u.string2buf(t):"[object ArrayBuffer]"===f.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new h.Buf8(s),r.next_out=0,r.avail_out=s),n=o.deflate(r,i),n!==y&&n!==m)return this.onEnd(n),this.ended=!0,!1;(0===r.avail_out||0===r.avail_in&&(i===p||i===g))&&("string"===this.options.to?this.onData(u.buf2binstring(h.shrinkBuf(r.output,r.next_out))):this.onData(h.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&n!==y);return i===p?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===m):i===g?(this.onEnd(m),r.avail_out=0,!0):!0},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===m&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=i,n.deflate=r,n.deflateRaw=s,n.gzip=a},{"./utils/common":37,"./utils/strings":38,"./zlib/deflate":42,"./zlib/messages":47,
"./zlib/zstream":49}],36:[function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,e.windowBits);if(n!==u.Z_OK)throw new Error(l[n]);this.header=new f,a.inflateGetHeader(this.strm,this.header)}function r(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg||l[n.err];return n.result}function s(t,e){return e=e||{},e.raw=!0,r(t,e)}var a=t("./zlib/inflate"),o=t("./utils/common"),h=t("./utils/strings"),u=t("./zlib/constants"),l=t("./zlib/messages"),c=t("./zlib/zstream"),f=t("./zlib/gzheader"),d=Object.prototype.toString;i.prototype.push=function(t,e){var n,i,r,s,l,c,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,y=!1;if(this.ended)return!1;i=e===~~e?e:e===!0?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof t?f.input=h.binstring2buf(t):"[object ArrayBuffer]"===d.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new o.Buf8(p),f.next_out=0,f.avail_out=p),n=a.inflate(f,u.Z_NO_FLUSH),n===u.Z_NEED_DICT&&m&&(c="string"==typeof m?h.string2buf(m):"[object ArrayBuffer]"===d.call(m)?new Uint8Array(m):m,n=a.inflateSetDictionary(this.strm,c)),n===u.Z_BUF_ERROR&&y===!0&&(n=u.Z_OK,y=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0===f.avail_out||n===u.Z_STREAM_END||0===f.avail_in&&(i===u.Z_FINISH||i===u.Z_SYNC_FLUSH))&&("string"===this.options.to?(r=h.utf8border(f.output,f.next_out),s=f.next_out-r,l=h.buf2string(f.output,r),f.next_out=s,f.avail_out=p-s,s&&o.arraySet(f.output,f.output,r,s,0),this.onData(l)):this.onData(o.shrinkBuf(f.output,f.next_out))),0===f.avail_in&&0===f.avail_out&&(y=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(i=u.Z_FINISH),i===u.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):i===u.Z_SYNC_FLUSH?(this.onEnd(u.Z_OK),f.avail_out=0,!0):!0},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=i,n.inflate=r,n.inflateRaw=s,n.ungzip=r},{"./utils/common":37,"./utils/strings":38,"./zlib/constants":40,"./zlib/gzheader":43,"./zlib/inflate":45,"./zlib/messages":47,"./zlib/zstream":49}],37:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)return void t.set(e.subarray(n,n+i),r);for(var s=0;i>s;s++)t[r+s]=e[n+s]},flattenChunks:function(t){var e,n,i,r,s,a;for(i=0,e=0,n=t.length;n>e;e++)i+=t[e].length;for(a=new Uint8Array(i),r=0,e=0,n=t.length;n>e;e++)s=t[e],a.set(s,r),r+=s.length;return a}},s={arraySet:function(t,e,n,i,r){for(var s=0;i>s;s++)t[r+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(i)},{}],38:[function(t,e,n){"use strict";function i(t,e){if(65537>e&&(t.subarray&&a||!t.subarray&&s))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",i=0;e>i;i++)n+=String.fromCharCode(t[i]);return n}var r=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(o){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(o){a=!1}for(var h=new r.Buf8(256),u=0;256>u;u++)h[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;h[254]=h[254]=1,n.string2buf=function(t){var e,n,i,s,a,o=t.length,h=0;for(s=0;o>s;s++)n=t.charCodeAt(s),55296===(64512&n)&&o>s+1&&(i=t.charCodeAt(s+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),s++)),h+=128>n?1:2048>n?2:65536>n?3:4;for(e=new r.Buf8(h),a=0,s=0;h>a;s++)n=t.charCodeAt(s),55296===(64512&n)&&o>s+1&&(i=t.charCodeAt(s+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),s++)),128>n?e[a++]=n:2048>n?(e[a++]=192|n>>>6,e[a++]=128|63&n):65536>n?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},n.buf2binstring=function(t){return i(t,t.length)},n.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;i>n;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,r,s,a,o=e||t.length,u=new Array(2*o);for(r=0,n=0;o>n;)if(s=t[n++],128>s)u[r++]=s;else if(a=h[s],a>4)u[r++]=65533,n+=a-1;else{for(s&=2===a?31:3===a?15:7;a>1&&o>n;)s=s<<6|63&t[n++],a--;a>1?u[r++]=65533:65536>s?u[r++]=s:(s-=65536,u[r++]=55296|s>>10&1023,u[r++]=56320|1023&s)}return i(u,r)},n.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&128===(192&t[n]);)n--;return 0>n?e:0===n?e:n+h[t[n]]>e?n:e}},{"./common":37}],39:[function(t,e,n){"use strict";function i(t,e,n,i){for(var r=65535&t|0,s=t>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do r=r+e[i++]|0,s=s+r|0;while(--a);r%=65521,s%=65521}return r|s<<16|0}e.exports=i},{}],40:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],41:[function(t,e,n){"use strict";function i(){for(var t,e=[],n=0;256>n;n++){t=n;for(var i=0;8>i;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}function r(t,e,n,i){var r=s,a=i+n;t^=-1;for(var o=i;a>o;o++)t=t>>>8^r[255&(t^e[o])];return-1^t}var s=i();e.exports=r},{}],42:[function(t,e,n){"use strict";function i(t,e){return t.msg=O[e],e}function r(t){return(t<<1)-(t>4?9:0)}function s(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(T.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function o(t,e){I._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function h(t,e){t.pending_buf[t.pending++]=e}function u(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function l(t,e,n,i){var r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,T.arraySet(e,t.input,t.next_in,r,n),1===t.state.wrap?t.adler=L(t.adler,e,r,n):2===t.state.wrap&&(t.adler=j(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)}function c(t,e){var n,i,r=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,u=t.window,l=t.w_mask,c=t.prev,f=t.strstart+lt,d=u[s+a-1],p=u[s+a];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do if(n=e,u[n+a]===p&&u[n+a-1]===d&&u[n]===u[s]&&u[++n]===u[s+1]){s+=2,n++;do;while(u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&f>s);if(i=lt-(f-s),s=f-lt,i>a){if(t.match_start=e,a=i,i>=o)break;d=u[s+a-1],p=u[s+a]}}while((e=c[e&l])>h&&0!==--r);return a<=t.lookahead?a:t.lookahead}function f(t){var e,n,i,r,s,a=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-ct)){T.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,n=t.hash_size,e=n;do i=t.head[--e],t.head[e]=i>=a?i-a:0;while(--n);n=a,e=n;do i=t.prev[--e],t.prev[e]=i>=a?i-a:0;while(--n);r+=a}if(0===t.strm.avail_in)break;if(n=l(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=ut)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+ut-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<ut)););}while(t.lookahead<ct&&0!==t.strm.avail_in)}function d(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(f(t),0===t.lookahead&&e===R)return xt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,o(t,!1),0===t.strm.avail_out))return xt;if(t.strstart-t.block_start>=t.w_size-ct&&(o(t,!1),0===t.strm.avail_out))return xt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?_t:Mt):t.strstart>t.block_start&&(o(t,!1),0===t.strm.avail_out)?xt:xt}function p(t,e){for(var n,i;;){if(t.lookahead<ct){if(f(t),t.lookahead<ct&&e===R)return xt;if(0===t.lookahead)break}if(n=0,t.lookahead>=ut&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ut-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-ct&&(t.match_length=c(t,n)),t.match_length>=ut)if(i=I._tr_tally(t,t.strstart-t.match_start,t.match_length-ut),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ut){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ut-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=I._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(o(t,!1),0===t.strm.avail_out))return xt}return t.insert=t.strstart<ut-1?t.strstart:ut-1,e===F?(o(t,!0),0===t.strm.avail_out?_t:Mt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?xt:wt}function m(t,e){for(var n,i,r;;){if(t.lookahead<ct){if(f(t),t.lookahead<ct&&e===R)return xt;if(0===t.lookahead)break}if(n=0,t.lookahead>=ut&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ut-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ut-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ct&&(t.match_length=c(t,n),t.match_length<=5&&(t.strategy===W||t.match_length===ut&&t.strstart-t.match_start>4096)&&(t.match_length=ut-1)),t.prev_length>=ut&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-ut,i=I._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ut),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ut-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=ut-1,t.strstart++,i&&(o(t,!1),0===t.strm.avail_out))return xt}else if(t.match_available){if(i=I._tr_tally(t,0,t.window[t.strstart-1]),i&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return xt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=I._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ut-1?t.strstart:ut-1,e===F?(o(t,!0),0===t.strm.avail_out?_t:Mt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?xt:wt}function y(t,e){for(var n,i,r,s,a=t.window;;){if(t.lookahead<=lt){if(f(t),t.lookahead<=lt&&e===R)return xt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ut&&t.strstart>0&&(r=t.strstart-1,i=a[r],i===a[++r]&&i===a[++r]&&i===a[++r])){s=t.strstart+lt;do;while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&s>r);t.match_length=lt-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ut?(n=I._tr_tally(t,1,t.match_length-ut),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=I._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(o(t,!1),0===t.strm.avail_out))return xt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?_t:Mt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?xt:wt}function g(t,e){for(var n;;){if(0===t.lookahead&&(f(t),0===t.lookahead)){if(e===R)return xt;break}if(t.match_length=0,n=I._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(o(t,!1),0===t.strm.avail_out))return xt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?_t:Mt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?xt:wt}function v(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function b(t){t.window_size=2*t.w_size,s(t.head),t.max_lazy_match=A[t.level].max_lazy,t.good_match=A[t.level].good_length,t.nice_match=A[t.level].nice_length,t.max_chain_length=A[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ut-1,t.match_available=0,t.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new T.Buf16(2*ot),this.dyn_dtree=new T.Buf16(2*(2*st+1)),this.bl_tree=new T.Buf16(2*(2*at+1)),s(this.dyn_ltree),s(this.dyn_dtree),s(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new T.Buf16(ht+1),this.heap=new T.Buf16(2*rt+1),s(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new T.Buf16(2*rt+1),s(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=J,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?dt:vt,t.adler=2===e.wrap?0:1,e.last_flush=R,I._tr_init(e),z):i(t,G)}function _(t){var e=w(t);return e===z&&b(t.state),e}function M(t,e){return t&&t.state?2!==t.state.wrap?G:(t.state.gzhead=e,z):G}function E(t,e,n,r,s,a){if(!t)return G;var o=1;if(e===X&&(e=6),0>r?(o=0,r=-r):r>15&&(o=2,r-=16),1>s||s>$||n!==K||8>r||r>15||0>e||e>9||0>a||a>Z)return i(t,G);8===r&&(r=9);var h=new x;return t.state=h,h.strm=t,h.wrap=o,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+ut-1)/ut),h.window=new T.Buf8(2*h.w_size),h.head=new T.Buf16(h.hash_size),h.prev=new T.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new T.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=a,h.method=n,_(t)}function P(t,e){return E(t,e,K,tt,et,Q)}function S(t,e){var n,o,l,c;if(!t||!t.state||e>D||0>e)return t?i(t,G):G;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===bt&&e!==F)return i(t,0===t.avail_out?V:G);if(o.strm=t,n=o.last_flush,o.last_flush=e,o.status===dt)if(2===o.wrap)t.adler=0,h(o,31),h(o,139),h(o,8),o.gzhead?(h(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),h(o,255&o.gzhead.time),h(o,o.gzhead.time>>8&255),h(o,o.gzhead.time>>16&255),h(o,o.gzhead.time>>24&255),h(o,9===o.level?2:o.strategy>=Y||o.level<2?4:0),h(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(h(o,255&o.gzhead.extra.length),h(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=j(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=pt):(h(o,0),h(o,0),h(o,0),h(o,0),h(o,0),h(o,9===o.level?2:o.strategy>=Y||o.level<2?4:0),h(o,Et),o.status=vt);else{var f=K+(o.w_bits-8<<4)<<8,d=-1;d=o.strategy>=Y||o.level<2?0:o.level<6?1:6===o.level?2:3,f|=d<<6,0!==o.strstart&&(f|=ft),f+=31-f%31,o.status=vt,u(o,f),0!==o.strstart&&(u(o,t.adler>>>16),u(o,65535&t.adler)),t.adler=1}if(o.status===pt)if(o.gzhead.extra){for(l=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>l&&(t.adler=j(t.adler,o.pending_buf,o.pending-l,l)),a(t),l=o.pending,o.pending!==o.pending_buf_size));)h(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>l&&(t.adler=j(t.adler,o.pending_buf,o.pending-l,l)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=mt)}else o.status=mt;if(o.status===mt)if(o.gzhead.name){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(t.adler=j(t.adler,o.pending_buf,o.pending-l,l)),a(t),l=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,h(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>l&&(t.adler=j(t.adler,o.pending_buf,o.pending-l,l)),0===c&&(o.gzindex=0,o.status=yt)}else o.status=yt;if(o.status===yt)if(o.gzhead.comment){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(t.adler=j(t.adler,o.pending_buf,o.pending-l,l)),a(t),l=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,h(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>l&&(t.adler=j(t.adler,o.pending_buf,o.pending-l,l)),0===c&&(o.status=gt)}else o.status=gt;if(o.status===gt&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&a(t),o.pending+2<=o.pending_buf_size&&(h(o,255&t.adler),h(o,t.adler>>8&255),t.adler=0,o.status=vt)):o.status=vt),0!==o.pending){if(a(t),0===t.avail_out)return o.last_flush=-1,z}else if(0===t.avail_in&&r(e)<=r(n)&&e!==F)return i(t,V);if(o.status===bt&&0!==t.avail_in)return i(t,V);if(0!==t.avail_in||0!==o.lookahead||e!==R&&o.status!==bt){var p=o.strategy===Y?g(o,e):o.strategy===H?y(o,e):A[o.level].func(o,e);if((p===_t||p===Mt)&&(o.status=bt),p===xt||p===_t)return 0===t.avail_out&&(o.last_flush=-1),z;if(p===wt&&(e===B?I._tr_align(o):e!==D&&(I._tr_stored_block(o,0,0,!1),e===N&&(s(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),a(t),0===t.avail_out))return o.last_flush=-1,z}return e!==F?z:o.wrap<=0?U:(2===o.wrap?(h(o,255&t.adler),h(o,t.adler>>8&255),h(o,t.adler>>16&255),h(o,t.adler>>24&255),h(o,255&t.total_in),h(o,t.total_in>>8&255),h(o,t.total_in>>16&255),h(o,t.total_in>>24&255)):(u(o,t.adler>>>16),u(o,65535&t.adler)),a(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?z:U)}function k(t){var e;return t&&t.state?(e=t.state.status,e!==dt&&e!==pt&&e!==mt&&e!==yt&&e!==gt&&e!==vt&&e!==bt?i(t,G):(t.state=null,e===vt?i(t,q):z)):G}function C(t,e){var n,i,r,a,o,h,u,l,c=e.length;if(!t||!t.state)return G;if(n=t.state,a=n.wrap,2===a||1===a&&n.status!==dt||n.lookahead)return G;for(1===a&&(t.adler=L(t.adler,e,c,0)),n.wrap=0,c>=n.w_size&&(0===a&&(s(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new T.Buf8(n.w_size),T.arraySet(l,e,c-n.w_size,n.w_size,0),e=l,c=n.w_size),o=t.avail_in,h=t.next_in,u=t.input,t.avail_in=c,t.next_in=0,t.input=e,f(n);n.lookahead>=ut;){i=n.strstart,r=n.lookahead-(ut-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+ut-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--r);n.strstart=i,n.lookahead=ut-1,f(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ut-1,n.match_available=0,t.next_in=h,t.input=u,t.avail_in=o,n.wrap=a,z}var A,T=t("../utils/common"),I=t("./trees"),L=t("./adler32"),j=t("./crc32"),O=t("./messages"),R=0,B=1,N=3,F=4,D=5,z=0,U=1,G=-2,q=-3,V=-5,X=-1,W=1,Y=2,H=3,Z=4,Q=0,J=2,K=8,$=9,tt=15,et=8,nt=29,it=256,rt=it+1+nt,st=30,at=19,ot=2*rt+1,ht=15,ut=3,lt=258,ct=lt+ut+1,ft=32,dt=42,pt=69,mt=73,yt=91,gt=103,vt=113,bt=666,xt=1,wt=2,_t=3,Mt=4,Et=3;A=[new v(0,0,0,0,d),new v(4,4,8,4,p),new v(4,5,16,8,p),new v(4,6,32,32,p),new v(4,4,16,16,m),new v(8,16,32,32,m),new v(8,16,128,128,m),new v(8,32,128,256,m),new v(32,128,258,1024,m),new v(32,258,258,4096,m)],n.deflateInit=P,n.deflateInit2=E,n.deflateReset=_,n.deflateResetKeep=w,n.deflateSetHeader=M,n.deflate=S,n.deflateEnd=k,n.deflateSetDictionary=C,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":37,"./adler32":39,"./crc32":41,"./messages":47,"./trees":48}],43:[function(t,e,n){"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=i},{}],44:[function(t,e,n){"use strict";var i=30,r=12;e.exports=function(t,e){var n,s,a,o,h,u,l,c,f,d,p,m,y,g,v,b,x,w,_,M,E,P,S,k,C;n=t.state,s=t.next_in,k=t.input,a=s+(t.avail_in-5),o=t.next_out,C=t.output,h=o-(e-t.avail_out),u=o+(t.avail_out-257),l=n.dmax,c=n.wsize,f=n.whave,d=n.wnext,p=n.window,m=n.hold,y=n.bits,g=n.lencode,v=n.distcode,b=(1<<n.lenbits)-1,x=(1<<n.distbits)-1;t:do{15>y&&(m+=k[s++]<<y,y+=8,m+=k[s++]<<y,y+=8),w=g[m&b];e:for(;;){if(_=w>>>24,m>>>=_,y-=_,_=w>>>16&255,0===_)C[o++]=65535&w;else{if(!(16&_)){if(0===(64&_)){w=g[(65535&w)+(m&(1<<_)-1)];continue e}if(32&_){n.mode=r;break t}t.msg="invalid literal/length code",n.mode=i;break t}M=65535&w,_&=15,_&&(_>y&&(m+=k[s++]<<y,y+=8),M+=m&(1<<_)-1,m>>>=_,y-=_),15>y&&(m+=k[s++]<<y,y+=8,m+=k[s++]<<y,y+=8),w=v[m&x];n:for(;;){if(_=w>>>24,m>>>=_,y-=_,_=w>>>16&255,!(16&_)){if(0===(64&_)){w=v[(65535&w)+(m&(1<<_)-1)];continue n}t.msg="invalid distance code",n.mode=i;break t}if(E=65535&w,_&=15,_>y&&(m+=k[s++]<<y,y+=8,_>y&&(m+=k[s++]<<y,y+=8)),E+=m&(1<<_)-1,E>l){t.msg="invalid distance too far back",n.mode=i;break t}if(m>>>=_,y-=_,_=o-h,E>_){if(_=E-_,_>f&&n.sane){t.msg="invalid distance too far back",n.mode=i;break t}if(P=0,S=p,0===d){if(P+=c-_,M>_){M-=_;do C[o++]=p[P++];while(--_);P=o-E,S=C}}else if(_>d){if(P+=c+d-_,_-=d,M>_){M-=_;do C[o++]=p[P++];while(--_);if(P=0,M>d){_=d,M-=_;do C[o++]=p[P++];while(--_);P=o-E,S=C}}}else if(P+=d-_,M>_){M-=_;do C[o++]=p[P++];while(--_);P=o-E,S=C}for(;M>2;)C[o++]=S[P++],C[o++]=S[P++],C[o++]=S[P++],M-=3;M&&(C[o++]=S[P++],M>1&&(C[o++]=S[P++]))}else{P=o-E;do C[o++]=C[P++],C[o++]=C[P++],C[o++]=C[P++],M-=3;while(M>2);M&&(C[o++]=C[P++],M>1&&(C[o++]=C[P++]))}break}}break}}while(a>s&&u>o);M=y>>3,s-=M,y-=M<<3,m&=(1<<y)-1,t.next_in=s,t.next_out=o,t.avail_in=a>s?5+(a-s):5-(s-a),t.avail_out=u>o?257+(u-o):257-(o-u),n.hold=m,n.bits=y}},{}],45:[function(t,e,n){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=N,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new v.Buf32(mt),e.distcode=e.distdyn=new v.Buf32(yt),e.sane=1,e.back=-1,A):L}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,s(t)):L}function o(t,e){var n,i;return t&&t.state?(i=t.state,0>e?(n=0,e=-e):(n=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?L:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,a(t))):L}function h(t,e){var n,i;return t?(i=new r,t.state=i,i.window=null,n=o(t,e),n!==A&&(t.state=null),n):L}function u(t){return h(t,vt)}function l(t){if(bt){var e;for(y=new v.Buf32(512),g=new v.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(_(E,t.lens,0,288,y,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;_(P,t.lens,0,32,g,0,t.work,{bits:5}),bt=!1}t.lencode=y,t.lenbits=9,t.distcode=g,t.distbits=5}function c(t,e,n,i){var r,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new v.Buf8(s.wsize)),i>=s.wsize?(v.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),v.arraySet(s.window,e,n-i,r,s.wnext),i-=r,i?(v.arraySet(s.window,e,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}function f(t,e){var n,r,s,a,o,h,u,f,d,p,m,y,g,mt,yt,gt,vt,bt,xt,wt,_t,Mt,Et,Pt,St=0,kt=new v.Buf8(4),Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return L;n=t.state,n.mode===H&&(n.mode=Z),o=t.next_out,s=t.output,u=t.avail_out,a=t.next_in,r=t.input,h=t.avail_in,f=n.hold,d=n.bits,p=h,m=u,Mt=A;t:for(;;)switch(n.mode){case N:if(0===n.wrap){n.mode=Z;break}for(;16>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(2&n.wrap&&35615===f){n.check=0,kt[0]=255&f,kt[1]=f>>>8&255,n.check=x(n.check,kt,2,0),f=0,d=0,n.mode=F;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&f)<<8)+(f>>8))%31){t.msg="incorrect header check",n.mode=ft;break}if((15&f)!==B){t.msg="unknown compression method",n.mode=ft;break}if(f>>>=4,d-=4,_t=(15&f)+8,0===n.wbits)n.wbits=_t;else if(_t>n.wbits){t.msg="invalid window size",n.mode=ft;break}n.dmax=1<<_t,t.adler=n.check=1,n.mode=512&f?W:H,f=0,d=0;break;case F:for(;16>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(n.flags=f,(255&n.flags)!==B){t.msg="unknown compression method",n.mode=ft;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=ft;break}n.head&&(n.head.text=f>>8&1),512&n.flags&&(kt[0]=255&f,kt[1]=f>>>8&255,n.check=x(n.check,kt,2,0)),f=0,d=0,n.mode=D;case D:for(;32>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}n.head&&(n.head.time=f),512&n.flags&&(kt[0]=255&f,kt[1]=f>>>8&255,kt[2]=f>>>16&255,kt[3]=f>>>24&255,n.check=x(n.check,kt,4,0)),f=0,d=0,n.mode=z;case z:for(;16>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}n.head&&(n.head.xflags=255&f,n.head.os=f>>8),512&n.flags&&(kt[0]=255&f,kt[1]=f>>>8&255,n.check=x(n.check,kt,2,0)),f=0,d=0,n.mode=U;case U:if(1024&n.flags){for(;16>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}n.length=f,n.head&&(n.head.extra_len=f),512&n.flags&&(kt[0]=255&f,kt[1]=f>>>8&255,n.check=x(n.check,kt,2,0)),f=0,d=0}else n.head&&(n.head.extra=null);n.mode=G;case G:if(1024&n.flags&&(y=n.length,y>h&&(y=h),y&&(n.head&&(_t=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),v.arraySet(n.head.extra,r,a,y,_t)),512&n.flags&&(n.check=x(n.check,r,y,a)),h-=y,a+=y,n.length-=y),n.length))break t;n.length=0,n.mode=q;case q:if(2048&n.flags){if(0===h)break t;y=0;do _t=r[a+y++],n.head&&_t&&n.length<65536&&(n.head.name+=String.fromCharCode(_t));while(_t&&h>y);if(512&n.flags&&(n.check=x(n.check,r,y,a)),h-=y,a+=y,_t)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=V;case V:if(4096&n.flags){if(0===h)break t;y=0;do _t=r[a+y++],n.head&&_t&&n.length<65536&&(n.head.comment+=String.fromCharCode(_t));while(_t&&h>y);if(512&n.flags&&(n.check=x(n.check,r,y,a)),h-=y,a+=y,_t)break t}else n.head&&(n.head.comment=null);n.mode=X;case X:if(512&n.flags){for(;16>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(f!==(65535&n.check)){t.msg="header crc mismatch",n.mode=ft;break}f=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=H;break;case W:for(;32>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}t.adler=n.check=i(f),f=0,d=0,n.mode=Y;case Y:if(0===n.havedict)return t.next_out=o,t.avail_out=u,t.next_in=a,t.avail_in=h,n.hold=f,n.bits=d,I;t.adler=n.check=1,n.mode=H;case H:if(e===k||e===C)break t;case Z:if(n.last){f>>>=7&d,d-=7&d,n.mode=ut;break}for(;3>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}switch(n.last=1&f,f>>>=1,d-=1,3&f){case 0:n.mode=Q;break;case 1:if(l(n),n.mode=nt,e===C){f>>>=2,d-=2;break t}break;case 2:n.mode=$;break;case 3:t.msg="invalid block type",n.mode=ft}f>>>=2,d-=2;break;case Q:for(f>>>=7&d,d-=7&d;32>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if((65535&f)!==(f>>>16^65535)){t.msg="invalid stored block lengths",n.mode=ft;break}if(n.length=65535&f,f=0,d=0,n.mode=J,e===C)break t;case J:n.mode=K;case K:if(y=n.length){if(y>h&&(y=h),y>u&&(y=u),0===y)break t;v.arraySet(s,r,a,y,o),h-=y,a+=y,u-=y,o+=y,n.length-=y;break}n.mode=H;break;case $:for(;14>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(n.nlen=(31&f)+257,f>>>=5,d-=5,n.ndist=(31&f)+1,f>>>=5,d-=5,n.ncode=(15&f)+4,f>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=ft;break}n.have=0,n.mode=tt;case tt:for(;n.have<n.ncode;){for(;3>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}n.lens[Ct[n.have++]]=7&f,f>>>=3,d-=3}for(;n.have<19;)n.lens[Ct[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Et={bits:n.lenbits},Mt=_(M,n.lens,0,19,n.lencode,0,n.work,Et),n.lenbits=Et.bits,Mt){t.msg="invalid code lengths set",n.mode=ft;break}n.have=0,n.mode=et;case et:for(;n.have<n.nlen+n.ndist;){for(;St=n.lencode[f&(1<<n.lenbits)-1],yt=St>>>24,gt=St>>>16&255,vt=65535&St,!(d>=yt);){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(16>vt)f>>>=yt,d-=yt,n.lens[n.have++]=vt;else{if(16===vt){for(Pt=yt+2;Pt>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(f>>>=yt,d-=yt,0===n.have){t.msg="invalid bit length repeat",n.mode=ft;break}_t=n.lens[n.have-1],y=3+(3&f),f>>>=2,d-=2}else if(17===vt){for(Pt=yt+3;Pt>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}f>>>=yt,d-=yt,_t=0,y=3+(7&f),f>>>=3,d-=3}else{for(Pt=yt+7;Pt>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}f>>>=yt,d-=yt,_t=0,y=11+(127&f),f>>>=7,d-=7}if(n.have+y>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=ft;break}for(;y--;)n.lens[n.have++]=_t}}if(n.mode===ft)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=ft;break}if(n.lenbits=9,Et={bits:n.lenbits},Mt=_(E,n.lens,0,n.nlen,n.lencode,0,n.work,Et),n.lenbits=Et.bits,Mt){t.msg="invalid literal/lengths set",n.mode=ft;break}if(n.distbits=6,n.distcode=n.distdyn,Et={bits:n.distbits},Mt=_(P,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Et),n.distbits=Et.bits,Mt){t.msg="invalid distances set",n.mode=ft;break}if(n.mode=nt,e===C)break t;case nt:n.mode=it;case it:if(h>=6&&u>=258){t.next_out=o,t.avail_out=u,t.next_in=a,t.avail_in=h,n.hold=f,n.bits=d,w(t,m),o=t.next_out,s=t.output,u=t.avail_out,a=t.next_in,r=t.input,h=t.avail_in,f=n.hold,d=n.bits,n.mode===H&&(n.back=-1);break}for(n.back=0;St=n.lencode[f&(1<<n.lenbits)-1],yt=St>>>24,gt=St>>>16&255,vt=65535&St,!(d>=yt);){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(gt&&0===(240&gt)){for(bt=yt,xt=gt,wt=vt;St=n.lencode[wt+((f&(1<<bt+xt)-1)>>bt)],yt=St>>>24,gt=St>>>16&255,vt=65535&St,!(d>=bt+yt);){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}f>>>=bt,d-=bt,n.back+=bt}if(f>>>=yt,d-=yt,n.back+=yt,n.length=vt,0===gt){n.mode=ht;break}if(32&gt){n.back=-1,n.mode=H;break}if(64&gt){t.msg="invalid literal/length code",n.mode=ft;break}n.extra=15&gt,n.mode=rt;case rt:if(n.extra){for(Pt=n.extra;Pt>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=st;case st:for(;St=n.distcode[f&(1<<n.distbits)-1],yt=St>>>24,gt=St>>>16&255,vt=65535&St,!(d>=yt);){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(0===(240&gt)){for(bt=yt,xt=gt,wt=vt;St=n.distcode[wt+((f&(1<<bt+xt)-1)>>bt)],yt=St>>>24,gt=St>>>16&255,vt=65535&St,!(d>=bt+yt);){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}f>>>=bt,d-=bt,n.back+=bt;
}if(f>>>=yt,d-=yt,n.back+=yt,64&gt){t.msg="invalid distance code",n.mode=ft;break}n.offset=vt,n.extra=15&gt,n.mode=at;case at:if(n.extra){for(Pt=n.extra;Pt>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=ft;break}n.mode=ot;case ot:if(0===u)break t;if(y=m-u,n.offset>y){if(y=n.offset-y,y>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=ft;break}y>n.wnext?(y-=n.wnext,g=n.wsize-y):g=n.wnext-y,y>n.length&&(y=n.length),mt=n.window}else mt=s,g=o-n.offset,y=n.length;y>u&&(y=u),u-=y,n.length-=y;do s[o++]=mt[g++];while(--y);0===n.length&&(n.mode=it);break;case ht:if(0===u)break t;s[o++]=n.length,u--,n.mode=it;break;case ut:if(n.wrap){for(;32>d;){if(0===h)break t;h--,f|=r[a++]<<d,d+=8}if(m-=u,t.total_out+=m,n.total+=m,m&&(t.adler=n.check=n.flags?x(n.check,s,m,o-m):b(n.check,s,m,o-m)),m=u,(n.flags?f:i(f))!==n.check){t.msg="incorrect data check",n.mode=ft;break}f=0,d=0}n.mode=lt;case lt:if(n.wrap&&n.flags){for(;32>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(f!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=ft;break}f=0,d=0}n.mode=ct;case ct:Mt=T;break t;case ft:Mt=j;break t;case dt:return O;case pt:default:return L}return t.next_out=o,t.avail_out=u,t.next_in=a,t.avail_in=h,n.hold=f,n.bits=d,(n.wsize||m!==t.avail_out&&n.mode<ft&&(n.mode<ut||e!==S))&&c(t,t.output,t.next_out,m-t.avail_out)?(n.mode=dt,O):(p-=t.avail_in,m-=t.avail_out,t.total_in+=p,t.total_out+=m,n.total+=m,n.wrap&&m&&(t.adler=n.check=n.flags?x(n.check,s,m,t.next_out-m):b(n.check,s,m,t.next_out-m)),t.data_type=n.bits+(n.last?64:0)+(n.mode===H?128:0)+(n.mode===nt||n.mode===J?256:0),(0===p&&0===m||e===S)&&Mt===A&&(Mt=R),Mt)}function d(t){if(!t||!t.state)return L;var e=t.state;return e.window&&(e.window=null),t.state=null,A}function p(t,e){var n;return t&&t.state?(n=t.state,0===(2&n.wrap)?L:(n.head=e,e.done=!1,A)):L}function m(t,e){var n,i,r,s=e.length;return t&&t.state?(n=t.state,0!==n.wrap&&n.mode!==Y?L:n.mode===Y&&(i=1,i=b(i,e,s,0),i!==n.check)?j:(r=c(t,e,s,s))?(n.mode=dt,O):(n.havedict=1,A)):L}var y,g,v=t("../utils/common"),b=t("./adler32"),x=t("./crc32"),w=t("./inffast"),_=t("./inftrees"),M=0,E=1,P=2,S=4,k=5,C=6,A=0,T=1,I=2,L=-2,j=-3,O=-4,R=-5,B=8,N=1,F=2,D=3,z=4,U=5,G=6,q=7,V=8,X=9,W=10,Y=11,H=12,Z=13,Q=14,J=15,K=16,$=17,tt=18,et=19,nt=20,it=21,rt=22,st=23,at=24,ot=25,ht=26,ut=27,lt=28,ct=29,ft=30,dt=31,pt=32,mt=852,yt=592,gt=15,vt=gt,bt=!0;n.inflateReset=a,n.inflateReset2=o,n.inflateResetKeep=s,n.inflateInit=u,n.inflateInit2=h,n.inflate=f,n.inflateEnd=d,n.inflateGetHeader=p,n.inflateSetDictionary=m,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":37,"./adler32":39,"./crc32":41,"./inffast":44,"./inftrees":46}],46:[function(t,e,n){"use strict";var i=t("../utils/common"),r=15,s=852,a=592,o=0,h=1,u=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,p,m,y,g,v){var b,x,w,_,M,E,P,S,k,C=v.bits,A=0,T=0,I=0,L=0,j=0,O=0,R=0,B=0,N=0,F=0,D=null,z=0,U=new i.Buf16(r+1),G=new i.Buf16(r+1),q=null,V=0;for(A=0;r>=A;A++)U[A]=0;for(T=0;p>T;T++)U[e[n+T]]++;for(j=C,L=r;L>=1&&0===U[L];L--);if(j>L&&(j=L),0===L)return m[y++]=20971520,m[y++]=20971520,v.bits=1,0;for(I=1;L>I&&0===U[I];I++);for(I>j&&(j=I),B=1,A=1;r>=A;A++)if(B<<=1,B-=U[A],0>B)return-1;if(B>0&&(t===o||1!==L))return-1;for(G[1]=0,A=1;r>A;A++)G[A+1]=G[A]+U[A];for(T=0;p>T;T++)0!==e[n+T]&&(g[G[e[n+T]]++]=T);if(t===o?(D=q=g,E=19):t===h?(D=l,z-=257,q=c,V-=257,E=256):(D=f,q=d,E=-1),F=0,T=0,A=I,M=y,O=j,R=0,w=-1,N=1<<j,_=N-1,t===h&&N>s||t===u&&N>a)return 1;for(;;){P=A-R,g[T]<E?(S=0,k=g[T]):g[T]>E?(S=q[V+g[T]],k=D[z+g[T]]):(S=96,k=0),b=1<<A-R,x=1<<O,I=x;do x-=b,m[M+(F>>R)+x]=P<<24|S<<16|k|0;while(0!==x);for(b=1<<A-1;F&b;)b>>=1;if(0!==b?(F&=b-1,F+=b):F=0,T++,0===--U[A]){if(A===L)break;A=e[n+g[T]]}if(A>j&&(F&_)!==w){for(0===R&&(R=j),M+=I,O=A-R,B=1<<O;L>O+R&&(B-=U[O+R],!(0>=B));)O++,B<<=1;if(N+=1<<O,t===h&&N>s||t===u&&N>a)return 1;w=F&_,m[w]=j<<24|O<<16|M-y|0}}return 0!==F&&(m[M+F]=A-R<<24|64<<16|0),v.bits=j,0}},{"../utils/common":37}],47:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],48:[function(t,e,n){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function r(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function s(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return 256>t?ht[t]:ht[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function h(t,e,n){t.bi_valid>Z-n?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>Z-t.bi_valid,t.bi_valid+=n-Z):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function u(t,e,n){h(t,n[2*e],n[2*e+1])}function l(t,e){var n=0;do n|=1&t,t>>>=1,n<<=1;while(--e>0);return n>>>1}function c(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function f(t,e){var n,i,r,s,a,o,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(s=0;H>=s;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;Y>n;n++)i=t.heap[n],s=h[2*h[2*i+1]+1]+1,s>p&&(s=p,m++),h[2*i+1]=s,i>u||(t.bl_count[s]++,a=0,i>=d&&(a=f[i-d]),o=h[2*i],t.opt_len+=o*(s+a),c&&(t.static_len+=o*(l[2*i+1]+a)));if(0!==m){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(s=p;0!==s;s--)for(i=t.bl_count[s];0!==i;)r=t.heap[--n],r>u||(h[2*r+1]!==s&&(t.opt_len+=(s-h[2*r+1])*h[2*r],h[2*r+1]=s),i--)}}function d(t,e,n){var i,r,s=new Array(H+1),a=0;for(i=1;H>=i;i++)s[i]=a=a+n[i-1]<<1;for(r=0;e>=r;r++){var o=t[2*r+1];0!==o&&(t[2*r]=l(s[o]++,o))}}function p(){var t,e,n,i,s,a=new Array(H+1);for(n=0,i=0;G-1>i;i++)for(lt[i]=n,t=0;t<1<<et[i];t++)ut[n++]=i;for(ut[n-1]=i,s=0,i=0;16>i;i++)for(ct[i]=s,t=0;t<1<<nt[i];t++)ht[s++]=i;for(s>>=7;X>i;i++)for(ct[i]=s<<7,t=0;t<1<<nt[i]-7;t++)ht[256+s++]=i;for(e=0;H>=e;e++)a[e]=0;for(t=0;143>=t;)at[2*t+1]=8,t++,a[8]++;for(;255>=t;)at[2*t+1]=9,t++,a[9]++;for(;279>=t;)at[2*t+1]=7,t++,a[7]++;for(;287>=t;)at[2*t+1]=8,t++,a[8]++;for(d(at,V+1,a),t=0;X>t;t++)ot[2*t+1]=5,ot[2*t]=l(t,5);ft=new r(at,et,q+1,V,H),dt=new r(ot,nt,0,X,H),pt=new r(new Array(0),it,0,W,Q)}function m(t){var e;for(e=0;V>e;e++)t.dyn_ltree[2*e]=0;for(e=0;X>e;e++)t.dyn_dtree[2*e]=0;for(e=0;W>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*J]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function y(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function g(t,e,n,i){y(t),i&&(o(t,n),o(t,~n)),L.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function v(t,e,n,i){var r=2*e,s=2*n;return t[r]<t[s]||t[r]===t[s]&&i[e]<=i[n]}function b(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&v(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!v(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function x(t,e,n){var i,r,s,o,l=0;if(0!==t.last_lit)do i=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],r=t.pending_buf[t.l_buf+l],l++,0===i?u(t,r,e):(s=ut[r],u(t,s+q+1,e),o=et[s],0!==o&&(r-=lt[s],h(t,r,o)),i--,s=a(i),u(t,s,n),o=nt[s],0!==o&&(i-=ct[s],h(t,i,o)));while(l<t.last_lit);u(t,J,e)}function w(t,e){var n,i,r,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=Y,n=0;h>n;n++)0!==s[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):s[2*n+1]=0;for(;t.heap_len<2;)r=t.heap[++t.heap_len]=2>u?++u:0,s[2*r]=1,t.depth[r]=0,t.opt_len--,o&&(t.static_len-=a[2*r+1]);for(e.max_code=u,n=t.heap_len>>1;n>=1;n--)b(t,s,n);r=h;do n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],b(t,s,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,s[2*r]=s[2*n]+s[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,s[2*n+1]=s[2*i+1]=r,t.heap[1]=r++,b(t,s,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],f(t,e),d(s,u,t.bl_count)}function _(t,e,n){var i,r,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),e[2*(n+1)+1]=65535,i=0;n>=i;i++)r=a,a=e[2*(i+1)+1],++o<h&&r===a||(u>o?t.bl_tree[2*r]+=o:0!==r?(r!==s&&t.bl_tree[2*r]++,t.bl_tree[2*K]++):10>=o?t.bl_tree[2*$]++:t.bl_tree[2*tt]++,o=0,s=r,0===a?(h=138,u=3):r===a?(h=6,u=3):(h=7,u=4))}function M(t,e,n){var i,r,s=-1,a=e[1],o=0,l=7,c=4;for(0===a&&(l=138,c=3),i=0;n>=i;i++)if(r=a,a=e[2*(i+1)+1],!(++o<l&&r===a)){if(c>o){do u(t,r,t.bl_tree);while(0!==--o)}else 0!==r?(r!==s&&(u(t,r,t.bl_tree),o--),u(t,K,t.bl_tree),h(t,o-3,2)):10>=o?(u(t,$,t.bl_tree),h(t,o-3,3)):(u(t,tt,t.bl_tree),h(t,o-11,7));o=0,s=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4)}}function E(t){var e;for(_(t,t.dyn_ltree,t.l_desc.max_code),_(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=W-1;e>=3&&0===t.bl_tree[2*rt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function P(t,e,n,i){var r;for(h(t,e-257,5),h(t,n-1,5),h(t,i-4,4),r=0;i>r;r++)h(t,t.bl_tree[2*rt[r]+1],3);M(t,t.dyn_ltree,e-1),M(t,t.dyn_dtree,n-1)}function S(t){var e,n=4093624447;for(e=0;31>=e;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return O;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return R;for(e=32;q>e;e++)if(0!==t.dyn_ltree[2*e])return R;return O}function k(t){mt||(p(),mt=!0),t.l_desc=new s(t.dyn_ltree,ft),t.d_desc=new s(t.dyn_dtree,dt),t.bl_desc=new s(t.bl_tree,pt),t.bi_buf=0,t.bi_valid=0,m(t)}function C(t,e,n,i){h(t,(N<<1)+(i?1:0),3),g(t,e,n,!0)}function A(t){h(t,F<<1,3),u(t,J,at),c(t)}function T(t,e,n,i){var r,s,a=0;t.level>0?(t.strm.data_type===B&&(t.strm.data_type=S(t)),w(t,t.l_desc),w(t,t.d_desc),a=E(t),r=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,r>=s&&(r=s)):r=s=n+5,r>=n+4&&-1!==e?C(t,e,n,i):t.strategy===j||s===r?(h(t,(F<<1)+(i?1:0),3),x(t,at,ot)):(h(t,(D<<1)+(i?1:0),3),P(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),x(t,t.dyn_ltree,t.dyn_dtree)),m(t),i&&y(t)}function I(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(ut[n]+q+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1}var L=t("../utils/common"),j=4,O=0,R=1,B=2,N=0,F=1,D=2,z=3,U=258,G=29,q=256,V=q+1+G,X=30,W=19,Y=2*V+1,H=15,Z=16,Q=7,J=256,K=16,$=17,tt=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],nt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=512,at=new Array(2*(V+2));i(at);var ot=new Array(2*X);i(ot);var ht=new Array(st);i(ht);var ut=new Array(U-z+1);i(ut);var lt=new Array(G);i(lt);var ct=new Array(X);i(ct);var ft,dt,pt,mt=!1;n._tr_init=k,n._tr_stored_block=C,n._tr_flush_block=T,n._tr_tally=I,n._tr_align=A},{"../utils/common":37}],49:[function(t,e,n){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=i},{}],50:[function(t,e,n){"use strict";function i(){}e.exports=i},{}],51:[function(t,e,n){"use strict";function i(t){function e(t,e){function r(t){u[e]=t,++l===n&!i&&(i=!0,h.resolve(f,u))}a(t).then(r,function(t){i||(i=!0,h.reject(f,t))})}if("[object Array]"!==Object.prototype.toString.call(t))return s(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return a([]);for(var u=new Array(n),l=0,c=-1,f=new r(o);++c<n;)e(t[c],c);return f}var r=t("./promise"),s=t("./reject"),a=t("./resolve"),o=t("./INTERNAL"),h=t("./handlers");e.exports=i},{"./INTERNAL":50,"./handlers":52,"./promise":54,"./reject":57,"./resolve":58}],52:[function(t,e,n){"use strict";function i(t){var e=t&&t.then;return t&&"object"==typeof t&&"function"==typeof e?function(){e.apply(t,arguments)}:void 0}var r=t("./tryCatch"),s=t("./resolveThenable"),a=t("./states");n.resolve=function(t,e){var o=r(i,e);if("error"===o.status)return n.reject(t,o.value);var h=o.value;if(h)s.safely(t,h);else{t.state=a.FULFILLED,t.outcome=e;for(var u=-1,l=t.queue.length;++u<l;)t.queue[u].callFulfilled(e)}return t},n.reject=function(t,e){t.state=a.REJECTED,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t}},{"./resolveThenable":59,"./states":60,"./tryCatch":61}],53:[function(t,e,n){e.exports=n=t("./promise"),n.resolve=t("./resolve"),n.reject=t("./reject"),n.all=t("./all"),n.race=t("./race")},{"./all":51,"./promise":54,"./race":56,"./reject":57,"./resolve":58}],54:[function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=o.PENDING,this.queue=[],this.outcome=void 0,t!==s&&a.safely(this,t)}var r=t("./unwrap"),s=t("./INTERNAL"),a=t("./resolveThenable"),o=t("./states"),h=t("./queueItem");e.exports=i,i.prototype["catch"]=function(t){return this.then(null,t)},i.prototype.then=function(t,e){if("function"!=typeof t&&this.state===o.FULFILLED||"function"!=typeof e&&this.state===o.REJECTED)return this;var n=new i(s);if(this.state!==o.PENDING){var a=this.state===o.FULFILLED?t:e;r(n,a,this.outcome)}else this.queue.push(new h(n,t,e));return n}},{"./INTERNAL":50,"./queueItem":55,"./resolveThenable":59,"./states":60,"./unwrap":62}],55:[function(t,e,n){"use strict";function i(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}var r=t("./handlers"),s=t("./unwrap");e.exports=i,i.prototype.callFulfilled=function(t){r.resolve(this.promise,t)},i.prototype.otherCallFulfilled=function(t){s(this.promise,this.onFulfilled,t)},i.prototype.callRejected=function(t){r.reject(this.promise,t)},i.prototype.otherCallRejected=function(t){s(this.promise,this.onRejected,t)}},{"./handlers":52,"./unwrap":62}],56:[function(t,e,n){"use strict";function i(t){function e(t){a(t).then(function(t){i||(i=!0,h.resolve(l,t))},function(t){i||(i=!0,h.reject(l,t))})}if("[object Array]"!==Object.prototype.toString.call(t))return s(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return a([]);for(var u=-1,l=new r(o);++u<n;)e(t[u]);return l}var r=t("./promise"),s=t("./reject"),a=t("./resolve"),o=t("./INTERNAL"),h=t("./handlers");e.exports=i},{"./INTERNAL":50,"./handlers":52,"./promise":54,"./reject":57,"./resolve":58}],57:[function(t,e,n){"use strict";function i(t){var e=new r(s);return a.reject(e,t)}var r=t("./promise"),s=t("./INTERNAL"),a=t("./handlers");e.exports=i},{"./INTERNAL":50,"./handlers":52,"./promise":54}],58:[function(t,e,n){"use strict";function i(t){if(t)return t instanceof r?t:a.resolve(new r(s),t);var e=typeof t;switch(e){case"boolean":return o;case"undefined":return u;case"object":return h;case"number":return l;case"string":return c}}var r=t("./promise"),s=t("./INTERNAL"),a=t("./handlers");e.exports=i;var o=a.resolve(new r(s),!1),h=a.resolve(new r(s),null),u=a.resolve(new r(s),void 0),l=a.resolve(new r(s),0),c=a.resolve(new r(s),"")},{"./INTERNAL":50,"./handlers":52,"./promise":54}],59:[function(t,e,n){"use strict";function i(t,e){function n(e){o||(o=!0,r.reject(t,e))}function i(e){o||(o=!0,r.resolve(t,e))}function a(){e(i,n)}var o=!1,h=s(a);"error"===h.status&&n(h.value)}var r=t("./handlers"),s=t("./tryCatch");n.safely=i},{"./handlers":52,"./tryCatch":61}],60:[function(t,e,n){n.REJECTED=["REJECTED"],n.FULFILLED=["FULFILLED"],n.PENDING=["PENDING"]},{}],61:[function(t,e,n){"use strict";function i(t,e){var n={};try{n.value=t(e),n.status="success"}catch(i){n.status="error",n.value=i}return n}e.exports=i},{}],62:[function(t,e,n){"use strict";function i(t,e,n){r(function(){var i;try{i=e(n)}catch(r){return s.reject(t,r)}i===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,i)})}var r=t("immediate"),s=t("./handlers");e.exports=i},{"./handlers":52,immediate:8}],63:[function(t,e,n){!function(){function t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n(){return 1}function i(t){f||"string"==typeof t||"number"==typeof t||(f=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof t).stack))}function r(t){return this instanceof r?("number"==typeof t&&(t={max:t}),t||(t={}),this._max=t.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=t.length||n,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=n),this._allowStale=t.stale||!1,this._maxAge=t.maxAge||null,this._dispose=t.dispose,void this.reset()):new r(t)}function s(t,e,n){i(e);var r=t._cache[e];return r&&(a(t,r)?(l(t,r),t._allowStale||(r=void 0)):n&&o(t,r),r&&(r=r.value)),r}function a(t,e){if(!e||!e.maxAge&&!t._maxAge)return!1;var n=!1,i=Date.now()-e.now;return n=e.maxAge?i>e.maxAge:t._maxAge&&i>t._maxAge}function o(t,e){u(t,e),e.lu=t._mru++,t._lruList[e.lu]=e}function h(t){for(;t._lru<t._mru&&t._length>t._max;)l(t,t._lruList[t._lru])}function u(t,e){for(delete t._lruList[e.lu];t._lru<t._mru&&!t._lruList[t._lru];)t._lru++}function l(t,e){e&&(t._dispose&&t._dispose(e.key,e.value),t._length-=e.length,t._itemCount--,delete t._cache[e.key],u(t,e))}function c(t,e,n,i,r,s){this.key=t,this.value=e,this.lu=n,this.length=i,this.now=r,s&&(this.maxAge=s)}"object"==typeof e&&e.exports?e.exports=r:this.LRUCache=r;var f=!1;Object.defineProperty(r.prototype,"max",{set:function(t){(!t||"number"!=typeof t||0>=t)&&(t=1/0),this._max=t,this._length>this._max&&h(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(r.prototype,"lengthCalculator",{set:function(t){if("function"!=typeof t){this._lengthCalculator=n,this._length=this._itemCount;for(var e in this._cache)this._cache[e].length=1}else{this._lengthCalculator=t,this._length=0;for(var e in this._cache)this._cache[e].length=this._lengthCalculator(this._cache[e].value),this._length+=this._cache[e].length}this._length>this._max&&h(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(r.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),r.prototype.forEach=function(t,e){e=e||this;for(var n=0,i=this._itemCount,r=this._mru-1;r>=0&&i>n;r--)if(this._lruList[r]){n++;var s=this._lruList[r];a(this,s)&&(l(this,s),this._allowStale||(s=void 0)),s&&t.call(e,s.value,s.key,this)}},r.prototype.keys=function(){for(var t=new Array(this._itemCount),e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var i=this._lruList[n];t[e++]=i.key}return t},r.prototype.values=function(){for(var t=new Array(this._itemCount),e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var i=this._lruList[n];t[e++]=i.value}return t},r.prototype.reset=function(){if(this._dispose&&this._cache)for(var t in this._cache)this._dispose(t,this._cache[t].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},r.prototype.dump=function(){for(var t=[],e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var i=this._lruList[n];a(this,i)||(++e,t.push({k:i.key,v:i.value,e:i.now+(i.maxAge||0)}))}return t},r.prototype.dumpLru=function(){return this._lruList},r.prototype.set=function(e,n,r){r=r||this._maxAge,i(e);var s=r?Date.now():0,a=this._lengthCalculator(n);if(t(this._cache,e))return a>this._max?(l(this,this._cache[e]),!1):(this._dispose&&this._dispose(e,this._cache[e].value),this._cache[e].now=s,this._cache[e].maxAge=r,this._cache[e].value=n,this._length+=a-this._cache[e].length,this._cache[e].length=a,this.get(e),this._length>this._max&&h(this),!0);var o=new c(e,n,this._mru++,a,s,r);return o.length>this._max?(this._dispose&&this._dispose(e,n),!1):(this._length+=o.length,this._lruList[o.lu]=this._cache[e]=o,this._itemCount++,this._length>this._max&&h(this),!0)},r.prototype.has=function(e){if(i(e),!t(this._cache,e))return!1;var n=this._cache[e];return a(this,n)?!1:!0},r.prototype.get=function(t){return i(t),s(this,t,!0)},r.prototype.peek=function(t){return i(t),s(this,t,!1)},r.prototype.pop=function(){var t=this._lruList[this._lru];return l(this,t),t||null},r.prototype.del=function(t){i(t),l(this,this._cache[t])},r.prototype.load=function(t){this.reset();for(var e=Date.now(),n=t.length-1;n>=0;n--){var r=t[n];i(r.k);var s=r.e||0;if(0===s)this.set(r.k,r.v);else{var a=s-e;a>0&&this.set(r.k,r.v,a)}}}}()},{}],64:[function(t,e,n){function i(t){return t*(Math.PI/180)}function r(t){return 180*(t/Math.PI)}function s(t){var e,n,r,s,a,h,u,l,c,f=t.lat,d=t.lon,p=6378137,m=.00669438,y=.9996,g=i(f),v=i(d);c=Math.floor((d+180)/6)+1,180===d&&(c=60),f>=56&&64>f&&d>=3&&12>d&&(c=32),f>=72&&84>f&&(d>=0&&9>d?c=31:d>=9&&21>d?c=33:d>=21&&33>d?c=35:d>=33&&42>d&&(c=37)),e=6*(c-1)-180+3,l=i(e),n=m/(1-m),r=p/Math.sqrt(1-m*Math.sin(g)*Math.sin(g)),s=Math.tan(g)*Math.tan(g),a=n*Math.cos(g)*Math.cos(g),h=Math.cos(g)*(v-l),u=p*((1-m/4-3*m*m/64-5*m*m*m/256)*g-(3*m/8+3*m*m/32+45*m*m*m/1024)*Math.sin(2*g)+(15*m*m/256+45*m*m*m/1024)*Math.sin(4*g)-35*m*m*m/3072*Math.sin(6*g));var b=y*r*(h+(1-s+a)*h*h*h/6+(5-18*s+s*s+72*a-58*n)*h*h*h*h*h/120)+5e5,x=y*(u+r*Math.tan(g)*(h*h/2+(5-s+9*a+4*a*a)*h*h*h*h/24+(61-58*s+s*s+600*a-330*n)*h*h*h*h*h*h/720));return 0>f&&(x+=1e7),{northing:Math.round(x),easting:Math.round(b),zoneNumber:c,zoneLetter:o(f)}}function a(t){var e=t.northing,n=t.easting,i=t.zoneLetter,s=t.zoneNumber;if(0>s||s>60)return null;var o,h,u,l,c,f,d,p,m,y,g=.9996,v=6378137,b=.00669438,x=(1-Math.sqrt(1-b))/(1+Math.sqrt(1-b)),w=n-5e5,_=e;"N">i&&(_-=1e7),p=6*(s-1)-180+3,o=b/(1-b),d=_/g,m=d/(v*(1-b/4-3*b*b/64-5*b*b*b/256)),y=m+(3*x/2-27*x*x*x/32)*Math.sin(2*m)+(21*x*x/16-55*x*x*x*x/32)*Math.sin(4*m)+151*x*x*x/96*Math.sin(6*m),h=v/Math.sqrt(1-b*Math.sin(y)*Math.sin(y)),u=Math.tan(y)*Math.tan(y),l=o*Math.cos(y)*Math.cos(y),c=v*(1-b)/Math.pow(1-b*Math.sin(y)*Math.sin(y),1.5),f=w/(h*g);var M=y-h*Math.tan(y)/c*(f*f/2-(5+3*u+10*l-4*l*l-9*o)*f*f*f*f/24+(61+90*u+298*l+45*u*u-252*o-3*l*l)*f*f*f*f*f*f/720);M=r(M);var E=(f-(1+2*u+l)*f*f*f/6+(5-2*l+28*u-3*l*l+8*o+24*u*u)*f*f*f*f*f/120)/Math.cos(y);E=p+r(E);var P;if(t.accuracy){var S=a({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});P={top:S.lat,right:S.lon,bottom:M,left:E}}else P={lat:M,lon:E};return P}function o(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function h(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+u(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+i.substr(i.length-5,e)}function u(t,e,n){var i=l(n),r=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return c(r,s,i)}function l(t){var e=t%y;return 0===e&&(e=y),e}function c(t,e,n){var i=n-1,r=g.charCodeAt(i),s=v.charCodeAt(i),a=r+t-1,o=s+e,h=!1;a>M&&(a=a-M+b-1,h=!0),(a===x||x>r&&a>x||(a>x||x>r)&&h)&&a++,(a===w||w>r&&a>w||(a>w||w>r)&&h)&&(a++,a===x&&a++),a>M&&(a=a-M+b-1),o>_?(o=o-_+b-1,h=!0):h=!1,(o===x||x>s&&o>x||(o>x||x>s)&&h)&&o++,(o===w||w>s&&o>w||(o>w||w>s)&&h)&&(o++,o===x&&o++),o>_&&(o=o-_+b-1);var u=String.fromCharCode(a)+String.fromCharCode(o);return u}function f(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,s++}var a=parseInt(r,10);if(0===s||s+3>n)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(s++);if("A">=o||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+t;i=t.substring(s,s+=2);for(var h=l(a),u=d(i.charAt(0),h),c=p(i.charAt(1),h);c<m(o);)c+=2e6;var f=n-s;if(f%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var y,g,v,b,x,w=f/2,_=0,M=0;return w>0&&(y=1e5/Math.pow(10,w),g=t.substring(s,s+w),_=parseFloat(g)*y,v=t.substring(s+w),M=parseFloat(v)*y),b=_+u,x=M+c,{easting:b,northing:x,zoneLetter:o,zoneNumber:a,accuracy:y}}function d(t,e){for(var n=g.charCodeAt(e-1),i=1e5,r=!1;n!==t.charCodeAt(0);){if(n++,n===x&&n++,n===w&&n++,n>M){if(r)throw"Bad character: "+t;n=b,r=!0}i+=1e5}return i}function p(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=v.charCodeAt(e-1),i=0,r=!1;n!==t.charCodeAt(0);){if(n++,n===x&&n++,n===w&&n++,n>_){if(r)throw"Bad character: "+t;n=b,r=!0}i+=1e5}return i}function m(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}var y=6,g="AJSAJS",v="AFAFAF",b=65,x=73,w=79,_=86,M=90;n.forward=function(t,e){return e=e||5,h(s({lat:t[1],lon:t[0]}),e)},n.inverse=function(t){var e=a(f(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},n.toPoint=function(t){var e=a(f(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}},{}],65:[function(t,e,n){function i(t){var e=new DataView(t),n={};return n.lastUpdated=new Date(e.getUint8(1,!0)+1900,e.getUint8(2,!0),e.getUint8(3,!0)),n.records=e.getUint32(4,!0),n.headerLen=e.getUint16(8,!0),n.recLen=e.getUint16(10,!0),n}function r(t){for(var e=new DataView(t),n=[],i=32;;){if(n.push({name:String.fromCharCode.apply(this,new Uint8Array(t,i,10)).replace(/\0|\s+$/g,""),dataType:String.fromCharCode(e.getUint8(i+11)),len:e.getUint8(i+16),decimal:e.getUint8(i+17)}),13===e.getUint8(i+32))break;i+=32}return n}function s(t,e,n,i){var r=new Uint8Array(t,e,n),s=String.fromCharCode.apply(this,r).replace(/\0|\s+$/g,"");switch(i){case"N":case"F":case"O":return parseFloat(s,10);case"D":return new Date(s.slice(0,4),parseInt(s.slice(4,6),10)-1,s.slice(6,8));case"L":return"y"===s.toLowerCase()||"t"===s.toLowerCase();default:return s}}function a(t,e,n){for(var i,r,a={},o=0,h=n.length;h>o;)r=n[o],i=s(t,e,r.len,r.dataType),e+=r.len,"undefined"!=typeof i&&(a[r.name]=i),o++;return a}e.exports=function(t){for(var e=r(t),n=i(t),s=(e.length+1<<5)+2,o=n.recLen,h=n.records,u=[];h;)u.push(a(t,s,e)),s+=o,h--;return u}},{}],66:[function(t,e,n){function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&"undefined"==typeof e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var r=t("mgrs");i.fromMGRS=function(t){return new i(r.toPoint(t))},i.prototype.toMGRS=function(t){return r.forward([this.x,this.y],t)},e.exports=i},{mgrs:64}],67:[function(t,e,n){function i(t,e){if(!(this instanceof i))return new i(t);e=e||function(t){if(t)throw t};var n=r(t);if("object"!=typeof n)return void e(t);var a=o(n),h=i.projections.get(a.projName);h?(s(this,a),s(this,h),this.init(),e(null,this)):e(t)}var r=t("./parseCode"),s=t("./extend"),a=t("./projections"),o=t("./deriveConstants");i.projections=a,i.projections.start(),e.exports=i},{"./deriveConstants":98,"./extend":99,"./parseCode":103,"./projections":105}],68:[function(t,e,n){e.exports=function(t,e,n){var i,r,s,a=n.x,o=n.y,h=n.z||0;for(s=0;3>s;s++)if(!e||2!==s||void 0!==n.z)switch(0===s?(i=a,r="x"):1===s?(i=o,r="y"):(i=h,r="z"),t.axis[s]){case"e":n[r]=i;break;case"w":n[r]=-i;break;case"n":n[r]=i;break;case"s":n[r]=-i;break;case"u":void 0!==n[r]&&(n.z=i);break;case"d":void 0!==n[r]&&(n.z=-i);break;default:return null}return n}},{}],69:[function(t,e,n){var i=Math.PI/2,r=t("./sign");e.exports=function(t){return Math.abs(t)<i?t:t-r(t)*Math.PI}},{"./sign":86}],70:[function(t,e,n){var i=2*Math.PI,r=3.14159265359,s=t("./sign");e.exports=function(t){return Math.abs(t)<=r?t:t-s(t)*i}},{"./sign":86}],71:[function(t,e,n){e.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},{}],72:[function(t,e,n){e.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},{}],73:[function(t,e,n){e.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},{}],74:[function(t,e,n){e.exports=function(t){return.05859375*t*t*(1+.75*t)}},{}],75:[function(t,e,n){e.exports=function(t){return t*t*t*(35/3072)}},{}],76:[function(t,e,n){e.exports=function(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}},{}],77:[function(t,e,n){e.exports=function(t,e,n,i,r){var s,a;s=t/e;for(var o=0;15>o;o++)if(a=(t-(e*s-n*Math.sin(2*s)+i*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*i*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}},{}],78:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return 0>e?-1*i:i;for(var r,s,a,o,h=Math.asin(.5*e),u=0;30>u;u++)if(s=Math.sin(h),a=Math.cos(h),o=t*s,r=Math.pow(1-o*o,2)/(2*a)*(e/(1-t*t)-s/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),h+=r,Math.abs(r)<=1e-10)return h;return NaN}},{}],79:[function(t,e,n){e.exports=function(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}},{}],80:[function(t,e,n){e.exports=function(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}},{}],81:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e){for(var n,r,s=.5*t,a=i-2*Math.atan(e),o=0;15>=o;o++)if(n=t*Math.sin(a),r=i-2*Math.atan(e*Math.pow((1-n)/(1+n),s))-a,a+=r,Math.abs(r)<=1e-10)return a;return-9999}},{}],82:[function(t,e,n){var i=1,r=.25,s=.046875,a=.01953125,o=.01068115234375,h=.75,u=.46875,l=.013020833333333334,c=.007120768229166667,f=.3645833333333333,d=.005696614583333333,p=.3076171875;e.exports=function(t){var e=[];e[0]=i-t*(r+t*(s+t*(a+t*o))),e[1]=t*(h-t*(s+t*(a+t*o)));var n=t*t;return e[2]=n*(u-t*(l+t*c)),n*=t,e[3]=n*(f-t*d),e[4]=n*t*p,e}},{}],83:[function(t,e,n){var i=t("./pj_mlfn"),r=1e-10,s=20;e.exports=function(t,e,n){for(var a=1/(1-e),o=t,h=s;h;--h){var u=Math.sin(o),l=1-e*u*u;if(l=(i(o,u,Math.cos(o),n)-t)*(l*Math.sqrt(l))*a,o-=l,Math.abs(l)<r)return o}return o}},{"./pj_mlfn":84}],84:[function(t,e,n){e.exports=function(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}},{}],85:[function(t,e,n){e.exports=function(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}},{}],86:[function(t,e,n){e.exports=function(t){return 0>t?-1:1}},{}],87:[function(t,e,n){e.exports=function(t,e){return Math.pow((1-t)/(1+t),e)}},{}],88:[function(t,e,n){e.exports=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}},{}],89:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e,n){var r=t*n,s=.5*t;return r=Math.pow((1-r)/(1+r),s),Math.tan(.5*(i-e))/r}},{}],90:[function(t,e,n){n.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"
},n.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},n.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},n.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},n.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},n.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},n.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},n.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},n.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},n.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},n.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},n.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},n.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},n.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},n.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},n.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],91:[function(t,e,n){n.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},n.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},n.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},n.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},n.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},n.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},n.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},n.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},n.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},n.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},n.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},n.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},n.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},n.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},n.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},n.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},n.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},n.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},n.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},n.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},n.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},n.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},n.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},n.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},n.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},n.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},n.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},n.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},n.hough={a:6378270,rf:297,ellipseName:"Hough"},n.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},n.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},n.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},n.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},n.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},n.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},n.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},n.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},n.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},n.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},n.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},n.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},n.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},n.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],92:[function(t,e,n){n.greenwich=0,n.lisbon=-9.131906111111,n.paris=2.337229166667,n.bogota=-74.080916666667,n.madrid=-3.687938888889,n.rome=12.452333333333,n.bern=7.439583333333,n.jakarta=106.807719444444,n.ferro=-17.666666666667,n.brussels=4.367975,n.stockholm=18.058277777778,n.athens=23.7163375,n.oslo=10.722916666667},{}],93:[function(t,e,n){n.ft={to_meter:.3048},n["us-ft"]={to_meter:1200/3937}},{}],94:[function(t,e,n){function i(t,e,n){var i;return Array.isArray(n)?(i=o(t,e,n),3===n.length?[i.x,i.y,i.z]:[i.x,i.y]):o(t,e,n)}function r(t){return t instanceof a?t:t.oProj?t.oProj:a(t)}function s(t,e,n){t=r(t);var s,a=!1;return"undefined"==typeof e?(e=t,t=h,a=!0):("undefined"!=typeof e.x||Array.isArray(e))&&(n=e,e=t,t=h,a=!0),e=r(e),n?i(t,e,n):(s={forward:function(n){return i(t,e,n)},inverse:function(n){return i(e,t,n)}},a&&(s.oProj=e),s)}var a=t("./Proj"),o=t("./transform"),h=a("WGS84");e.exports=s},{"./Proj":67,"./transform":131}],95:[function(t,e,n){var i=Math.PI/2,r=1,s=2,a=3,o=4,h=5,u=484813681109536e-20,l=1.0026,c=.3826834323650898,f=function(t){return this instanceof f?(this.datum_type=o,void(t&&(t.datumCode&&"none"===t.datumCode&&(this.datum_type=h),t.datum_params&&(this.datum_params=t.datum_params.map(parseFloat),(0!==this.datum_params[0]||0!==this.datum_params[1]||0!==this.datum_params[2])&&(this.datum_type=r),this.datum_params.length>3&&(0!==this.datum_params[3]||0!==this.datum_params[4]||0!==this.datum_params[5]||0!==this.datum_params[6])&&(this.datum_type=s,this.datum_params[3]*=u,this.datum_params[4]*=u,this.datum_params[5]*=u,this.datum_params[6]=this.datum_params[6]/1e6+1)),this.datum_type=t.grids?a:this.datum_type,this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,this.datum_type===a&&(this.grids=t.grids)))):new f(t)};f.prototype={compare_datums:function(t){return this.datum_type!==t.datum_type?!1:this.a!==t.a||Math.abs(this.es-t.es)>5e-11?!1:this.datum_type===r?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:this.datum_type===s?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:this.datum_type===a||t.datum_type===a?this.nadgrids===t.nadgrids:!0},geodetic_to_geocentric:function(t){var e,n,r,s,a,o,h,u=t.x,l=t.y,c=t.z?t.z:0,f=0;if(-i>l&&l>-1.001*i)l=-i;else if(l>i&&1.001*i>l)l=i;else if(-i>l||l>i)return null;return u>Math.PI&&(u-=2*Math.PI),a=Math.sin(l),h=Math.cos(l),o=a*a,s=this.a/Math.sqrt(1-this.es*o),e=(s+c)*h*Math.cos(u),n=(s+c)*h*Math.sin(u),r=(s*(1-this.es)+c)*a,t.x=e,t.y=n,t.z=r,f},geocentric_to_geodetic:function(t){var e,n,r,s,a,o,h,u,l,c,f,d,p,m,y,g,v,b=1e-12,x=b*b,w=30,_=t.x,M=t.y,E=t.z?t.z:0;if(p=!1,e=Math.sqrt(_*_+M*M),n=Math.sqrt(_*_+M*M+E*E),e/this.a<b){if(p=!0,y=0,n/this.a<b)return g=i,void(v=-this.b)}else y=Math.atan2(M,_);r=E/n,s=e/n,a=1/Math.sqrt(1-this.es*(2-this.es)*s*s),u=s*(1-this.es)*a,l=r*a,m=0;do m++,h=this.a/Math.sqrt(1-this.es*l*l),v=e*u+E*l-h*(1-this.es*l*l),o=this.es*h/(h+v),a=1/Math.sqrt(1-o*(2-o)*s*s),c=s*(1-o)*a,f=r*a,d=f*u-c*l,u=c,l=f;while(d*d>x&&w>m);return g=Math.atan(f/Math.abs(c)),t.x=y,t.y=g,t.z=v,t},geocentric_to_geodetic_noniter:function(t){var e,n,r,s,a,o,h,u,f,d,p,m,y,g,v,b,x,w=t.x,_=t.y,M=t.z?t.z:0;if(w=parseFloat(w),_=parseFloat(_),M=parseFloat(M),x=!1,0!==w)e=Math.atan2(_,w);else if(_>0)e=i;else if(0>_)e=-i;else if(x=!0,e=0,M>0)n=i;else{if(!(0>M))return n=i,void(r=-this.b);n=-i}return a=w*w+_*_,s=Math.sqrt(a),o=M*l,u=Math.sqrt(o*o+a),d=o/u,m=s/u,p=d*d*d,h=M+this.b*this.ep2*p,b=s-this.a*this.es*m*m*m,f=Math.sqrt(h*h+b*b),y=h/f,g=b/f,v=this.a/Math.sqrt(1-this.es*y*y),r=g>=c?s/g-v:-c>=g?s/-g-v:M/y+v*(this.es-1),x===!1&&(n=Math.atan(y/g)),t.x=e,t.y=n,t.z=r,t},geocentric_to_wgs84:function(t){if(this.datum_type===r)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(this.datum_type===s){var e=this.datum_params[0],n=this.datum_params[1],i=this.datum_params[2],a=this.datum_params[3],o=this.datum_params[4],h=this.datum_params[5],u=this.datum_params[6],l=u*(t.x-h*t.y+o*t.z)+e,c=u*(h*t.x+t.y-a*t.z)+n,f=u*(-o*t.x+a*t.y+t.z)+i;t.x=l,t.y=c,t.z=f}},geocentric_from_wgs84:function(t){if(this.datum_type===r)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(this.datum_type===s){var e=this.datum_params[0],n=this.datum_params[1],i=this.datum_params[2],a=this.datum_params[3],o=this.datum_params[4],h=this.datum_params[5],u=this.datum_params[6],l=(t.x-e)/u,c=(t.y-n)/u,f=(t.z-i)/u;t.x=l+h*c-o*f,t.y=-h*l+c+a*f,t.z=o*l-a*c+f}}},e.exports=f},{}],96:[function(t,e,n){var i=1,r=2,s=3,a=5,o=6378137,h=.006694379990141316;e.exports=function(t,e,n){function u(t){return t===i||t===r}var l,c,f;if(t.compare_datums(e))return n;if(t.datum_type===a||e.datum_type===a)return n;var d=t.a,p=t.es,m=e.a,y=e.es,g=t.datum_type;if(g===s)if(0===this.apply_gridshift(t,0,n))t.a=o,t.es=h;else{if(!t.datum_params)return t.a=d,t.es=t.es,n;for(l=1,c=0,f=t.datum_params.length;f>c;c++)l*=t.datum_params[c];if(0===l)return t.a=d,t.es=t.es,n;g=t.datum_params.length>3?r:i}return e.datum_type===s&&(e.a=o,e.es=h),(t.es!==e.es||t.a!==e.a||u(g)||u(e.datum_type))&&(t.geodetic_to_geocentric(n),u(t.datum_type)&&t.geocentric_to_wgs84(n),u(e.datum_type)&&e.geocentric_from_wgs84(n),e.geocentric_to_geodetic(n)),e.datum_type===s&&this.apply_gridshift(e,1,n),t.a=d,t.es=p,e.a=m,e.es=y,n}},{}],97:[function(t,e,n){function i(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?i[t]=s(arguments[1]):i[t]=a(arguments[1]):i[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?i.apply(e,t):i(t)});if("string"==typeof t){if(t in i)return i[t]}else"EPSG"in t?i["EPSG:"+t.EPSG]=t:"ESRI"in t?i["ESRI:"+t.ESRI]=t:"IAU2000"in t?i["IAU2000:"+t.IAU2000]=t:console.log(t);return}}var r=t("./global"),s=t("./projString"),a=t("./wkt");r(i),e.exports=i},{"./global":100,"./projString":104,"./wkt":132}],98:[function(t,e,n){var i=t("./constants/Datum"),r=t("./constants/Ellipsoid"),s=t("./extend"),a=t("./datum"),o=1e-10,h=.16666666666666666,u=.04722222222222222,l=.022156084656084655;e.exports=function(t){if(t.datumCode&&"none"!==t.datumCode){var e=i[t.datumCode];e&&(t.datum_params=e.towgs84?e.towgs84.split(","):null,t.ellps=e.ellipse,t.datumName=e.datumName?e.datumName:t.datumCode)}if(!t.a){var n=r[t.ellps]?r[t.ellps]:r.WGS84;s(t,n)}return t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<o)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(h+t.es*(u+t.es*l)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum||(t.datum=a(t)),t}},{"./constants/Datum":90,"./constants/Ellipsoid":91,"./datum":95,"./extend":99}],99:[function(t,e,n){e.exports=function(t,e){t=t||{};var n,i;if(!e)return t;for(i in e)n=e[i],void 0!==n&&(t[i]=n);return t}},{}],100:[function(t,e,n){e.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},{}],101:[function(t,e,n){var i=[t("./projections/tmerc"),t("./projections/utm"),t("./projections/sterea"),t("./projections/stere"),t("./projections/somerc"),t("./projections/omerc"),t("./projections/lcc"),t("./projections/krovak"),t("./projections/cass"),t("./projections/laea"),t("./projections/aea"),t("./projections/gnom"),t("./projections/cea"),t("./projections/eqc"),t("./projections/poly"),t("./projections/nzmg"),t("./projections/mill"),t("./projections/sinu"),t("./projections/moll"),t("./projections/eqdc"),t("./projections/vandg"),t("./projections/aeqd")];e.exports=function(t){i.forEach(function(e){t.Proj.projections.add(e)})}},{"./projections/aea":106,"./projections/aeqd":107,"./projections/cass":108,"./projections/cea":109,"./projections/eqc":110,"./projections/eqdc":111,"./projections/gnom":113,"./projections/krovak":114,"./projections/laea":115,"./projections/lcc":116,"./projections/mill":119,"./projections/moll":120,"./projections/nzmg":121,"./projections/omerc":122,"./projections/poly":123,"./projections/sinu":124,"./projections/somerc":125,"./projections/stere":126,"./projections/sterea":127,"./projections/tmerc":128,"./projections/utm":129,"./projections/vandg":130}],102:[function(t,e,n){var i=t("./core");i.defaultDatum="WGS84",i.Proj=t("./Proj"),i.WGS84=new i.Proj("WGS84"),i.Point=t("./Point"),i.toPoint=t("./common/toPoint"),i.defs=t("./defs"),i.transform=t("./transform"),i.mgrs=t("mgrs"),i.version=t("../package.json").version,t("./includedProjections")(i),e.exports=i},{"../package.json":133,"./Point":66,"./Proj":67,"./common/toPoint":88,"./core":94,"./defs":97,"./includedProjections":101,"./transform":131,mgrs:64}],103:[function(t,e,n){function i(t){return"string"==typeof t}function r(t){return t in h}function s(t){var e=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return e.reduce(function(e,n){return e+1+t.indexOf(n)},0)}function a(t){return"+"===t[0]}function o(t){return i(t)?r(t)?h[t]:s(t)?u(t):a(t)?l(t):void 0:t}var h=t("./defs"),u=t("./wkt"),l=t("./projString");e.exports=o},{"./defs":97,"./projString":104,"./wkt":132}],104:[function(t,e,n){var i=.017453292519943295,r=t("./constants/PrimeMeridian"),s=t("./constants/units");e.exports=function(t){var e={},n={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var e=t.split("=");e.push(!0),n[e[0].toLowerCase()]=e[1]});var a,o,h,u={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t)},lat_0:function(t){e.lat0=t*i},lat_1:function(t){e.lat1=t*i},lat_2:function(t){e.lat2=t*i},lat_ts:function(t){e.lat_ts=t*i},lon_0:function(t){e.long0=t*i},lon_1:function(t){e.long1=t*i},lon_2:function(t){e.long2=t*i},alpha:function(t){e.alpha=parseFloat(t)*i},lonc:function(t){e.longc=t*i},x_0:function(t){e.x0=parseFloat(t)},y_0:function(t){e.y0=parseFloat(t)},k_0:function(t){e.k0=parseFloat(t)},k:function(t){e.k0=parseFloat(t)},a:function(t){e.a=parseFloat(t)},b:function(t){e.b=parseFloat(t)},r_a:function(){e.R_A=!0},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=!0},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){e.to_meter=parseFloat(t)},units:function(t){e.units=t,s[t]&&(e.to_meter=s[t].to_meter)},from_greenwich:function(t){e.from_greenwich=t*i},pm:function(t){e.from_greenwich=(r[t]?r[t]:parseFloat(t))*i},nadgrids:function(t){"@null"===t?e.datumCode="none":e.nadgrids=t},axis:function(t){var n="ewnsud";3===t.length&&-1!==n.indexOf(t.substr(0,1))&&-1!==n.indexOf(t.substr(1,1))&&-1!==n.indexOf(t.substr(2,1))&&(e.axis=t)}};for(a in n)o=n[a],a in u?(h=u[a],"function"==typeof h?h(o):e[h]=o):e[a]=o;return"string"==typeof e.datumCode&&"WGS84"!==e.datumCode&&(e.datumCode=e.datumCode.toLowerCase()),e}},{"./constants/PrimeMeridian":92,"./constants/units":93}],105:[function(t,e,n){function i(t,e){var n=a.length;return t.names?(a[n]=t,t.names.forEach(function(t){s[t.toLowerCase()]=n}),this):(console.log(e),!0)}var r=[t("./projections/merc"),t("./projections/longlat")],s={},a=[];n.add=i,n.get=function(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!=typeof s[e]&&a[s[e]]?a[s[e]]:void 0},n.start=function(){r.forEach(i)}},{"./projections/longlat":117,"./projections/merc":118}],106:[function(t,e,n){var i=1e-10,r=t("../common/msfnz"),s=t("../common/qsfnz"),a=t("../common/adjust_lon"),o=t("../common/asinz");n.init=function(){Math.abs(this.lat1+this.lat2)<i||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=r(this.e3,this.sin_po,this.cos_po),this.qs1=s(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=r(this.e3,this.sin_po,this.cos_po),this.qs2=s(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=s(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>i?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},n.forward=function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=s(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,o=this.ns0*a(e-this.long0),h=r*Math.sin(o)+this.x0,u=this.rh-r*Math.cos(o)+this.y0;return t.x=h,t.y=u,t},n.inverse=function(t){var e,n,i,r,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,n)),s=a(r/this.ns0+this.long0),t.x=s,t.y=o,t},n.phi1z=function(t,e){var n,r,s,a,h,u=o(.5*e);if(i>t)return u;for(var l=t*t,c=1;25>=c;c++)if(n=Math.sin(u),r=Math.cos(u),s=t*n,a=1-s*s,h=.5*a*a/r*(e/(1-l)-n/a+.5/t*Math.log((1-s)/(1+s))),u+=h,Math.abs(h)<=1e-7)return u;return null},n.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":70,"../common/asinz":71,"../common/msfnz":80,"../common/qsfnz":85}],107:[function(t,e,n){var i=t("../common/adjust_lon"),r=Math.PI/2,s=1e-10,a=t("../common/mlfn"),o=t("../common/e0fn"),h=t("../common/e1fn"),u=t("../common/e2fn"),l=t("../common/e3fn"),c=t("../common/gN"),f=t("../common/asinz"),d=t("../common/imlfn");n.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},n.forward=function(t){var e,n,f,d,p,m,y,g,v,b,x,w,_,M,E,P,S,k,C,A,T,I,L,j=t.x,O=t.y,R=Math.sin(t.y),B=Math.cos(t.y),N=i(j-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=s?(t.x=this.x0+this.a*(r-O)*Math.sin(N),t.y=this.y0-this.a*(r-O)*Math.cos(N),t):Math.abs(this.sin_p12+1)<=s?(t.x=this.x0+this.a*(r+O)*Math.sin(N),t.y=this.y0+this.a*(r+O)*Math.cos(N),t):(k=this.sin_p12*R+this.cos_p12*B*Math.cos(N),P=Math.acos(k),S=P/Math.sin(P),t.x=this.x0+this.a*S*B*Math.sin(N),t.y=this.y0+this.a*S*(this.cos_p12*R-this.sin_p12*B*Math.cos(N)),t):(e=o(this.es),n=h(this.es),f=u(this.es),d=l(this.es),Math.abs(this.sin_p12-1)<=s?(p=this.a*a(e,n,f,d,r),m=this.a*a(e,n,f,d,O),t.x=this.x0+(p-m)*Math.sin(N),t.y=this.y0-(p-m)*Math.cos(N),t):Math.abs(this.sin_p12+1)<=s?(p=this.a*a(e,n,f,d,r),m=this.a*a(e,n,f,d,O),t.x=this.x0+(p+m)*Math.sin(N),t.y=this.y0+(p+m)*Math.cos(N),t):(y=R/B,g=c(this.a,this.e,this.sin_p12),v=c(this.a,this.e,R),b=Math.atan((1-this.es)*y+this.es*g*this.sin_p12/(v*B)),x=Math.atan2(Math.sin(N),this.cos_p12*Math.tan(b)-this.sin_p12*Math.cos(N)),C=0===x?Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math.abs(Math.abs(x)-Math.PI)<=s?-Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math.asin(Math.sin(N)*Math.cos(b)/Math.sin(x)),w=this.e*this.sin_p12/Math.sqrt(1-this.es),_=this.e*this.cos_p12*Math.cos(x)/Math.sqrt(1-this.es),M=w*_,E=_*_,A=C*C,T=A*C,I=T*C,L=I*C,P=g*C*(1-A*E*(1-E)/6+T/8*M*(1-2*E)+I/120*(E*(4-7*E)-3*w*w*(1-7*E))-L/48*M),t.x=this.x0+P*Math.sin(x),t.y=this.y0+P*Math.cos(x),t))},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,p,m,y,g,v,b,x,w,_,M,E,P,S,k,C,A,T,I,L,j,O;if(this.sphere){if(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*r*this.a)return;return n=e/this.a,p=Math.sin(n),m=Math.cos(n),y=this.long0,Math.abs(e)<=s?g=this.lat0:(g=f(m*this.sin_p12+t.y*p*this.cos_p12/e),v=Math.abs(this.lat0)-r,y=i(Math.abs(v)<=s?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*p,e*this.cos_p12*m-t.y*this.sin_p12*p))),t.x=y,t.y=g,t}return b=o(this.es),x=h(this.es),w=u(this.es),_=l(this.es),Math.abs(this.sin_p12-1)<=s?(M=this.a*a(b,x,w,_,r),e=Math.sqrt(t.x*t.x+t.y*t.y),E=M-e,g=d(E/this.a,b,x,w,_),y=i(this.long0+Math.atan2(t.x,-1*t.y)),t.x=y,t.y=g,t):Math.abs(this.sin_p12+1)<=s?(M=this.a*a(b,x,w,_,r),e=Math.sqrt(t.x*t.x+t.y*t.y),E=e-M,g=d(E/this.a,b,x,w,_),y=i(this.long0+Math.atan2(t.x,t.y)),t.x=y,t.y=g,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),k=Math.atan2(t.x,t.y),P=c(this.a,this.e,this.sin_p12),C=Math.cos(k),A=this.e*this.cos_p12*C,T=-A*A/(1-this.es),I=3*this.es*(1-T)*this.sin_p12*this.cos_p12*C/(1-this.es),L=e/P,j=L-T*(1+T)*Math.pow(L,3)/6-I*(1+3*T)*Math.pow(L,4)/24,O=1-T*j*j/2-L*j*j*j/6,S=Math.asin(this.sin_p12*Math.cos(j)+this.cos_p12*Math.sin(j)*C),y=i(this.long0+Math.asin(Math.sin(k)*Math.sin(j)/Math.cos(S))),g=Math.atan((1-this.es*O*this.sin_p12/Math.sin(S))*Math.tan(S)/(1-this.es)),t.x=y,t.y=g,t)},n.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":70,"../common/asinz":71,"../common/e0fn":72,"../common/e1fn":73,"../common/e2fn":74,"../common/e3fn":75,"../common/gN":76,"../common/imlfn":77,"../common/mlfn":79}],108:[function(t,e,n){var i=t("../common/mlfn"),r=t("../common/e0fn"),s=t("../common/e1fn"),a=t("../common/e2fn"),o=t("../common/e3fn"),h=t("../common/gN"),u=t("../common/adjust_lon"),l=t("../common/adjust_lat"),c=t("../common/imlfn"),f=Math.PI/2,d=1e-10;n.init=function(){this.sphere||(this.e0=r(this.es),this.e1=s(this.es),this.e2=a(this.es),this.e3=o(this.es),this.ml0=this.a*i(this.e0,this.e1,this.e2,this.e3,this.lat0))},n.forward=function(t){var e,n,r=t.x,s=t.y;if(r=u(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(s),Math.cos(r))-this.lat0);else{var a=Math.sin(s),o=Math.cos(s),l=h(this.a,this.e,a),c=Math.tan(s)*Math.tan(s),f=r*Math.cos(s),d=f*f,p=this.es*o*o/(1-this.es),m=this.a*i(this.e0,this.e1,this.e2,this.e3,s);e=l*f*(1-d*c*(1/6-(8-c+8*p)*d/120)),n=m-this.ml0+l*a/o*d*(.5+(5-c+6*p)*d/24)}return t.x=e+this.x0,t.y=n+this.y0,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var s=r+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(s))}else{var a=this.ml0/this.a+r,o=c(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-f)<=d)return t.x=this.long0,t.y=f,0>r&&(t.y*=-1),t;var p=h(this.a,this.e,Math.sin(o)),m=p*p*p/this.a/this.a*(1-this.es),y=Math.pow(Math.tan(o),2),g=i*this.a/p,v=g*g;e=o-p*Math.tan(o)/m*g*g*(.5-(1+3*y)*g*g/24),n=g*(1-v*(y/3+(1+3*y)*y*v/15))/Math.cos(o)}return t.x=u(n+this.long0),t.y=l(e),t},n.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":69,"../common/adjust_lon":70,"../common/e0fn":72,"../common/e1fn":73,"../common/e2fn":74,"../common/e3fn":75,"../common/gN":76,"../common/imlfn":77,"../common/mlfn":79}],109:[function(t,e,n){var i=t("../common/adjust_lon"),r=t("../common/qsfnz"),s=t("../common/msfnz"),a=t("../common/iqsfnz");n.init=function(){this.sphere||(this.k0=s(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},n.forward=function(t){var e,n,s=t.x,a=t.y,o=i(s-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var h=r(this.e,Math.sin(a));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*h*.5/this.k0}return t.x=e,t.y=n,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=i(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=a(this.e,2*t.y*this.k0/this.a),e=i(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},n.names=["cea"]},{"../common/adjust_lon":70,"../common/iqsfnz":78,"../common/msfnz":80,"../common/qsfnz":85}],110:[function(t,e,n){var i=t("../common/adjust_lon"),r=t("../common/adjust_lat");n.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},n.forward=function(t){var e=t.x,n=t.y,s=i(e-this.long0),a=r(n-this.lat0);return t.x=this.x0+this.a*s*this.rc,t.y=this.y0+this.a*a,t},n.inverse=function(t){var e=t.x,n=t.y;return t.x=i(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=r(this.lat0+(n-this.y0)/this.a),t},n.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":69,"../common/adjust_lon":70}],111:[function(t,e,n){var i=t("../common/e0fn"),r=t("../common/e1fn"),s=t("../common/e2fn"),a=t("../common/e3fn"),o=t("../common/msfnz"),h=t("../common/mlfn"),u=t("../common/adjust_lon"),l=t("../common/adjust_lat"),c=t("../common/imlfn"),f=1e-10;n.init=function(){Math.abs(this.lat1+this.lat2)<f||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=r(this.es),this.e2=s(this.es),this.e3=a(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=o(this.e,this.sinphi,this.cosphi),this.ml1=h(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<f?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=o(this.e,this.sinphi,this.cosphi),this.ml2=h(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=h(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},n.forward=function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=h(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var s=this.ns*u(n-this.long0),a=this.x0+e*Math.sin(s),o=this.y0+this.rh-e*Math.cos(s);return t.x=a,t.y=o,t},n.inverse=function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,i,r;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(0!==n&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=u(this.long0+s/this.ns),i=l(this.g-n/this.a),t.x=r,t.y=i,t;var a=this.g-n/this.a;return i=c(a,this.e0,this.e1,this.e2,this.e3),r=u(this.long0+s/this.ns),t.x=r,t.y=i,t},n.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":69,"../common/adjust_lon":70,"../common/e0fn":72,"../common/e1fn":73,"../common/e2fn":74,"../common/e3fn":75,"../common/imlfn":77,"../common/mlfn":79,"../common/msfnz":80}],112:[function(t,e,n){var i=Math.PI/4,r=t("../common/srat"),s=Math.PI/2,a=20;n.init=function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i)/(Math.pow(Math.tan(.5*this.lat0+i),this.C)*r(this.e*t,this.ratexp))},n.forward=function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i),this.C)*r(this.e*Math.sin(n),this.ratexp))-s,t.x=this.C*e,t},n.inverse=function(t){for(var e=1e-14,n=t.x/this.C,o=t.y,h=Math.pow(Math.tan(.5*o+i)/this.K,1/this.C),u=a;u>0&&(o=2*Math.atan(h*r(this.e*Math.sin(t.y),-.5*this.e))-s,!(Math.abs(o-t.y)<e));--u)t.y=o;return u?(t.x=n,t.y=o,t):null},n.names=["gauss"]},{"../common/srat":87}],113:[function(t,e,n){var i=t("../common/adjust_lon"),r=1e-10,s=t("../common/asinz");n.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},n.forward=function(t){var e,n,s,a,o,h,u,l,c=t.x,f=t.y;return s=i(c-this.long0),e=Math.sin(f),n=Math.cos(f),a=Math.cos(s),h=this.sin_p14*e+this.cos_p14*n*a,o=1,h>0||Math.abs(h)<=r?(u=this.x0+this.a*o*n*Math.sin(s)/h,l=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*n*a)/h):(u=this.x0+this.infinity_dist*n*Math.sin(s),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*a)),t.x=u,t.y=l,t},n.inverse=function(t){var e,n,r,a,o,h;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(a=Math.atan2(e,this.rc),n=Math.sin(a),r=Math.cos(a),h=s(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=i(this.long0+o)):(h=this.phic0,o=0),t.x=o,t.y=h,t},n.names=["gnom"]},{"../common/adjust_lon":70,"../common/asinz":71}],114:[function(t,e,n){var i=t("../common/adjust_lon");n.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},n.forward=function(t){var e,n,r,s,a,o,h,u=t.x,l=t.y,c=i(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),a=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(s)),o=this.n*a,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=h*Math.cos(o)/1,t.x=h*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},n.inverse=function(t){var e,n,i,r,s,a,o,h,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),r=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,o=e,h=0;var l=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(h=1),o=t.y,l+=1;while(0===h&&15>l);return l>=15?null:t},n.names=["Krovak","krovak"]},{"../common/adjust_lon":70}],115:[function(t,e,n){var i=Math.PI/2,r=Math.PI/4,s=1e-10,a=t("../common/qsfnz"),o=t("../common/adjust_lon");n.S_POLE=1,n.N_POLE=2,n.EQUIT=3,n.OBLIQ=4,n.init=function(){var t=Math.abs(this.lat0);if(Math.abs(t-i)<s?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<s?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=a(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=a(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},n.forward=function(t){var e,n,h,u,l,c,f,d,p,m,y=t.x,g=t.y;if(y=o(y-this.long0),this.sphere){if(l=Math.sin(g),m=Math.cos(g),h=Math.cos(y),this.mode===this.OBLIQ||this.mode===this.EQUIT){
if(n=this.mode===this.EQUIT?1+m*h:1+this.sinph0*l+this.cosph0*m*h,s>=n)return null;n=Math.sqrt(2/n),e=n*m*Math.sin(y),n*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*m*h}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),Math.abs(g+this.phi0)<s)return null;n=r-.5*g,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(y),n*=h}}else{switch(f=0,d=0,p=0,h=Math.cos(y),u=Math.sin(y),l=Math.sin(g),c=a(this.e,l),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=c/this.qp,d=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:p=1+this.sinb1*f+this.cosb1*d*h;break;case this.EQUIT:p=1+d*h;break;case this.N_POLE:p=i+g,c=this.qp-c;break;case this.S_POLE:p=g-i,c=this.qp+c}if(Math.abs(p)<s)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:p=Math.sqrt(2/p),n=this.mode===this.OBLIQ?this.ymf*p*(this.cosb1*f-this.sinb1*d*h):(p=Math.sqrt(2/(1+d*h)))*f*this.ymf,e=this.xmf*p*d*u;break;case this.N_POLE:case this.S_POLE:c>=0?(e=(p=Math.sqrt(c))*u,n=h*(this.mode===this.S_POLE?p:-p)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,a,h,u,l,c=t.x/this.a,f=t.y/this.a;if(this.sphere){var d,p=0,m=0;if(d=Math.sqrt(c*c+f*f),n=.5*d,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(m=Math.sin(n),p=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(d)<=s?0:Math.asin(f*m/d),c*=m,f=p*d;break;case this.OBLIQ:n=Math.abs(d)<=s?this.phi0:Math.asin(p*this.sinph0+f*m*this.cosph0/d),c*=m*this.cosph0,f=(p-Math.sin(n)*this.sinph0)*d;break;case this.N_POLE:f=-f,n=i-n;break;case this.S_POLE:n-=i}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,f):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,f*=this.dd,u=Math.sqrt(c*c+f*f),s>u)return t.x=0,t.y=this.phi0,t;a=2*Math.asin(.5*u/this.rq),r=Math.cos(a),c*=a=Math.sin(a),this.mode===this.OBLIQ?(l=r*this.sinb1+f*a*this.cosb1/u,h=this.qp*l,f=u*this.cosb1*r-f*this.sinb1*a):(l=f*a/u,h=this.qp*l,f=u*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),h=c*c+f*f,!h)return t.x=0,t.y=this.phi0,t;l=1-h/this.qp,this.mode===this.S_POLE&&(l=-l)}e=Math.atan2(c,f),n=this.authlat(Math.asin(l),this.apa)}return t.x=o(this.long0+e),t.y=n,t},n.P00=.3333333333333333,n.P01=.17222222222222222,n.P02=.10257936507936508,n.P10=.06388888888888888,n.P11=.0664021164021164,n.P20=.016415012942191543,n.authset=function(t){var e,n=[];return n[0]=t*this.P00,e=t*t,n[0]+=e*this.P01,n[1]=e*this.P10,e*=t,n[0]+=e*this.P02,n[1]+=e*this.P11,n[2]=e*this.P20,n},n.authlat=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)},n.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":70,"../common/qsfnz":85}],116:[function(t,e,n){var i=1e-10,r=t("../common/msfnz"),s=t("../common/tsfnz"),a=Math.PI/2,o=t("../common/sign"),h=t("../common/adjust_lon"),u=t("../common/phi2z");n.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<i)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),a=r(this.e,e,n),o=s(this.e,this.lat1,e),h=Math.sin(this.lat2),u=Math.cos(this.lat2),l=r(this.e,h,u),c=s(this.e,this.lat2,h),f=s(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>i?this.ns=Math.log(a/l)/Math.log(o/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}},n.forward=function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=i&&(n=o(n)*(a-2*i));var r,u,l=Math.abs(Math.abs(n)-a);if(l>i)r=s(this.e,n,Math.sin(n)),u=this.a*this.f0*Math.pow(r,this.ns);else{if(l=n*this.ns,0>=l)return null;u=0}var c=this.ns*h(e-this.long0);return t.x=this.k0*(u*Math.sin(c))+this.x0,t.y=this.k0*(this.rh-u*Math.cos(c))+this.y0,t},n.inverse=function(t){var e,n,i,r,s,o=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+l*l),n=1):(e=-Math.sqrt(o*o+l*l),n=-1);var c=0;if(0!==e&&(c=Math.atan2(n*o,n*l)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),r=u(this.e,i),-9999===r)return null}else r=-a;return s=h(c/this.ns+this.long0),t.x=s,t.y=r,t},n.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":70,"../common/msfnz":80,"../common/phi2z":81,"../common/sign":86,"../common/tsfnz":89}],117:[function(t,e,n){function i(t){return t}n.init=function(){},n.forward=i,n.inverse=i,n.names=["longlat","identity"]},{}],118:[function(t,e,n){var i=t("../common/msfnz"),r=Math.PI/2,s=1e-10,a=57.29577951308232,o=t("../common/adjust_lon"),h=Math.PI/4,u=t("../common/tsfnz"),l=t("../common/phi2z");n.init=function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=i(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},n.forward=function(t){var e=t.x,n=t.y;if(n*a>90&&-90>n*a&&e*a>180&&-180>e*a)return null;var i,l;if(Math.abs(Math.abs(n)-r)<=s)return null;if(this.sphere)i=this.x0+this.a*this.k0*o(e-this.long0),l=this.y0+this.a*this.k0*Math.log(Math.tan(h+.5*n));else{var c=Math.sin(n),f=u(this.e,n,c);i=this.x0+this.a*this.k0*o(e-this.long0),l=this.y0-this.a*this.k0*Math.log(f)}return t.x=i,t.y=l,t},n.inverse=function(t){var e,n,i=t.x-this.x0,s=t.y-this.y0;if(this.sphere)n=r-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var a=Math.exp(-s/(this.a*this.k0));if(n=l(this.e,a),-9999===n)return null}return e=o(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},n.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":70,"../common/msfnz":80,"../common/phi2z":81,"../common/tsfnz":89}],119:[function(t,e,n){var i=t("../common/adjust_lon");n.init=function(){},n.forward=function(t){var e=t.x,n=t.y,r=i(e-this.long0),s=this.x0+this.a*r,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=s,t.y=a,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e=i(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},n.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":70}],120:[function(t,e,n){var i=t("../common/adjust_lon"),r=1e-10;n.init=function(){},n.forward=function(t){for(var e=t.x,n=t.y,s=i(e-this.long0),a=n,o=Math.PI*Math.sin(n),h=0;!0;h++){var u=-(a+Math.sin(a)-o)/(1+Math.cos(a));if(a+=u,Math.abs(u)<r)break}a/=2,Math.PI/2-Math.abs(n)<r&&(s=0);var l=.900316316158*this.a*s*Math.cos(a)+this.x0,c=1.4142135623731*this.a*Math.sin(a)+this.y0;return t.x=l,t.y=c,t},n.inverse=function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=i(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var s=Math.asin(n);return t.x=r,t.y=s,t},n.names=["Mollweide","moll"]},{"../common/adjust_lon":70}],121:[function(t,e,n){var i=484813681109536e-20;n.iterations=1,n.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},n.forward=function(t){var e,n=t.x,r=t.y,s=r-this.lat0,a=n-this.long0,o=s/i*1e-5,h=a,u=1,l=0;for(e=1;10>=e;e++)u*=o,l+=this.A[e]*u;var c,f,d=l,p=h,m=1,y=0,g=0,v=0;for(e=1;6>=e;e++)c=m*d-y*p,f=y*d+m*p,m=c,y=f,g=g+this.B_re[e]*m-this.B_im[e]*y,v=v+this.B_im[e]*m+this.B_re[e]*y;return t.x=v*this.a+this.x0,t.y=g*this.a+this.y0,t},n.inverse=function(t){var e,n,r,s=t.x,a=t.y,o=s-this.x0,h=a-this.y0,u=h/this.a,l=o/this.a,c=1,f=0,d=0,p=0;for(e=1;6>=e;e++)n=c*u-f*l,r=f*u+c*l,c=n,f=r,d=d+this.C_re[e]*c-this.C_im[e]*f,p=p+this.C_im[e]*c+this.C_re[e]*f;for(var m=0;m<this.iterations;m++){var y,g,v=d,b=p,x=u,w=l;for(e=2;6>=e;e++)y=v*d-b*p,g=b*d+v*p,v=y,b=g,x+=(e-1)*(this.B_re[e]*v-this.B_im[e]*b),w+=(e-1)*(this.B_im[e]*v+this.B_re[e]*b);v=1,b=0;var _=this.B_re[1],M=this.B_im[1];for(e=2;6>=e;e++)y=v*d-b*p,g=b*d+v*p,v=y,b=g,_+=e*(this.B_re[e]*v-this.B_im[e]*b),M+=e*(this.B_im[e]*v+this.B_re[e]*b);var E=_*_+M*M;d=(x*_+w*M)/E,p=(w*_-x*M)/E}var P=d,S=p,k=1,C=0;for(e=1;9>=e;e++)k*=P,C+=this.D[e]*k;var A=this.lat0+C*i*1e5,T=this.long0+S;return t.x=T,t.y=A,t},n.names=["New_Zealand_Map_Grid","nzmg"]},{}],122:[function(t,e,n){var i=t("../common/tsfnz"),r=t("../common/adjust_lon"),s=t("../common/phi2z"),a=Math.PI/2,o=Math.PI/4,h=1e-10;n.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var s=i(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));1>a*a&&(a=1);var o,h;if(isNaN(this.longc)){var u=i(this.e,this.lat1,Math.sin(this.lat1)),l=i(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(s,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(s,this.bl);var c=Math.pow(u,this.bl),f=Math.pow(l,this.bl);o=this.el/c,h=.5*(o-1/o);var d=(this.el*this.el-f*c)/(this.el*this.el+f*c),p=(f-c)/(f+c),m=r(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(d*Math.tan(.5*this.bl*m)/p)/this.bl,this.long0=r(this.long0);var y=r(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*y)/h),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else o=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=o*Math.pow(s,this.bl),h=.5*(o-1/o),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(h*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},n.forward=function(t){var e,n,s,u=t.x,l=t.y,c=r(u-this.long0);if(Math.abs(Math.abs(l)-a)<=h)s=l>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(o+s*this.gamma0*.5)),e=-1*s*a*this.al/this.bl;else{var f=i(this.e,l,Math.sin(l)),d=this.el/Math.pow(f,this.bl),p=.5*(d-1/d),m=.5*(d+1/d),y=Math.sin(this.bl*c),g=(p*Math.sin(this.gamma0)-y*Math.cos(this.gamma0))/m;n=Math.abs(Math.abs(g)-1)<=h?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-g)/(1+g))/this.bl,e=Math.abs(Math.cos(this.bl*c))<=h?this.al*this.bl*c:this.al*Math.atan2(p*Math.cos(this.gamma0)+y*Math.sin(this.gamma0),Math.cos(this.bl*c))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},n.inverse=function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var i=Math.exp(-1*this.bl*n/this.al),o=.5*(i-1/i),u=.5*(i+1/i),l=Math.sin(this.bl*e/this.al),c=(l*Math.cos(this.gamma0)+o*Math.sin(this.gamma0))/u,f=Math.pow(this.el/Math.sqrt((1+c)/(1-c)),1/this.bl);return Math.abs(c-1)<h?(t.x=this.long0,t.y=a):Math.abs(c+1)<h?(t.x=this.long0,t.y=-1*a):(t.y=s(this.e,f),t.x=r(this.long0-Math.atan2(o*Math.cos(this.gamma0)-l*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},n.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":70,"../common/phi2z":81,"../common/tsfnz":89}],123:[function(t,e,n){var i=t("../common/e0fn"),r=t("../common/e1fn"),s=t("../common/e2fn"),a=t("../common/e3fn"),o=t("../common/adjust_lon"),h=t("../common/adjust_lat"),u=t("../common/mlfn"),l=1e-10,c=t("../common/gN"),f=20;n.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=r(this.es),this.e2=s(this.es),this.e3=a(this.es),this.ml0=this.a*u(this.e0,this.e1,this.e2,this.e3,this.lat0)},n.forward=function(t){var e,n,i,r=t.x,s=t.y,a=o(r-this.long0);if(i=a*Math.sin(s),this.sphere)Math.abs(s)<=l?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(s),n=this.a*(h(s-this.lat0)+(1-Math.cos(i))/Math.tan(s)));else if(Math.abs(s)<=l)e=this.a*a,n=-1*this.ml0;else{var f=c(this.a,this.e,Math.sin(s))/Math.tan(s);e=f*Math.sin(i),n=this.a*u(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+f*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},n.inverse=function(t){var e,n,i,r,s,a,h,c,d;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=l)e=o(i/this.a+this.long0),n=0;else{a=this.lat0+r/this.a,h=i*i/this.a/this.a+a*a,c=a;var p;for(s=f;s;--s)if(p=Math.tan(c),d=-1*(a*(c*p+1)-c-.5*(c*c+h)*p)/((c-a)/p-1),c+=d,Math.abs(d)<=l){n=c;break}e=o(this.long0+Math.asin(i*Math.tan(c)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=l)n=0,e=o(this.long0+i/this.a);else{a=(this.ml0+r)/this.a,h=i*i/this.a/this.a+a*a,c=a;var m,y,g,v,b;for(s=f;s;--s)if(b=this.e*Math.sin(c),m=Math.sqrt(1-b*b)*Math.tan(c),y=this.a*u(this.e0,this.e1,this.e2,this.e3,c),g=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),v=y/this.a,d=(a*(m*v+1)-v-.5*m*(v*v+h))/(this.es*Math.sin(2*c)*(v*v+h-2*a*v)/(4*m)+(a-v)*(m*g-2/Math.sin(2*c))-g),c-=d,Math.abs(d)<=l){n=c;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=o(this.long0+Math.asin(i*m/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},n.names=["Polyconic","poly"]},{"../common/adjust_lat":69,"../common/adjust_lon":70,"../common/e0fn":72,"../common/e1fn":73,"../common/e2fn":74,"../common/e3fn":75,"../common/gN":76,"../common/mlfn":79}],124:[function(t,e,n){var i=t("../common/adjust_lon"),r=t("../common/adjust_lat"),s=t("../common/pj_enfn"),a=20,o=t("../common/pj_mlfn"),h=t("../common/pj_inv_mlfn"),u=Math.PI/2,l=1e-10,c=t("../common/asinz");n.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=s(this.es)},n.forward=function(t){var e,n,r=t.x,s=t.y;if(r=i(r-this.long0),this.sphere){if(this.m)for(var h=this.n*Math.sin(s),u=a;u;--u){var c=(this.m*s+Math.sin(s)-h)/(this.m+Math.cos(s));if(s-=c,Math.abs(c)<l)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;e=this.a*this.C_x*r*(this.m+Math.cos(s)),n=this.a*this.C_y*s}else{var f=Math.sin(s),d=Math.cos(s);n=this.a*o(s,f,d,this.en),e=this.a*r*d/Math.sqrt(1-this.es*f*f)}return t.x=e,t.y=n,t},n.inverse=function(t){var e,n,s,a;return t.x-=this.x0,s=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,s/=this.C_x*(this.m+Math.cos(e)),this.m?e=c((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=c(Math.sin(e)/this.n)),s=i(s+this.long0),e=r(e)):(e=h(t.y/this.a,this.es,this.en),a=Math.abs(e),u>a?(a=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(e)),s=i(n)):u>a-l&&(s=this.long0)),t.x=s,t.y=e,t},n.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":69,"../common/adjust_lon":70,"../common/asinz":71,"../common/pj_enfn":82,"../common/pj_inv_mlfn":83,"../common/pj_mlfn":84}],125:[function(t,e,n){n.init=function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=this.rf,r=1/i,s=2*r-Math.pow(r,2),a=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*h+this.alpha*a/2*u},n.forward=function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*a+this.x0,t},n.inverse=function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),a=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),o=this.lambda0+a/this.alpha,h=0,u=s,l=-1e3,c=0;Math.abs(u-l)>1e-7;){if(++c>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),l=u,u=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=o,t.y=u,t},n.names=["somerc"]},{}],126:[function(t,e,n){var i=Math.PI/2,r=1e-10,s=t("../common/sign"),a=t("../common/msfnz"),o=t("../common/tsfnz"),h=t("../common/phi2z"),u=t("../common/adjust_lon");n.ssfn_=function(t,e,n){return e*=n,Math.tan(.5*(i+t))*Math.pow((1-e)/(1+e),.5*n)},n.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r&&(this.k0=.5*(1+s(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=r&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r&&(this.k0=.5*this.cons*a(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/o(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=a(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-i,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},n.forward=function(t){var e,n,s,a,h,l,c=t.x,f=t.y,d=Math.sin(f),p=Math.cos(f),m=u(c-this.long0);return Math.abs(Math.abs(c-this.long0)-Math.PI)<=r&&Math.abs(f+this.lat0)<=r?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*d+this.coslat0*p*Math.cos(m)),t.x=this.a*e*p*Math.sin(m)+this.x0,t.y=this.a*e*(this.coslat0*d-this.sinlat0*p*Math.cos(m))+this.y0,t):(n=2*Math.atan(this.ssfn_(f,d,this.e))-i,a=Math.cos(n),s=Math.sin(n),Math.abs(this.coslat0)<=r?(h=o(this.e,f*this.con,this.con*d),l=2*this.a*this.k0*h/this.cons,t.x=this.x0+l*Math.sin(c-this.long0),t.y=this.y0-this.con*l*Math.cos(c-this.long0),t):(Math.abs(this.sinlat0)<r?(e=2*this.a*this.k0/(1+a*Math.cos(m)),t.y=e*s):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*a*Math.cos(m))),t.y=e*(this.cosX0*s-this.sinX0*a*Math.cos(m))+this.y0),t.x=e*a*Math.sin(m)+this.x0,t))},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,s,a,o,l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(l/(.5*this.a*this.k0));return e=this.long0,n=this.lat0,r>=l?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/l),e=u(Math.abs(this.coslat0)<r?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(c),l*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=r){if(r>=l)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,s=l*this.cons/(2*this.a*this.k0),n=this.con*h(this.e,s),e=this.con*u(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else a=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,r>=l?o=this.X0:(o=Math.asin(Math.cos(a)*this.sinX0+t.y*Math.sin(a)*this.cosX0/l),e=u(this.long0+Math.atan2(t.x*Math.sin(a),l*this.cosX0*Math.cos(a)-t.y*this.sinX0*Math.sin(a)))),n=-1*h(this.e,Math.tan(.5*(i+o)));return t.x=e,t.y=n,t},n.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},{"../common/adjust_lon":70,"../common/msfnz":80,"../common/phi2z":81,"../common/sign":86,"../common/tsfnz":89}],127:[function(t,e,n){var i=t("./gauss"),r=t("../common/adjust_lon");n.init=function(){i.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},n.forward=function(t){var e,n,s,a;return t.x=r(t.x-this.long0),i.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),s=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*s),t.x=a*n*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*n*s),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},n.inverse=function(t){var e,n,s,a,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var h=2*Math.atan2(o,this.R2);e=Math.sin(h),n=Math.cos(h),a=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),s=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else a=this.phic0,s=0;return t.x=s,t.y=a,i.inverse.apply(this,[t]),t.x=r(t.x+this.long0),t},n.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":70,"./gauss":112}],128:[function(t,e,n){var i=t("../common/e0fn"),r=t("../common/e1fn"),s=t("../common/e2fn"),a=t("../common/e3fn"),o=t("../common/mlfn"),h=t("../common/adjust_lon"),u=Math.PI/2,l=1e-10,c=t("../common/sign"),f=t("../common/asinz");n.init=function(){this.e0=i(this.es),this.e1=r(this.es),this.e2=s(this.es),this.e3=a(this.es),this.ml0=this.a*o(this.e0,this.e1,this.e2,this.e3,this.lat0)},n.forward=function(t){var e,n,i,r=t.x,s=t.y,a=h(r-this.long0),u=Math.sin(s),l=Math.cos(s);if(this.sphere){var c=l*Math.sin(a);if(Math.abs(Math.abs(c)-1)<1e-10)return 93;n=.5*this.a*this.k0*Math.log((1+c)/(1-c)),e=Math.acos(l*Math.cos(a)/Math.sqrt(1-c*c)),0>s&&(e=-e),i=this.a*this.k0*(e-this.lat0)}else{var f=l*a,d=Math.pow(f,2),p=this.ep2*Math.pow(l,2),m=Math.tan(s),y=Math.pow(m,2);e=1-this.es*Math.pow(u,2);var g=this.a/Math.sqrt(e),v=this.a*o(this.e0,this.e1,this.e2,this.e3,s);n=this.k0*g*f*(1+d/6*(1-y+p+d/20*(5-18*y+Math.pow(y,2)+72*p-58*this.ep2)))+this.x0,i=this.k0*(v-this.ml0+g*m*(d*(.5+d/24*(5-y+9*p+4*Math.pow(p,2)+d/30*(61-58*y+Math.pow(y,2)+600*p-330*this.ep2)))))+this.y0}return t.x=n,t.y=i,t},n.inverse=function(t){var e,n,i,r,s,a,o=6;if(this.sphere){var d=Math.exp(t.x/(this.a*this.k0)),p=.5*(d-1/d),m=this.lat0+t.y/(this.a*this.k0),y=Math.cos(m);e=Math.sqrt((1-y*y)/(1+p*p)),s=f(e),0>m&&(s=-s),a=0===p&&0===y?this.long0:h(Math.atan2(p,y)+this.long0)}else{var g=t.x-this.x0,v=t.y-this.y0;for(e=(this.ml0+v/this.k0)/this.a,n=e,r=0;!0&&(i=(e+this.e1*Math.sin(2*n)-this.e2*Math.sin(4*n)+this.e3*Math.sin(6*n))/this.e0-n,n+=i,!(Math.abs(i)<=l));r++)if(r>=o)return 95;if(Math.abs(n)<u){var b=Math.sin(n),x=Math.cos(n),w=Math.tan(n),_=this.ep2*Math.pow(x,2),M=Math.pow(_,2),E=Math.pow(w,2),P=Math.pow(E,2);e=1-this.es*Math.pow(b,2);var S=this.a/Math.sqrt(e),k=S*(1-this.es)/e,C=g/(S*this.k0),A=Math.pow(C,2);s=n-S*w*A/k*(.5-A/24*(5+3*E+10*_-4*M-9*this.ep2-A/30*(61+90*E+298*_+45*P-252*this.ep2-3*M))),a=h(this.long0+C*(1-A/6*(1+2*E+_-A/20*(5-2*_+28*E-3*M+8*this.ep2+24*P)))/x)}else s=u*c(v),a=this.long0}return t.x=a,t.y=s,t},n.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":70,"../common/asinz":71,"../common/e0fn":72,"../common/e1fn":73,"../common/e2fn":74,"../common/e3fn":75,"../common/mlfn":79,"../common/sign":86}],129:[function(t,e,n){var i=.017453292519943295,r=t("./tmerc");n.dependsOn="tmerc",n.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*i,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,r.init.apply(this),this.forward=r.forward,this.inverse=r.inverse)},n.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":128}],130:[function(t,e,n){var i=t("../common/adjust_lon"),r=Math.PI/2,s=1e-10,a=t("../common/asinz");n.init=function(){this.R=this.a},n.forward=function(t){var e,n,o=t.x,h=t.y,u=i(o-this.long0);Math.abs(h)<=s&&(e=this.x0+this.R*u,n=this.y0);var l=a(2*Math.abs(h/Math.PI));(Math.abs(u)<=s||Math.abs(Math.abs(h)-r)<=s)&&(e=this.x0,n=h>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var c=.5*Math.abs(Math.PI/u-u/Math.PI),f=c*c,d=Math.sin(l),p=Math.cos(l),m=p/(d+p-1),y=m*m,g=m*(2/d-1),v=g*g,b=Math.PI*this.R*(c*(m-v)+Math.sqrt(f*(m-v)*(m-v)-(v+f)*(y-v)))/(v+f);0>u&&(b=-b),e=this.x0+b;var x=f+m;return b=Math.PI*this.R*(g*x-c*Math.sqrt((v+f)*(f+1)-x*x))/(v+f),n=h>=0?this.y0+b:this.y0-b,t.x=e,t.y=n,t},n.inverse=function(t){var e,n,r,a,o,h,u,l,c,f,d,p,m;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,r=t.x/d,a=t.y/d,o=r*r+a*a,h=-Math.abs(a)*(1+o),u=h-2*a*a+r*r,l=-2*h+1+2*a*a+o*o,m=a*a/l+(2*u*u*u/l/l/l-9*h*u/l/l)/27,c=(h-u*u/3/l)/l,f=2*Math.sqrt(-c/3),d=3*m/c/f,Math.abs(d)>1&&(d=d>=0?1:-1),p=Math.acos(d)/3,n=t.y>=0?(-f*Math.cos(p+Math.PI/3)-u/3/l)*Math.PI:-(-f*Math.cos(p+Math.PI/3)-u/3/l)*Math.PI,e=Math.abs(r)<s?this.long0:i(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-a*a)+o*o))/2/r),t.x=e,t.y=n,t},n.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":70,"../common/asinz":71}],131:[function(t,e,n){var i=.017453292519943295,r=57.29577951308232,s=1,a=2,o=t("./datum_transform"),h=t("./adjust_axis"),u=t("./Proj"),l=t("./common/toPoint");e.exports=function c(t,e,n){function f(t,e){return(t.datum.datum_type===s||t.datum.datum_type===a)&&"WGS84"!==e.datumCode}var d;return Array.isArray(n)&&(n=l(n)),t.datum&&e.datum&&(f(t,e)||f(e,t))&&(d=new u("WGS84"),c(t,d,n),t=d),"enu"!==t.axis&&h(t,!1,n),"longlat"===t.projName?(n.x*=i,n.y*=i):(t.to_meter&&(n.x*=t.to_meter,n.y*=t.to_meter),t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=o(t.datum,e.datum,n),e.from_greenwich&&(n.x-=e.from_greenwich),"longlat"===e.projName?(n.x*=r,n.y*=r):(e.forward(n),e.to_meter&&(n.x/=e.to_meter,n.y/=e.to_meter)),"enu"!==e.axis&&h(e,!0,n),n}},{"./Proj":67,"./adjust_axis":68,"./common/toPoint":88,"./datum_transform":96}],132:[function(t,e,n){function i(t,e,n){t[e]=n.map(function(t){var e={};return r(t,e),e}).reduce(function(t,e){return u(t,e)},{})}function r(t,e){var n;return Array.isArray(t)?(n=t.shift(),"PARAMETER"===n&&(n=t.shift()),1===t.length?Array.isArray(t[0])?(e[n]={},r(t[0],e[n])):e[n]=t[0]:t.length?"TOWGS84"===n?e[n]=t:(e[n]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(n)>-1?(e[n]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(e[n].auth=t[2])):"SPHEROID"===n?(e[n]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(e[n].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(n)>-1?(t[0]=["name",t[0]],i(e,n,t)):t.every(function(t){return Array.isArray(t)})?i(e,n,t):r(t,e[n])):e[n]=!0,void 0):void(e[t]=!0)}function s(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}function a(t){return t*h}function o(t){function e(e){var n=t.to_meter||1;return parseFloat(e,10)*n}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=parseFloat(t.UNIT.convert,10)*t.DATUM.SPHEROID.a):t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a);var n=function(e){return s(t,e)},i=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",a],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["alpha","azimuth",a],["srsCode","name"]];i.forEach(n),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=a(t.lat1>0?90:-90),t.lat_ts=t.lat1)}var h=.017453292519943295,u=t("./extend");e.exports=function(t,e){var n=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),i=n.shift(),s=n.shift();n.unshift(["name",s]),n.unshift(["type",i]),n.unshift("output");var a={};return r(n,a),o(a.output),u(e,a.output)}},{"./extend":99}],133:[function(t,e,n){e.exports={_args:[[{raw:"proj4@^2.3.12",scope:null,escapedName:"proj4",name:"proj4",rawSpec:"^2.3.12",spec:">=2.3.12 <3.0.0",type:"range"},"C:\\Users\\Miles.Petrov\\Repo\\geoApi"]],_from:"proj4@>=2.3.12 <3.0.0",_id:"proj4@2.3.15",_inCache:!0,_location:"/proj4",_nodeVersion:"6.1.0",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/proj4-2.3.15.tgz_1471808262546_0.6752060337457806"},_npmUser:{name:"ahocevar",email:"andreas.hocevar@gmail.com"},_npmVersion:"3.8.6",_phantomChildren:{},_requested:{raw:"proj4@^2.3.12",scope:null,escapedName:"proj4",name:"proj4",rawSpec:"^2.3.12",spec:">=2.3.12 <3.0.0",type:"range"},_requiredBy:["#DEV:/","/shpjs"],_resolved:"https://registry.npmjs.org/proj4/-/proj4-2.3.15.tgz",_shasum:"5ad06e8bca30be0ffa389a49e4565f51f06d089e",_shrinkwrap:null,_spec:"proj4@^2.3.12",_where:"C:\\Users\\Miles.Petrov\\Repo\\geoApi",author:"",bugs:{url:"https://github.com/proj4js/proj4js/issues"},contributors:[{name:"Mike Adair",email:"madair@dmsolutions.ca"},{name:"Richard Greenwood",email:"rich@greenwoodmap.com"},{name:"Calvin Metcalf",email:"calvin.metcalf@gmail.com"},{name:"Richard Marsden",url:"http://www.winwaed.com"},{name:"T. Mittan"},{name:"D. Steinwand"},{name:"S. Nelson"}],dependencies:{mgrs:"~0.0.2"},description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",devDependencies:{browserify:"~12.0.1",chai:"~1.8.1",curl:"git://github.com/cujojs/curl.git",grunt:"~0.4.2","grunt-browserify":"~4.0.1",
"grunt-cli":"~0.1.13","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0","grunt-contrib-uglify":"~0.11.1","grunt-mocha-phantomjs":"~0.4.0",istanbul:"~0.2.4",mocha:"~1.17.1",tin:"~0.4.0"},directories:{test:"test",doc:"docs"},dist:{shasum:"5ad06e8bca30be0ffa389a49e4565f51f06d089e",tarball:"https://registry.npmjs.org/proj4/-/proj4-2.3.15.tgz"},gitHead:"9fa5249c1f4183d5ddee3c4793dfd7b9f29f1886",homepage:"https://github.com/proj4js/proj4js#readme",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},license:"MIT",main:"lib/index.js",maintainers:[{name:"cwmma",email:"calvin.metcalf@gmail.com"},{name:"ahocevar",email:"andreas.hocevar@gmail.com"}],name:"proj4",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},version:"2.3.15"}},{}],134:[function(t,e,n){e.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){"use strict";t.exports=function(t,e,n){var i=Math.floor(6*t),r=6*t-i,s=n*(1-e),a=n*(1-r*e),o=n*(1-(1-r)*e),h=255,u=255,l=255;switch(i){case 0:h=n,u=o,l=s;break;case 1:h=a,u=n,l=s;break;case 2:h=s,u=n,l=o;break;case 3:h=s,u=a,l=n;break;case 4:h=o,u=s,l=n;break;case 5:h=n,u=s,l=a}return[Math.floor(255*h),Math.floor(255*u),Math.floor(255*l)]}},function(t,e,n){"use strict";var i=n(2);t.exports=function(t){var e=t.map(function(t){return i(t.toString(16))}).join("");return"#"+e}},function(t,e,n){"use strict";var i=2;t.exports=function(t){return t.length>i?t:new Array(i-t.length+1).join("0")+t}},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.hue,n=t.saturation,i=t.value;return e||(e=Math.random()),e+=o,e%=1,"number"!=typeof n&&(n=.5),"number"!=typeof i&&(i=.95),s(e,n,i)}function r(t,e){var n=i(t,e);return a(n)}var s=n(0),a=n(1),o=.618033988749895;t.exports=r}])},{}],135:[function(t,e,n){e.exports=function(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=e[t]||t;for(var n=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,s=n[i].process,a=r.exec(t);if(a){var o=s(a);this.r=o[0],this.g=o[1],this.b=o[2],o.length>3&&(this.alpha=o[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,i=0;i<n.length;i++)for(var r=n[i].example,s=0;s<r.length;s++)t[t.length]=r[s];for(var a in e)t[t.length]=a;var o=document.createElement("ul");o.setAttribute("id","rgbcolor-examples");for(var i=0;i<t.length;i++)try{var h=document.createElement("li"),u=new RGBColor(t[i]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),l.appendChild(document.createTextNode("test"));var c=document.createTextNode(" "+t[i]+" -> "+u.toRGB()+" -> "+u.toHex());h.appendChild(l),h.appendChild(c),o.appendChild(h)}catch(f){}return o}}},{}],136:[function(t,e,n){function i(t,e){return a(t,e).val}function r(t){return s(t.lat,"lat")+" "+s(t.lon,"lon")}function s(t,e){var n={lat:["N","S"],lon:["E","W"]}[e]||"",i=n[t>=0?0:1],r=Math.abs(t),s=Math.floor(r),a=r-s,o=60*a,h=Math.floor(o),u=Math.floor(60*(o-h));return s+"° "+(h?h+"' ":"")+(u?u+'" ':"")+i}function a(t,e,n){if(e||(e="NSEW"),"string"!=typeof t)return{val:null,regex:n};n=n||/[\s\,]*([\-|\—|\―]?[0-9.]+)°? *(?:([0-9.]+)['’′‘] *)?(?:([0-9.]+)(?:''|"|”|″) *)?([NSEW])?/gi;var i=n.exec(t);return i?i[4]&&-1===e.indexOf(i[4])?{val:null,regex:n}:{val:((i[1]?parseFloat(i[1]):0)+(i[2]?parseFloat(i[2])/60:0)+(i[3]?parseFloat(i[3])/3600:0))*(i[4]&&"S"===i[4]||"W"===i[4]?-1:1),regex:n,raw:i[0],dim:i[4]}:{val:null,regex:n}}function o(t,e){t=t.trim();var n=a(t,e);if(null===n.val)return null;var i=a(t,e,n.regex);return null===i.val?null:n.raw+i.raw!==t?null:n.dim?h(n.val,i.val,n.dim):[n.val,i.val]}function h(t,e,n){return"N"==n||"S"==n?[t,e]:"W"==n||"E"==n?[e,t]:void 0}e.exports=i,e.exports.pair=o,e.exports.format=s,e.exports.formatPair=r},{}],137:[function(t,e,n){"use strict";function i(t){return new r(function(e,n){var i=t.slice(-3),r=new XMLHttpRequest;r.open("GET",t,!0),"prj"!==i&&(r.responseType="arraybuffer"),r.addEventListener("load",function(){return r.status>399?"prj"===i?e(!1):n(new Error(r.status)):void e(r.response)},!1),r.send()})}var r=t("lie");e.exports=i},{lie:53}],138:[function(t,e,n){(function(n){"use strict";function i(t,e){return"string"==typeof t&&d.has(t)?c.resolve(d.get(t)):i.getShapefile(t,e).then(function(e){return"string"==typeof t&&d.set(t,e),e})}function r(t,e){return o(t).then(function(t){return i.parseZip(t,e)})}var s=t("proj4"),a=t("./unzip"),o=t("./binaryajax"),h=t("./parseShp"),u=t("./toArrayBuffer"),l=t("parsedbf"),c=t("lie"),f=t("lru-cache"),d=new f({max:20});i.combine=function(t){var e={};e.type="FeatureCollection",e.features=[];for(var n=0,i=t[0].length;i>n;)e.features.push({type:"Feature",geometry:t[0][n],properties:t[1][n]}),n++;return e},i.parseZip=function(t,e){var n,r=a(t),o=[];e=e||[];for(n in r)-1===n.indexOf("__MACOSX")&&("shp"===n.slice(-3).toLowerCase()?o.push(n.slice(0,-4)):"dbf"===n.slice(-3).toLowerCase()?r[n.slice(0,-3)+n.slice(-3).toLowerCase()]=l(r[n]):"prj"===n.slice(-3).toLowerCase()?r[n.slice(0,-3)+n.slice(-3).toLowerCase()]=s(r[n]):("json"===n.slice(-4).toLowerCase()||e.indexOf(n.split(".").pop())>-1)&&o.push(n.slice(0,-3)+n.slice(-3).toLowerCase()));if(!o.length)throw new Error("no layers founds");var u=o.map(function(t){var n;return"json"===t.slice(-4).toLowerCase()?(n=JSON.parse(r[t]),n.fileName=t.slice(0,t.lastIndexOf("."))):e.indexOf(t.slice(t.lastIndexOf(".")+1))>-1?(n=r[t],n.fileName=t):(n=i.combine([h(r[t+".shp"],r[t+".prj"]),r[t+".dbf"]]),n.fileName=t),n});return 1===u.length?u[0]:u},i.getShapefile=function(t,e){return"string"==typeof t?".zip"===t.slice(-4)?r(t,e):c.all([c.all([o(t+".shp"),o(t+".prj")]).then(function(t){return h(t[0],t[1]?s(t[1]):!1)}),o(t+".dbf").then(l)]).then(i.combine):new c(function(e){e(i.parseZip(t))})},i.parseShp=function(t,e){return n.isBuffer(t)&&(t=u(t)),n.isBuffer(e)&&(e=e.toString()),"string"==typeof e?(e=s(e),h(t,e)):h(t)},i.parseDbf=function(t){return n.isBuffer(t)&&(t=u(t)),l(t)},e.exports=i}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":9,"./binaryajax":137,"./parseShp":139,"./toArrayBuffer":140,"./unzip":141,lie:53,"lru-cache":63,parsedbf:65,proj4:102}],139:[function(t,e,n){"use strict";function i(t){for(var e,n,i=0,r=1,s=t.length;s>r;)e=n||t[0],n=t[r],i+=(n[0]-e[0])*(n[1]+e[1]),r++;return i>0}function r(t,e){return i(e)||!t.length?t.push([e]):t[t.length-1].push(e),t}function s(t){return t?function(e,n){return t.inverse([e.getFloat64(n,!0),e.getFloat64(n+8,!0)])}:function(t,e){return[t.getFloat64(e,!0),t.getFloat64(e+8,!0)]}}function a(t,e){return this instanceof a?(this.buffer=t,this.shpFuncs(e),void(this.rows=this.getRows())):new a(t,e)}a.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}},a.prototype.parseZPoint=function(t){var e=this.parsePoint(t);return e.coordinates.push(this.parseCoord(t,16)),e},a.prototype.parsePointArray=function(t,e,n){for(var i=[],r=0;n>r;)i.push(this.parseCoord(t,e)),e+=16,r++;return i},a.prototype.parseZPointArray=function(t,e,n,i){for(var r=0;n>r;)i[r].push(t.getFloat64(e,!0)),r++,e+=8;return i},a.prototype.parseArrayGroup=function(t,e,n,i,r){for(var s,a,o=[],h=0,u=0;i>h;)h++,n+=4,s=u,u=h===i?r:t.getInt32(n,!0),a=u-s,a&&(o.push(this.parsePointArray(t,e,a)),e+=a<<4);return o},a.prototype.parseZArrayGroup=function(t,e,n,i){for(var r=0;n>r;)i[r]=this.parseZPointArray(t,e,i[r].length,i[r]),e+=i[r].length<<3,r++;return i},a.prototype.parseMultiPoint=function(t){var e={},n=this.parseCoord(t,0),i=this.parseCoord(t,16);e.bbox=[n[0],n[1],i[0],i[1]];var r=t.getInt32(32,!0),s=36;return 1===r?(e.type="Point",e.coordinates=this.parseCoord(t,s)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,s,r)),e},a.prototype.parseZMultiPoint=function(t){var e,n=this.parseMultiPoint(t);if("Point"===n.type)return n.coordinates.push(t.getFloat64(72,!0)),n;e=n.coordinates.length;var i=56+(e<<4);return n.coordinates=this.parseZPointArray(t,i,e,n.coordinates),n},a.prototype.parsePolyline=function(t){var e={},n=this.parseCoord(t,0),i=this.parseCoord(t,16);e.bbox=[n[0],n[1],i[0],i[1]];var r,s,a=t.getInt32(32,!0),o=t.getInt32(36,!0);return 1===a?(e.type="LineString",r=44,e.coordinates=this.parsePointArray(t,r,o)):(e.type="MultiLineString",r=40+(a<<2),s=40,e.coordinates=this.parseArrayGroup(t,r,s,a,o)),e},a.prototype.parseZPolyline=function(t){var e=this.parsePolyline(t),n=e.coordinates.length,i=60+(n<<4);return"LineString"===e.type?(e.coordinates=this.parseZPointArray(t,i,n,e.coordinates),e):(e.coordinates=this.parseZArrayGroup(t,i,n,e.coordinates),e)},a.prototype.polyFuncs=function(t){return"LineString"===t.type?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=t.coordinates.reduce(r,[]),1===t.coordinates.length?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t))},a.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))},a.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};var o={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};a.prototype.shpFuncs=function(t){var e=this.getShpCode();if(e>20&&(e-=20),!(e in o))throw new Error("I don't know that shp type");this.parseFunc=this[o[e]],this.parseCoord=s(t)},a.prototype.getShpCode=function(){return this.parseHeader().shpCode},a.prototype.parseHeader=function(){var t=new DataView(this.buffer,0,100);return{length:t.getInt32(24,!1),version:t.getInt32(28,!0),shpCode:t.getInt32(32,!0),bbox:[t.getFloat64(36,!0),t.getFloat64(44,!0),t.getFloat64(52,!0),t.getFloat64(52,!0)]}},a.prototype.getRows=function(){for(var t,e=100,n=this.buffer.byteLength,i=[];n>e;)t=this.getRow(e),e+=8,e+=t.len,t.type&&i.push(this.parseFunc(t.data));return i},a.prototype.getRow=function(t){var e=new DataView(this.buffer,t,12),n=e.getInt32(4,!1)<<1,i=new DataView(this.buffer,t+12,n-4);return{id:e.getInt32(0,!1),len:n,data:i,type:e.getInt32(8,!0)}},e.exports=function(t,e){return new a(t,e).rows}},{}],140:[function(t,e,n){"use strict";function i(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=-1,r=t.length;++i<r;)n[i]=t[i];return e}e.exports=i},{}],141:[function(t,e,n){"use strict";var i=t("jszip");e.exports=function(t){var e=new i(t),n=e.file(/.+/),r={};return n.forEach(function(t){"shp"===t.name.slice(-3).toLowerCase()||"dbf"===t.name.slice(-3).toLowerCase()?(r[t.name]=t.asText(),r[t.name]=t.asArrayBuffer()):r[t.name]=t.asText()}),r}},{jszip:19}],142:[function(t,e,n){function i(t,e,n,i){if(!(isNaN(i)||1>i)){i|=0;var o,h,u,l,c,f,d,p,m,y,g,v,b,x,w,_,M,E,P,S,k,C,A,T,I=i+i+1,L=e-1,j=n-1,O=i+1,R=O*(O+1)/2,B=new r,N=B;for(u=1;I>u;u++)if(N=N.next=new r,u==O)var F=N;N.next=B;var D=null,z=null;d=f=0;var U=s[i],G=a[i];for(h=0;n>h;h++){for(_=M=E=P=p=m=y=g=0,v=O*(S=t[f]),b=O*(k=t[f+1]),x=O*(C=t[f+2]),w=O*(A=t[f+3]),p+=R*S,m+=R*k,y+=R*C,g+=R*A,N=B,u=0;O>u;u++)N.r=S,N.g=k,N.b=C,N.a=A,N=N.next;for(u=1;O>u;u++)l=f+((u>L?L:u)<<2),p+=(N.r=S=t[l])*(T=O-u),m+=(N.g=k=t[l+1])*T,y+=(N.b=C=t[l+2])*T,g+=(N.a=A=t[l+3])*T,_+=S,M+=k,E+=C,P+=A,N=N.next;for(D=B,z=F,o=0;e>o;o++)t[f+3]=A=g*U>>G,0!=A?(A=255/A,t[f]=(p*U>>G)*A,t[f+1]=(m*U>>G)*A,t[f+2]=(y*U>>G)*A):t[f]=t[f+1]=t[f+2]=0,p-=v,m-=b,y-=x,g-=w,v-=D.r,b-=D.g,x-=D.b,w-=D.a,l=d+((l=o+i+1)<L?l:L)<<2,_+=D.r=t[l],M+=D.g=t[l+1],E+=D.b=t[l+2],P+=D.a=t[l+3],p+=_,m+=M,y+=E,g+=P,D=D.next,v+=S=z.r,b+=k=z.g,x+=C=z.b,w+=A=z.a,_-=S,M-=k,E-=C,P-=A,z=z.next,f+=4;d+=e}for(o=0;e>o;o++){for(M=E=P=_=m=y=g=p=0,f=o<<2,v=O*(S=t[f]),b=O*(k=t[f+1]),x=O*(C=t[f+2]),w=O*(A=t[f+3]),p+=R*S,m+=R*k,y+=R*C,g+=R*A,N=B,u=0;O>u;u++)N.r=S,N.g=k,N.b=C,N.a=A,N=N.next;for(c=e,u=1;i>=u;u++)f=c+o<<2,p+=(N.r=S=t[f])*(T=O-u),m+=(N.g=k=t[f+1])*T,y+=(N.b=C=t[f+2])*T,g+=(N.a=A=t[f+3])*T,_+=S,M+=k,E+=C,P+=A,N=N.next,j>u&&(c+=e);for(f=o,D=B,z=F,h=0;n>h;h++)l=f<<2,t[l+3]=A=g*U>>G,A>0?(A=255/A,t[l]=(p*U>>G)*A,t[l+1]=(m*U>>G)*A,t[l+2]=(y*U>>G)*A):t[l]=t[l+1]=t[l+2]=0,p-=v,m-=b,y-=x,g-=w,v-=D.r,b-=D.g,x-=D.b,w-=D.a,l=o+((l=h+O)<j?l:j)*e<<2,p+=_+=D.r=t[l],m+=M+=D.g=t[l+1],y+=E+=D.b=t[l+2],g+=P+=D.a=t[l+3],D=D.next,v+=S=z.r,b+=k=z.g,x+=C=z.b,w+=A=z.a,_-=S,M-=k,E-=C,P-=A,z=z.next,f+=e}}}function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.exports=i},{}],143:[function(e,n,i){!function(e,r){"function"==typeof t&&t.amd?t(function(){return r(e,e.document)}):"object"==typeof i?n.exports=e.document?r(e,e.document):function(t){return r(t,t.document)}:e.SVG=r(e,e.document)}("undefined"!=typeof window?window:this,function(t,e){function n(t,e,n,i){return n+i.replace(b.regex.dots," .")}function i(t){for(var e=t.slice(0),n=e.length;n--;)Array.isArray(e[n])&&(e[n]=i(e[n]));return e}function r(t,e){return t instanceof e}function s(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}function a(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function h(t){return 4==t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}function u(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function l(t,e,n){if(null==e||null==n){var i=t.bbox();null==e?e=i.width/i.height*n:null==n&&(n=i.height/i.width*e)}return{width:e,height:n}}function c(t,e,n){return{x:e*t.a+n*t.c+0,y:e*t.b+n*t.d+0}}function f(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function d(t){return t instanceof b.Matrix||(t=new b.Matrix(t)),t}function p(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function m(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e][0],null!=t[e][1]&&(i+=t[e][1],null!=t[e][2]&&(i+=" ",i+=t[e][2],null!=t[e][3]&&(i+=" ",i+=t[e][3],i+=" ",i+=t[e][4],null!=t[e][5]&&(i+=" ",i+=t[e][5],i+=" ",i+=t[e][6],null!=t[e][7]&&(i+=" ",i+=t[e][7])))));return i+" "}function y(e){for(var n=e.childNodes.length-1;n>=0;n--)e.childNodes[n]instanceof t.SVGElement&&y(e.childNodes[n]);return b.adopt(e).id(b.eid(e.nodeName))}function g(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function v(t){var e=t.toString().match(b.regex.reference);return e?e[1]:void 0}var b=this.SVG=function(t){return b.supported?(t=new b.Doc(t),b.parser.draw||b.prepare(),t):void 0};if(b.ns="http://www.w3.org/2000/svg",b.xmlns="http://www.w3.org/2000/xmlns/",b.xlink="http://www.w3.org/1999/xlink",b.svgjs="http://svgjs.com/svgjs",b.supported=function(){return!!e.createElementNS&&!!e.createElementNS(b.ns,"svg").createSVGRect}(),!b.supported)return!1;b.did=1e3,b.eid=function(t){return"Svgjs"+o(t)+b.did++},b.create=function(t){var n=e.createElementNS(this.ns,t);return n.setAttribute("id",this.eid(t)),n},b.extend=function(){var t,e,n,i;for(t=[].slice.call(arguments),e=t.pop(),i=t.length-1;i>=0;i--)if(t[i])for(n in e)t[i].prototype[n]=e[n];b.Set&&b.Set.inherit&&b.Set.inherit()},b.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,b.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&b.extend(e,t.extend),t.construct&&b.extend(t.parent||b.Container,t.construct),e},b.adopt=function(e){if(!e)return null;if(e.instance)return e.instance;var n;return n="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new b.Nested:new b.Doc:"linearGradient"==e.nodeName?new b.Gradient("linear"):"radialGradient"==e.nodeName?new b.Gradient("radial"):b[o(e.nodeName)]?new(b[o(e.nodeName)]):new b.Element(e),n.type=e.nodeName,n.node=e,e.instance=n,n instanceof b.Doc&&n.namespace().defs(),n.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),n},b.prepare=function(){var t=e.getElementsByTagName("body")[0],n=(t?new b.Doc(t):b.adopt(e.documentElement).nested()).size(2,0);b.parser={body:t||e.documentElement,draw:n.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden"),poly:n.polyline().node,path:n.path().node,"native":b.create("svg")}},b.parser={"native":b.create("svg")},e.addEventListener("DOMContentLoaded",function(){b.parser.draw||b.prepare()},!1),b.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},b.utils={map:function(t,e){var n,i=t.length,r=[];for(n=0;i>n;n++)r.push(e(t[n]));return r},filter:function(t,e){var n,i=t.length,r=[];for(n=0;i>n;n++)e(t[n])&&r.push(t[n]);return r},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(e){return this.filter(e,function(e){return e instanceof t.SVGElement})}},b.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},b.Color=function(t){var e;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?b.regex.isRgb.test(t)?(e=b.regex.rgb.exec(t.replace(b.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):b.regex.isHex.test(t)&&(e=b.regex.hex.exec(h(t)),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},b.extend(b.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+u(this.r)+u(this.g)+u(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new b.Color(t),this},at:function(t){return this.destination?(t=0>t?0:t>1?1:t,new b.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),b.Color.test=function(t){return t+="",b.regex.isHex.test(t)||b.regex.isRgb.test(t)},b.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},b.Color.isColor=function(t){return b.Color.isRgb(t)||b.Color.test(t)},b.Array=function(t,e){t=(t||[]).valueOf(),0==t.length&&e&&(t=e.valueOf()),this.value=this.parse(t)},b.extend(b.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,n=[];e>t;t++)-1==n.indexOf(this.value[t])&&n.push(this.value[t]);return this.value=n},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,i=[];n>e;e++)i.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new b.Array(i)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(b.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=i(this.value),t}}),b.PointArray=function(t,e){b.Array.call(this,t,e||[[0,0]])},b.PointArray.prototype=new b.Array,b.PointArray.prototype.constructor=b.PointArray,b.extend(b.PointArray,{toString:function(){for(var t=0,e=this.value.length,n=[];e>t;t++)n.push(this.value[t].join(","));return n.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,i=[];n>e;e++)i.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new b.PointArray(i)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t}else t=t.trim().split(b.regex.delimiter).map(parseFloat);t.length%2!==0&&t.pop();for(var n=0,i=t.length;i>n;n+=2)e.push([t[n],t[n+1]]);return e},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i=this.value.length-1;i>=0;i--)this.value[i]=[this.value[i][0]+t,this.value[i][1]+e];return this},size:function(t,e){var n,i=this.bbox();for(n=this.value.length-1;n>=0;n--)i.width&&(this.value[n][0]=(this.value[n][0]-i.x)*t/i.width+i.x),i.height&&(this.value[n][1]=(this.value[n][1]-i.y)*e/i.height+i.y);return this},bbox:function(){return b.parser.poly.setAttribute("points",this.toString()),b.parser.poly.getBBox()}}),b.PathArray=function(t,e){b.Array.call(this,t,e||[["M",0,0]])},b.PathArray.prototype=new b.Array,b.PathArray.prototype.constructor=b.PathArray,b.extend(b.PathArray,{toString:function(){return m(this.value)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i,r=this.value.length-1;r>=0;r--)i=this.value[r][0],"M"==i||"L"==i||"T"==i?(this.value[r][1]+=t,this.value[r][2]+=e):"H"==i?this.value[r][1]+=t:"V"==i?this.value[r][1]+=e:"C"==i||"S"==i||"Q"==i?(this.value[r][1]+=t,this.value[r][2]+=e,this.value[r][3]+=t,this.value[r][4]+=e,"C"==i&&(this.value[r][5]+=t,this.value[r][6]+=e)):"A"==i&&(this.value[r][6]+=t,this.value[r][7]+=e);return this},size:function(t,e){var n,i,r=this.bbox();for(n=this.value.length-1;n>=0;n--)i=this.value[n][0],"M"==i||"L"==i||"T"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y):"H"==i?this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x:"V"==i?this.value[n][1]=(this.value[n][1]-r.y)*e/r.height+r.y:"C"==i||"S"==i||"Q"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y,this.value[n][3]=(this.value[n][3]-r.x)*t/r.width+r.x,this.value[n][4]=(this.value[n][4]-r.y)*e/r.height+r.y,"C"==i&&(this.value[n][5]=(this.value[n][5]-r.x)*t/r.width+r.x,this.value[n][6]=(this.value[n][6]-r.y)*e/r.height+r.y)):"A"==i&&(this.value[n][1]=this.value[n][1]*t/r.width,this.value[n][2]=this.value[n][2]*e/r.height,this.value[n][6]=(this.value[n][6]-r.x)*t/r.width+r.x,this.value[n][7]=(this.value[n][7]-r.y)*e/r.height+r.y);return this},equalCommands:function(t){var e,n,i;for(t=new b.PathArray(t),i=this.value.length===t.value.length,e=0,n=this.value.length;i&&n>e;e++)i=this.value[e][0]===t.value[e][0];return i},morph:function(t){return t=new b.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,n,i,r,s=this.value,a=this.destination.value,o=[],h=new b.PathArray;for(e=0,n=s.length;n>e;e++){for(o[e]=[s[e][0]],i=1,r=s[e].length;r>i;i++)o[e][i]=s[e][i]+(a[e][i]-s[e][i])*t;"A"===o[e][0]&&(o[e][4]=+(0!=o[e][4]),o[e][5]=+(0!=o[e][5]))}return h.value=o,h},parse:function(t){if(t instanceof b.PathArray)return t.valueOf();var e,i,r,s,a,o,h=0,u=0,l={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7};t="string"==typeof t?t.replace(b.regex.numbersWithDots,n).replace(b.regex.pathLetters," $& ").replace(b.regex.hyphen,"$1 -").trim().split(b.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);var o=[];do{for(b.regex.isPathLetter.test(t[0])?(s=t[0],t.shift()):"M"==s?s="L":"m"==s&&(s="l"),a=[s.toUpperCase()],e=0;e<l[a[0]];++e)a.push(parseFloat(t.shift()));s==a[0]?"M"==s||"L"==s||"C"==s||"Q"==s||"S"==s||"T"==s?(h=a[l[a[0]]-1],u=a[l[a[0]]]):"V"==s?u=a[1]:"H"==s?h=a[1]:"A"==s&&(h=a[6],u=a[7]):"m"==s||"l"==s||"c"==s||"s"==s||"q"==s||"t"==s?(a[1]+=h,a[2]+=u,null!=a[3]&&(a[3]+=h,a[4]+=u),null!=a[5]&&(a[5]+=h,a[6]+=u),h=a[l[a[0]]-1],u=a[l[a[0]]]):"v"==s?(a[1]+=u,u=a[1]):"h"==s?(a[1]+=h,h=a[1]):"a"==s&&(a[6]+=h,a[7]+=u,h=a[6],u=a[7]),"M"==a[0]&&(i=h,r=u),"Z"==a[0]&&(h=i,u=r),o.push(a)}while(t.length);return o},bbox:function(){return b.parser.path.setAttribute("d",this.toString()),b.parser.path.getBBox()}}),b.Number=b.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:0>t?-3.4e38:3.4e38:"string"==typeof t?(e=t.match(b.regex.numberAndUnit),e&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5])):t instanceof b.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new b.Number(t),new b.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new b.Number(t),new b.Number(this-t,this.unit||t.unit)},times:function(t){return t=new b.Number(t),new b.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new b.Number(t),new b.Number(this/t,this.unit||t.unit)},to:function(t){var e=new b.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new b.Number(t),t.relative&&(this.destination.value+=this.value),
this},at:function(t){return this.destination?new b.Number(this.destination).minus(this).times(t).plus(this):this}}}),b.Element=b.invent({create:function(t){this._stroke=b.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var n=l(this,t,e);return this.width(new b.Number(n.width)).height(new b.Number(n.height))},clone:function(t,e){this.writeDataToDom();var n=y(this.node.cloneNode(!0));return t?t.add(n):this.after(n),n},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(b.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return b.get(this.attr(t))},parent:function(e){var n=this;if(!n.node.parentNode)return null;if(n=b.adopt(n.node.parentNode),!e)return n;for(;n&&n.node instanceof t.SVGElement;){if("string"==typeof e?n.matches(e):n instanceof e)return n;n=b.adopt(n.node.parentNode)}},doc:function(){return this instanceof b.Doc?this:this.parent(b.Doc)},parents:function(t){var e=[],n=this;do{if(n=n.parent(t),!n||!n.node)break;e.push(n)}while(n.parent);return e},matches:function(t){return s(this.node,t)},"native":function(){return this.node},svg:function(t){var n=e.createElement("svg");if(!(t&&this instanceof b.Parent))return n.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),n.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");n.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var i=0,r=n.firstChild.childNodes.length;r>i;i++)this.node.appendChild(n.firstChild.firstChild);return this},writeDataToDom:function(){if(this.each||this.lines){var t=this.each?this:this.lines();t.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return r(this,t)}}}),b.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return-Math.cos(t*Math.PI/2)+1}},b.morph=function(t){return function(e,n){return new b.MorphObj(e,n).at(t)}},b.Situation=b.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new b.Number(t.duration).valueOf(),this.delay=new b.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),b.FX=b.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,n){"object"==typeof t&&(e=t.ease,n=t.delay,t=t.duration);var i=new b.Situation({duration:t||1e3,delay:n||0,ease:b.easing[e||"-"]||e});return this.queue(i),this},delay:function(t){var e=new b.Situation({duration:t,delay:0,ease:b.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof b.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof b.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof b.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,n=this.situation;if(n.init)return this;for(t in n.animations)e=this.target()[t](),n.animations[t]instanceof b.Number&&(e=new b.Number(e)),n.animations[t]=e.morph(n.animations[t]);for(t in n.attrs)n.attrs[t]=new b.MorphObj(this.target().attr(t),n.attrs[t]);for(t in n.styles)n.styles[t]=new b.MorphObj(this.target().style(t),n.styles[t]);return n.initialTransformation=this.target().matrixify(),n.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var n=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var n=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*n,this.situation.finish=this.situation.start+n,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var n=this.last();return n.loops=null!=t?t:!0,n.loop=0,e&&(n.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return"undefined"==typeof t?e.reversed=!e.reversed:e.reversed=t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var e=this.last(),n=function i(n){n.detail.situation==e&&(t.call(this,e),this.off("finished.fx",i))};return this.target().on("finished.fx",n),this._callStart()},during:function(t){var e=this.last(),n=function(n){n.detail.situation==e&&t.call(this,n.detail.pos,b.morph(n.detail.pos),n.detail.eased,e)};return this.target().off("during.fx",n).on("during.fx",n),this.after(function(){this.off("during.fx",n)}),this._callStart()},afterAll:function(t){var e=function n(e){t.call(this),this.off("allfinished.fx",n)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},duringAll:function(t){var e=function(e){t.call(this,e.detail.pos,b.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",e).on("during.fx",e),this.afterAll(function(){this.off("during.fx",e)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,n){return this.last()[n||"animations"][t]=e,this._callStart()},step:function(t){if(t||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var e,n,i;e=Math.max(this.absPos,0),n=Math.floor(e),this.situation.loops===!0||n<this.situation.loops?(this.pos=e-n,i=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,i=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-i)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var s in this.situation.once)s>this.lastPos&&r>=s&&(this.situation.once[s].call(this.target(),this.pos,r),delete this.situation.once[s]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.target().off(".fx"),this.active=!1),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var t,e,n=this,i=this.target(),r=this.situation;for(t in r.animations)e=[].concat(r.animations[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(r.ease(n.pos),n.pos):t}),i[t].apply(i,e);for(t in r.attrs)e=[t].concat(r.attrs[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(r.ease(n.pos),n.pos):t}),i.attr.apply(i,e);for(t in r.styles)e=[t].concat(r.styles[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(r.ease(n.pos),n.pos):t}),i.style.apply(i,e);if(r.transforms.length){for(e=r.initialTransformation,t=0,len=r.transforms.length;t<len;t++){var s=r.transforms[t];s instanceof b.Matrix?e=s.relative?e.multiply((new b.Matrix).morph(s).at(r.ease(this.pos))):e.morph(s).at(r.ease(this.pos)):(s.relative||s.undo(e.extract()),e=e.multiply(s.at(r.ease(this.pos))))}i.matrix(e)}return this},once:function(t,e,n){return n||(t=this.situation.ease(t)),this.situation.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:b.Element,construct:{animate:function(t,e,n){return(this.fx||(this.fx=new b.FX(this))).animate(t,e,n)},delay:function(t){return(this.fx||(this.fx=new b.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),b.MorphObj=b.invent({create:function(t,e){return b.Color.isColor(e)?new b.Color(t).morph(e):b.regex.numberAndUnit.test(e)?new b.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return 1>e?this.value:this.destination},valueOf:function(){return this.value}}}),b.extend(b.FX,{attr:function(t,e,n){if("object"==typeof t)for(var i in t)this.attr(i,t[i]);else this.add(t,e,"attrs");return this},style:function(t,e){if("object"==typeof t)for(var n in t)this.style(n,t[n]);else this.add(t,e,"styles");return this},x:function(t,e){if(this.target()instanceof b.G)return this.transform({x:t},e),this;var n=new b.Number(t);return n.relative=e,this.add("x",n)},y:function(t,e){if(this.target()instanceof b.G)return this.transform({y:t},e),this;var n=new b.Number(t);return n.relative=e,this.add("y",n)},cx:function(t){return this.add("cx",new b.Number(t))},cy:function(t){return this.add("cy",new b.Number(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){if(this.target()instanceof b.Text)this.attr("font-size",t);else{var n;t&&e||(n=this.target().bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.add("width",new b.Number(t)).add("height",new b.Number(e))}return this},plot:function(){return this.add("plot",arguments.length>1?[].slice.call(arguments):arguments[0])},leading:function(t){return this.target().leading?this.add("leading",new b.Number(t)):this},viewbox:function(t,e,n,i){return this.target()instanceof b.Container&&this.add("viewbox",new b.ViewBox(t,e,n,i)),this},update:function(t){if(this.target()instanceof b.Stop){if("number"==typeof t||t instanceof b.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),b.Box=b.invent({create:function(t,e,n,i){return"object"!=typeof t||t instanceof b.Element?(4==arguments.length&&(this.x=t,this.y=e,this.width=n,this.height=i),void g(this)):b.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height)},extend:{merge:function(t){var e=new this.constructor;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,g(e)},transform:function(t){var e=1/0,n=-(1/0),i=1/0,r=-(1/0),s=[new b.Point(this.x,this.y),new b.Point(this.x2,this.y),new b.Point(this.x,this.y2),new b.Point(this.x2,this.y2)];return s.forEach(function(s){s=s.transform(t),e=Math.min(e,s.x),n=Math.max(n,s.x),i=Math.min(i,s.y),r=Math.max(r,s.y)}),bbox=new this.constructor,bbox.x=e,bbox.width=n-e,bbox.y=i,bbox.height=r-i,g(bbox),bbox}}}),b.BBox=b.invent({create:function(t){if(b.Box.apply(this,[].slice.call(arguments)),t instanceof b.Element){var n;try{if(e.documentElement.contains){if(!e.documentElement.contains(t.node))throw new Exception("Element not in the dom")}else{for(var i=t.node;i.parentNode;)i=i.parentNode;if(i!=e)throw new Exception("Element not in the dom")}n=t.node.getBBox()}catch(r){if(t instanceof b.Shape){var s=t.clone(b.parser.draw).show();n=s.node.getBBox(),s.remove()}else n={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}b.Box.call(this,n)}},inherit:b.Box,parent:b.Element,construct:{bbox:function(){return new b.BBox(this)}}}),b.BBox.prototype.constructor=b.BBox,b.extend(b.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),b.RBox=b.invent({create:function(t){b.Box.apply(this,[].slice.call(arguments)),t instanceof b.Element&&b.Box.call(this,t.node.getBoundingClientRect())},inherit:b.Box,parent:b.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(t){return t?new b.RBox(this).transform(t.screenCTM().inverse()):new b.RBox(this).addOffset()}}}),b.RBox.prototype.constructor=b.RBox,b.Matrix=b.invent({create:function(t){var e,n=f([1,0,0,1,0,0]);for(t=t instanceof b.Element?t.matrixify():"string"==typeof t?f(t.split(b.regex.delimiter).map(parseFloat)):6==arguments.length?f([].slice.call(arguments)):Array.isArray(t)?f(t):"object"==typeof t?t:n,e=w.length-1;e>=0;--e)this[w[e]]=t&&"number"==typeof t[w[e]]?t[w[e]]:n[w[e]]},extend:{extract:function(){var t=c(this,0,1),e=c(this,1,0),n=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(n*Math.PI/180)+this.f*Math.sin(n*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(n*Math.PI/180)+this.e*Math.sin(-n*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-n,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:n,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new b.Matrix(this)}},clone:function(){return new b.Matrix(this)},morph:function(t){return this.destination=new b.Matrix(t),this},at:function(t){if(!this.destination)return this;var e=new b.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t});return e},multiply:function(t){return new b.Matrix(this["native"]().multiply(d(t)["native"]()))},inverse:function(){return new b.Matrix(this["native"]().inverse())},translate:function(t,e){return new b.Matrix(this["native"]().translate(t||0,e||0))},scale:function(t,e,n,i){return 1==arguments.length?e=t:3==arguments.length&&(i=n,n=e,e=t),this.around(n,i,new b.Matrix(t,0,0,e,0,0))},rotate:function(t,e,n){return t=b.utils.radians(t),this.around(e,n,new b.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return e="number"==typeof t?t:e,"x"==t?this.scale(-1,1,e,0):"y"==t?this.scale(1,-1,0,e):this.scale(-1,-1,e,e)},skew:function(t,e,n,i){return 1==arguments.length?e=t:3==arguments.length&&(i=n,n=e,e=t),t=b.utils.radians(t),e=b.utils.radians(e),this.around(n,i,new b.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,n){return this.skew(t,0,e,n)},skewY:function(t,e,n){return this.skew(0,t,e,n)},around:function(t,e,n){return this.multiply(new b.Matrix(1,0,0,1,t||0,e||0)).multiply(n).multiply(new b.Matrix(1,0,0,1,-t||0,-e||0))},"native":function(){for(var t=b.parser["native"].createSVGMatrix(),e=w.length-1;e>=0;e--)t[w[e]]=this[w[e]];return t},toString:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},parent:b.Element,construct:{ctm:function(){return new b.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof b.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new b.Matrix(e)}return new b.Matrix(this.node.getScreenCTM())}}}),b.Point=b.invent({create:function(t,e){var n,i={x:0,y:0};n=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:i,this.x=n.x,this.y=n.y},extend:{clone:function(){return new b.Point(this)},morph:function(t,e){return this.destination=new b.Point(t,e),this},at:function(t){if(!this.destination)return this;var e=new b.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t});return e},"native":function(){var t=b.parser["native"].createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new b.Point(this["native"]().matrixTransform(t["native"]()))}}}),b.extend(b.Element,{point:function(t,e){return new b.Point(t,e).transform(this.screenCTM().inverse())}}),b.extend(b.Element,{attr:function(t,e,n){if(null==t){for(t={},e=this.node.attributes,n=e.length-1;n>=0;n--)t[e[n].nodeName]=b.regex.isNumber.test(e[n].nodeValue)?parseFloat(e[n].nodeValue):e[n].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return e=this.node.getAttribute(t),null==e?b.defaults.attrs[t]:b.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),("fill"==t||"stroke"==t)&&(b.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof b.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new b.Number(e):b.Color.isColor(e)?e=new b.Color(e):Array.isArray(e)&&(e=new b.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),b.extend(b.Element,{transform:function(t,e){var n,i=this;if("object"!=typeof t)return n=new b.Matrix(i).extract(),"string"==typeof t?n[t]:n;if(n=new b.Matrix(i),e=!!e||!!t.relative,null!=t.a)n=e?n.multiply(new b.Matrix(t)):new b.Matrix(t);else if(null!=t.rotation)p(t,i),n=e?n.rotate(t.rotation,t.cx,t.cy):n.rotate(t.rotation-n.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(p(t,i),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var r=n.extract();t.scaleX=1*t.scaleX/r.scaleX,t.scaleY=1*t.scaleY/r.scaleY}n=n.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else if(null!=t.skew||null!=t.skewX||null!=t.skewY){if(p(t,i),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,!e){var r=n.extract();n=n.multiply((new b.Matrix).skew(r.skewX,r.skewY,t.cx,t.cy).inverse())}n=n.skew(t.skewX,t.skewY,t.cx,t.cy)}else t.flip?n=n.flip(t.flip,null==t.offset?i.bbox()["c"+t.flip]:t.offset):(null!=t.x||null!=t.y)&&(e?n=n.translate(t.x,t.y):(null!=t.x&&(n.e=t.x),null!=t.y&&(n.f=t.y)));return this.attr("transform",n)}}),b.extend(b.FX,{transform:function(t,e){var n,i=this.target();return"object"!=typeof t?(n=new b.Matrix(i).extract(),"string"==typeof t?n[t]:n):(e=!!e||!!t.relative,null!=t.a?n=new b.Matrix(t):null!=t.rotation?(p(t,i),n=new b.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(p(t,i),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,n=new b.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(p(t,i),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,n=new b.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?n=(new b.Matrix).flip(t.flip,null==t.offset?i.bbox()["c"+t.flip]:t.offset):(null!=t.x||null!=t.y)&&(n=new b.Translate(t.x,t.y)),n?(n.relative=e,this.last().transforms.push(n),this._callStart()):this)}}),b.extend(b.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var t=(this.attr("transform")||"").split(b.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(b.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(f(e[1])):t[e[0]].apply(t,e[1])},new b.Matrix);return t},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),b.Transformation=b.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var n=0,i=this.arguments.length;i>n;++n)this[this.arguments[n]]=t[n];else if("object"==typeof t)for(var n=0,i=this.arguments.length;i>n;++n)this[this.arguments[n]]=t[this.arguments[n]];this.inversed=!1,e===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var e=[],n=0,i=this.arguments.length;i>n;++n)e.push(this[this.arguments[n]]);var r=this._undo||new b.Matrix;return r=(new b.Matrix).morph(b.Matrix.prototype[this.method].apply(r,e)).at(t),this.inversed?r.inverse():r},undo:function(t){for(var e=0,n=this.arguments.length;n>e;++e)t[this.arguments[e]]="undefined"==typeof this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(b[o(this.method)])(t,!0).at(1),this}}}),b.Translate=b.invent({parent:b.Matrix,inherit:b.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),b.Rotate=b.invent({parent:b.Matrix,inherit:b.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new b.Matrix).rotate((new b.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){return this._undo=t,this}}}),b.Scale=b.invent({parent:b.Matrix,inherit:b.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),b.Skew=b.invent({parent:b.Matrix,inherit:b.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),b.extend(b.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!b.regex.isCss.test(t))return this.node.style[a(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});e=t.pop();)this.style(e[0],e[1])}else this.node.style[a(t)]=null===e||b.regex.isBlank.test(e)?"":e;return this}}),b.Parent=b.invent({create:function(t){this.constructor.call(this,t)},inherit:b.Element,extend:{children:function(){return b.utils.map(b.utils.filterSVGElements(this.node.childNodes),function(t){return b.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return b.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var n,i,r=this.children();for(n=0,i=r.length;i>n;n++)r[n]instanceof b.Element&&t.apply(r[n],[n,r]),e&&r[n]instanceof b.Container&&r[n].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),b.extend(b.Parent,{ungroup:function(t,e){return 0===e||this instanceof b.Defs?this:(t=t||(this instanceof b.Doc?this:this.parent(b.Parent)),e=e||1/0,this.each(function(){return this instanceof b.Defs?this:this instanceof b.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove(),this)},flatten:function(t,e){return this.ungroup(t,e)}}),b.Container=b.invent({create:function(t){this.constructor.call(this,t)},inherit:b.Parent}),b.ViewBox=b.invent({create:function(t){var e,n,i,r,s,a,o,h,u=[0,0,0,0],l=1,c=1,f=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof b.Element){for(o=t,h=t,a=(t.attr("viewBox")||"").match(f),s=t.bbox,i=new b.Number(t.width()),r=new b.Number(t.height());"%"==i.unit;)l*=i.value,i=new b.Number(o instanceof b.Doc?o.parent().offsetWidth:o.parent().width()),o=o.parent();for(;"%"==r.unit;)c*=r.value,r=new b.Number(h instanceof b.Doc?h.parent().offsetHeight:h.parent().height()),h=h.parent();this.x=0,this.y=0,this.width=i*l,this.height=r*c,this.zoom=1,a&&(e=parseFloat(a[0]),n=parseFloat(a[1]),i=parseFloat(a[2]),r=parseFloat(a[3]),this.zoom=this.width/this.height>i/r?this.height/r:this.width/i,this.x=e,this.y=n,this.width=i,this.height=r)}else t="string"==typeof t?t.match(f).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):u,this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,e,n,i){return this.destination=new b.ViewBox(t,e,n,i),this},at:function(t){return this.destination?new b.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:b.Container,construct:{viewbox:function(t,e,n,i){return 0==arguments.length?new b.ViewBox(this):this.attr("viewBox",new b.ViewBox(t,e,n,i))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){b.Element.prototype[t]=function(e){return b.on(this.node,t,e),this}}),b.listeners=[],b.handlerMap=[],b.listenerId=0,b.on=function(t,e,n,i){var r=n.bind(i||t.instance||t),s=(b.handlerMap.indexOf(t)+1||b.handlerMap.push(t))-1,a=e.split(".")[0],o=e.split(".")[1]||"*";b.listeners[s]=b.listeners[s]||{},b.listeners[s][a]=b.listeners[s][a]||{},b.listeners[s][a][o]=b.listeners[s][a][o]||{},n._svgjsListenerId||(n._svgjsListenerId=++b.listenerId),b.listeners[s][a][o][n._svgjsListenerId]=r,t.addEventListener(a,r,!1)},b.off=function(t,e,n){var i=b.handlerMap.indexOf(t),r=e&&e.split(".")[0],s=e&&e.split(".")[1];if(-1!=i)if(n){if("function"==typeof n&&(n=n._svgjsListenerId),!n)return;b.listeners[i][r]&&b.listeners[i][r][s||"*"]&&(t.removeEventListener(r,b.listeners[i][r][s||"*"][n],!1),delete b.listeners[i][r][s||"*"][n])}else if(s&&r){if(b.listeners[i][r]&&b.listeners[i][r][s]){for(n in b.listeners[i][r][s])b.off(t,[r,s].join("."),n);delete b.listeners[i][r][s]}}else if(s)for(e in b.listeners[i])for(namespace in b.listeners[i][e])s===namespace&&b.off(t,[e,s].join("."));else if(r){if(b.listeners[i][r]){for(namespace in b.listeners[i][r])b.off(t,[r,namespace].join("."));delete b.listeners[i][r]}}else{for(e in b.listeners[i])b.off(t,e);delete b.listeners[i],delete b.handlerMap[i]}},b.extend(b.Element,{on:function(t,e,n){return b.on(this.node,t,e,n),this},off:function(t,e){return b.off(this.node,t,e),this},fire:function(e,n){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new t.CustomEvent(e,{detail:n,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),b.Defs=b.invent({create:"defs",inherit:b.Container}),b.G=b.invent({create:"g",inherit:b.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new b.G)}}}),b.extend(b.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof b.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof b.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),b.Mask=b.invent({create:function(){this.constructor.call(this,b.create("mask")),this.targets=[]},inherit:b.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],this.parent().removeElement(this),this}},construct:{mask:function(){return this.defs().put(new b.Mask)}}}),b.extend(b.Element,{maskWith:function(t){return this.masker=t instanceof b.Mask?t:this.parent().mask().add(t),
this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),b.ClipPath=b.invent({create:function(){this.constructor.call(this,b.create("clipPath")),this.targets=[]},inherit:b.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new b.ClipPath)}}}),b.extend(b.Element,{clipWith:function(t){return this.clipper=t instanceof b.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),b.Gradient=b.invent({create:function(t){this.constructor.call(this,b.create(t+"Gradient")),this.type=t},inherit:b.Container,extend:{at:function(t,e,n){return this.put(new b.Stop).update(t,e,n)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="gradientTransform"),b.Container.prototype.attr.call(this,t,e,n)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),b.extend(b.Gradient,b.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new b.Number(t),fy:new b.Number(e)}):this.attr({x1:new b.Number(t),y1:new b.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new b.Number(t),cy:new b.Number(e)}):this.attr({x2:new b.Number(t),y2:new b.Number(e)})}}),b.extend(b.Defs,{gradient:function(t,e){return this.put(new b.Gradient(t)).update(e)}}),b.Stop=b.invent({create:"stop",inherit:b.Element,extend:{update:function(t){return("number"==typeof t||t instanceof b.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new b.Number(t.offset)),this}}}),b.Pattern=b.invent({create:"pattern",inherit:b.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="patternTransform"),b.Container.prototype.attr.call(this,t,e,n)}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),b.extend(b.Defs,{pattern:function(t,e,n){return this.put(new b.Pattern).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),b.Doc=b.invent({create:function(t){t&&(t="string"==typeof t?e.getElementById(t):t,"svg"==t.nodeName?this.constructor.call(this,t):(this.constructor.call(this,b.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:b.Container,extend:{namespace:function(){return this.attr({xmlns:b.ns,version:"1.1"}).attr("xmlns:xlink",b.xlink,b.xmlns).attr("xmlns:svgjs",b.svgjs,b.xmlns)},defs:function(){if(!this._defs){var t;(t=this.node.getElementsByTagName("defs")[0])?this._defs=b.adopt(t):this._defs=new b.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return"#document"==this.node.parentNode.nodeName?null:this.node.parentNode},spof:function(t){var e=this.node.getScreenCTM();return e&&this.style("left",-e.e%1+"px").style("top",-e.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this}}}),b.Shape=b.invent({create:function(t){this.constructor.call(this,t)},inherit:b.Element}),b.Bare=b.invent({create:function(t,e){if(this.constructor.call(this,b.create(t)),e)for(var n in e.prototype)"function"==typeof e.prototype[n]&&(this[n]=e.prototype[n])},inherit:b.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(t)),this}}}),b.extend(b.Parent,{element:function(t,e){return this.put(new b.Bare(t,e))}}),b.Symbol=b.invent({create:"symbol",inherit:b.Container,construct:{symbol:function(){return this.put(new b.Symbol)}}}),b.Use=b.invent({create:"use",inherit:b.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,b.xlink)}},construct:{use:function(t,e){return this.put(new b.Use).element(t,e)}}}),b.Rect=b.invent({create:"rect",inherit:b.Shape,construct:{rect:function(t,e){return this.put(new b.Rect).size(t,e)}}}),b.Circle=b.invent({create:"circle",inherit:b.Shape,construct:{circle:function(t){return this.put(new b.Circle).rx(new b.Number(t).divide(2)).move(0,0)}}}),b.extend(b.Circle,b.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),b.Ellipse=b.invent({create:"ellipse",inherit:b.Shape,construct:{ellipse:function(t,e){return this.put(new b.Ellipse).size(t,e).move(0,0)}}}),b.extend(b.Ellipse,b.Rect,b.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),b.extend(b.Circle,b.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new b.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new b.Number(t).divide(2))},size:function(t,e){var n=l(this,t,e);return this.rx(new b.Number(n.width).divide(2)).ry(new b.Number(n.height).divide(2))}}),b.Line=b.invent({create:"line",inherit:b.Shape,extend:{array:function(){return new b.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,n,i){return null==t?this.array():(t="undefined"!=typeof e?{x1:t,y1:e,x2:n,y2:i}:new b.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var n=l(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(t,e,n,i){return b.Line.prototype.plot.apply(this.put(new b.Line),null!=t?[t,e,n,i]:[0,0,0,0])}}}),b.Polyline=b.invent({create:"polyline",inherit:b.Shape,construct:{polyline:function(t){return this.put(new b.Polyline).plot(t||new b.PointArray)}}}),b.Polygon=b.invent({create:"polygon",inherit:b.Shape,construct:{polygon:function(t){return this.put(new b.Polygon).plot(t||new b.PointArray)}}}),b.extend(b.Polyline,b.Polygon,{array:function(){return this._array||(this._array=new b.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new b.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=l(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}}),b.extend(b.Line,b.Polyline,b.Polygon,{morphArray:b.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),b.Path=b.invent({create:"path",inherit:b.Shape,extend:{morphArray:b.PathArray,array:function(){return this._array||(this._array=new b.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new b.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var n=l(this,t,e);return this.attr("d",this.array().size(n.width,n.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new b.Path).plot(t||new b.PathArray)}}}),b.Image=b.invent({create:"image",inherit:b.Shape,extend:{load:function(e){if(!e)return this;var n=this,i=new t.Image;return b.on(i,"load",function(){var t=n.parent(b.Pattern);null!==t&&(0==n.width()&&0==n.height()&&n.size(i.width,i.height),t&&0==t.width()&&0==t.height()&&t.size(n.width(),n.height()),"function"==typeof n._loaded&&n._loaded.call(n,{width:i.width,height:i.height,ratio:i.width/i.height,url:e}))}),b.on(i,"error",function(t){"function"==typeof n._error&&n._error.call(n,t)}),this.attr("href",i.src=this.src=e,b.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,n){return this.put(new b.Image).load(t).size(e||0,n||e||0)}}}),b.Text=b.invent({create:function(){this.constructor.call(this,b.create("text")),this.dom.leading=new b.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",b.defaults.attrs["font-family"])},inherit:b.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var e=this.attr("y"),n="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-n:e:this.attr("y","number"==typeof t?t+n:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if("undefined"==typeof t){for(var t="",e=this.node.childNodes,n=0,i=e.length;i>n;++n)0!=n&&3!=e[n].nodeType&&1==b.adopt(e[n]).dom.newLined&&(t+="\n"),t+=e[n].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{t=t.split("\n");for(var n=0,r=t.length;r>n;n++)this.tspan(t[n]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new b.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=b.utils.map(b.utils.filterSVGElements(t.childNodes),function(t){return b.adopt(t)});return new b.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,i=this.dom.leading*new b.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?n+=i:(this.attr("dy",i+n),n=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new b.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new b.Text).text(t)},plain:function(t){return this.put(new b.Text).plain(t)}}}),b.Tspan=b.invent({create:"tspan",inherit:b.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(b.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),b.extend(b.Text,b.Tspan,{plain:function(t){return this._build===!1&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,n=new b.Tspan;return this._build===!1&&this.clear(),e.appendChild(n.node),n.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),b.TextPath=b.invent({create:"textPath",inherit:b.Parent,parent:b.Text,construct:{path:function(t){for(var e=new b.TextPath,n=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+n,b.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this},track:function(){var t=this.textPath();return t?t.reference("href"):void 0},textPath:function(){return this.node.firstChild&&"textPath"==this.node.firstChild.nodeName?b.adopt(this.node.firstChild):void 0}}}),b.Nested=b.invent({create:function(){this.constructor.call(this,b.create("svg")),this.style("overflow","visible")},inherit:b.Container,construct:{nested:function(){return this.put(new b.Nested)}}}),b.A=b.invent({create:"a",inherit:b.Container,extend:{to:function(t){return this.attr("href",t,b.xlink)},show:function(t){return this.attr("show",t,b.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new b.A).to(t)}}}),b.extend(b.Element,{linkTo:function(t){var e=new b.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),b.Marker=b.invent({create:"marker",inherit:b.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,n){return this.defs().marker(t,e,n)}}}),b.extend(b.Defs,{marker:function(t,e,n){return this.put(new b.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}}),b.extend(b.Line,b.Polyline,b.Polygon,b.Path,{marker:function(t,e,n,i){var r=["marker"];return"all"!=t&&r.push(t),r=r.join("-"),t=arguments[1]instanceof b.Marker?arguments[1]:this.doc().marker(e,n,i),this.attr(r,t)}});var x={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};["fill","stroke"].forEach(function(t){var e,n={};n[t]=function(n){if("undefined"==typeof n)return this;if("string"==typeof n||b.Color.isRgb(n)||n&&"function"==typeof n.fill)this.attr(t,n);else for(e=x[t].length-1;e>=0;e--)null!=n[x[t][e]]&&this.attr(x.prefix(t,x[t][e]),n[x[t][e]]);return this},b.extend(b.Element,b.FX,n)}),b.extend(b.Element,b.FX,{rotate:function(t,e,n){return this.transform({rotation:t,cx:e,cy:n})},skew:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:n}):this.transform({skewX:t,skewY:e,cx:n,cy:i})},scale:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:n}):this.transform({scaleX:t,scaleY:e,cx:n,cy:i})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return e="number"==typeof t?t:e,this.transform({flip:t||"both",offset:e})},matrix:function(t){return this.attr("transform",new b.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new b.Number(t).plus(this instanceof b.FX?0:this.x()),!0)},dy:function(t){return this.y(new b.Number(t).plus(this instanceof b.FX?0:this.y()),!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),b.extend(b.Rect,b.Ellipse,b.Circle,b.Gradient,b.FX,{radius:function(t,e){var n=(this._target||this).type;return"radial"==n||"circle"==n?this.attr("r",new b.Number(t)):this.rx(t).ry(null==e?t:e)}}),b.extend(b.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),b.extend(b.Parent,b.Text,b.Tspan,b.FX,{font:function(t,e){if("object"==typeof t)for(e in t)this.font(e,t[e]);return"leading"==t?this.leading(e):"anchor"==t?this.attr("text-anchor",e):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,e):this.attr(t,e)}}),b.Set=b.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,n=[].slice.call(arguments);for(t=0,e=n.length;e>t;t++)this.members.push(n[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;n>e;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new b.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each(function(){t=t.merge(this.rbox(this.doc()))}),t}},construct:{set:function(t){return new b.Set(t)}}}),b.FX.Set=b.invent({create:function(t){this.set=t}}),b.Set.inherit=function(){var t,e=[];for(var t in b.Shape.prototype)"function"==typeof b.Shape.prototype[t]&&"function"!=typeof b.Set.prototype[t]&&e.push(t);e.forEach(function(t){b.Set.prototype[t]=function(){for(var e=0,n=this.members.length;n>e;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new b.FX.Set(this)):this}}),e=[];for(var t in b.FX.prototype)"function"==typeof b.FX.prototype[t]&&"function"!=typeof b.FX.Set.prototype[t]&&e.push(t);e.forEach(function(t){b.FX.Set.prototype[t]=function(){for(var e=0,n=this.set.members.length;n>e;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},b.extend(b.Element,{data:function(t,e,n){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(i){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:n===!0||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),b.extend(b.Element,{remember:function(t,e){if("object"==typeof arguments[0])for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),b.get=function(t){var n=e.getElementById(v(t)||t);return b.adopt(n)},b.select=function(t,n){return new b.Set(b.utils.map((n||e).querySelectorAll(t),function(t){return b.adopt(t)}))},b.extend(b.Parent,{select:function(t){return b.select(t,this.node)}});var w="abcdef".split("");if("function"!=typeof t.CustomEvent){var _=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var i=e.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i};_.prototype=t.Event.prototype,t.CustomEvent=_}return function(e){for(var n=0,i=["moz","webkit"],r=0;r<i.length&&!t.requestAnimationFrame;++r)e.requestAnimationFrame=e[i[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[r]+"CancelAnimationFrame"]||e[i[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame=e.requestAnimationFrame||function(t){var i=(new Date).getTime(),r=Math.max(0,16-(i-n)),s=e.setTimeout(function(){t(i+r)},r);return n=i+r,s},e.cancelAnimationFrame=e.cancelAnimationFrame||e.clearTimeout}(t),b})},{}],144:[function(t,e,n){!function(i,r){if("object"==typeof e&&"object"==typeof e.exports&&(n=e.exports=r(t("terraformer"))),"object"==typeof i.navigator){if(!i.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");i.Terraformer.ArcGIS=r(i.Terraformer)}}(this,function(t){function e(t){var e,n,i,r,s=0,a=0,o=[];i=t.match(/((\+|\-)[^\+\-]+)/g),r=parseInt(i[0],32);for(var h=1;h<i.length;h+=2)e=parseInt(i[h],32)+s,s=e,n=parseInt(i[h+1],32)+a,a=n,o.push([e/r,n/r]);return o}function n(t){return i(t[0],t[t.length-1])||t.push(t[0]),t}function i(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function r(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function s(t){var e,n=0,i=0,r=t.length,s=t[i];for(i;r-1>i;i++)e=t[i+1],n+=(e[0]-s[0])*(e[1]+s[1]),s=e;return n>=0}function a(t){var e=[],i=t.slice(0),r=n(i.shift().slice(0));if(r.length>=4){s(r)||r.reverse(),e.push(r);for(var a=0;a<i.length;a++){var o=n(i[a].slice(0));o.length>=4&&(s(o)&&o.reverse(),e.push(o))}}return e}function o(t){for(var e=[],n=0;n<t.length;n++)for(var i=a(t[n]),r=i.length-1;r>=0;r--){var s=i[r].slice(0);e.push(s)}return e}function h(e,n){var i=t.Tools.arraysIntersectArrays(e,n),r=t.Tools.coordinatesContainPoint(e,n[0]);return!i&&r?!0:!1}function u(e){for(var i,r,a,o=[],u=[],l=0;l<e.length;l++){var c=n(e[l].slice(0));if(!(c.length<4))if(s(c)){var f=[c];o.push(f)}else u.push(c)}for(var d=[];u.length;){a=u.pop();var p=!1;for(i=o.length-1;i>=0;i--)if(r=o[i][0],h(r,a)){o[i].push(a),p=!0;break}p||d.push(a)}for(;d.length;){a=d.pop();var m=!1;for(i=o.length-1;i>=0;i--)if(r=o[i][0],t.Tools.arraysIntersectArrays(r,a)){o[i].push(a),m=!0;break}m||o.push([a.reverse()])}return 1===o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}function l(n,i){var s={};i=i||{},i.idAttribute=i.idAttribute||void 0,"number"==typeof n.x&&"number"==typeof n.y&&(s.type="Point",s.coordinates=[n.x,n.y],(n.z||n.m)&&s.coordinates.push(n.z),n.m&&s.coordinates.push(n.m)),n.points&&(s.type="MultiPoint",s.coordinates=n.points.slice(0)),n.paths&&(1===n.paths.length?(s.type="LineString",s.coordinates=n.paths[0].slice(0)):(s.type="MultiLineString",s.coordinates=n.paths.slice(0))),n.rings&&(s=u(n.rings.slice(0))),(n.compressedGeometry||n.geometry||n.attributes)&&(s.type="Feature",n.compressedGeometry&&(n.geometry={paths:[e(n.compressedGeometry)]}),s.geometry=n.geometry?l(n.geometry):null,s.properties=n.attributes?r(n.attributes):null,n.attributes&&(s.id=n.attributes[i.idAttribute]||n.attributes.OBJECTID||n.attributes.FID));var a=n.geometry?n.geometry.spatialReference:n.spatialReference;return a&&102100===a.wkid&&(s=t.toGeographic(s)),new t.Primitive(s)}function c(e,n){var i;n=n||{};var s=n.idAttribute||"OBJECTID";i=n.sr?{wkid:n.sr}:e&&e.crs===t.MercatorCRS?{wkid:102100}:{wkid:4326};var h,u={};switch(e.type){case"Point":u.x=e.coordinates[0],u.y=e.coordinates[1],e.coordinates[2]&&(u.z=e.coordinates[2]),e.coordinates[3]&&(u.m=e.coordinates[3]),u.spatialReference=i;break;case"MultiPoint":u.points=e.coordinates.slice(0),u.spatialReference=i;break;case"LineString":u.paths=[e.coordinates.slice(0)],u.spatialReference=i;break;case"MultiLineString":u.paths=e.coordinates.slice(0),u.spatialReference=i;break;case"Polygon":u.rings=a(e.coordinates.slice(0)),u.spatialReference=i;break;case"MultiPolygon":u.rings=o(e.coordinates.slice(0)),u.spatialReference=i;break;case"Feature":e.geometry&&(u.geometry=c(e.geometry,n)),u.attributes=e.properties?r(e.properties):{},e.id&&(u.attributes[s]=e.id);break;case"FeatureCollection":for(u=[],h=0;h<e.features.length;h++)u.push(c(e.features[h],n));break;case"GeometryCollection":for(u=[],h=0;h<e.geometries.length;h++)u.push(c(e.geometries[h],n))}return u}function f(n){return new t.LineString(e(n))}var d={};return d.parse=l,d.convert=c,d.toGeoJSON=l,d.fromGeoJSON=c,d.parseCompressedGeometry=f,d})},{terraformer:146}],145:[function(e,n,i){(function(r){"use strict";!function(e){if("object"==typeof i&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var s;s="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:this,s.terraformerProj4js=e()}}(function(){return function t(n,i,r){function s(o,h){if(!i[o]){if(!n[o]){var u="function"==typeof e&&e;if(!h&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};n[o][0].call(c.exports,function(t){var e=n[o][1][t];return s(e?e:t)},c,c.exports,t,n,i,r)}return i[o].exports}for(var a="function"==typeof e&&e,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(t,e,n){function i(t,e){function n(t){return!e.defs(t)&&0===t.indexOf("EPSG:")}return function(i,r,s){var a=s,o=r,h=/urn:ogc:def:crs:EPSG::(\d+)/;if(!a&&i.crs&&"name"===i.crs.type){var u=i.crs.properties.name.match(h);a=u?"EPSG:"+u[1]:i.crs.properties.name}if(a){if(n(a))throw new Error("Projection: "+a+" could not be found in proj4.defs")}else a="EPSG:4326";if(o){if(n(o))throw new Error("Projection: "+o+" could not be found in proj4.defs")}else if(o="EPSG:4326",o===a)return;var l=e(a,o).forward;return t.Tools.applyConverter(i,l)}}e.exports=i},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],146:[function(t,e,n){!function(t,i){"object"==typeof e&&"object"==typeof e.exports&&(n=e.exports=i()),"object"==typeof window&&(t.Terraformer=i())}(this,function(){function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(){var t=Array.prototype.slice.apply(arguments);void 0!==typeof console&&console.warn&&console.warn.apply(console,t)}function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function i(t){if(t.type)switch(t.type){case"Point":return[t.coordinates[0],t.coordinates[1],t.coordinates[0],t.coordinates[1]];case"MultiPoint":return a(t.coordinates);case"LineString":return a(t.coordinates);case"MultiLineString":return r(t.coordinates);case"Polygon":return r(t.coordinates);case"MultiPolygon":return s(t.coordinates);case"Feature":return t.geometry?i(t.geometry):null;case"FeatureCollection":return o(t);case"GeometryCollection":return h(t);default:throw new Error("Unknown type: "+t.type)}return null}function r(t){for(var e=null,n=null,i=null,r=null,s=0;s<t.length;s++)for(var a=t[s],o=0;o<a.length;o++){var h=a[o],u=h[0],l=h[1];null===e?e=u:e>u&&(e=u),null===n?n=u:u>n&&(n=u),null===i?i=l:i>l&&(i=l),null===r?r=l:l>r&&(r=l)}return[e,i,n,r]}function s(t){for(var e=null,n=null,i=null,r=null,s=0;s<t.length;s++)for(var a=t[s],o=0;o<a.length;o++)for(var h=a[o],u=0;u<h.length;u++){var l=h[u],c=l[0],f=l[1];null===e?e=c:e>c&&(e=c),null===n?n=c:c>n&&(n=c),null===i?i=f:i>f&&(i=f),null===r?r=f:f>r&&(r=f)}return[e,i,n,r]}function a(t){for(var e=null,n=null,i=null,r=null,s=0;s<t.length;s++){var a=t[s],o=a[0],h=a[1];null===e?e=o:e>o&&(e=o),null===n?n=o:o>n&&(n=o),null===i?i=h:i>h&&(i=h),null===r?r=h:h>r&&(r=h)}return[e,i,n,r]}function o(t){for(var e,n=[],r=t.features.length-1;r>=0;r--)e=i(t.features[r].geometry),n.push([e[0],e[1]]),n.push([e[2],e[3]]);return a(n)}function h(t){for(var e,n=[],r=t.geometries.length-1;r>=0;r--)e=i(t.geometries[r]),n.push([e[0],e[1]]),n.push([e[2],e[3]]);return a(n)}function u(t){var e=i(t);return{x:e[0],y:e[1],w:Math.abs(e[0]-e[2]),h:Math.abs(e[1]-e[3])}}function l(t){return t*H}function c(t){return t*Z}function f(t,e){for(var n=0;n<t.length;n++)"number"==typeof t[n][0]&&(t[n]=e(t[n])),"object"==typeof t[n]&&(t[n]=f(t[n],e));return t}function d(t){var e=t[0],n=t[1];return[l(e/Y)-360*Math.floor((l(e/Y)+180)/360),l(Math.PI/2-2*Math.atan(Math.exp(-1*n/Y)))]}function p(t){var e=t[0],n=Math.max(Math.min(t[1],89.99999),-89.99999);return[c(e)*Y,Y/2*Math.log((1+Math.sin(c(n)))/(1-Math.sin(c(n))))]}function m(t,e,n){if("Point"===t.type)t.coordinates=e(t.coordinates);else if("Feature"===t.type)t.geometry=m(t.geometry,e,!0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)t.features[i]=m(t.features[i],e,!0);else if("GeometryCollection"===t.type)for(var r=0;r<t.geometries.length;r++)t.geometries[r]=m(t.geometries[r],e,!0);else t.coordinates=f(t.coordinates,e);return n||e===p&&(t.crs=Q),e===d&&delete t.crs,t}function y(t){return m(t,p)}function g(t){return m(t,d)}function v(t,e){return e>t?-1:t>e?1:0}function b(t,e){return t[0]>e[0]?-1:t[0]<e[0]?1:t[1]>e[1]?-1:t[1]<e[1]?1:0}function x(t,e,n){return v((e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1]),0)}function w(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function _(t,e){var n=e;for(var i in t){var r=x(e,n,t[i]);(-1===r||0===r&&w(e,t[i])>w(e,n))&&(n=t[i])}return n}function M(t){if(0===t.length)return[];if(1===t.length)return t;for(var e=[t.sort(b)[0]],n=0;n<e.length;n++){var i=_(t,e[n]);i!==e[0]&&e.push(i)}return e}function E(t){for(var e,n=0;n<t.length-3;n++){var i=t[n],r=t[n+1],s=t[n+2],a=[r[0]-i[0],r[1]-i[1]],o=s[0]*a[1]-s[1]*a[0]+a[0]*i[1]-a[1]*i[0];if(0===n)e=0>o?!0:!1;else if(e&&o>0||!e&&0>o)return!1}return!0}function P(t,e){for(var n=!1,i=-1,r=t.length,s=r-1;++i<r;s=i)(t[i][1]<=e[1]&&e[1]<t[s][1]||t[s][1]<=e[1]&&e[1]<t[i][1])&&e[0]<(t[s][0]-t[i][0])*(e[1]-t[i][1])/(t[s][1]-t[i][1])+t[i][0]&&(n=!n);return n}function S(t,e){if(t&&t.length){if(1===t.length)return P(t[0],e);if(P(t[0],e)){for(var n=1;n<t.length;n++)if(P(t[n],e))return!1;return!0}return!1}return!1}function k(t,e,n,i){var r=(i[0]-n[0])*(t[1]-n[1])-(i[1]-n[1])*(t[0]-n[0]),s=(e[0]-t[0])*(t[1]-n[1])-(e[1]-t[1])*(t[0]-n[0]),a=(i[1]-n[1])*(e[0]-t[0])-(i[0]-n[0])*(e[1]-t[1]);if(0!==a){var o=r/a,h=s/a;if(o>=0&&1>=o&&h>=0&&1>=h)return!0}return!1}function C(t){return!isNaN(parseFloat(t))&&isFinite(t)}function A(t,e){if(C(t[0][0])){if(C(e[0][0])){for(var n=0;n<t.length-1;n++)for(var i=0;i<e.length-1;i++)if(k(t[n],t[n+1],e[i],e[i+1]))return!0}else for(var r=0;r<e.length;r++)if(A(t,e[r]))return!0}else for(var s=0;s<t.length;s++)if(A(t[s],e))return!0;return!1}function T(t){for(var e=[],n=0;n<t.length;n++){var i=t[n].slice();I(i[0],i[i.length-1])===!1&&i.push(i[0]),e.push(i)}return e}function I(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function L(t,e){if(t.length!==e.length)return!1;for(var n=t.slice().sort(b),i=e.slice().sort(b),r=0;r<n.length;r++){if(n[r].length!==i[r].length)return!1;for(var s=0;s<n.length;s++)if(n[r][s]!==i[r][s])return!1}return!0}function O(t){if(t)switch(t.type){case"Point":return new R(t);case"MultiPoint":return new B(t);case"LineString":return new N(t);case"MultiLineString":return new F(t);case"Polygon":return new D(t);case"MultiPolygon":return new z(t);case"Feature":return new U(t);case"FeatureCollection":return new G(t);case"GeometryCollection":return new q(t);default:throw new Error("Unknown type: "+t.type)}}function R(e){var i=Array.prototype.slice.call(arguments);if(e&&"Point"===e.type&&e.coordinates)n(this,e);else if(e&&t(e))this.coordinates=e;else{if(!(i.length>=2))throw"Terraformer: invalid input for Terraformer.Point";this.coordinates=i}this.type="Point"}function B(e){if(e&&"MultiPoint"===e.type&&e.coordinates)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.MultiPoint";this.coordinates=e}this.type="MultiPoint"}function N(e){if(e&&"LineString"===e.type&&e.coordinates)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.LineString";this.coordinates=e}this.type="LineString"}function F(e){if(e&&"MultiLineString"===e.type&&e.coordinates)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.MultiLineString";this.coordinates=e}this.type="MultiLineString"}function D(e){if(e&&"Polygon"===e.type&&e.coordinates)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.Polygon";this.coordinates=e}this.type="Polygon"}function z(e){if(e&&"MultiPolygon"===e.type&&e.coordinates)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.coordinates=e}this.type="MultiPolygon"}function U(t){if(t&&"Feature"===t.type)n(this,t);else{if(!(t&&t.type&&t.coordinates))throw"Terraformer: invalid input for Terraformer.Feature";this.geometry=t}this.type="Feature"}function G(e){if(e&&"FeatureCollection"===e.type&&e.features)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.features=e}this.type="FeatureCollection"}function q(e){if(e&&"GeometryCollection"===e.type&&e.geometries)n(this,e);else if(t(e))this.geometries=e;else{if(!e.coordinates||!e.type)throw"Terraformer: invalid input for Terraformer.GeometryCollection";
this.type="GeometryCollection",this.geometries=[e]}this.type="GeometryCollection"}function V(t,e,n){for(var i=p(t),r=n||64,s={type:"Polygon",coordinates:[[]]},a=1;r>=a;a++){var o=a*(360/r)*Math.PI/180;s.coordinates[0].push([i[0]+e*Math.cos(o),i[1]+e*Math.sin(o)])}return s.coordinates=T(s.coordinates),g(s)}function X(t,e,i){var r=i||64,s=e||250;if(!t||t.length<2||!s||!r)throw new Error("Terraformer: missing parameter for Terraformer.Circle");n(this,new U({type:"Feature",geometry:V(t,s,r),properties:{radius:s,center:t,steps:r}}))}var W={},Y=6378137,H=57.29577951308232,Z=.017453292519943,Q={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}},J={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}},K=["length"];return O.prototype.toMercator=function(){return y(this)},O.prototype.toGeographic=function(){return g(this)},O.prototype.envelope=function(){return u(this)},O.prototype.bbox=function(){return i(this)},O.prototype.convexHull=function(){var t,e,n=[];if("Point"===this.type)return null;if("LineString"===this.type||"MultiPoint"===this.type){if(!(this.coordinates&&this.coordinates.length>=3))return null;n=this.coordinates}else if("Polygon"===this.type||"MultiLineString"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(t=0;t<this.coordinates.length;t++)n=n.concat(this.coordinates[t]);if(n.length<3)return null}else if("MultiPolygon"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(t=0;t<this.coordinates.length;t++)for(e=0;e<this.coordinates[t].length;e++)n=n.concat(this.coordinates[t][e]);if(n.length<3)return null}else if("Feature"===this.type){var i=new O(this.geometry);return i.convexHull()}return new D({type:"Polygon",coordinates:T([M(n)])})},O.prototype.toJSON=function(){var t={};for(var e in this)this.hasOwnProperty(e)&&-1===K.indexOf(e)&&(t[e]=this[e]);return t.bbox=i(this),t},O.prototype.contains=function(t){return new O(t).within(this)},O.prototype.within=function(t){var e,n,i;if("Feature"===t.type&&(t=t.geometry),"Point"===t.type&&"Point"===this.type)return I(this.coordinates,t.coordinates);if("MultiLineString"===t.type&&"Point"===this.type)for(n=0;n<t.coordinates.length;n++){var r={type:"LineString",coordinates:t.coordinates[n]};if(this.within(r))return!0}if(("LineString"===t.type||"MultiPoint"===t.type)&&"Point"===this.type)for(n=0;n<t.coordinates.length;n++){if(this.coordinates.length!==t.coordinates[n].length)return!1;if(I(this.coordinates,t.coordinates[n]))return!0}if("Polygon"===t.type){if("Polygon"===this.type){if(t.coordinates.length===this.coordinates.length)for(n=0;n<this.coordinates.length;n++)if(L(this.coordinates[n],t.coordinates[n]))return!0;return this.coordinates.length&&S(t.coordinates,this.coordinates[0][0])?!A(T(this.coordinates),T(t.coordinates)):!1}if("Point"===this.type)return S(t.coordinates,this.coordinates);if("LineString"===this.type||"MultiPoint"===this.type){if(!this.coordinates||0===this.coordinates.length)return!1;for(n=0;n<this.coordinates.length;n++)if(S(t.coordinates,this.coordinates[n])===!1)return!1;return!0}if("MultiLineString"===this.type){for(n=0;n<this.coordinates.length;n++){var s=new N(this.coordinates[n]);if(s.within(t)===!1)return i++,!1}return!0}if("MultiPolygon"===this.type){for(n=0;n<this.coordinates.length;n++){var a=new O({type:"Polygon",coordinates:this.coordinates[n]});if(a.within(t)===!1)return!1}return!0}}if("MultiPolygon"===t.type){if("Point"===this.type){if(t.coordinates.length)for(n=0;n<t.coordinates.length;n++)if(e=t.coordinates[n],S(e,this.coordinates)&&A([this.coordinates],t.coordinates)===!1)return!0;return!1}if("Polygon"===this.type){for(n=0;n<this.coordinates.length;n++)if(t.coordinates[n].length===this.coordinates.length)for(j=0;j<this.coordinates.length;j++)if(L(this.coordinates[j],t.coordinates[n][j]))return!0;if(A(this.coordinates,t.coordinates)===!1&&t.coordinates.length){for(n=0;n<t.coordinates.length;n++)e=t.coordinates[n],i=S(e,this.coordinates[0][0])===!1?!1:!0;return i}}else if("LineString"===this.type||"MultiPoint"===this.type)for(n=0;n<t.coordinates.length;n++){var o={type:"Polygon",coordinates:t.coordinates[n]};return this.within(o)?!0:!1}else{if("MultiLineString"===this.type){for(n=0;n<this.coordinates.length;n++){var h=new N(this.coordinates[n]);if(h.within(t)===!1)return!1}return!0}if("MultiPolygon"===this.type){for(n=0;n<t.coordinates.length;n++){var u={type:"Polygon",coordinates:t.coordinates[n]};if(this.within(u)===!1)return!1}return!0}}}return!1},O.prototype.intersects=function(t){"Feature"===t.type&&(t=t.geometry);var n=new O(t);if(this.within(t)||n.within(this))return!0;if("Point"!==this.type&&"MultiPoint"!==this.type&&"Point"!==t.type&&"MultiPoint"!==t.type)return A(this.coordinates,t.coordinates);if("Feature"===this.type){var i=new O(this.geometry);return i.intersects(t)}return e("Type "+this.type+" to "+t.type+" intersection is not supported by intersects"),!1},R.prototype=new O,R.prototype.constructor=R,B.prototype=new O,B.prototype.constructor=B,B.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates]);return this},B.prototype.addPoint=function(t){return this.coordinates.push(t),this},B.prototype.insertPoint=function(t,e){return this.coordinates.splice(e,0,t),this},B.prototype.removePoint=function(t){return"number"==typeof t?this.coordinates.splice(t,1):this.coordinates.splice(this.coordinates.indexOf(t),1),this},B.prototype.get=function(t){return new R(this.coordinates[t])},N.prototype=new O,N.prototype.constructor=N,N.prototype.addVertex=function(t){return this.coordinates.push(t),this},N.prototype.insertVertex=function(t,e){return this.coordinates.splice(e,0,t),this},N.prototype.removeVertex=function(t){return this.coordinates.splice(t,1),this},F.prototype=new O,F.prototype.constructor=F,F.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},F.prototype.get=function(t){return new N(this.coordinates[t])},D.prototype=new O,D.prototype.constructor=D,D.prototype.addVertex=function(t){return this.insertVertex(t,this.coordinates[0].length-1),this},D.prototype.insertVertex=function(t,e){return this.coordinates[0].splice(e,0,t),this},D.prototype.removeVertex=function(t){return this.coordinates[0].splice(t,1),this},D.prototype.close=function(){this.coordinates=T(this.coordinates)},D.prototype.hasHoles=function(){return this.coordinates.length>1},D.prototype.holes=function(){if(holes=[],this.hasHoles())for(var t=1;t<this.coordinates.length;t++)holes.push(new D([this.coordinates[t]]));return holes},z.prototype=new O,z.prototype.constructor=z,z.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},z.prototype.get=function(t){return new D(this.coordinates[t])},z.prototype.close=function(){var t=[];return this.forEach(function(e){t.push(T(e))}),this.coordinates=t,this},U.prototype=new O,U.prototype.constructor=U,G.prototype=new O,G.prototype.constructor=G,G.prototype.forEach=function(t){for(var e=0;e<this.features.length;e++)t.apply(this,[this.features[e],e,this.features])},G.prototype.get=function(t){var e;return this.forEach(function(n){n.id===t&&(e=n)}),new U(e)},q.prototype=new O,q.prototype.constructor=q,q.prototype.forEach=function(t){for(var e=0;e<this.geometries.length;e++)t.apply(this,[this.geometries[e],e,this.geometries])},q.prototype.get=function(t){return new O(this.geometries[t])},X.prototype=new O,X.prototype.constructor=X,X.prototype.recalculate=function(){return this.geometry=V(this.properties.center,this.properties.radius,this.properties.steps),this},X.prototype.center=function(t){return t&&(this.properties.center=t,this.recalculate()),this.properties.center},X.prototype.radius=function(t){return t&&(this.properties.radius=t,this.recalculate()),this.properties.radius},X.prototype.steps=function(t){return t&&(this.properties.steps=t,this.recalculate()),this.properties.steps},X.prototype.toJSON=function(){var t=O.prototype.toJSON.call(this);return t},W.Primitive=O,W.Point=R,W.MultiPoint=B,W.LineString=N,W.MultiLineString=F,W.Polygon=D,W.MultiPolygon=z,W.Feature=U,W.FeatureCollection=G,W.GeometryCollection=q,W.Circle=X,W.toMercator=y,W.toGeographic=g,W.Tools={},W.Tools.positionToMercator=p,W.Tools.positionToGeographic=d,W.Tools.applyConverter=m,W.Tools.toMercator=y,W.Tools.toGeographic=g,W.Tools.createCircle=V,W.Tools.calculateBounds=i,W.Tools.calculateEnvelope=u,W.Tools.coordinatesContainPoint=P,W.Tools.polygonContainsPoint=S,W.Tools.arraysIntersectArrays=A,W.Tools.coordinatesContainPoint=P,W.Tools.coordinatesEqual=L,W.Tools.convexHull=M,W.Tools.isConvex=E,W.MercatorCRS=Q,W.GeographicCRS=J,W})},{}],147:[function(t,e,n){"use strict";function i(t,e){function n(){return i._attribData?i._attribData:(i._attribData=new Promise(function(t,n){i.layerData.then(function(s){var o=new e.Deferred,h={maxId:-1,batchSize:-1,layerUrl:s.load.layerUrl,oidField:s.oidField,attribs:s.load.attribs,supportsLimit:s.load.supportsLimit,esriBundle:e};a(h,o),o.promise.then(function(e){delete s.load,t(r(s.oidField,e))},function(t){console.warn("error getting attribute data for "+s.load.layerUrl),delete i._attribData,n(t)})})}),i._attribData)}var i={featureIdx:t,getAttribs:n};return i}function r(t,e){var n={features:e,oidIndex:{}};return e.forEach(function(e,i){n.oidIndex[e.attributes[t].toString()]=i}),n}function s(t){var e=/\/(\d+)\/?$/,n=t.match(e);if(n)return parseInt(n[1]);throw new Error("Cannot extract layer index from url "+t)}function a(t,e){var n=t.esriBundle.esriRequest({url:t.layerUrl+"/query",content:{where:t.oidField+">"+t.maxId,outFields:t.attribs,returnGeometry:"false",f:"json"},callbackParamName:"callback",handleAs:"json"});n.then(function(n){if(n.features){var i=n.features.length;if(i>0){var r=void 0;if(t.supportsLimit?r=n.exceededTransferLimit:(-1===t.batchSize&&(t.batchSize=i),r=i>=t.batchSize),r){var s=new t.esriBundle.Deferred;t.maxId=n.features[i-1].attributes[t.oidField],a(t,s),s.then(function(t){e.resolve(n.features.concat(t))},function(t){e.reject(t)})}else e.resolve(n.features)}else e.resolve([])}else e.reject(n.error)},function(t){e.reject(t)})}function o(t,e){return function(n,r){var s=arguments.length<=2||void 0===arguments[2]?"*":arguments[2],a=n+"/"+r,o=i(r,t);return o.layerData=new Promise(function(n,i){var o={},h=t.esriRequest({url:a,content:{f:"json"},callbackParamName:"callback",handleAs:"json"});h.then(function(t){t&&"undefined"==typeof t.error?(o.layerType=t.type,o.geometryType=t.geometryType||"none",o.minScale=t.minScale,o.maxScale=t.maxScale,o.supportsFeatures=!1,o.extent=t.extent,"Feature Layer"===t.type&&(o.supportsFeatures=!0,o.fields=t.fields,o.nameField=t.displayField,t.fields.every(function(t){return"esriFieldTypeOID"===t.type?(o.oidField=t.name,!1):!0}),"*"!==s&&-1===s.split(",").indexOf(o.oidField)&&(s+=","+o.oidField),o.renderer=t.drawingInfo.renderer,o.legend=e.symbology.rendererToLegend(o.renderer,r),e.symbology.enhanceRenderer(o.renderer,o.legend),o.load={supportsLimit:(t.currentVersion||1)>=10.1,layerUrl:a,attribs:s}),n(o)):(console.warn("Service metadata load error"),i(t&&t.error?t.error:new Error("Unknown error loading service metadata")))},function(t){console.warn("Service metadata load error : "+t),i(t)})}),o}}function h(t,e){return function(n){var s=i("0",t);s._attribData=Promise.resolve(r(n.objectIdField,n.graphics.map(function(t){return{attributes:t.attributes}})));var a=n.renderer.toJson(),o=e.symbology.rendererToLegend(a,0);return e.symbology.enhanceRenderer(a,o),s.layerData=Promise.resolve({oidField:n.objectIdField,fields:n.fields,geometryType:n.geometryType||JSON.parse(n._json).layerDefinition.drawingInfo.geometryType,minScale:n.minScale,maxScale:n.maxScale,layerType:"Feature Layer",renderer:a,legend:o}),s}}e.exports=function(t,e){return{loadServerAttribs:o(t,e),loadFileAttribs:h(t,e),getLayerIndex:s}}},{}],148:[function(t,e,n){e.exports={markerSymbol:{width:16.5,height:16.5,type:"esriPMS",contentType:"image/png",imageData:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARuSURBVDiNjZVrbFRVEMd/5967e9vddbduN4WWYgXKKyVQWgIhkQBVqJIYCQZJI00UH2DiNxUUQwQNSfH1RYwghphoCIGADQk1QKqAGCKhCKTKq6GWbYHSdvve9u7ee8cP210LAjrJ+XAmM78zOf8zcxT/bROBYuDRkX03cA1ofliSeoDfBFYAz2UZemFZXsBf6De9gkvbQCJx7k7/4LAjrUAtcBBI/B/wDGBL6Zhg0cZ5E8YvKswJ+zRl4LqIOOC6xBO2fbytJ7a1oS16sSveDGwG/ngYuEJXatOnT06f9ErJuEINUYgLrosK5CDiID2d4LogLrbtyDeX7rSu/631msBHwPE0SB9dqa5Uzf4V5SWrpuXna6AQAQREyFqzGWPWAuwzR0j7Fag5EV+oPOILHGjuni5wFugYDTaB7Z8vmTFj1bSC/DQMEbRIAZ6FK9BL5qGCYVSWD4m1I4N9mZhJj3j9OR5dP3azf/LIvbtp8AulY0LPbF86c6oCBQKAt7Ia8+VN6BNKQNPA8GJMKcNTsRKUwrl6LlN9aTgreLSt37o9ZHcDjWnwpi+eLp01NdcfSAd6lq7GU7ma5C+1WF9tQC+ajnS3M7TtNZTpw1tZDeLiXGnIXEvEq+sHW3pN4IABTDR1fdyiotxwRtFIAZ4lVSRP1pI4+CW4Ltb3NSnxhgaw9n4GCOazr2KfrsNtv5FSPt8fztLV+GFHHteA4vL8kN/vNYw02CirANcl+eO3GWWlL4b0xTL7RO0OEBdj/rKMz2doRmk42wcUa0BuYcjvBVA5EczXt6aCHRtzzQeoUG7qsLlLMeZWko7LeqMGsW28i1fie2cnWngsAIU+wwtENEBERO55z/zLcT+7T3uN5IkGdLX1xZMA0tOJ9fX72KfrULqOtXsL0tsFgH3maOoNj8QN73gPpRskftpH/JO1uLHbAETjdgLo1ICmhlu9gwMJ206fajfUg9LwLHvpn+KCYVQwoy/e5esAhX26LuMbTLr2hdhQHGjSgGbLcaInWroyykjXLZLH9uBZsBzv82+isv2Yq98lq3ojKjuAWfU2nsUrsQ7twu1oy4B/vj0YsxyJAi3pW6qaOSb01qnqJ8r09HwQwXiqCu/SF0EEsZOpyg0PKEXi0C6sw7vBcUBckrYjCw83nWvsGf4Y2JdukKvtg1ZFxGcG54wNhdIt7TRdwGmoR4b60QsmgpMkWb8X67sa7PMnMi0Nws5LndE913saga2MamkHuFjf3DF/dn4oUJzj86eTJN6He+08+pRypC+G9f221JwYNU+ORHs71v0avQxsANrh7unWJXBj/6Wb08LZHr00LxjU0nNDBOfyWewLJ2E4nqnSdlzZ+eed6NpTNy4LfEhqunEvGOAvoOFoc+fkuusdw3l+0ygMmKZXUxrDccRKQQcs2z7S2tO55vj1K3uaYo3A+tFQePDX5CH1NS03dTV+dl7Q91jANAWXaH/C+r2jPz6i/g8jK3kv4EHg0VYETOHuz/Qq0PKwpL8BL8EAdKaMj7AAAAAASUVORK5CYII="}}},{}],149:[function(t,e,n){e.exports={circlePoint:{geometryType:"esriGeometryPoint",renderer:{type:"simple",symbol:{type:"esriSMS",style:"esriSMSCircle",color:[67,100,255,200],size:7}}},solidLine:{geometryType:"esriGeometryPolyline",renderer:{type:"simple",symbol:{type:"esriSLS",style:"esriSLSSolid",color:[90,90,90,200],width:2}}},outlinedPoly:{geometryType:"esriGeometryPolygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[76,76,125,200],outline:{type:"esriSLS",style:"esriSLSSolid",color:[110,110,110,255],width:1}}}},boundingBoxPoly:{geometryType:"esriGeometryPolygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[255,0,0,64],outline:{type:"esriSLS",style:"esriSLSSolid",color:[240,128,128,255],width:1}}}}}},{}],150:[function(t,e,n){"use strict";function i(t,e){var n={};return Object.keys(e).forEach(function(i){var r=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();n[i]=t.on(r,function(t){var n=["update-start","update-end","error"];n.indexOf(r)>=0&&(t.layer=t.target),e[i](t)})}),n}e.exports=function(){return{wrapEvents:i}}},{}],151:[function(t,e,n){"use strict";function i(t){return function(e){var n=new t.Graphic({geometry:e.geometry});return n.symbol=e.getLayer().renderer.getSymbol(e),n}}function r(t){return function(e,n){var i=new t.Graphic({geometry:e});return i.symbol=t.symbolJsonUtils.fromJson(n),i}}function s(t,e){return function(t,n){return t.map(function(t){if("server"!==t.source)return Promise.resolve(e.hilight.cloneLayerGraphic(t.graphic));var i=function(){var i=t.graphic.geometry;return e.proj.isSpatialRefEqual(i.spatialReference,n)||(i=e.proj.localProjectGeometry(n,i)),{v:t.layerFC.getLayerData().then(function(n){var r=e.symbology.getGraphicSymbol(t.graphic.attributes,n.renderer);return e.hilight.geomToGraphic(i,r)})}}();return"object"==typeof i?i.v:void 0})}}function a(t){return function(e){var n="rv_hilight",i=o.markerSymbol;e&&(e.layerId&&(n=e.layerId),e.markerSymbol&&(i=e.markerSymbol));var r=new t.GraphicsLayer({id:n,visible:!0});return r.addMarker=function(e){var n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];n&&r.clear();var s=new t.Graphic({symbol:i});s.setGeometry(e),r.add(s)},r.addHilight=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];e&&r.clear();var n=Array.isArray(t)?t:[t];n.forEach(function(t){return r.add(t)})},r.clearHilight=function(){r.clear()},r}}var o=t("./defaultHilightSymbols.json");e.exports=function(t,e){return{makeHilightLayer:a(t),geomToGraphic:r(t),cloneLayerGraphic:i(t),getUnboundGraphics:s(t,e)}}},{"./defaultHilightSymbols.json":148}],152:[function(t,e,n){"use strict";function i(t,e){var n=!1,i={};return i.layer=o(t,i),i.legend=h(),i.proj=l(t),i.Map=u(t,i),i.attribs=r(t,i),i.symbology=d(t,i,e),i.hilight=a(t,i),i.events=s(),i.query=c(t),i.shared=f(t),i.debug=function(){return 1===arguments.length&&(n=arguments[0]===!0),n},i.esriBundle=function(){if(n)return t;throw new Error("Must set debug to directly access the bundle")},i}var r=t("./attribute.js"),s=t("./events.js"),a=t("./hilight.js"),o=t("./layer.js"),h=t("./legend.js"),u=t("./map/esriMap.js"),l=t("./proj.js"),c=t("./query.js"),f=t("./shared.js"),d=t("./symbology.js");e.exports=function(t,e){function n(){return new Promise(function(t,n){e.require(r.map(function(t){return t[0]}),function(){for(var e={},n=0;n<arguments.length;++n)e[r[n][1]]=arguments[n];t(e)}),e.require.on("error",n)})}var r=[["dojo/Deferred","Deferred"],["dojo/query","dojoQuery"],["esri/Color","Color"],["esri/config","esriConfig"],["esri/dijit/Basemap","Basemap"],["esri/dijit/BasemapGallery","BasemapGallery"],["esri/dijit/BasemapLayer","BasemapLayer"],["esri/dijit/OverviewMap","OverviewMap"],["esri/dijit/Scalebar","Scalebar"],["esri/geometry/Extent","Extent"],["esri/geometry/Point","Point"],["esri/geometry/ScreenPoint","ScreenPoint"],["esri/graphic","Graphic"],["esri/graphicsUtils","graphicsUtils"],["esri/layers/ArcGISDynamicMapServiceLayer","ArcGISDynamicMapServiceLayer"],["esri/layers/ArcGISImageServiceLayer","ArcGISImageServiceLayer"],["esri/layers/ArcGISTiledMapServiceLayer","ArcGISTiledMapServiceLayer"],["esri/layers/FeatureLayer","FeatureLayer"],["esri/layers/GraphicsLayer","GraphicsLayer"],["esri/layers/LayerDrawingOptions","LayerDrawingOptions"],["esri/layers/WMSLayer","WmsLayer"],["esri/map","Map"],["esri/request","esriRequest"],["esri/SpatialReference","SpatialReference"],["esri/symbols/jsonUtils","symbolJsonUtils"],["esri/tasks/GeometryService","GeometryService"],["esri/tasks/IdentifyParameters","IdentifyParameters"],["esri/tasks/IdentifyTask","IdentifyTask"],["esri/tasks/ProjectParameters","ProjectParameters"],["esri/tasks/query","Query"],["esri/tasks/QueryTask","QueryTask"],["esri/tasks/PrintParameters","PrintParameters"],["esri/tasks/PrintTask","PrintTask"],["esri/tasks/PrintTemplate","PrintTemplate"]];return new Promise(function(n,i){if(e.require)return console.warn("window.require has been set, attempting to reuse existing loader with no new script tag created"),void n();var r=e.document.createElement("script"),s=e.document.head||e.document.getElementsByTagName("head")[0];r.type="text/javascript",r.onerror=function(t){return i(t)},r.onload=function(){return n()},s.appendChild(r),r.src=t,console.log("made a promise")}).then(n).then(function(t){return i(t,e)})}},{"./attribute.js":147,"./events.js":150,"./hilight.js":151,"./layer.js":153,"./legend.js":173,"./map/esriMap.js":175,"./proj.js":177,"./query.js":178,"./shared.js":179,"./symbology.js":180}],153:[function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){var e=t.toLowerCase(),n=[/^http:/,/^https:/,/^ftp:/,/^\/\//];return n.some(function(t){return e.match(t)})}function s(t,e){return new Promise(function(n,i){var r=e.esriRequest({url:t,handleAs:"arraybuffer"});r.then(function(t){n(t)},function(t){i(t)})})}function a(t){return{serviceType:t,index:-1,tileSupport:!1}}function o(t,e,n,i){var r=a(t);return r.serviceName=i[e]||"",r.rootUrl=n,t===G.TileService&&(r.tileSupport=!0,r.serviceType=G.DynamicService),r}function h(t,e,n){return new Promise(function(i){var o=a(t);e&&r(e)?s(e,n).then(function(t){o.fileData=t,i(o)})["catch"](function(){o.serviceType=G.Error,i(o)}):i(o)})}function u(t){if(t.type){var e={"Feature Layer":G.FeatureLayer,"Raster Layer":G.RasterLayer,"Group Layer":G.GroupLayer};return e[t.type]||G.Unknown}return t.hasOwnProperty("singleFusedMapCache")?t.singleFusedMapCache?G.TileService:G.DynamicService:t.hasOwnProperty("allowGeometryUpdates")?G.FeatureService:t.hasOwnProperty("allowedMosaicMethods")?G.ImageService:G.Unknown}function l(t,e,n){var i=/\/(\d+)\/?$/,r=t.match(i);return r?(n.index=parseInt(r[1]),n.rootUrl=t.substr(0,t.length-r[0].length),c(n.rootUrl,e).then(function(t){return n.tileSupport=t.tileSupport,n.serviceType=t.serviceType,n.layers=t.layers,n})):(console.warn("Cannot extract layer index from url "+t),Promise.resolve(n))}function c(t,e,n){var i={};return i[G.FeatureLayer]=function(n){var i=o(G.FeatureLayer,"name",t,n);return i.fields=n.fields,i.geometryType=n.geometryType,i.smartDefaults={primary:i.fields[0].name},i.indexType=G.FeatureLayer,l(t,e,i)},i[G.RasterLayer]=function(n){var i=o(G.RasterLayer,"name",t,n);return i.indexType=G.RasterLayer,l(t,e,i)},i[G.GroupLayer]=function(n){var i=o(G.GroupLayer,"name",t,n);return i.indexType=G.GroupLayer,l(t,e,i)},i[G.TileService]=function(e){var n=o(G.TileService,"mapName",t,e);return n.layers=e.layers,n},i[G.DynamicService]=function(e){var n=o(G.DynamicService,"mapName",t,e);return n.layers=e.layers,n},i[G.FeatureService]=function(e){var n=o(G.FeatureService,"description",t,e);return n.layers=e.layers,n},i[G.ImageService]=function(e){var n=o(G.ImageService,"name",t,e);return n.fields=e.fields,n},i[G.Unknown]=function(){return a(G.Unknown)},new Promise(function(r){var s=e.esriRequest({url:t,content:{f:"json"},callbackParamName:"callback",handleAs:"json"});s.then(function(t){var e=u(t);n&&e!==n&&(e=G.Unknown),r(i[e](t))},function(){r(a(G.Error))})})}function f(t,e,n){var i={};return i[G.CSV]=function(){return h(G.CSV,t,e)},i[G.GeoJSON]=function(){return h(G.GeoJSON,t,e)},i[G.Shapefile]=function(){return h(G.Shapefile,t,e)},i[G.Unknown]=function(){return h(G.Unknown)},new Promise(function(e){if(n)e(i[n]());else{var r=G.Unknown;switch(t.substr(t.lastIndexOf(".")+1).toLowerCase()){case"csv":r=G.CSV;break;case"zip":r=G.Shapefile;break;case"json":r=G.GeoJSON}e(i[r]())}})}function d(t,e){return console.log(t,e),Promise.resolve(a(G.WMS))}function p(t){return function(e,n){if(n){var i={},r={};return i[G.CSV]="F_FILE",i[G.GeoJSON]="F_FILE",i[G.Shapefile]="F_FILE",i[G.FeatureLayer]="F_ESRI",i[G.RasterLayer]="F_ESRI",i[G.GroupLayer]="F_ESRI",i[G.TileService]="F_ESRI",i[G.DynamicService]="F_ESRI",i[G.ImageService]="F_ESRI",i[G.WMS]="F_WMS",r.F_FILE=function(){return f(e,t,n)},r.F_ESRI=function(){return c(e,t,n)},r.F_WMS=function(){return d(e,t)},r[i[n]]()}return new Promise(function(n){f(e,t).then(function(i){i.serviceType===G.Unknown||i.serviceType===G.Error?c(e,t).then(function(i){i.serviceType===G.Unknown||i.serviceType===G.Error?n(i):i.serviceType===G.GroupLayer?!function(){var i=e.lastIndexOf("/"),r=parseInt(e.substring(i+1));e=e.substring(0,i),c(e,t).then(function(t){t.groupIdx=r,n(t)})}():n(i)}):n(i)})})}}function m(t){return new TextDecoder("utf-8").decode(new Uint8Array(t))}function y(t){var e={Point:"esriGeometryPoint",MultiPoint:"esriGeometryMultipoint",LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"},n=_(t),i={fields:n,geometryType:e[t.features[0].geometry.type],formattedData:t,smartDefaults:{primary:n[0].name}};return i.geometryType?Promise.resolve(i):Promise.reject(new Error("Unexpected geometry type in GeoJSON"))}function g(t){var e=m(t),n=S(e,","),i=void 0;if(0===n.length)i="File has no rows";else{var r=function(){var t=n[0].length;if(2>t)i="File has less than two columns";else{if(n.every(function(e){return e.length===t})){var r={formattedData:e,smartDefaults:b(n),fields:n[0].map(function(t){return{name:t,type:"esriFieldTypeString"}}),geometryType:"esriGeometryPoint"};return{v:Promise.resolve(r)}}i="File has inconsistent column counts"}}();if("object"==typeof r)return r.v}return Promise.reject(new Error(i))}function v(t,e){var n,r=(n={},i(n,G.CSV,function(t){return g(t)}),i(n,G.GeoJSON,function(t){var e=JSON.parse(m(t));return y(e)}),i(n,G.Shapefile,function(t){return B(t).then(function(t){return y(t)})}),n);return r[t](e)}function b(t){function e(t,e,n){var i=t[0],r=i.filter(function(n,i){return t.every(function(t,n){return 0===n||e.test(t[i])})}).filter(function(t){return n.test(t)});return r}var n=new RegExp(/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)$/),i=new RegExp(/^[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/),r=new RegExp(/^.*(y|la).*$/i),s=new RegExp(/^.*(x|lo).*$/i),a=e(t,n,r),o=e(t,i,s),h=a[0]||null,u=o.find(function(t){return t!==h})||null,l=t[0].find(function(t){return t!==h&&t!==u})||null;return{lat:h,"long":u,primary:l}}function x(t){return function(e,n){var i=new t.IdentifyParameters;if(!n)throw new Error("serverLayerIdentify - missing opts arguement");var r=["geometry","mapExtent","height","width"];return r.forEach(function(t){if(!n[t])throw new Error("serverLayerIdentify - missing opts."+t+" arguement");i[t]=n[t]}),i.layerIds=n.layerIds||e.visibleLayers,i.returnGeometry=n.returnGeometry||!1,i.layerOption=t.IdentifyParameters.LAYER_OPTION_ALL,i.spatialReference=n.geometry.spatialReference,i.tolerance=n.tolerance||5,new Promise(function(n,r){var s=new t.IdentifyTask(e.url);s.on("complete",function(t){n(t.results)}),s.on("error",function(t){r(t.error)}),s.execute(i)})}}function w(t){if("FeatureCollection"!==t.type)throw new Error("Assignment can only be performed on FeatureCollections");var e=!0,n=!0;t.features.forEach(function(t,i){Object.assign(t.properties,{ID_FILE:"",OBJECTID_FILE:""}),"id"in t&&"undefined"!=typeof t.id&&(t.properties.ID_FILE=t.id,e=!1),"OBJECTID"in t.properties&&(t.properties.OBJECTID_FILE=t.properties.OBJECTID,delete t.properties.OBJECTID,n=!1),t.id=i+1}),e&&t.features.forEach(function(t){delete t.properties.ID_FILE}),n&&t.features.forEach(function(t){delete t.properties.OBJECTID_FILE})}function _(t){if(t.features.length<1)throw new Error("Field extraction requires at least one feature");return Object.keys(t.features[0].properties).map(function(t){return{name:t,type:"esriFieldTypeString"}})}function M(t,e,n){return!t.getProjection(e)&&n&&e?n(e).then(function(n){return n&&t.addProjection(e,n),n}):Promise.resolve(null)}function E(t,e){return function(n,i){var r=void 0,s="EPSG:4326",a=void 0,o={objectIdField:"OBJECTID",fields:[{name:"OBJECTID",type:"esriFieldTypeOID"}]};if(w(n),o.drawingInfo=z[U[n.features[0].geometry.type]],n.crs&&"name"===n.crs.type&&(s=n.crs.properties.name),!i)throw new Error("makeGeoJsonLayer - missing opts arguement");if(i.sourceProjection&&(s=i.sourceProjection),!i.targetWkid)throw new Error("makeGeoJsonLayer - missing opts.targetWkid arguement");r=i.targetWkid,i.fields&&(o.fields=o.fields.concat(i.fields)),a=i.layerId?i.layerId:e.shared.generateUUID(),1===o.fields.length&&(o.fields=o.fields.concat(_(n)));var h="EPSG:"+r,u=M(e.proj,s,i.epsgLookup),l=M(e.proj,h,i.epsgLookup),c=new Promise(function(u){e.proj.projectGeojson(n,h,s);var l=R.ArcGIS.convert(n,{sr:r}),c=o.drawingInfo.geometryType,f={features:l,geometryType:c},d=new t.FeatureLayer({layerDefinition:o,featureSet:f},{mode:t.FeatureLayer.MODE_SNAPSHOT,id:a});d.spatialReference=new t.SpatialReference({wkid:r}),i.colour&&(d.renderer.symbol.color=new t.Color(i.colour)),d.geometryType=c,u(d)});return u.then(function(){return l}).then(function(){return c})}}function P(t,e){return function(t,n){var i={latfield:"Lat",lonfield:"Long",delimiter:","};return n&&(n.latfield&&(i.latfield=n.latfield),n.lonfield&&(i.lonfield=n.lonfield),n.delimiter&&(i.delimiter=n.delimiter)),new Promise(function(r,s){O.csv2geojson(t,i,function(t,a){t?(console.warn("csv conversion error"),console.log(t),s(t)):(a.features.map(function(t){t.properties[i.lonfield]=t.geometry.coordinates[0],t.properties[i.latfield]=t.geometry.coordinates[1]}),n.sourceProjection="EPSG:4326",n.renderer="circlePoint",e.layer.makeGeoJsonLayer(a,n).then(function(t){r(t)}))})})}}function S(t,e){return O.dsv(e).parseRows(t)}function k(t,e){return function(t,n){return new Promise(function(i,r){B(t).then(function(t){e.layer.makeGeoJsonLayer(t,n).then(function(t){i(t)})})["catch"](function(t){r(t)})})}}function C(t,e,n){return function(i,r,s){return new n.ImageRecord(t.ArcGISImageServiceLayer,e,i,r,s)}}function A(t,e,n){return function(i,r,s){return new n.FeatureRecord(t.FeatureLayer,t.esriRequest,e,i,r,s)}}function T(t,e,n){return function(i,r,s){var a=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];return new n.DynamicRecord(t.ArcGISDynamicMapServiceLayer,t.esriRequest,e,i,r,s,a)}}function I(t,e,n){return function(i,r,s){return new n.TileRecord(t.ArcGISTiledMapServiceLayer,e,i,r,s)}}function L(t,e,n){return function(i,r,s){return new n.WmsRecord(t.WmsLayer,e,i,r,s)}}function j(t,e,n){return t.every(function(t){return!(isNaN(t[e])||isNaN(t[n]))})}var O=t("csv2geojson"),R=t("terraformer"),B=t("shpjs"),N=t("./layer/ogc.js"),F=t("./layer/bbox.js"),D=t("./layer/layerRec/main.js"),z=t("./defaultRenderers.json");R.ArcGIS=t("terraformer-arcgis-parser");var U={Point:"circlePoint",MultiPoint:"circlePoint",LineString:"solidLine",MultiLineString:"solidLine",Polygon:"outlinedPoly",MultiPolygon:"outlinedPoly"},G={CSV:"csv",GeoJSON:"geojson",Shapefile:"shapefile",FeatureLayer:"featurelayer",RasterLayer:"rasterlayer",GroupLayer:"grouplayer",TileService:"tileservice",FeatureService:"featureservice",DynamicService:"dynamicservice",ImageService:"imageservice",WMS:"wms",Unknown:"unknown",Error:"error"};e.exports=function(t,e){var n=D(t,e);return{ArcGISDynamicMapServiceLayer:t.ArcGISDynamicMapServiceLayer,ArcGISImageServiceLayer:t.ArcGISImageServiceLayer,GraphicsLayer:t.GraphicsLayer,FeatureLayer:t.FeatureLayer,ScreenPoint:t.ScreenPoint,Query:t.Query,TileLayer:t.ArcGISTiledMapServiceLayer,ogc:N(t),bbox:F(t,e),createImageRecord:C(t,e,n),createWmsRecord:L(t,e,n),createTileRecord:I(t,e,n),createDynamicRecord:T(t,e,n),createFeatureRecord:A(t,e,n),LayerDrawingOptions:t.LayerDrawingOptions,makeGeoJsonLayer:E(t,e),makeCsvLayer:P(t,e),makeShapeLayer:k(t,e),serverLayerIdentify:x(t),predictLayerUrl:p(t),validateFile:v,csvPeek:S,serviceType:G,validateLatLong:j}}},{"./defaultRenderers.json":149,"./layer/bbox.js":154,"./layer/layerRec/main.js":164,"./layer/ogc.js":171,csv2geojson:5,shpjs:138,terraformer:146,"terraformer-arcgis-parser":144}],154:[function(t,e,n){"use strict";function i(t,e){return function(n,i,s){var a=new t.GraphicsLayer({id:n,visible:!0}),o=i;return e.proj.isSpatialRefEqual(i.spatialReference,s)||(o=e.proj.projectEsriExtent(i,s)),a.add(new t.Graphic({geometry:o,symbol:r.boundingBoxPoly.renderer.symbol})),a}}var r=t("../defaultRenderers.json");e.exports=function(t,e){return{makeBoundingBox:i(t,e)}}},{"../defaultRenderers.json":149}],155:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(h){r=!0,s=h}finally{try{!i&&o["return"]&&o["return"]()}finally{if(r)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,
i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},h=t("./shared.js")(),u=t("./basicFC.js")(),l=function(t){function e(t,n,r,s){i(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,s),this._layerPackage=r,this._geometryType=void 0,this._fcount=void 0,this._quickCache={}}return r(e,t),a(e,[{key:"getAttribs",value:function(){return this._layerPackage.getAttribs()}},{key:"getLayerData",value:function(){return this._layerPackage.layerData}},{key:"loadSymbology",value:function(){var t=this;return this.getLayerData().then(function(n){return"Feature Layer"!==n.layerType?o(Object.getPrototypeOf(e.prototype),"loadSymbology",t).call(t):void(t.symbology=h.makeSymbologyArray(n.legend.layers[0].legend))})}},{key:"getFeatureName",value:function(t,e){return this.nameField&&e?e[this.nameField]:"Feature "+t}},{key:"getFormattedAttributes",value:function(){var t=this;if(this._formattedAttributes)return this._formattedAttributes;if(this.layerType===h.clientLayerType.ESRI_RASTER)throw new Error("Attempting to get attributes on a raster layer.");return this._formattedAttributes=Promise.all([this.getAttribs(),this.getLayerData()]).then(function(e){var n=s(e,2),i=n[0],r=n[1],a=r.fields.filter(function(t){return i.features[0].attributes.hasOwnProperty(t.name)}).map(function(t){return{data:t.name,title:t.alias||t.name}}),o=i.features.map(function(e){var n=e.attributes;return n.rvInteractive="",n.rvSymbol=t._parent._apiRef.symbology.getGraphicIcon(n,r.renderer),n});return{columns:a,rows:o,fields:r.fields,oidField:r.oidField,oidIndex:i.oidIndex,renderer:r.renderer}})["catch"](function(){throw delete t._formattedAttributes,new Error("Attrib loading failed")}),this._formattedAttributes}},{key:"checkDateType",value:function(t){return this.getLayerData().then(function(e){if(e.fields){var n=e.fields.find(function(e){return e.name===t});if(n&&n.type)return"esriFieldTypeDate"===n.type}return!1})}},{key:"aliasedFieldName",value:function(t){return this.getLayerData().then(function(n){return e.aliasedFieldNameDirect(t,n.fields)})}},{key:"getServerFeatureInfo",value:function(t){var e=this;return this._quickCache[t]?Promise.resolve(this._quickCache[t]):new Promise(function(n,i){var r=e._parent,s=r._esriRequest({url:r.rootUrl+"/"+e._idx+"/"+t,content:{f:"json"},callbackParamName:"callback",handleAs:"json"});s.then(function(i){i.feature.geometry.spatialReference=r._layer.spatialReference,e._quickCache[t]=i,n(i)},function(t){console.warn(t),i(t)})})}},{key:"fetchGraphic",value:function(t){var e=this._parent._layer,n={graphic:null,source:null,layerFC:this};if(e.graphics){var i=e.graphics.find(function(n){return n.attributes[e.objectIdField]===t});if(i)return n.graphic=i,n.source="layer",Promise.resolve(n)}return this.getServerFeatureInfo(t).then(function(t){return n.graphic=t.feature,n.source="server",n})}}],[{key:"aliasedFieldNameDirect",value:function(t,e){var n=t;if(e){var i=e.find(function(e){return e.name===t});i&&i.alias&&i.alias.length>0&&(n=i.alias)}return n}},{key:"unAliasAttribs",value:function(t,e){var n={};return e.forEach(function(e){n[e.name]=t.hasOwnProperty(e.name)?t[e.name]:t[e.alias]}),n}}]),e}(u.BasicFC);e.exports=function(){return{AttribFC:l}}},{"./basicFC.js":157,"./shared.js":167}],156:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},o=t("./layerRecord.js")(),h=t("./attribFC.js")(),u=function(t){function e(t,n,r,s,o,h){i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,r,s,o,h),this._esriRequest=n}return r(e,t),s(e,[{key:"clickTolerance",get:function(){return this.config.tolerance}}]),s(e,[{key:"aliasedFieldName",value:function(t){return this._featClasses[this._defaultFC].aliasedFieldName(t)}},{key:"getFormattedAttributes",value:function(){return this._featClasses[this._defaultFC].getFormattedAttributes()}},{key:"checkDateType",value:function(t){return this._featClasses[this._defaultFC].checkDateType(t)}},{key:"getAttribs",value:function(){return this._featClasses[this._defaultFC].getAttribs()}},{key:"getLayerData",value:function(){return this._featClasses[this._defaultFC].getLayerData()}},{key:"getFeatureName",value:function(t,e){return this._featClasses[this._defaultFC].getFeatureName(t,e)}},{key:"fetchGraphic",value:function(t){return this._featClasses[this._defaultFC].fetchGraphic(t)}},{key:"getFeatureCount",value:function(t){var e=this;if(!t)return Promise.resolve(this._layer.graphics.length);var n=function(){var n=function i(t){var n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=e._esriRequest({url:t+"/query",content:{f:"json",where:"1=1",returnCountOnly:!0,returnGeometry:!1},callbackParamName:"callback",handleAs:"json"});return new Promise(function(e){r.then(function(r){e(r&&"undefined"==typeof r.error&&"undefined"!=typeof r.count?r.count:n?-1:i(t,!0))},function(r){n?(console.warn(r),e(-1)):e(i(t,!0))})})};return{v:n(t)}}();return"object"==typeof n?n.v:void 0}},{key:"attributesToDetails",value:function(t,e){return Object.keys(t).map(function(n){var i=e?e.find(function(t){return t.name===n}):null;return{key:h.AttribFC.aliasedFieldNameDirect(n,e),value:t[n],type:i?i.type:i}})}}]),e}(o.LayerRecord);e.exports=function(){return{AttribRecord:u}}},{"./attribFC.js":155,"./layerRecord.js":163}],157:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},o=t("./shared.js")(),h=t("./placeholderFC.js")(),u=function(t){function e(t,n,r){i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,r.name||""),this._idx=n,this.queryable=r.state.query,this.extent=r.extent}return r(e,t),s(e,[{key:"queryable",get:function(){return this._queryable},set:function(t){this._queryable=t}},{key:"geomType",get:function(){return Promise.resolve("none")}}]),s(e,[{key:"getScaleSet",value:function(){var t=this._parent._layer;return{minScale:t.minScale,maxScale:t.maxScale}}},{key:"isOffScale",value:function(t){var e=this.getScaleSet(),n={offScale:!1,zoomIn:!1};return t<e.maxScale&&0!==e.maxScale?(n.offScale=!0,n.zoomIn=!1):t>e.minScale&&0!==e.minScale&&(n.offScale=!0,n.zoomIn=!0),n}},{key:"getVisibility",value:function(){return this._parent._layer.visible}},{key:"setVisibility",value:function(t){this._parent._layer.setVisibility(t)}},{key:"loadSymbology",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],n=this._parent._layer.url;if(n){var i=e?void 0:this._idx;return this._parent._apiRef.symbology.mapServerToLocalLegend(n,i).then(function(e){t.symbology=o.makeSymbologyArray(e.layers[0].legend)})}throw new Error("encountered layer with no renderer and no url")}},{key:"zoomToBoundary",value:function(t){return this._parent.zoomToExtent(t,this.extent)}}]),e}(h.PlaceholderFC);e.exports=function(){return{BasicFC:u}}},{"./placeholderFC.js":165,"./shared.js":167}],158:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},o=t("./attribFC.js")(),h=function(t){function e(t,n,r,s){i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,r,s),this.opacity=s.state.opacity,this._highlightFeature=!0,this._scaleSet={minScale:0,maxScale:0}}return r(e,t),s(e,[{key:"getScaleSet",value:function(){return this._scaleSet}},{key:"setVisibility",value:function(t){var e=this._parent._layer.visibleLayers.concat(),n=parseInt(this._idx),i=e.indexOf(n),r=!1,s=!1;t&&-1===i?(1===e.length&&-1===e[0]&&(e.pop(),s=!0),e.push(n),r=!0):!t&&i>-1&&(e.splice(i,1),0===e.length&&(e.push(-1),s=!0),r=!0),r&&(this._parent._layer.setVisibleLayers(e),s&&this._parent._layer.setVisibility(t))}},{key:"getVisibility",value:function(){return this._parent._layer.visibleLayers.indexOf(parseInt(this._idx))>-1}},{key:"highlightFeature",get:function(){return this._highlightFeature},set:function(t){this._highlightFeature=t}},{key:"supportsOpacity",get:function(){return this._parent._isTrueDynamic}},{key:"opacity",get:function(){return this._opacity},set:function(t){if(this._opacity!==t)if(this._opacity=t,this.supportsOpacity){var e=[],n=new this._parent._apiRef.layer.LayerDrawingOptions;n.transparency=-100*(t-1),e[this._idx]=n,this._parent._layer.setLayerDrawingOptions(e)}else this._parent.synchOpacity(t)}},{key:"geomType",get:function(){return this._geometryType},set:function(t){this._geometryType=t}},{key:"featureCount",get:function(){return this._fcount},set:function(t){this._fcount=t}}]),e}(o.AttribFC);e.exports=function(){return{DynamicFC:h}}},{"./attribFC.js":155}],159:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},o=t("./attribRecord.js")(),h=t("./shared.js")(),u=t("./placeholderFC.js")(),l=t("./layerInterface.js")(),c=t("./dynamicFC.js")(),f=t("./attribFC.js")(),d=function(t){function e(t,n,r,s,o,h){var u=arguments.length<=6||void 0===arguments[6]?!1:arguments[6];i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,r,s,o,h),this.ArcGISDynamicMapServiceLayer=t,this._configIsComplete=u,this._proxies={},this._isTrueDynamic=!1}return r(e,t),s(e,[{key:"_layerPassthroughBindings",get:function(){return["setOpacity","setVisibility","setVisibleLayers","setLayerDrawingOptions"]}},{key:"_layerPassthroughProperties",get:function(){return["visibleAtMapScale","visible","spatialReference","layerInfos","supportsDynamicLayers"]}},{key:"layerType",get:function(){return h.clientLayerType.ESRI_DYNAMIC}},{key:"isTrueDynamic",get:function(){return this._isTrueDynamic}}]),s(e,[{key:"getChildProxy",value:function(t){var e=t.toString();if(this._proxies[e])return this._proxies[e];var n=new u.PlaceholderFC(this,""),i=new l.LayerInterface(n);return i.convertToPlaceholder(n),this._proxies[e]=i,i}},{key:"getFeatureCount",value:function(t){return a(Object.getPrototypeOf(e.prototype),"getFeatureCount",this).call(this,this._layer.url+"/"+t)}},{key:"synchOpacity",value:function(t){var e=this;Object.keys(this._featClasses).forEach(function(n){var i=e._featClasses[n];i&&(i._opacity=t)}),this.opacity=t}},{key:"onLoad",value:function(){var t=this,n=a(Object.getPrototypeOf(e.prototype),"onLoad",this).call(this);this._isTrueDynamic=this._layer.supportsDynamicLayers;var i={opacity:1,visibility:!1,query:!1},r=function(e){var n={};return n.name=e.name,n.index=e.index,n.stateOnly=e.stateOnly,n.nameField=e.nameField,n.highlightFeature=e.highlightFeature||!0,n.outfields=e.hasOwnProperty("outfields")?e.outfields:"*",t._configIsComplete?n.state={visiblity:e.visiblity,opacity:e.opacity,query:e.query}:n.state=Object.assign({},i),n.extent=e.extent,n},s={};this.config.layerEntries.forEach(function(e){s[e.index.toString()]={config:r(e),defaulted:t._configIsComplete}});var o=function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(s[t]){var n=s[t];return n.defaulted||(n.config.name||(n.config.name=e),n.defaulted=!0),n.config}var i={name:e,index:parseInt(t),stateOnly:!0},a=r(i);return s[t]={config:a,defaulted:!0},a},f=[],d=function y(e,n){var i=e.id.toString(),r=o(i,e.name);if(e.subLayerIds&&e.subLayerIds.length>0)!function(){var i={entryIndex:e.id,name:r.name,childs:[]};n.push(i),e.subLayerIds.forEach(function(e){y(t._layer.layerInfos[e],i.childs)})}();else{var s=new u.PlaceholderFC(t,r.name);if(t._proxies[i])t._proxies[i].updateSource(s);else{var a=new l.LayerInterface(null);a.convertToPlaceholder(s),t._proxies[i]=a}n.push({entryIndex:e.id}),f.push(e.id.toString())}};this._childTree=[],this.config.layerEntries&&this.config.layerEntries.forEach(function(e){e.stateOnly||d(t._layer.layerInfos[e.index],t._childTree)});var p=function(t){switch(t){case"Feature Layer":return h.clientLayerType.ESRI_FEATURE;case"Raster Layer":return h.clientLayerType.ESRI_RASTER;default:return console.warn("Unexpected layer type in serverLayerTypeToClientLayerType",t),h.clientLayerType.UNKNOWN}};if(f.forEach(function(e){var i=s[e].config,r=t._apiRef.attribs.loadServerAttribs(t._layer.url,e,i.outfields),a=new c.DynamicFC(t,e,r,i);a.highlightFeature=i.highlightFeature,t._featClasses[e]=a;var o=t._proxies[e];o&&o.convertToDynamicLeaf(a),n.push(a.loadSymbology());var u=a.getLayerData().then(function(n){return a.layerType=p(n.layerType),a.extent||(a.extent=n.extent),a._scaleSet.minScale=n.minScale,a._scaleSet.maxScale=n.maxScale,a.nameField=i.nameField||n.nameField||"",a.layerType===h.clientLayerType.ESRI_FEATURE?(a.geomType=n.geometryType,t.getFeatureCount(e).then(function(t){a.featureCount=t})):Promise.resolve()})["catch"](function(){a.layerType=h.clientLayerType.UNRESOLVED});n.push(u)}),this._configIsComplete){var m=Object.keys(this._featClasses).filter(function(t){return o(t).config.state.visibility}).map(function(t){return parseInt(t)});0===m.length&&m.push(-1),this._layer.setVisibleLayers(m)}else this._layer.setVisibility(!1),this._layer.setVisibleLayers([-1]);Promise.all(n).then(function(){t._stateChange(h.states.LOADED)})}},{key:"zoomToScale",value:function(t,e,n,i){var r=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],s=this._featClasses[t].getScaleSet();return this._zoomToScaleSet(e,n,i,s,r)}},{key:"isOffScale",value:function(t,e){return this._featClasses[t].isOffScale(e)}},{key:"isQueryable",value:function(t){return this._featClasses[t].queryable}},{key:"getChildTree",value:function(){if(this._childTree)return this._childTree;throw new Error("Called getChildTree before layer is loaded")}},{key:"aliasedFieldName",value:function(t,e){return this._featClasses[e].aliasedFieldName(t)}},{key:"getFormattedAttributes",value:function(t){return this._featClasses[t].getFormattedAttributes()}},{key:"fetchGraphic",value:function(t,e){return this._featClasses[t].fetchGraphic(e)}},{key:"checkDateType",value:function(t,e){return this._featClasses[e].checkDateType(t)}},{key:"getAttribs",value:function(t){return this._featClasses[t].getAttribs()}},{key:"getLayerData",value:function(t){return this._featClasses[t].getLayerData()}},{key:"getFeatureName",value:function(t,e,n){return this._featClasses[t].getFeatureName(e,n)}},{key:"getSymbology",value:function(t){return this._featClasses[t].symbology}},{key:"identify",value:function(t){var e=this,n=[];if(this.state===h.states.ERROR||this.state===h.states.LOADING||this.state===h.states.NEW?t.layerIds=[]:t.layerIds=this._layer.visibleLayers.filter(function(n){if(-1===n)return!1;var i=e._featClasses[n];return i?i.queryable&&!i.isOffScale(t.map.getScale()).offScale:!1}),0===t.layerIds.length)return{identifyResults:[],identifyPromise:Promise.resolve()};t.layerIds.forEach(function(t){var i=new h.IdentifyResult(e.getChildProxy(t));n[t]=i}),t.tolerance=this.clickTolerance;var i=this._apiRef.layer.serverLayerIdentify(this._layer,t).then(function(t){var i=[];t.forEach(function(t){i.push(t.layerId),e.getLayerData(t.layerId).then(function(i){var r=n[t.layerId];if(i.supportsFeatures){var s=f.AttribFC.unAliasAttribs(t.feature.attributes,i.fields);r.data.push({name:t.value,data:e.attributesToDetails(t.feature.attributes),oid:s[i.oidField],symbology:[{svgcode:e._apiRef.symbology.getGraphicIcon(s,i.renderer)}]})}r.isLoading=!1})}),n.forEach(function(t){-1===i.indexOf(t.requester.featureIdx)&&(t.isLoading=!1)})});return{identifyResults:n.filter(function(t){return t}),identifyPromise:i}}},{key:"getChildName",value:function(t){return this._layer.layerInfos[t].name}}]),e}(o.AttribRecord);e.exports=function(){return{DynamicRecord:d}}},{"./attribFC.js":155,"./attribRecord.js":156,"./dynamicFC.js":158,"./layerInterface.js":162,"./placeholderFC.js":165,"./shared.js":167}],160:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(h){r=!0,s=h}finally{try{!i&&o["return"]&&o["return"]()}finally{if(r)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},h=t("./attribFC.js")(),u=t("./placeholderFC.js")(),l=t("./attribRecord.js")(),c=t("./layerInterface.js")(),f=t("./shared.js")(),d=function(t){function e(t,n,r,s,a,h){i(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,r,s,a,h),a||(this._defaultFC="0",this._featClasses[0]=new u.PlaceholderFC(this,this.name),this._geometryType=void 0,this._fcount=void 0)}return r(e,t),a(e,[{key:"makeLayerConfig",value:function(){var t=o(Object.getPrototypeOf(e.prototype),"makeLayerConfig",this).call(this);return t.mode=this.config.state.snapshot?this._layerClass.MODE_SNAPSHOT:this._layerClass.MODE_ONDEMAND,this._snapshot=this.config.state.snapshot,t}},{key:"getGeomType",value:function(){return this._geometryType}},{key:"getProxy",value:function(){return this._rootProxy||(this._rootProxy=new c.LayerInterface(this,this.initialConfig.controls),this._rootProxy.convertToFeatureLayer(this)),this._rootProxy}},{key:"onLoad",value:function(){var t=this,n=o(Object.getPrototypeOf(e.prototype),"onLoad",this).call(this),i=void 0,r=void 0;if(this.isFileLayer())r="0",i=this._apiRef.attribs.loadFileAttribs(this._layer);else{var s=f.parseUrlIndex(this._layer.url);r=s.index,this.rootUrl=s.rootUrl,i=this._apiRef.attribs.loadServerAttribs(s.rootUrl,r,this.config.outfields)}var a=new h.AttribFC(this,r,i,this.config);this._defaultFC=r,this._featClasses[r]=a;var u=a.loadSymbology(),l=a.getLayerData().then(function(e){t._geometryType=e.geometryType,a.nameField=t.config.nameField||e.nameField||""}),c=this.getFeatureCount().then(function(e){t._fcount=e});this.extent&&this.extent.xmin||(this.extent=this._apiRef.proj.graphicsUtils.graphicsExtent(this._layer.graphics)),n.push(l,c,u),Promise.all(n).then(function(){t._stateChange(f.states.LOADED)})}},{key:"getFeatureCount",value:function(){return o(Object.getPrototypeOf(e.prototype),"getFeatureCount",this).call(this,this._layer.url)}},{key:"isFileLayer",value:function(){return this._layer&&""===this._layer.url}},{key:"onMouseOver",value:function(t){var e=this;if(this._hoverListeners.length>0){var n={type:"mouseOver",point:t.screenPoint,target:t.target};this._fireEvent(this._hoverListeners,n),this.getLayerData().then(function(t){return Promise.all([Promise.resolve(t),e.getAttribs()])}).then(function(n){var i=s(n,2),r=i[0],a=i[1],o=t.graphic.attributes[r.oidField],h=a.features[a.oidIndex[o]].attributes,u=e._apiRef.symbology.getGraphicIcon(h,r.renderer),l={type:"tipLoaded",name:e.getFeatureName(o,h),target:t.target,svgcode:u};e._fireEvent(e._hoverListeners,l)})}}},{key:"onMouseOut",value:function(t){var e={type:"mouseOut",target:t.target};this._fireEvent(this._hoverListeners,e)}},{key:"identify",value:function(t){var e=this;if(this.state===f.states.ERROR||this.state===f.states.LOADING||this.state===f.states.NEW||!this.visibility||!this.isQueryable()||this.isOffScale(t.map.getScale()).offScale)return{identifyResults:[],identifyPromise:Promise.resolve()};var n=new f.IdentifyResult(this.getProxy()),i=new this._apiRef.layer.Query;i.outFields=["*"],"esriGeometryPolygon"!==this._layer.geometryType||this.isFileLayer()?i.geometry=this.makeClickBuffer(t.clickEvent.mapPoint,t.map,this.clickTolerance):i.geometry=t.geometry;var r=Promise.all([this.getAttribs(),Promise.resolve(this._layer.queryFeatures(i)),this.getLayerData()]).then(function(t){var i=s(t,3),r=i[0],a=i[1],o=i[2];n.isLoading=!1,n.data=a.features.map(function(t){var n=t.attributes[o.oidField],i=n.toString(),s=r.features[r.oidIndex[i]].attributes;return{name:e.getFeatureName(i,s),data:e.attributesToDetails(s,o.fields),oid:n,symbology:[{svgcode:e._apiRef.symbology.getGraphicIcon(s,o.renderer)}]}})});return{identifyResults:[n],identifyPromise:r}}},{key:"isSnapshot",get:function(){return this._snapshot},set:function(t){this._snapshot=t}},{key:"layerType",get:function(){return f.clientLayerType.ESRI_FEATURE}},{key:"featureCount",get:function(){return this._fcount}}]),e}(l.AttribRecord);e.exports=function(){return{FeatureRecord:d}}},{"./attribFC.js":155,"./attribRecord.js":156,"./layerInterface.js":162,"./placeholderFC.js":165,"./shared.js":167}],161:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},o=t("./layerRecord.js")(),h=t("./basicFC.js")(),u=t("./placeholderFC.js")(),l=t("./shared.js")(),c=function(t){function e(t,n,r,s,o){i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,r,s,o),this._defaultFC="0",this._featClasses[0]=new u.PlaceholderFC(this,this.name)}return r(e,t),s(e,[{key:"onLoad",value:function(){var t=this,n=a(Object.getPrototypeOf(e.prototype),"onLoad",this).call(this),i=new h.BasicFC(this,"0",this.config);this._featClasses[0]=i,n.push(i.loadSymbology()),Promise.all(n).then(function(){t._stateChange(l.states.LOADED)})}},{key:"layerType",get:function(){return l.clientLayerType.ESRI_IMAGE}}]),e}(o.LayerRecord);e.exports=function(){return{ImageRecord:c}}},{"./basicFC.js":157,"./layerRecord.js":163,"./placeholderFC.js":165,"./shared.js":167}],162:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,n){Object.defineProperty(t,e,{get:n,enumerable:!0,configurable:!0})}function s(){return this._source.state}function a(){return this._source.state}function o(){return this._source.visibility}function h(){return this._source.getVisibility()}function u(){return this._source.name}function l(){return this._source.name}function c(){return this._source.opacity}function f(){return this._source.opacity}function d(){return this._source.layerType}function p(){return this._source.layerType}function m(){return this._source.extent}function y(){return this._source.extent}function g(){return this._source.isQueryable()}function v(){return this._source.queryable}function b(){return this._source.getFormattedAttributes()}function x(){return this._source.getFormattedAttributes()}function w(){return this._source.symbology}function _(){return this._source.symbology}function M(){return void 0}function E(){return this._source.getGeomType()}function P(){return this._source.geomType}function S(){return void 0}function k(){return this._source.featureCount}function C(){return this._source.featureCount}function A(t){this._source.visibility=t}function T(t){this._source.setVisibility(t)}function I(t){this._source.opacity=t}function L(t){this._source.opacity=t}function j(t){this._source.setQueryable(t)}function O(t){this._source.queryable=t}function R(){return this._source.isSnapshot}function B(){return!0}function N(){return this._source.highlightFeature}function F(t){this._source.zoomToBoundary(t)}function D(t){this._source.zoomToBoundary(t)}function z(t,e){return this._source.getFeatureName(t,e)}function U(t,e){return this._source.attributesToDetails(t,e)}function G(t,e){return this._source._parent.attributesToDetails(t,e)}function q(t){return this._source.fetchGraphic(t)}function V(t){return this._source.fetchGraphic(t)}var X=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),W=function(){function t(e){i(this,t),this._source=e,this._isPlaceholder=!0}return X(t,[{key:"getFeatureName",value:function(){return void 0}},{key:"attributesToDetails",value:function(){return void 0}},{key:"setVisibility",value:function(){return void 0}},{key:"setOpacity",value:function(){return void 0}},{key:"setQuery",value:function(){return void 0}},{key:"fetchGraphic",value:function(){return void 0}},{key:"zoomToBoundary",value:function(){return void 0}},{key:"updateSource",value:function(t){this._source=t}},{key:"convertToSingleLayer",value:function(t){this._source=t,this._isPlaceholder=!1,r(this,"symbology",w),r(this,"state",s),r(this,"visibility",o),r(this,"opacity",c),r(this,"query",g),r(this,"name",u),r(this,"geometryType",M),r(this,"layerType",d),r(this,"featureCount",S),r(this,"extent",m),this.setVisibility=A,this.setOpacity=I,this.setQuery=j,this.zoomToBoundary=F}},{key:"convertToFeatureLayer",value:function(t){this.convertToSingleLayer(t),r(this,"snapshot",R),r(this,"formattedAttributes",b),r(this,"geometryType",E),r(this,"featureCount",k),r(this,"highlightFeature",B),this.getFeatureName=z,this.attributesToDetails=U,this.fetchGraphic=q}},{key:"convertToDynamicLeaf",value:function(t){this._source=t,this._isPlaceholder=!1,r(this,"symbology",_),r(this,"state",a),r(this,"name",l),r(this,"visibility",h),r(this,"opacity",f),r(this,"query",v),r(this,"formattedAttributes",x),r(this,"geometryType",P),r(this,"layerType",p),r(this,"featureCount",C),r(this,"extent",y),r(this,"highlightFeature",N),this.setVisibility=T,this.setOpacity=L,this.setQuery=O,this.zoomToBoundary=D,this.getFeatureName=z,this.attributesToDetails=G,this.fetchGraphic=V}},{key:"convertToPlaceholder",value:function(t){this._source=t,this._isPlaceholder=!0,r(this,"symbology",w),r(this,"name",u),r(this,"state",s),r(this,"layerType",d)}},{key:"isPlaceholder",get:function(){return this._isPlaceholder}},{key:"symbology",get:function(){return void 0}},{key:"name",get:function(){return void 0}},{key:"layerType",get:function(){return void 0}},{key:"geometryType",get:function(){return void 0}},{key:"featureCount",get:function(){return void 0}},{key:"extent",get:function(){return void 0}},{key:"state",get:function(){return void 0}},{key:"visibility",get:function(){return void 0}},{key:"opacity",get:function(){return void 0}},{key:"query",get:function(){return void 0}},{key:"snapshot",get:function(){return void 0}},{key:"highlightFeature",get:function(){return void 0}},{key:"formattedAttributes",get:function(){return void 0}}]),t}();e.exports=function(){return{LayerInterface:W}}},{}],163:[function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);
t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},h=t("./layerInterface.js")(),u=t("./shared.js")(),l=t("./root.js")(),c=function(t){function e(t,n,i,s,a){var h=this;r(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this._layerClass=t,this.name=i.name||"",this._featClasses={},this._defaultFC="0",this._apiRef=n,this.initialConfig=i,this._stateListeners=[],this._hoverListeners=[],this._user=!1,this._epsgLookup=a,this.extent=i.extent,this._layerPassthroughBindings.forEach(function(t){return h[t]=function(){var e;return(e=h._layer)[t].apply(e,arguments)}}),this._layerPassthroughProperties.forEach(function(t){var e={enumerable:!0,get:function(){return h._layer[t]}};Object.defineProperty(h,t,e)}),s?(this.constructLayer=function(){throw new Error("Cannot construct pre-made layers")},this._layer=s,this.bindEvents(this._layer),this._rootUrl=s.url||"",this._state=u.states.LOADING,this.name||(this.name=s.name),s.url||(this._snapshot=!0,this.onLoad())):(this._rootUrl=i.url,this.constructLayer(i),this._state=u.states.LOADING)}return s(e,t),a(e,[{key:"bindEvents",value:function(t){var e=this;this._apiRef.events.wrapEvents(t,{load:function(){return e.onLoad()},error:function(t){return e.onError(t)},"update-start":function(){return e.onUpdateStart()},"update-end":function(){return e.onUpdateEnd()},"mouse-over":function(t){return e.onMouseOver(t)},"mouse-out":function(t){return e.onMouseOut(t)}})}},{key:"constructLayer",value:function(){return this._layer=this.layerClass(this.config.url,this.makeLayerConfig()),this.bindEvents(this._layer),this._layer}},{key:"_stateChange",value:function(t){this._state=t,console.log("State change for "+this.layerId+" to "+t),this._fireEvent(this._stateListeners,this._state)}},{key:"addStateListener",value:function(t){return this._stateListeners.push(t),t}},{key:"removeStateListener",value:function(t){var e=this._stateListeners.indexOf(t);if(0>e)throw new Error("Attempting to remove a listener which is not registered.");this._stateListeners.splice(e,1)}},{key:"addHoverListener",value:function(t){return this._hoverListeners.push(t),t}},{key:"removeHoverListener",value:function(t){var e=this._hoverListeners.indexOf(t);if(0>e)throw new Error("Attempting to remove a listener which is not registered.");this._hoverListeners.splice(e,1)}},{key:"onLoad",value:function(){console.info("Layer loaded: "+this._layer.id),this.name||(this.name=this._layer.name),this.extent||(this.extent=this._layer.fullExtent);var t=Promise.resolve();if(this._epsgLookup){var e=this._apiRef.proj.checkProj(this.spatialReference,this._epsgLookup);e.lookupPromise&&(t=e.lookupPromise)}return[t]}},{key:"onError",value:function(t){console.warn("Layer error: "+t),console.warn(t),this._stateChange(u.states.ERROR)}},{key:"onUpdateStart",value:function(){this._stateChange(u.states.REFRESH)}},{key:"onUpdateEnd",value:function(){this._stateChange(u.states.LOADED)}},{key:"onMouseOver",value:function(){}},{key:"onMouseOut",value:function(){}},{key:"makeLayerConfig",value:function(){return{id:this.config.id,opacity:this.config.state.opacity,visible:this.config.state.visibility}}},{key:"findZoomScale",value:function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];n=r?!1:n;var s=n?t:[].concat(i(t)).reverse();return s.find(function(t){return n?t.scale<e.minScale:t.scale>e.maxScale})}},{key:"setMapScale",value:function(t,e,n){var i=this;if(!n)return t.setScale(e.scale);var r=function(){var n=i._apiRef.proj.localProjectExtent(i._layer.fullExtent,t.spatialReference),r=i._apiRef.Map.Extent(n.x0,n.y0,n.x1,n.y1,n.sr);return{v:t.setScale(e.scale).then(function(){return r.intersects(t.extent)?void 0:t.centerAt(r.getCenter())})}}();return"object"==typeof r?r.v:void 0}},{key:"_zoomToScaleSet",value:function(t,e,n,i){var r=arguments.length<=4||void 0===arguments[4]?!1:arguments[4];n=r?!1:n;var s=this.findZoomScale(e,i,n,r=!1);return this.setMapScale(this._layer,s,n)}},{key:"zoomToScale",value:function(t,e,n){var i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],r=this._featClasses[this._defaultFC].getScaleSet();return this._zoomToScaleSet(t,e,n,r,i)}},{key:"isOffScale",value:function(t){return this._featClasses[this._defaultFC].isOffScale(t)}},{key:"zoomToBoundary",value:function(t){return this.zoomToExtent(t,this.extent)}},{key:"zoomToExtent",value:function(t,e){var n=this._apiRef.proj.localProjectExtent(e,t.spatialReference),i=this._apiRef.Map.Extent(n.x0,n.y0,n.x1,n.y1,n.sr);return t.setExtent(i)}},{key:"getVisibleScales",value:function(){return{minScale:this._layer.minScale,maxScale:this._layer.maxScale}}},{key:"getFeatureCount",value:function(){return Promise.resolve(0)}},{key:"makeClickBuffer",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?5:arguments[2],i=2*n*e.extent.getWidth()/e.width,r=new this._apiRef.Map.Extent(0,0,i,i,t.spatialReference);return r.centerAt(t)}},{key:"isQueryable",value:function(){return this._featClasses[this._defaultFC].queryable}},{key:"setQueryable",value:function(t){this._featClasses[this._defaultFC].queryable=t}},{key:"getGeomType",value:function(){return void 0}},{key:"getProxy",value:function(){return this._rootProxy||(this._rootProxy=new h.LayerInterface(this,this.initialConfig.controls),this._rootProxy.convertToSingleLayer(this)),this._rootProxy}},{key:"layerClass",get:function(){return this._layerClass}},{key:"config",get:function(){return this.initialConfig}},{key:"legendEntry",get:function(){return this._legendEntry},set:function(t){this._legendEntry=t}},{key:"state",get:function(){return this._state},set:function(t){this._state=t}},{key:"layerId",get:function(){return this.config.id}},{key:"rootUrl",get:function(){return this._rootUrl},set:function(t){this._rootUrl=t}},{key:"_layerPassthroughBindings",get:function(){return["setOpacity","setVisibility"]}},{key:"_layerPassthroughProperties",get:function(){return["visibleAtMapScale","visible","spatialReference"]}},{key:"userLayer",get:function(){return this._user},set:function(t){this._user=t}},{key:"visibility",get:function(){return this._layer?this._layer.visible:!0},set:function(t){this._layer&&this._layer.setVisibility(t)}},{key:"opacity",get:function(){return this._layer?this._layer.opacity:1},set:function(t){this._layer&&this._layer.setOpacity(t)}},{key:"symbology",get:function(){return this._featClasses[this._defaultFC].symbology}}]),e}(l.Root);e.exports=function(){return{LayerRecord:c}}},{"./layerInterface.js":162,"./root.js":166,"./shared.js":167}],164:[function(t,e,n){"use strict";var i=t("./dynamicRecord.js")(),r=t("./featureRecord.js")(),s=t("./imageRecord.js")(),a=t("./tileRecord.js")(),o=t("./wmsRecord.js")();e.exports=function(){return{DynamicRecord:i.DynamicRecord,FeatureRecord:r.FeatureRecord,ImageRecord:s.ImageRecord,TileRecord:a.TileRecord,WmsRecord:o.WmsRecord}}},{"./dynamicRecord.js":159,"./featureRecord.js":160,"./imageRecord.js":161,"./tileRecord.js":168,"./wmsRecord.js":170}],165:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},o=t("./root.js")(),h=t("./shared.js")(),u=t("rcolor"),l=function(t){function e(t,n){i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this._parent=t,this.name=n,this._layerType=h.clientLayerType.UNKNOWN;var r=u({saturation:.4,value:.8});this.symbology=[t._apiRef.symbology.generatePlaceholderSymbology(n||"?",r)]}return r(e,t),s(e,[{key:"getVisibility",value:function(){return!0}},{key:"state",get:function(){return this._parent._state}},{key:"layerType",get:function(){return this._layerType},set:function(t){this._layerType=t}}]),e}(o.Root);e.exports=function(){return{PlaceholderFC:l}}},{"./root.js":166,"./shared.js":167,rcolor:134}],166:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(){i(this,t),this._name=""}return r(t,[{key:"_fireEvent",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];t.slice(0).forEach(function(t){return t.apply(void 0,n)})}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"symbology",get:function(){return this._symbology},set:function(t){this._symbology=t}},{key:"extent",get:function(){return this._extent},set:function(t){this._extent=t}}]),t}();e.exports=function(){return{Root:s}}},{}],167:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return t.map(function(t){var e={svgcode:null,name:null};return t.then(function(t){e.svgcode=t.svgcode,e.name=t.label||""}),e})}function s(t){var e={rootUrl:t,index:"0"},n=/\/(\d+)\/?$/,i=t.match(n);return i?(e.index=i[1],e.rootUrl=t.substr(0,t.length-i[0].length)):console.warn("Cannot extract layer index from url "+t),e}var a={NEW:"rv-new",REFRESH:"rv-refresh",LOADING:"rv-loading",LOADED:"rv-loaded",DEFAULT:"rv-default",ERROR:"rv-error"},o={ESRI_DYNAMIC:"esriDynamic",ESRI_FEATURE:"esriFeature",ESRI_IMAGE:"esriImage",ESRI_TILE:"esriTile",ESRI_GROUP:"esriGroup",ESRI_RASTER:"esriRaster",OGC_WMS:"ogcWms",UNRESOLVED:"unresolved",UNKNOWN:"unknown"},h=function u(t){i(this,u),this.isLoading=!0,this.requestId=-1,this.requester={proxy:t},this.data=[]};e.exports=function(){return{states:a,clientLayerType:o,makeSymbologyArray:r,IdentifyResult:h,parseUrlIndex:s}}},{}],168:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},o=t("./basicFC.js")(),h=t("./placeholderFC.js")(),u=t("./layerRecord.js")(),l=t("./shared.js")(),c=function(t){function e(t,n,r,s,o){i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,r,s,o),this._defaultFC="0",this._featClasses[0]=new h.PlaceholderFC(this,this.name)}return r(e,t),s(e,[{key:"onLoad",value:function(){var t=this,n=a(Object.getPrototypeOf(e.prototype),"onLoad",this).call(this),i=new o.BasicFC(this,"0",this.config);this._featClasses[0]=i,n.push(i.loadSymbology(!0)),Promise.all(n).then(function(){t._stateChange(l.states.LOADED)})}},{key:"layerType",get:function(){return l.clientLayerType.ESRI_TILE}}]),e}(u.LayerRecord);e.exports=function(){return{TileRecord:c}}},{"./basicFC.js":157,"./layerRecord.js":163,"./placeholderFC.js":165,"./shared.js":167}],169:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){var n=function r(t,e){var n=null;return t.some(function(t){return t.name===e?(n=t,!0):t.subLayers?r(t.subLayers,e):!1}),n},i=n(t.layerInfos,e);return i&&i.title?i.title:""}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},h=t("./basicFC.js")(),u=function(t){function e(){i(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),a(e,[{key:"loadSymbology",value:function(){var t=this,e=this._parent.config.layerEntries,n=this._parent._apiRef,i=n.layer.ogc.getLegendUrls(this._parent._layer,e.map(function(t){return t.id})).map(function(i,r){var a={name:null,svgcode:null},o=e[r].name||s(t._parent._layer,e[r].id)||e[r].id;return n.symbology.generateWMSSymbology(o,i).then(function(t){a.name=t.name,a.svgcode=t.svgcode}),a});return this.symbology=i,Promise.resolve()}}]),e}(h.BasicFC);e.exports=function(){return{WmsFC:u}}},{"./basicFC.js":157}],170:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t,e,n){for(var i=!0;i;){var r=t,s=e,a=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=a,i=!0,o=u=void 0}},o=t("./wmsFC.js")(),h=t("./placeholderFC.js")(),u=t("./layerRecord.js")(),l=t("./shared.js")(),c=function(t){function e(t,n,r,s,o){i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,r,s,o),this._defaultFC="0",this._featClasses[0]=new h.PlaceholderFC(this,this.name)}return r(e,t),s(e,[{key:"makeLayerConfig",value:function(){var t=a(Object.getPrototypeOf(e.prototype),"makeLayerConfig",this).call(this);return t.visibleLayers=this.config.layerEntries.map(function(t){return t.id}),t}},{key:"onLoad",value:function(){var t=this,n=a(Object.getPrototypeOf(e.prototype),"onLoad",this).call(this),i=new o.WmsFC(this,"0",this.config);this._featClasses[0]=i,n.push(i.loadSymbology()),Promise.all(n).then(function(){t._stateChange(l.states.LOADED)})}},{key:"identify",value:function(t){var e={"text/html;fgpv=summary":"HTML","text/html":"HTML","text/plain":"Text","application/json":"EsriFeature"};if(this.state===l.states.ERROR||this.state===l.states.LOADING||this.state===l.states.NEW||!this.visibility||!this.isQueryable()||!e.hasOwnProperty(this.config.featureInfoMimeType))return{identifyResults:[],identifyPromise:Promise.resolve()};var n=new l.IdentifyResult(this.getProxy()),i=this._apiRef.layer.ogc.getFeatureInfo(this._layer,t.clickEvent,this.config.layerEntries.map(function(t){return t.id}),this.config.featureInfoMimeType).then(function(t){n.isLoading=!1,-1===t.indexOf("Search returned no results")&&""!==t&&n.data.push(t)});return{identifyResults:[n],identifyPromise:i}}},{key:"layerType",get:function(){return l.clientLayerType.OGC_WMS}}]),e}(u.LayerRecord);e.exports=function(){return{WmsRecord:c}}},{"./layerRecord.js":163,"./placeholderFC.js":165,"./shared.js":167,"./wmsFC.js":169}],171:[function(t,e,n){"use strict";function i(t){return function(e,n,i,r){var s=void 0,a=void 0,h=e.getMap(),u=h.extent,l=e.spatialReferences,c=i.join(",");l&&l.length>1?s=l[0]:h.spatialReference.wkid&&(s=h.spatialReference.wkid),"1.3"===e.version||"1.3.0"===e.version?(a={CRS:"EPSG:"+s,I:n.screenPoint.x,J:n.screenPoint.y,STYLES:"",FORMAT:e.imageFormat},o.indexOf(String(s))>-1&&(a.BBOX=u.ymin+","+u.xmin+","+u.ymax+","+u.xmax)):a={SRS:"EPSG:"+s,X:n.screenPoint.x,Y:n.screenPoint.y},a.hasOwnProperty("BBOX")||(a.BBOX=u.xmin+","+u.ymin+","+u.xmax+","+u.ymax);var f={SERVICE:"WMS",REQUEST:"GetFeatureInfo",VERSION:e.version,WIDTH:h.width,HEIGHT:h.height,QUERY_LAYERS:c,LAYERS:c,INFO_FORMAT:r};return Object.keys(f).forEach(function(t){return a[t]=f[t]}),Promise.resolve(t.esriRequest({url:e.url.split("?")[0],content:a,handleAs:"text"}))}}function r(t){var e=t.dojoQuery;return function(n){function i(t,e){for(var n=0;n<t.childNodes.length;++n)if(t.childNodes[n].nodeName===e)return t.childNodes[n];return void 0}function r(t){return e("> Layer",t).map(function(t){var e=i(t,"Name"),n=i(t,"Title");return{name:e?e.textContent:null,desc:n.textContent,queryable:"1"===t.getAttribute("queryable"),layers:r(t)}})}function s(){var e=n;return-1===n.indexOf("?")&&(e+="?service=WMS&version=1.3&request=GetCapabilities"),Promise.resolve(new t.esriRequest({url:e,handleAs:"xml"}).promise)}var a=new Promise(function(t){s().then(function(e){return t(e)})["catch"](function(){console.error("Get capabilities failed; trying the second time;"),t(s())})});return a.then(function(t){return{layers:r(e("Capability",t)[0]),queryTypes:e("GetFeatureInfo > Format",t).map(function(t){return t.textContent})}})}}function s(t,e){t.forEach(function(t){t.name&&e.set(t.name,t.legendURL),t.subLayers.length>0&&s(t.subLayers,e)})}function a(t,e){var n=new Map;return s(t.layerInfos,n),e.map(function(t){return n.get(t)})}var o=t("./reversedAxis.json");e.exports=function(t){return{WmsLayer:t.WmsLayer,getFeatureInfo:i(t),parseCapabilities:r(t),getLegendUrls:a}}},{"./reversedAxis.json":172}],172:[function(t,e,n){e.exports=["4326","4269","4258","31467","31468","31469","2166","2167","2168","2036","2044","2045","2065","2081","2082","2083","2085","2086","2091","2092","2093","2096","2097","2098","2105","2106","2107","2108","2109","2110","2111","2112","2113","2114","2115","2116","2117","2118","2119","2120","2121","2122","2123","2124","2125","2126","2127","2128","2129","2130","2131","2132","2169","2170","2171","2172","2173","2174","2175","2176","2177","2178","2179","2180","2193","2199","2200","2206","2207","2208","2209","2210","2211","2212","2319","2320","2321","2322","2323","2324","2325","2326","2327","2328","2329","2330","2331","2332","2333","2334","2335","2336","2337","2338","2339","2340","2341","2342","2343","2344","2345","2346","2347","2348","2349","2350","2351","2352","2353","2354","2355","2356","2357","2358","2359","2360","2361","2362","2363","2364","2365","2366","2367","2368","2369","2370","2371","2372","2373","2374","2375","2376","2377","2378","2379","2380","2381","2382","2383","2384","2385","2386","2387","2388","2389","2390","2391","2392","2393","2394","2395","2396","2397","2398","2399","2400","2401","2402","2403","2404","2405","2406","2407","2408","2409","2410","2411","2412","2413","2414","2415","2416","2417","2418","2419","2420","2421","2422","2423","2424","2425","2426","2427","2428","2429","2430","2431","2432","2433","2434","2435","2436","2437","2438","2439","2440","2441","2442","2443","2444","2445","2446","2447","2448","2449","2450","2451","2452","2453","2454","2455","2456","2457","2458","2459","2460","2461","2462","2463","2464","2465","2466","2467","2468","2469","2470","2471","2472","2473","2474","2475","2476","2477","2478","2479","2480","2481","2482","2483","2484","2485","2486","2487","2488","2489","2490","2491","2492","2493","2494","2495","2496","2497","2498","2499","2500","2501","2502","2503","2504","2505","2506","2507","2508","2509","2510","2511","2512","2513","2514","2515","2516","2517","2518","2519","2520","2521","2522","2523","2524","2525","2526","2527","2528","2529","2530","2531","2532","2533","2534","2535","2536","2537","2538","2539","2540","2541","2542","2543","2544","2545","2546","2547","2548","2549","2551","2552","2553","2554","2555","2556","2557","2558","2559","2560","2561","2562","2563","2564","2565","2566","2567","2568","2569","2570","2571","2572","2573","2574","2575","2576","2577","2578","2579","2580","2581","2582","2583","2584","2585","2586","2587","2588","2589","2590","2591","2592","2593","2594","2595","2596","2597","2598","2599","2600","2601","2602","2603","2604","2605","2606","2607","2608","2609","2610","2611","2612","2613","2614","2615","2616","2617","2618","2619","2620","2621","2622","2623","2624","2625","2626","2627","2628","2629","2630","2631","2632","2633","2634","2635","2636","2637","2638","2639","2640","2641","2642","2643","2644","2645","2646","2647","2648","2649","2650","2651","2652","2653","2654","2655","2656","2657","2658","2659","2660","2661","2662","2663","2664","2665","2666","2667","2668","2669","2670","2671","2672","2673","2674","2675","2676","2677","2678","2679","2680","2681","2682","2683","2684","2685","2686","2687","2688","2689","2690","2691","2692","2693","2694","2695","2696","2697","2698","2699","2700","2701","2702","2703","2704","2705","2706","2707","2708","2709","2710","2711","2712","2713","2714","2715","2716","2717","2718","2719","2720","2721","2722","2723","2724","2725","2726","2727","2728","2729","2730","2731","2732","2733","2734","2735","2738","2739","2740","2741","2742","2743","2744","2745","2746","2747","2748","2749","2750","2751","2752","2753","2754","2755","2756","2757","2758","2935","2936","2937","2938","2939","2940","2941","2953","2963","3006","3007","3008","3009","3010","3011","3012","3013","3014","3015","3016","3017","3018","3019","3020","3021","3022","3023","3024","3025","3026","3027","3028","3029","3030","3034","3035","3038","3039","3040","3041","3042","3043","3044","3045","3046","3047","3048","3049","3050","3051","3058","3059","3068","3114","3115","3116","3117","3118","3120","3126","3127","3128","3129","3130","3131","3132","3133","3134","3135","3136","3137","3138","3139","3140","3146","3147","3150","3151","3152","3300","3301","3328","3329","3330","3331","3332","3333","3334","3335","3346","3350","3351","3352","3366","3386","3387","3388","3389","3390","3396","3397","3398","3399","3407","3414","3416","3764","3788","3789","3790","3791","3793","3795","3796","3819","3821","3823","3824","3833","3834","3835","3836","3837","3838","3839","3840","3841","3842","3843","3844","3845","3846","3847","3848","3849","3850","3851","3852","3854","3873","3874","3875","3876","3877","3878","3879","3880","3881","3882","3883","3884","3885","3888","3889","3906","3907","3908","3909","3910","3911","4001","4002","4003","4004","4005","4006","4007","4008","4009","4010","4011","4012","4013","4014","4015","4016","4017","4018","4019","4020","4021","4022","4023","4024","4025","4026","4027","4028","4029","4030","4031","4032","4033","4034","4035","4036","4037","4038","4040","4041","4042","4043","4044","4045","4046","4047","4052","4053","4054","4055","4074","4075","4080","4081","4120","4121","4122","4123","4124","4125","4126","4127","4128","4129","4130","4131","4132","4133","4134","4135","4136","4137","4138","4139","4140","4141","4142","4143","4144","4145","4146","4147","4148","4149","4150","4151","4152","4153","4154","4155","4156","4157","4158","4159","4160","4161","4162","4163","4164","4165","4166","4167","4168","4169","4170","4171","4172","4173","4174","4175","4176","4178","4179","4180","4181","4182","4183","4184","4185","4188","4189","4190","4191","4192","4193","4194","4195","4196","4197","4198","4199","4200","4201","4202","4203","4204","4205","4206","4207","4208","4209","4210","4211","4212","4213","4214","4215","4216","4218","4219","4220","4221","4222","4223","4224","4225","4226","4227","4228","4229","4230","4231","4232","4233","4234","4235","4236","4237","4238","4239","4240","4241","4242","4243","4244","4245","4246","4247","4248","4249","4250","4251","4252","4253","4254","4255","4256","4257","4259","4260","4261","4262","4263","4264","4265","4266","4267","4268","4270","4271","4272","4273","4274","4275","4276","4277","4278","4279","4280","4281","4282","4283","4284","4285","4286","4287","4288","4289","4291","4292","4293","4294","4295","4296","4297","4298","4299","4300","4301","4302","4303","4304","4306","4307","4308","4309","4310","4311","4312","4313","4314","4315","4316","4317","4318","4319","4322","4324","4327","4329","4339","4341","4343","4345","4347","4349","4351","4353","4355","4357","4359","4361","4363","4365","4367","4369","4371","4373","4375","4377","4379","4381","4383","4386","4388","4417","4434","4463","4466","4469","4470","4472","4475","4480","4482","4483","4490","4491","4492","4493","4494","4495","4496","4497","4498","4499","4500","4501","4502","4503","4504","4505","4506","4507","4508","4509","4510","4511","4512","4513","4514","4515","4516","4517","4518","4519","4520","4521","4522","4523","4524","4525","4526","4527","4528","4529","4530","4531","4532","4533","4534","4535","4536","4537","4538","4539","4540","4541","4542","4543","4544","4545","4546","4547","4548","4549","4550","4551","4552","4553","4554","4555","4557","4558","4568","4569","4570","4571","4572","4573","4574","4575","4576","4577","4578","4579","4580","4581","4582","4583","4584","4585","4586","4587","4588","4589","4600","4601","4602","4603","4604","4605","4606","4607","4608","4609","4610","4611","4612","4613","4614","4615","4616","4617","4618","4619","4620","4621","4622","4623","4624","4625","4626","4627","4628","4629","4630","4631","4632","4633","4634","4635","4636","4637","4638","4639","4640","4641","4642","4643","4644","4645","4646","4652","4653","4654","4655","4656","4657","4658","4659","4660","4661","4662","4663","4664","4665","4666","4667","4668","4669","4670","4671","4672","4673","4674","4675","4676","4677","4678","4679","4680","4681","4682","4683","4684","4685","4686","4687","4688","4689","4690","4691","4692","4693","4694","4695","4696","4697","4698","4699","4700","4701","4702","4703","4704","4705","4706","4707","4708","4709","4710","4711","4712","4713","4714","4715","4716","4717","4718","4719","4720","4721","4722","4723","4724","4725","4726","4727","4728","4729","4730","4731","4732","4733","4734","4735","4736","4737","4738","4739","4740","4741","4742","4743","4744","4745","4746","4747","4748","4749","4750","4751","4752","4753","4754","4755","4756","4757","4758","4759","4760","4761","4762","4763","4764","4765","4766","4767","4768","4769","4770","4771","4772","4773","4774","4775","4776","4777","4778","4779","4780","4781","4782","4783","4784","4785","4786","4787","4788","4789","4790","4791","4792","4793","4794","4795","4796","4797","4798","4799","4800","4801","4802","4803","4804","4805","4806","4807","4808","4809","4810","4811","4812","4813","4814","4815","4816","4817","4818","4819","4820","4821","4822","4823","4824","4839","4855","4856","4857","4858","4859","4860","4861","4862","4863","4864","4865","4866","4867","4868","4869","4870","4871","4872","4873","4874","4875","4876","4877","4878","4879","4880","4883","4885","4887","4889","4891","4893","4895","4898","4900","4901","4902","4903","4904","4907","4909","4921","4923","4925","4927","4929","4931","4933","4935","4937","4939","4941","4943","4945","4947","4949","4951","4953","4955","4957","4959","4961","4963","4965","4967","4969","4971","4973","4975","4977","4979","4981","4983","4985","4987","4989","4991","4993","4995","4997","4999","5012","5013","5017","5048","5105","5106","5107","5108","5109","5110","5111","5112","5113","5114","5115","5116","5117","5118","5119","5120","5121","5122","5123","5124","5125","5126","5127","5128","5129","5130","5132","5167","5168","5169","5170","5171","5172","5173","5174","5175","5176","5177","5178","5179","5180","5181","5182","5183","5184","5185","5186","5187","5188","5224","5228","5229","5233","5245","5246","5251","5252","5253","5254","5255","5256","5257","5258","5259","5263","5264","5269","5270","5271","5272","5273","5274","5275","5801","5802","5803","5804","5808","5809","5810","5811","5812","5813","5814","5815","5816","20004","20005","20006","20007","20008","20009","20010","20011","20012","20013","20014","20015","20016","20017","20018","20019","20020","20021","20022","20023","20024","20025","20026","20027","20028","20029","20030","20031","20032","20064","20065","20066","20067","20068","20069","20070","20071","20072","20073","20074","20075","20076","20077","20078","20079","20080","20081","20082","20083","20084","20085","20086","20087","20088","20089","20090","20091","20092","21413","21414","21415","21416","21417","21418","21419","21420","21421","21422","21423","21453","21454","21455","21456","21457","21458","21459","21460","21461","21462","21463","21473","21474","21475","21476","21477","21478","21479","21480","21481","21482","21483","21896","21897","21898","21899","22171","22172","22173","22174","22175","22176","22177","22181","22182","22183","22184","22185","22186","22187","22191","22192","22193","22194","22195","22196","22197","25884","27205","27206","27207","27208","27209","27210","27211","27212","27213","27214","27215","27216","27217","27218","27219","27220","27221","27222","27223","27224","27225","27226","27227","27228","27229","27230","27231","27232","27391","27392","27393","27394","27395","27396","27397","27398","27492","28402","28403","28404","28405","28406","28407","28408","28409","28410","28411","28412","28413","28414","28415","28416","28417","28418","28419","28420","28421","28422","28423","28424","28425","28426","28427","28428","28429","28430","28431","28432","28462","28463","28464","28465","28466","28467","28468","28469","28470","28471","28472","28473","28474","28475","28476","28477","28478","28479","28480","28481","28482","28483","28484","28485","28486","28487","28488","28489","28490","28491","28492","29701","29702","30161","30162","30163","30164","30165","30166","30167","30168","30169","30170","30171","30172","30173","30174","30175","30176","30177","30178","30179","30800","31251","31252","31253","31254","31255","31256","31257","31258","31259","31275","31276","31277","31278","31279","31281","31282","31283","31284","31285","31286","31287","31288","31289","31290","31466","31700"]},{}],173:[function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];
return n}return Array.from(t)}function r(t,e){for(var n=e,i=t-e,r=[[[[]]]],s=1;t>=s;++s){r[s]=[];for(var a=0;s>=a;++a)if(!(a>n||s-a>i)){var o=a>0?r[s-1][a-1].map(function(t){return t.concat(!0)}):[],h=s>a?r[s-1][a].map(function(t){return t.concat(!1)}):[];r[s][a]=o.concat(h)}}return r[t][e]}function s(t,e){return t[0].splitBefore=!1,e.forEach(function(e,n){return t[n+1].splitBefore=e}),t}function a(t,e){var n=t.length-1,s=e-1,a=r(n,s),o=Number.MAX_VALUE,h=null,u=Array(e);return a.forEach(function(e){u.fill(0);var n=0;t.forEach(function(t,i){u[n]+=t.height,e[i]&&++n});var r=Math.max.apply(Math,i(u));o>=r&&(o=r,h=e)}),{layers:t,sectionsUsed:e,bestPerm:h,bestHeight:o}}function o(t,e){for(var n=Number.MAX_VALUE,i=null,r=-1,o=e;o>1;--o){var h=a(t,o),u=h.bestPerm,l=h.bestHeight;if(.8*l>n)break;n>=l&&(n=l,i=u,r=o)}return s(t,i),{layers:t,sectionsUsed:r}}function h(t,e,n){function i(t){t.forEach(function(t){1!==n&&(o[n-1]=s-r,s=t.y+("group"===t.type?t.headerHeight:t.height),s-r>=e&&(n--,r=t.y,a.push(t)),"group"===t.type&&i(t.items))})}var r=t.y,s=0,a=[],o=Array(n).fill(0);return i(t.items),o[n-1]=t.height-(r-t.y),{whiteSpace:o.reduce(function(t,n){return t+Math.abs(e-n)},0),splits:a}}function u(t,e){if(1===e)return t;for(var n=t.height/e,i=h(t,n,e),r=i.splits,s=i.whiteSpace,a=8,o=s/a,u=1;a>=u;u++){n+=o;var l=h(t,n,e),c=l.splits,f=l.whiteSpace;s>f&&(s=f,r=c)}return r.forEach(function(t){return t.splitBefore=!0}),t}function l(t,e,n){s(t,Array(t.length-1).fill(!0));var r={};r[t.length]={height:Math.max.apply(Math,i(t.map(function(t){return t.height}))),segments:Array(t.length)},r[t.length].segments.fill(1);for(var a=t.length,o=function(){var e=r[a].segments,n=e.map(function(e,n){return t[n].height/e}),s=n.indexOf(Math.max.apply(Math,i(n))),o=e.map(function(t,e){return e===s?t+1:t});++a,r[a]={height:Math.max.apply(Math,i(o.map(function(e,n){return t[n].height/e}))),segments:o}};e>a&&r[a].height>2*n;)o();for(;a>t.length&&!(r[a].height<.9*r[a-1].height);)--a;return t.forEach(function(t,e){return u(t,r[a].segments[e])}),{layers:t,sectionsUsed:a}}function c(t,e,n){if(t.length>f){var i=function(){var n=Math.ceil(t.length/e),i=Array(t.length-1).fill(0).map(function(t,e){return(e+1)%n===0});return s(t,i),{v:{layers:t,sectionsUsed:e}}}();if("object"==typeof i)return i.v}return t.length<=e?l(t,e,n):o(t,e)}var f=15;e.exports=function(){return{makeLegend:c,allComb:r,splitLayer:h,findOptimalSplit:u}}},{}],174:[function(t,e,n){"use strict";function i(t,e,n){var i=new t.BasemapGallery({showArcGISBasemaps:!1,map:n});return e.forEach(function(e){var n=e.layers.map(function(n){return new t.BasemapLayer({url:n.url,opacity:e.opacity})}),r=new t.Basemap({id:e.id,layers:n,title:e.name,thumbnailUrl:e.thumbnailUrl,wkid:e.wkid});i.add(r)}),i.startup(),i.on("error",function(t){throw new Error(t)}),i}e.exports={initBasemaps:i}},{}],175:[function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){var n=u(t),s=function(){function s(e,n){var i=this;if(r(this,s),this._passthroughBindings.forEach(function(t){return i[t]=function(){var e;return(e=i._map)[t].apply(e,arguments)}}),this._passthroughProperties.forEach(function(t){var e={enumerable:!0,get:function(){return i._map[t]}};Object.defineProperty(i,t,e)}),this._map=new t.Map(e,{extent:s.getExtentFromJson(n.extent),lods:n.lods}),n.proxyUrl&&(this.proxy=n.proxyUrl),!n.basemaps)throw new Error("The basemaps option is required to and at least one basemap must be defined");this.basemapGallery=h.initBasemaps(t,n.basemaps,this._map),this.basemapGallery.on("selection-change",function(){return i.resetOverviewMap()}),n.scalebar&&(this.scalebar=new t.Scalebar({map:this._map,attachTo:n.scalebar.attachTo,scalebarUnit:n.scalebar.scalebarUnit}),this.scalebar.show()),n.overviewMap&&this.initOverviewMap(),this.zoomPromise=Promise.resolve(),this.zoomCounter=0}return o(s,[{key:"_passthroughBindings",get:function(){return["on","reorderLayer","addLayer","disableKeyboardNavigation","removeLayer","resize","reposition","centerAt","setZoom","centerAndZoom","toScreen","setExtent"]}},{key:"_passthroughProperties",get:function(){return["graphicsLayerIds","layerIds","spatialReference","extent"]}}],[{key:"Extent",get:function(){return t.Extent}}]),o(s,[{key:"printLocal",value:function(t){return n.printLocal(this._map,t)}},{key:"printServer",value:function(t){return n.printServer(this._map,t)}},{key:"selectBasemap",value:function(t){"object"==typeof t&&(t=t.id),this.basemapGallery.select(t)}},{key:"enhanceConfigExtent",value:function(t){var n=s.getExtentFromJson(t);return e.proj.isSpatialRefEqual(this._map.spatialReference,t.spatialReference)?n:e.proj.projectEsriExtent(n,this._map.spatialReference)}},{key:"zoomToPoint",value:function(t){var n=t.longitude,i=t.latitude,r=e.proj.localProjectPoint(4326,this._map.spatialReference.wkid,[parseFloat(n),parseFloat(i)]),a=e.proj.Point(r[0],r[1],this._map.spatialReference),o=s.findClosestLOD(this._map.__tileInfo.lods,5e4);this._map.centerAndZoom(a,Math.max(o.level,0))}},{key:"getNorthArrowAngle",value:function(){var t=e.proj.localProjectPoint(this._map.extent.spatialReference,"EPSG:4326",{x:(this._map.extent.xmin+this._map.extent.xmax)/2,y:this._map.extent.ymin}),n={x:-96,y:90},i=(t.x-n.x)*Math.PI/180,r=n.y*Math.PI/180,s=t.y*Math.PI/180,a=Math.sin(i)*Math.cos(s),o=Math.cos(r)*Math.sin(s)-Math.sin(r)*Math.cos(s)*Math.cos(i),h=180*Math.atan2(a,o)/Math.PI;return((h+360)%360).toFixed(1)}},{key:"getScaleRatio",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=this._map,i=e.proj.localProjectPoint(n.spatialReference,"EPSG:4326",{x:n.extent.xmin,y:(n.extent.ymin+n.extent.ymax)/2}),r=e.proj.localProjectPoint(n.spatialReference,"EPSG:4326",{x:n.extent.xmax,y:(n.extent.ymin+n.extent.ymax)/2}),s=6371e3,a=Math.PI/180,o=i.y*a,h=r.y*a,u=(r.y-i.y)*a,l=(r.x-i.x)*a,c=Math.sin(u/2)*Math.sin(u/2)+Math.cos(o)*Math.cos(h)*Math.sin(l/2)*Math.sin(l/2),f=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),d=s*f,p=t?t:n.width,m=[d>1e3?"km":"m",d>1600?"mi":"ft"],y=d>1e3?d/1e3:d,g=y/p;return{distance:y,ratio:g,units:m}}},{key:"initOverviewMap",value:function(){this.overviewMap=new t.OverviewMap({map:this._map,expandFactor:1,visible:!0}),this.overviewMap.startup()}},{key:"resetOverviewMap",value:function(){this.overviewMap.destroy(),this.initOverviewMap()}},{key:"shiftZoom",value:function(t){var e=this;this.zoomCounter+=t,this.zoomPromise.then(function(){if(0!==e.zoomCounter){var t=e._map.getZoom()+e.zoomCounter,n=Promise.resolve(e.setZoom(t));e.zoomCounter=0,"undefined"!=typeof n&&(e.zoomPromise=n)}})}},{key:"mapDefault",value:function(e,n){return"undefined"==typeof n?t.esriConfig.defaults.map[e]:void(t.esriConfig.defaults.map[e]=n)}},{key:"proxy",set:function(e){t.esriConfig.defaults.io.proxyUrl=e},get:function(){return t.esriConfig.defaults.io.proxyUrl}},{key:"basemapGallery",set:function(t){this._basemapGallery=t},get:function(){return this._basemapGallery}},{key:"scalebar",set:function(t){this._scalebar=t},get:function(){return this._scalebar}},{key:"overviewMap",set:function(t){this._overviewMap=t},get:function(){return this._overviewMap}}],[{key:"getExtentFromJson",value:function(e){return t.Extent({xmin:e.xmin,ymin:e.ymin,xmax:e.xmax,ymax:e.ymax,spatialReference:{wkid:e.spatialReference.wkid}})}},{key:"findClosestLOD",value:function(t,e){var n=t.map(function(t){return Math.abs(t.scale-e)}),r=n.indexOf(Math.min.apply(Math,i(n)));return t[r]}},{key:"clipExtentCoords",value:function(t,e,n,i,r,s){return t>i?(e=i,n=i-s):r>t&&(e=r+s,n=r),[e,n]}},{key:"enforceBoundary",value:function(e,n){var i=t.Extent(e.toJson()),r=Math.min(e.getHeight(),n.getHeight()),s=Math.min(e.getWidth(),n.getWidth()),o=e.getCenter(),h=this.clipExtentCoords(o.x,i.xmax,i.xmin,n.xmax,n.xmin,s),u=a(h,2);i.xmax=u[0],i.xmin=u[1];var l=this.clipExtentCoords(o.y,i.ymax,i.ymin,n.ymax,n.ymin,r),c=a(l,2);return i.ymax=c[0],i.ymin=c[1],{newExtent:i,adjusted:!e.contains(i)}}}]),s}();return s}var a=function(){function t(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(h){r=!0,s=h}finally{try{!i&&o["return"]&&o["return"]()}finally{if(r)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=t("./basemap.js"),u=t("./print.js");e.exports=function(t,e){return s(t,e)}},{"./basemap.js":174,"./print.js":176}],176:[function(t,e,n){"use strict";function i(t,e,n){var i=t.PrintTask(n.url,{async:!0}),a=new t.PrintParameters,o=new t.PrintTemplate;o.layout="MAP_ONLY",o.exportOptions={height:n.height||e.height,width:n.width||e.width,dpi:96},o.format=n.format,o.showAttribution=!1,o.preserveScale=!1,a.map=e,a.template=o;var h=r(e),l=new Promise(function(t,e){i.execute(a,function(e){return t(u.convertImageToCanvas(e.url))},function(t){return e(t)})});return s(h),l}function r(t){return t.graphicsLayerIds.map(function(e){return t.getLayer(e)}).filter(function(t){return t.visible}).map(function(t){return t.setVisibility(!1),t})}function s(t){t.forEach(function(t){return t.setVisibility(!0)})}function a(t){function e(t,e){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],i={width:t.width.baseVal.value,height:t.height.baseVal.value},r=(t.getAttribute("viewBox")||"0 0 "+i.width+" "+i.height).split(" "),s=o(r,4),a=s[0],h=s[1],u=s[2],l=s[3],c={minX:a,minY:h,width:u,height:l};return t.setAttribute("width",e.width),t.setAttribute("height",e.height),t.setAttribute("viewBox",[(n||c).minX,(n||c).minY,(n||c).width,(n||c).height].join(" ")),{originalSize:i,originalViewbox:c}}var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],i=arguments.length<=2||void 0===arguments[2]?null:arguments[2];i=i||document.createElement("canvas");var r=document.getElementById("esri.Map_"+t.id.split("_")[1]+"_gc");r.getAttribute("xmlns")||Object.entries(l).forEach(function(t){var e=o(t,2),n=e[0],i=e[1];return r.setAttribute(n,i)});var s=void 0;n&&(s=e(r,n));var a=new Promise(function(t,a){try{h(i,r.outerHTML,{useCORS:!0,ignoreAnimation:!0,ignoreMouse:!0,renderCallback:function(){n&&e(r,s.originalSize,s.originalViewbox),t(i)}})}catch(o){a(o)}});return a}var o=function(){function t(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(h){r=!0,s=h}finally{try{!i&&o["return"]&&o["return"]()}finally{if(r)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.RGBColor=t("rgbcolor");var h=t("canvg-origin"),u=t("../shared.js")(),l={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};e.exports=function(t){return{printLocal:function(t,e){return a(t,e)},printServer:function(e,n){return i(t,e,n)}}}},{"../shared.js":179,"canvg-origin":4,rgbcolor:135}],177:[function(t,e,n){"use strict";function i(t,e,n){var i=p(d,f);i(t,e,n)}function r(t){if("object"==typeof t){if(t.wkid)return"EPSG:"+t.wkid;if(t.wkt)return t.wkt}else{if("number"==typeof t)return"EPSG:"+t;if("string"==typeof t)return t}throw new Error("Bad argument type, please provide a string, integer or SpatialReference object.")}function s(t,e,n){return f(r(t),r(e),n)}function a(t,e){var n=e.spatialReference;e.spatialReference={wkid:8888};var s=d.ArcGIS.parse(e,{sr:8888});e.spatialReference=n,i(s,r(t),r(n));var a=d.ArcGIS.convert(s);return a.spatialReference=t,a}function o(t,e){function n(t,e,i){if(0===i)return[t,e];var r=[(t[0]+e[0])/2,(t[1]+e[1])/2];if(1===i)return[t,r,e];if(i>1){var s=n(t,r,i-1),a=n(r,e,i-1);return s.concat(a.slice(1))}}var i=[[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin]],s=[],a=void 0;if([0,1,2,3].map(function(t){return n(i[t],i[t+1],3).slice(1)}).forEach(function(t){return s=s.concat(t)}),t.spatialReference.wkid)a="EPSG:"+t.spatialReference.wkid;else{if(!t.spatialReference.wkt)throw new Error("No WKT or WKID specified on extent.spatialReference");a=t.spatialReference.wkt}var o=r(e);if(t.spatialReference.wkid&&!f.defs(a))throw new Error("Source projection WKID not recognized by proj4 library");var h=f(a,o),u=s.map(function(t){return h.forward(t)}),l=u.map(function(t){return t[0]}),c=u.map(function(t){return t[1]}),d=Math.min.apply(null,l),p=Math.max.apply(null,l),m=Math.min.apply(null,c),y=Math.max.apply(null,c);return{x0:d,y0:m,x1:p,y1:y,sr:e}}function h(t,e){var n=void 0;if(t.wkid)n="EPSG:"+t.wkid;else{if(!t.wkt)return{foundProj:!1,message:"No WKT or WKID specified on extent.spatialReference"};n=t.wkt}return t.wkid&&!f.defs(n)?e?{foundProj:!1,message:"Attempting to lookup WKID",lookupPromise:e(t.wkid).then(function(t){return null===t?!1:(f.defs(n,t),!0)})}:{foundProj:!1,message:"Source projection in WKID and not recognized by proj4 library"}:{foundProj:!0,message:"Source projection OK."}}function u(t){return function(e,n){var i=o(e,n);return new t.Extent(i.x0,i.y0,i.x1,i.y1,i.sr)}}function l(t){return function(e,n,i){return new Promise(function(r,s){var a=new t.ProjectParameters,o=new t.GeometryService(e);a.geometries=n,a.outSR=i,o.project(a,function(t){r(t)},function(t){s(t)})})}}function c(t,e){return t.wkid&&e.wkid?t.wkid===e.wkid:t.wkt&&e.wkt?t.wkt===e.wkt:!1}var f=t("proj4"),d=t("terraformer"),p=t("terraformer-proj4js");e.exports=function(t){f.defs("EPSG:3978","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),f.defs("EPSG:3979","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),f.defs("EPSG:54004","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),f.defs("EPSG:102100",f.defs("EPSG:3857"));for(var e=1;60>=e;){var n=10>e?"0"+e:e;f.defs("EPSG:326"+n,"+proj=utm +zone="+e+" +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),e++}return{addProjection:f.defs,checkProj:h,getProjection:f.defs,esriServerProject:l(t),Graphic:t.Graphic,graphicsUtils:t.graphicsUtils,isSpatialRefEqual:c,localProjectExtent:o,localProjectPoint:s,localProjectGeometry:a,projectGeojson:i,Point:t.Point,projectEsriExtent:u(t),SpatialReference:t.SpatialReference}}},{proj4:102,terraformer:146,"terraformer-proj4js":145}],178:[function(t,e,n){"use strict";function i(t){return function(e){var n=new t.Query;return n.returnGeometry=e.returnGeometry||!1,e.returnGeometry&&(n.outSpatialReference=e.outSpatialReference),e.outFields?n.outFields=e.outFields:n.outFields=["*"],e.where&&(n.where=e.where),n.geometry=e.geometry,n.spatialRelationship=t.Query.SPATIAL_REL_INTERSECTS,new Promise(function(i,r){if(e.url){var s=new t.QueryTask(e.url);s.execute(n,function(t){i(t)},function(t){r(t)})}else e.featureLayer&&e.featureLayer.queryFeatures(n,function(t){i(t)},function(t){r(t)})})}}e.exports=function(t){return{queryGeometry:i(t)}}},{}],179:[function(t,e,n){"use strict";function i(t){return function(e){return e instanceof t.FeatureLayer?"FeatureLayer":e instanceof t.WmsLayer?"WmsLayer":e instanceof t.ArcGISDynamicMapServiceLayer?"ArcGISDynamicMapServiceLayer":e instanceof t.ArcGISTiledMapServiceLayer?"ArcGISTiledMapServiceLayer":"UNKNOWN"}}function r(){var t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}function s(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];e=e||document.createElement("canvas");var i=document.createElement("img");n&&(i.crossOrigin="Anonymous");var r=new Promise(function(t,n){i.addEventListener("load",function(){e.width=i.width,e.height=i.height,e.getContext("2d").drawImage(i,0,0),t(e)}),i.addEventListener("error",function(t){return n(t)})});return i.src=t,r}function a(t){var e=arguments.length<=1||void 0===arguments[1]?"image/png":arguments[1];if(t.startsWith("data"))return console.log("ImageUri is already a data url"),Promise.resolve(t);var n=s(t).then(function(t){return console.log("Converting image to dataURL"),t.toDataURL(e)})["catch"](function(e){return console.error("Failed to load crossorigin image",t,e),t});return n}e.exports=function(t){return{getLayerType:i(t),generateUUID:r,convertImageToCanvas:s,convertImagetoDataURL:a}}},{}],180:[function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){var n={},i=e.layers[0].legend.map(function(t){return t.then(function(t){return n[t.label]=t.svgcode})});return Promise.all(i).then(function(){switch(t.type){case w:t.svgcode=n[t.label];break;case _:t.defaultLabel&&(t.defaultsvgcode=n[t.defaultLabel]),t.uniqueValueInfos.forEach(function(t){t.svgcode=n[t.label]});break;case M:t.defaultLabel&&(t.defaultsvgcode=n[t.defaultLabel]),t.classBreakInfos.forEach(function(t){t.svgcode=n[t.label]});break;default:console.warn("encountered unsupported renderer type: "+t.type)}})}function s(t,e){var n=void 0,i={};switch(e.type){case w:n=e.svgcode,i=e.symbol;break;case _:var r=null===t[e.field1]?"":t[e.field1];"string"!=typeof r&&(r=r.toString()),e.field2&&(r=r+", "+t[e.field2],e.field3&&(r=r+", "+t[e.field3]));var s=e.uniqueValueInfos.find(function(t){return t.value===r});s?(n=s.svgcode,i=s.symbol):(n=e.defaultsvgcode,i=e.defaultSymbol);break;case M:var a=parseFloat(t[e.field]),o=e.minValue;if(n=e.defaultsvgcode,i=e.defaultSymbol,o>a)break;var h=e.classBreakInfos.map(function(t){return t.classMaxValue});h.splice(0,0,o-1);var u=e.classBreakInfos.find(function(t,e){return a>h[e]&&a<=t.classMaxValue});if(!u)break;n=u.svgcode,i=u.symbol;break;default:console.warn("Unknown renderer type encountered - "+e.type)}return"undefined"==typeof n&&(n=b(document.createElement("div")).size(E,E).svg()),{svgcode:n,symbol:i}}function a(t,e){var n=s(t,e);return n.svgcode}function o(t,e){var n=s(t,e);return n.symbol}function h(t,e){var n=b(window.document.createElement("div")).size(E,E).viewbox(0,0,0,0),i={name:t,svgcode:null};if(e){var r=x.convertImagetoDataURL(e).then(function(t){return c(n,t)}).then(function(t){var e=t.loader;return n.viewbox(0,0,e.width,e.height),i.svgcode=n.svg(),i})["catch"](function(t){console.error("Cannot draw wms legend image; returning empty",t),i.svgcode=n.svg()});return r}return i.svgcode=n.svg(),Promise.resolve(i)}function u(t){var e=arguments.length<=1||void 0===arguments[1]?"#000":arguments[1],n=b(window.document.createElement("div")).size(E,E).viewbox(0,0,E,E);return n.rect(S,S).center(k,k).fill(e),n.text(t[0].toUpperCase()).size(23).fill("#fff").attr({"font-weight":"bold","font-family":"Roboto"}).center(k,k),{name:t,svgcode:n.svg()}}function l(t,e,n){function i(t){return Object.assign({},l,t)}function r(t,e){var n=t.node.getBoundingClientRect(),i=e/Math.max(n.width,n.height);1>i&&t.scale(i)}function s(t){return t?{colour:"rgb("+t[0]+","+t[1]+","+t[2]+")",opacity:t[3]/255}:{colour:"rgb(0, 0, 0)",opacity:0}}var a=n.document.createElement("div");a.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),n.document.body.appendChild(a);var o=b(a).size(E,E).viewbox(0,0,E,E),h={esriSMSPath:function(t){var e=t.size,n=t.path;return o.path(n).size(e)},esriSMSCircle:function(t){var e=t.size;return o.circle(e)},esriSMSCross:function(t){var e=t.size;return o.path("M 0,10 L 20,10 M 10,0 L 10,20").size(e)},esriSMSX:function(t){var e=t.size;return o.path("M 0,0 L 20,20 M 20,0 L 0,20").size(e)},esriSMSTriangle:function(t){var e=t.size;return o.path("M 20,20 L 10,0 0,20 Z").size(e)},esriSMSDiamond:function(t){var e=t.size;return o.path("M 20,10 L 10,0 0,10 10,20 Z").size(e)},esriSMSSquare:function(t){var e=t.size;return o.path("M 0,0 20,0 20,20 0,20 Z").size(e)}},u={esriSLSSolid:"none",esriSLSDash:"5.333,4",esriSLSDashDot:"5.333,4,1.333,4",esriSLSLongDashDotDot:"10.666,4,1.333,4,1.333,4",esriSLSDot:"1.333,4",esriSLSLongDash:"10.666,4",esriSLSLongDashDot:"10.666,4,1.333,4",esriSLSShortDash:"5.333,1.333",esriSLSShortDashDot:"5.333,1.333,1.333,1.333",esriSLSShortDashDotDot:"5.333,1.333,1.333,1.333,1.333,1.333",esriSLSShortDot:"1.333,1.333",esriSLSNull:"none"},l={color:"#000",opacity:1,width:1,linecap:"square",linejoin:"miter",miterlimit:4},f={color:[0,0,0,0],width:0,style:u.esriSLSNull},d={esriSFSSolid:function(t){return{color:t.colour,opacity:t.opacity}},esriSFSNull:function(){return"transparent"},esriSFSHorizontal:function(t,e){var n=5;return o.pattern(n,n,function(t){return t.line(0,n/2,n,n/2)}).stroke(e)},esriSFSVertical:function(t,e){var n=5;return o.pattern(n,n,function(t){return t.line(n/2,0,n/2,n)}).stroke(e)},esriSFSForwardDiagonal:function(t,e){var n=5;return o.pattern(n,n,function(t){t.line(0,0,n,n).stroke(e),t.line(0,0,n,n).move(0,n).stroke(e),t.line(0,0,n,n).move(n,0).stroke(e)})},esriSFSBackwardDiagonal:function(t,e){var n=5;return o.pattern(n,n,function(t){t.line(n,0,0,n).stroke(e),t.line(n,0,0,n).move(n/2,n/2).stroke(e),t.line(n,0,0,n).move(-n/2,-n/2).stroke(e)})},esriSFSCross:function(t,e){var n=5;return o.pattern(n,n,function(t){t.line(n/2,0,n/2,n).stroke(e),t.line(0,n/2,n,n/2).stroke(e)})},esriSFSDiagonalCross:function(t,e){var n=7;return o.pattern(n,n,function(t){t.line(0,0,n,n).stroke(e),t.line(n,0,0,n).stroke(e)})}},p={esriSMS:function(){var e=s(t.color);t.outline=t.outline||f;var n=s(t.outline.color),a=i({color:n.colour,opacity:n.opacity,width:t.outline.width,dasharray:u[t.outline.style]}),o=h[t.style](t).fill({color:e.colour,opacity:e.opacity}).stroke(a).center(k,k).rotate(t.angle||0);r(o,P)},esriSLS:function(){var e=s(t.color),n=i({color:e.colour,opacity:e.opacity,width:t.width,linecap:"butt",dasharray:u[t.style]}),r=C,a=E-C;o.line(r,r,a,a).stroke(n)},esriCLS:function(){this.esriSLS()},esriSFS:function(){var e=s(t.color),n=i({color:e.colour,opacity:e.opacity}),r=d[t.style](e,n);t.outline=t.outline||f;var a=s(t.outline.color),h=i({color:a.colour,opacity:a.opacity,width:t.outline.width,linecap:"butt",dasharray:u[t.outline.style]});o.rect(P,P).center(k,k).fill(r).stroke(h)},esriTS:function(){console.error("no support for feature service legend of text symbols")},esriPFS:function(){var e=t.imageData?"data:"+t.contentType+";base64,"+t.imageData:t.url,n=t.width*t.xscale,r=t.height*t.yscale;t.outline=t.outline||f;var a=s(t.outline.color),h=i({color:a.colour,opacity:a.opacity,width:t.outline.width,dasharray:u[t.outline.style]}),l=x.convertImagetoDataURL(e).then(function(t){var e=o.pattern(n,r,function(e){return e.image(t,n,r,!0)});o.rect(P,P).center(k,k).fill(e).stroke(h)});return l},esriPMS:function(){var e=t.imageData?"data:"+t.contentType+";base64,"+t.imageData:t.url,n=x.convertImagetoDataURL(e).then(function(t){return c(o,t)}).then(function(e){var n=e.image;n.center(k,k).rotate(t.angle||0),r(n,S)});return n}};return Promise.resolve(p[t.type]()).then(function(){return n.document.body.removeChild(a),{label:e,svgcode:o.svg()}})["catch"](function(t){return console.log(t)})}function c(t,e){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],i=arguments.length<=3||void 0===arguments[3]?0:arguments[3],r=arguments.length<=4||void 0===arguments[4]?!0:arguments[4],s=new Promise(function(s,a){var o=t.image(e,n,i,r).loaded(function(t){return s({image:o,loader:t})}).error(function(t){a(t),console.error(t)})});return s}function f(t,e,n){var i=e.map(function(t){return l(t.symbol,t.label,n)});return t.defaultSymbol&&i.push(l(t.defaultSymbol,t.defaultLabel||"",n)),i}function d(t){return function(e,n){var i={layers:[{layerId:n,legend:[]}]};switch(e.type){case w:i.layers[0].legend.push(l(e.symbol,e.label,t));break;case _:i.layers[0].legend=f(e,e.uniqueValueInfos,t);break;case M:i.layers[0].legend=f(e,e.classBreakInfos,t);break;default:console.error("encountered unsupported renderer legend type: "+e.type)}return i}}function p(t,e){var n=e.esriRequest({url:t+"/legend",content:{f:"json"},callbackParamName:"callback",handleAs:"json"});return new Promise(function(t,e){n.then(function(n){n.error?e(n.error):t(n)},function(t){e(t)})})}function m(t,e){var n=t.layers.find(function(t){return t.layerId===e});return{type:"uniqueValue",uniqueValueInfos:n.legend.map(function(t){return{label:t.label,symbol:{type:"esriPMS",imageData:t.imageData,contentType:t.contentType}}})}}function y(t){var e,n=t.layers.map(function(t){return t.legend.map(function(t){return{label:t.label,symbol:{type:"esriPMS",imageData:t.imageData,contentType:t.contentType}}})});return{type:"uniqueValue",uniqueValueInfos:(e=[]).concat.apply(e,i(n))}}function g(t,e){return function(n,i){return p(n,t).then(function(t){var n=void 0,r=void 0;return"undefined"==typeof i?(r=0,n=y(t)):(r=parseInt(i),n=m(t,r)),e.symbology.rendererToLegend(n,r)})}}function v(t,e){var n=e,i=!1,r=Math.ceil(t.length/2),s=0,a=t.length-1;if(0===e)return t.length-1;for(;!i;)t[r].scale>=n?s=r:a=r,r=Math.floor((a+s)/2),a===s+1&&(i=!0);return r}var b=t("svg.js"),x=t("./shared.js")(),w="simple",_="uniqueValue",M="classBreaks",E=32,P=24,S=28,k=E/2,C=(E-P)/2;e.exports=function(t,e,n){return{getGraphicIcon:a,getGraphicSymbol:o,rendererToLegend:d(n),generatePlaceholderSymbology:u,generateWMSSymbology:h,getZoomLevel:v,enhanceRenderer:r,mapServerToLocalLegend:g(t,e)}}},{"./shared.js":179,"svg.js":143}]},{},[152])(152)});
//# sourceMappingURL=geoapi.min.js.map
