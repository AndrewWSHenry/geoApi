!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.geoapi=t()}}(function(){var t;return function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[a]={exports:{}};t[a][0].call(l.exports,function(e){var i=t[a][1][e];return r(i?i:e)},l,l.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===c?62:e===o||e===f?63:h>e?-1:h+10>e?e-h+26+26:l+26>e?e-l:u+26>e?e-u+26:void 0}function i(t){function i(t){u[c++]=t}var n,r,a,o,h,u;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;h="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,u=new s(3*t.length/4-h),a=h>0?t.length-4:t.length;var c=0;for(n=0,r=0;a>n;n+=4,r+=3)o=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),i((16711680&o)>>16),i((65280&o)>>8),i(255&o);return 2===h?(o=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,i(255&o)):1===h&&(o=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,i(o>>8&255),i(255&o)),u}function r(t){function e(t){return n.charAt(t)}function i(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var r,s,a,o=t.length%3,h="";for(r=0,a=t.length-o;a>r;r+=3)s=(t[r]<<16)+(t[r+1]<<8)+t[r+2],h+=i(s);switch(o){case 1:s=t[t.length-1],h+=e(s>>2),h+=e(s<<4&63),h+="==";break;case 2:s=(t[t.length-2]<<8)+t[t.length-1],h+=e(s>>10),h+=e(s>>4&63),h+=e(s<<2&63),h+="="}return h}var s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),o="/".charCodeAt(0),h="0".charCodeAt(0),u="a".charCodeAt(0),l="A".charCodeAt(0),c="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=i,t.fromByteArray=r}("undefined"==typeof i?this.base64js={}:i)},{}],2:[function(t,e,i){(function(e){"use strict";function n(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(i){return!1}}function r(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t){return this instanceof s?(s.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?a(this,t):"string"==typeof t?o(this,t,arguments.length>1?arguments[1]:"utf8"):h(this,t)):arguments.length>1?new s(t,arguments[1]):new s(t)}function a(t,e){if(t=m(t,0>e?0:0|y(e)),!s.TYPED_ARRAY_SUPPORT)for(var i=0;e>i;i++)t[i]=0;return t}function o(t,e,i){("string"!=typeof i||""===i)&&(i="utf8");var n=0|v(e,i);return t=m(t,n),t.write(e,i),t}function h(t,e){if(s.isBuffer(e))return u(t,e);if(J(e))return l(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return c(t,e);if(e instanceof ArrayBuffer)return f(t,e)}return e.length?d(t,e):p(t,e)}function u(t,e){var i=0|y(e.length);return t=m(t,i),e.copy(t,0,0,i),t}function l(t,e){var i=0|y(e.length);t=m(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function c(t,e){var i=0|y(e.length);t=m(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function f(t,e){return s.TYPED_ARRAY_SUPPORT?(e.byteLength,t=s._augment(new Uint8Array(e))):t=c(t,new Uint8Array(e)),t}function d(t,e){var i=0|y(e.length);t=m(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function p(t,e){var i,n=0;"Buffer"===e.type&&J(e.data)&&(i=e.data,n=0|y(i.length)),t=m(t,n);for(var r=0;n>r;r+=1)t[r]=255&i[r];return t}function m(t,e){s.TYPED_ARRAY_SUPPORT?(t=s._augment(new Uint8Array(e)),t.__proto__=s.prototype):(t.length=e,t._isBuffer=!0);var i=0!==e&&e<=s.poolSize>>>1;return i&&(t.parent=$),t}function y(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function g(t,e){if(!(this instanceof g))return new g(t,e);var i=new s(t,e);return delete i.parent,i}function v(t,e){"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return i;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(n)return V(t).length;e=(""+e).toLowerCase(),n=!0}}function b(t,e,i){var n=!1;if(e=0|e,i=void 0===i||i===1/0?this.length:0|i,t||(t="utf8"),0>e&&(e=0),i>this.length&&(i=this.length),e>=i)return"";for(;;)switch(t){case"hex":return T(this,e,i);case"utf8":case"utf-8":return k(this,e,i);case"ascii":return A(this,e,i);case"binary":return I(this,e,i);case"base64":return S(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function x(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var s=e.length;if(s%2!==0)throw new Error("Invalid hex string");n>s/2&&(n=s/2);for(var a=0;n>a;a++){var o=parseInt(e.substr(2*a,2),16);if(isNaN(o))throw new Error("Invalid hex string");t[i+a]=o}return a}function w(t,e,i,n){return H(V(e,t.length-i),t,i,n)}function _(t,e,i,n){return H(q(e),t,i,n)}function M(t,e,i,n){return _(t,e,i,n)}function E(t,e,i,n){return H(Y(e),t,i,n)}function P(t,e,i,n){return H(X(e,t.length-i),t,i,n)}function S(t,e,i){return 0===e&&i===t.length?W.fromByteArray(t):W.fromByteArray(t.slice(e,i))}function k(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;i>r;){var s=t[r],a=null,o=s>239?4:s>223?3:s>191?2:1;if(i>=r+o){var h,u,l,c;switch(o){case 1:128>s&&(a=s);break;case 2:h=t[r+1],128===(192&h)&&(c=(31&s)<<6|63&h,c>127&&(a=c));break;case 3:h=t[r+1],u=t[r+2],128===(192&h)&&128===(192&u)&&(c=(15&s)<<12|(63&h)<<6|63&u,c>2047&&(55296>c||c>57343)&&(a=c));break;case 4:h=t[r+1],u=t[r+2],l=t[r+3],128===(192&h)&&128===(192&u)&&128===(192&l)&&(c=(15&s)<<18|(63&h)<<12|(63&u)<<6|63&l,c>65535&&1114112>c&&(a=c))}}null===a?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),r+=o}return C(n)}function C(t){var e=t.length;if(Q>=e)return String.fromCharCode.apply(String,t);for(var i="",n=0;e>n;)i+=String.fromCharCode.apply(String,t.slice(n,n+=Q));return i}function A(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;i>r;r++)n+=String.fromCharCode(127&t[r]);return n}function I(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;i>r;r++)n+=String.fromCharCode(t[r]);return n}function T(t,e,i){var n=t.length;(!e||0>e)&&(e=0),(!i||0>i||i>n)&&(i=n);for(var r="",s=e;i>s;s++)r+=G(t[s]);return r}function L(t,e,i){for(var n=t.slice(e,i),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+256*n[s+1]);return r}function B(t,e,i){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,i,n,r,a){if(!s.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>r||a>e)throw new RangeError("value is out of bounds");if(i+n>t.length)throw new RangeError("index out of range")}function N(t,e,i,n){0>e&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-i,2);s>r;r++)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function R(t,e,i,n){0>e&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-i,4);s>r;r++)t[i+r]=e>>>8*(n?r:3-r)&255}function z(t,e,i,n,r,s){if(e>r||s>e)throw new RangeError("value is out of bounds");if(i+n>t.length)throw new RangeError("index out of range");if(0>i)throw new RangeError("index out of range")}function O(t,e,i,n,r){return r||z(t,e,i,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,i,n,23,4),i+4}function D(t,e,i,n,r){return r||z(t,e,i,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,i,n,52,8),i+8}function F(t){if(t=U(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function U(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return 16>t?"0"+t.toString(16):t.toString(16)}function V(t,e){e=e||1/0;for(var i,n=t.length,r=null,s=[],a=0;n>a;a++){if(i=t.charCodeAt(a),i>55295&&57344>i){if(!r){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}r=i;continue}if(56320>i){(e-=3)>-1&&s.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,128>i){if((e-=1)<0)break;s.push(i)}else if(2048>i){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(65536>i){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(1114112>i))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function q(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e}function X(t,e){for(var i,n,r,s=[],a=0;a<t.length&&!((e-=2)<0);a++)i=t.charCodeAt(a),n=i>>8,r=i%256,s.push(r),s.push(n);return s}function Y(t){return W.toByteArray(F(t))}function H(t,e,i,n){for(var r=0;n>r&&!(r+i>=e.length||r>=t.length);r++)e[r+i]=t[r];return r}var W=t("base64-js"),Z=t("ieee754"),J=t("isarray");i.Buffer=s,i.SlowBuffer=g,i.INSPECT_MAX_BYTES=50,s.poolSize=8192;var $={};s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),s.TYPED_ARRAY_SUPPORT?(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array):(s.prototype.length=void 0,s.prototype.parent=void 0),s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,a=Math.min(i,n);a>r&&t[r]===e[r];)++r;return r!==a&&(i=t[r],n=e[r]),n>i?-1:i>n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!J(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new s(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;i++)e+=t[i].length;var n=new s(e),r=0;for(i=0;i<t.length;i++){var a=t[i];a.copy(n,r),r+=a.length}return n},s.byteLength=v,s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):b.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:s.compare(this,t)},s.prototype.indexOf=function(t,e){function i(t,e,i){for(var n=-1,r=0;i+r<t.length;r++)if(t[i+r]===e[-1===n?0:r-n]){if(-1===n&&(n=r),r-n+1===e.length)return i+n}else n=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(s.isBuffer(t))return i(this,t,e);if("number"==typeof t)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):i(this,[t],e);throw new TypeError("val must be string, number or Buffer")},s.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},s.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},s.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(i)?(i=0|i,void 0===n&&(n="utf8")):(n=i,i=void 0);else{var r=n;n=e,e=0|i,i=r}var s=this.length-e;if((void 0===i||i>s)&&(i=s),t.length>0&&(0>i||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return x(this,t,e,i);case"utf8":case"utf-8":return w(this,t,e,i);case"ascii":return _(this,t,e,i);case"binary":return M(this,t,e,i);case"base64":return E(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;s.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),t>e&&(e=t);var n;if(s.TYPED_ARRAY_SUPPORT)n=s._augment(this.subarray(t,e));else{var r=e-t;n=new s(r,void 0);for(var a=0;r>a;a++)n[a]=this[a+t]}return n.length&&(n.parent=this.parent||this),n},s.prototype.readUIntLE=function(t,e,i){t=0|t,e=0|e,i||B(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return n},s.prototype.readUIntBE=function(t,e,i){t=0|t,e=0|e,i||B(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},s.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,i){t=0|t,e=0|e,i||B(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,i){t=0|t,e=0|e,i||B(t,e,this.length);for(var n=e,r=1,s=this[t+--n];n>0&&(r*=256);)s+=this[t+--n]*r;return r*=128,s>=r&&(s-=Math.pow(2,8*e)),s},s.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),Z.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),Z.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),Z.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),Z.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,i,n){t=+t,e=0|e,i=0|i,n||j(this,t,e,i,Math.pow(2,8*i),0);var r=1,s=0;for(this[e]=255&t;++s<i&&(r*=256);)this[e+s]=t/r&255;return e+i},s.prototype.writeUIntBE=function(t,e,i,n){t=+t,e=0|e,i=0|i,n||j(this,t,e,i,Math.pow(2,8*i),0);var r=i-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+i},s.prototype.writeUInt8=function(t,e,i){return t=+t,e=0|e,i||j(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,i){return t=+t,e=0|e,i||j(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,i){return t=+t,e=0|e,i||j(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,i){return t=+t,e=0|e,i||j(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,i){return t=+t,e=0|e,i||j(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e=0|e,!n){var r=Math.pow(2,8*i-1);j(this,t,e,i,r-1,-r)}var s=0,a=1,o=0>t?1:0;for(this[e]=255&t;++s<i&&(a*=256);)this[e+s]=(t/a>>0)-o&255;return e+i},s.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e=0|e,!n){var r=Math.pow(2,8*i-1);j(this,t,e,i,r-1,-r)}var s=i-1,a=1,o=0>t?1:0;for(this[e+s]=255&t;--s>=0&&(a*=256);)this[e+s]=(t/a>>0)-o&255;return e+i},s.prototype.writeInt8=function(t,e,i){return t=+t,e=0|e,i||j(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,i){return t=+t,e=0|e,i||j(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,i){return t=+t,e=0|e,i||j(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,i){return t=+t,e=0|e,i||j(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,i){return t=+t,e=0|e,i||j(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,i){return O(this,t,e,!0,i)},s.prototype.writeFloatBE=function(t,e,i){return O(this,t,e,!1,i)},s.prototype.writeDoubleLE=function(t,e,i){return D(this,t,e,!0,i)},s.prototype.writeDoubleBE=function(t,e,i){return D(this,t,e,!1,i)},s.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&i>n&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,a=n-i;if(this===t&&e>i&&n>e)for(r=a-1;r>=0;r--)t[r+e]=this[r+i];else if(1e3>a||!s.TYPED_ARRAY_SUPPORT)for(r=0;a>r;r++)t[r+e]=this[r+i];else t._set(this.subarray(i,i+a),e);return a},s.prototype.fill=function(t,e,i){if(t||(t=0),e||(e=0),i||(i=this.length),e>i)throw new RangeError("end < start");if(i!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>i||i>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;i>n;n++)this[n]=t;else{var r=V(t.toString()),s=r.length;for(n=e;i>n;n++)this[n]=r[n%s]}return this}},s.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(s.TYPED_ARRAY_SUPPORT)return new s(this).buffer;for(var t=new Uint8Array(this.length),e=0,i=t.length;i>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var K=s.prototype;s._augment=function(t){return t.constructor=s,t._isBuffer=!0,t._set=t.set,t.get=K.get,t.set=K.set,t.write=K.write,t.toString=K.toString,t.toLocaleString=K.toString,t.toJSON=K.toJSON,t.equals=K.equals,t.compare=K.compare,t.indexOf=K.indexOf,t.copy=K.copy,t.slice=K.slice,t.readUIntLE=K.readUIntLE,t.readUIntBE=K.readUIntBE,t.readUInt8=K.readUInt8,t.readUInt16LE=K.readUInt16LE,t.readUInt16BE=K.readUInt16BE,t.readUInt32LE=K.readUInt32LE,t.readUInt32BE=K.readUInt32BE,t.readIntLE=K.readIntLE,t.readIntBE=K.readIntBE,t.readInt8=K.readInt8,t.readInt16LE=K.readInt16LE,t.readInt16BE=K.readInt16BE,t.readInt32LE=K.readInt32LE,t.readInt32BE=K.readInt32BE,t.readFloatLE=K.readFloatLE,t.readFloatBE=K.readFloatBE,t.readDoubleLE=K.readDoubleLE,t.readDoubleBE=K.readDoubleBE,t.writeUInt8=K.writeUInt8,t.writeUIntLE=K.writeUIntLE,t.writeUIntBE=K.writeUIntBE,t.writeUInt16LE=K.writeUInt16LE,t.writeUInt16BE=K.writeUInt16BE,t.writeUInt32LE=K.writeUInt32LE,t.writeUInt32BE=K.writeUInt32BE,t.writeIntLE=K.writeIntLE,t.writeIntBE=K.writeIntBE,t.writeInt8=K.writeInt8,t.writeInt16LE=K.writeInt16LE,t.writeInt16BE=K.writeInt16BE,t.writeInt32LE=K.writeInt32LE,t.writeInt32BE=K.writeInt32BE,t.writeFloatLE=K.writeFloatLE,t.writeFloatBE=K.writeFloatBE,t.writeDoubleLE=K.writeDoubleLE,t.writeDoubleBE=K.writeDoubleBE,t.fill=K.fill,t.inspect=K.inspect,t.toArrayBuffer=K.toArrayBuffer,t};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:7,isarray:3}],3:[function(t,e,i){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],4:[function(e,n,r){!function(i,r){"use strict";"undefined"!=typeof t&&t.amd?t("canvgModule",["rgbcolor","stackblur"],r):"undefined"!=typeof n&&n.exports&&(n.exports=r(e("rgbcolor"),e("stackblur"))),i.canvg=r(i.RGBColor,i.stackBlur)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=[0,0,0],i=function(i,n){var r=t.match(i);null!=r&&(e[n]+=r.length,t=t.replace(i," "))};return t=t.replace(/:not\(([^\)]*)\)/g,"     $1 "),t=t.replace(/{[\s\S]*/gm," "),i(o,1),i(h,0),i(u,1),i(l,2),i(c,1),i(f,1),t=t.replace(/[\*\s\+>~]/g," "),t=t.replace(/[#\.]/g," "),i(d,2),e.join("")}function r(r){var a={opts:r};a.FRAMERATE=30,a.MAX_VIRTUAL_PIXELS=3e4,a.log=function(t){},1==a.opts.log&&"undefined"!=typeof console&&(a.log=function(t){console.log(t)}),a.init=function(t){var e=0;a.UniqueId=function(){return e++,"canvg"+e},a.Definitions={},a.Styles={},a.StylesSpecificity={},a.Animations=[],a.Images=[],a.ctx=t,a.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},a.init(),a.ImagesLoaded=function(){for(var t=0;t<a.Images.length;t++)if(!a.Images[t].loaded)return!1;return!0},a.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},a.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},a.ajax=function(t){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e?(e.open("GET",t,!1),e.send(null),e.responseText):null},a.parseXml=function(t){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,i=new Windows.Data.Xml.Dom.XmlLoadSettings;return i.prohibitDtd=!1,e.loadXml(t,i),e}if(window.DOMParser){var n=new DOMParser;return n.parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},a.Property=function(t,e){this.name=t,this.value=e},a.Property.prototype.getValue=function(){return this.value},a.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},a.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},a.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},a.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},a.Property.prototype.addOpacity=function(e){var i=this.value;if(null!=e.value&&""!=e.value&&"string"==typeof this.value){var n=new t(this.value);n.ok&&(i="rgba("+n.r+", "+n.g+", "+n.b+", "+e.numValue()+")")}return new a.Property(this.name,i)},a.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),a.Definitions[t]},a.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},a.Property.prototype.getFillStyleDefinition=function(t,e){var i=this.getDefinition();if(null!=i&&i.createGradient)return i.createGradient(a.ctx,t,e);if(null!=i&&i.createPattern){if(i.getHrefAttribute().hasValue()){var n=i.attribute("patternTransform");i=i.getHrefAttribute().getDefinition(),n.hasValue()&&(i.attribute("patternTransform",!0).value=n.value)}return i.createPattern(a.ctx,t)}return null},a.Property.prototype.getDPI=function(t){return 96},a.Property.prototype.getEM=function(t){var e=12,i=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);return i.hasValue()&&(e=i.toPixels(t)),e},a.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},a.Property.prototype.toPixels=function(t,e){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/em$/))return this.numValue()*this.getEM(t);if(i.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(t);if(i.match(/%$/))return this.numValue()*a.ViewPort.ComputeSize(t);var n=this.numValue();return e&&1>n?n*a.ViewPort.ComputeSize(t):n},a.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():t.match(/ms$/)?this.numValue():this.numValue()},a.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var o={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return a.Property.prototype.toTextBaseline=function(){return this.hasValue()?o[this.value]:null},a.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,e,i,n,r,s){var o=null!=s?this.Parse(s):this.CreateFont("","","","","",a.ctx.font);return{fontFamily:r||o.fontFamily,fontSize:n||o.fontSize,fontStyle:t||o.fontStyle,fontWeight:i||o.fontWeight,fontVariant:e||o.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(e){for(var i={},n=a.trim(a.compressSpaces(e||"")).split(" "),r={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},s="",o=0;o<n.length;o++)r.fontStyle||-1==t.Styles.indexOf(n[o])?r.fontVariant||-1==t.Variants.indexOf(n[o])?r.fontWeight||-1==t.Weights.indexOf(n[o])?r.fontSize?"inherit"!=n[o]&&(s+=n[o]):("inherit"!=n[o]&&(i.fontSize=n[o].split("/")[0]),r.fontStyle=r.fontVariant=r.fontWeight=r.fontSize=!0):("inherit"!=n[o]&&(i.fontWeight=n[o]),r.fontStyle=r.fontVariant=r.fontWeight=!0):("inherit"!=n[o]&&(i.fontVariant=n[o]),r.fontStyle=r.fontVariant=!0):("inherit"!=n[o]&&(i.fontStyle=n[o]),r.fontStyle=!0);return""!=s&&(i.fontFamily=s),i}},a.ToNumberArray=function(t){for(var e=a.trim(a.compressSpaces((t||"").replace(/,/g," "))).split(" "),i=0;i<e.length;i++)e[i]=parseFloat(e[i]);return e},a.Point=function(t,e){this.x=t,this.y=e},a.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},a.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],i=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=i},a.CreatePoint=function(t){var e=a.ToNumberArray(t);return new a.Point(e[0],e[1])},a.CreatePath=function(t){for(var e=a.ToNumberArray(t),i=[],n=0;n<e.length;n+=2)i.push(new a.Point(e[n],e[n+1]));return i},a.BoundingBox=function(t,e,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,i,n,r,s){var a=t+2/3*(i-t),o=e+2/3*(n-e),h=a+1/3*(r-t),u=o+1/3*(s-e);this.addBezierCurve(t,e,a,h,o,u,r,s)},this.addBezierCurve=function(t,e,n,r,s,a,o,h){var u=[t,e],l=[n,r],c=[s,a],f=[o,h];for(this.addPoint(u[0],u[1]),this.addPoint(f[0],f[1]),i=0;i<=1;i++){var d=function(t){return Math.pow(1-t,3)*u[i]+3*Math.pow(1-t,2)*t*l[i]+3*(1-t)*Math.pow(t,2)*c[i]+Math.pow(t,3)*f[i]},p=6*u[i]-12*l[i]+6*c[i],m=-3*u[i]+9*l[i]-9*c[i]+3*f[i],y=3*l[i]-3*u[i];if(0!=m){var g=Math.pow(p,2)-4*y*m;if(!(0>g)){var v=(-p+Math.sqrt(g))/(2*m);v>0&&1>v&&(0==i&&this.addX(d(v)),1==i&&this.addY(d(v)));var b=(-p-Math.sqrt(g))/(2*m);b>0&&1>b&&(0==i&&this.addX(d(b)),1==i&&this.addY(d(b)))}}else{if(0==p)continue;var x=-y/p;x>0&&1>x&&(0==i&&this.addX(d(x)),1==i&&this.addY(d(x)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},a.Transform=function(t){var e=this;this.Type={},this.Type.translate=function(t){this.p=a.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var e=a.ToNumberArray(t);this.angle=new a.Property("angle",e[0]),this.cx=e[1]||0,this.cy=e[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=a.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=a.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],i=this.m[2],n=this.m[4],r=this.m[1],s=this.m[3],a=this.m[5],o=0,h=0,u=1,l=1/(e*(s*u-a*h)-i*(r*u-a*o)+n*(r*h-s*o));t.transform(l*(s*u-a*h),l*(a*o-r*u),l*(n*h-i*u),l*(e*u-n*o),l*(i*a-n*s),l*(n*r-e*a))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=e.Type.matrix,this.base(t),this.angle=new a.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=e.Type.SkewBase,
this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var i=a.trim(a.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),n=0;n<i.length;n++){var r=a.trim(i[n].split("(")[0]),s=i[n].split("(")[1].replace(")",""),o=this.Type[r];if("undefined"!=typeof o){var h=new o(s);h.type=r,this.transforms.push(h)}}},a.AspectRatio=function(t,e,i,n,r,s,o,h,u,l){e=a.compressSpaces(e),e=e.replace(/^defer\s/,"");var c=e.split(" ")[0]||"xMidYMid",f=e.split(" ")[1]||"meet",d=i/n,p=r/s,m=Math.min(d,p),y=Math.max(d,p);"meet"==f&&(n*=m,s*=m),"slice"==f&&(n*=y,s*=y),u=new a.Property("refX",u),l=new a.Property("refY",l),u.hasValue()&&l.hasValue()?t.translate(-m*u.toPixels("x"),-m*l.toPixels("y")):(c.match(/^xMid/)&&("meet"==f&&m==p||"slice"==f&&y==p)&&t.translate(i/2-n/2,0),c.match(/YMid$/)&&("meet"==f&&m==d||"slice"==f&&y==d)&&t.translate(0,r/2-s/2),c.match(/^xMax/)&&("meet"==f&&m==p||"slice"==f&&y==p)&&t.translate(i-n,0),c.match(/YMax$/)&&("meet"==f&&m==d||"slice"==f&&y==d)&&t.translate(0,r-s)),"none"==c?t.scale(d,p):"meet"==f?t.scale(m,m):"slice"==f&&t.scale(y,y),t.translate(null==o?0:-o,null==h?0:-h)},a.Element={},a.EmptyProperty=new a.Property("EMPTY",""),a.Element.ElementBase=function(t){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(t,e){var i=this.attributes[t];return null!=i?i:(1==e&&(i=new a.Property(t,""),this.attributes[t]=i),i||a.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if("href"==t||t.match(/:href$/))return this.attributes[t];return a.EmptyProperty},this.style=function(t,e,i){var n=this.styles[t];if(null!=n)return n;var r=this.attribute(t);if(null!=r&&r.hasValue())return this.styles[t]=r,r;if(1!=i){var s=this.parent;if(null!=s){var o=s.style(t);if(null!=o&&o.hasValue())return o}}return 1==e&&(n=new a.Property(t,""),this.styles[t]=n),n||a.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.style("mask").hasValue()){var e=this.style("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var i=this.style("filter").getDefinition();null!=i&&i.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,e){var i=t;e&&(i=a.CreateElement(t)),i.parent=this,"title"!=i.type&&this.children.push(i)},this.addStylesFromStyleDefinition=function(){for(var e in a.Styles)if("@"!=e[0]&&s(t,e)){var i=a.Styles[e],n=a.StylesSpecificity[e];if(null!=i)for(var r in i){var o=this.stylesSpecificity[r];"undefined"==typeof o&&(o="000"),n>o&&(this.styles[r]=i[r],this.stylesSpecificity[r]=n)}}};var e=new RegExp("^[A-Z-]+$"),i=function(t){return e.test(t)?t.toLowerCase():t};if(null!=t&&1==t.nodeType){for(var n=0;n<t.attributes.length;n++){var r=t.attributes[n],o=i(r.nodeName);this.attributes[o]=new a.Property(o,r.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var h=this.attribute("style").value.split(";"),n=0;n<h.length;n++)if(""!=a.trim(h[n])){var u=h[n].split(":"),l=a.trim(u[0]),c=a.trim(u[1]);this.styles[l]=new a.Property(l,c)}this.attribute("id").hasValue()&&null==a.Definitions[this.attribute("id").value]&&(a.Definitions[this.attribute("id").value]=this);for(var n=0;n<t.childNodes.length;n++){var f=t.childNodes[n];if(1==f.nodeType&&this.addChild(f,!0),this.captureTextNodes&&(3==f.nodeType||4==f.nodeType)){var d=f.value||f.text||f.textContent||"";""!=a.compressSpaces(d)&&this.addChild(new a.Element.tspan(f),!1)}}}},a.Element.RenderedElementBase=function(t){this.base=a.Element.ElementBase,this.base(t),this.setContext=function(t){if(this.style("fill").isUrlDefinition()){var e=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=e&&(t.fillStyle=e)}else if(this.style("fill").hasValue()){var i=this.style("fill");"currentColor"==i.value&&(i.value=this.style("color").value),"inherit"!=i.value&&(t.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value)}if(this.style("fill-opacity").hasValue()){var i=new a.Property("fill",t.fillStyle);i=i.addOpacity(this.style("fill-opacity")),t.fillStyle=i.value}if(this.style("stroke").isUrlDefinition()){var e=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=e&&(t.strokeStyle=e)}else if(this.style("stroke").hasValue()){var n=this.style("stroke");"currentColor"==n.value&&(n.value=this.style("color").value),"inherit"!=n.value&&(t.strokeStyle="none"==n.value?"rgba(0,0,0,0)":n.value)}if(this.style("stroke-opacity").hasValue()){var n=new a.Property("stroke",t.strokeStyle);n=n.addOpacity(this.style("stroke-opacity")),t.strokeStyle=n.value}if(this.style("stroke-width").hasValue()){var r=this.style("stroke-width").toPixels();t.lineWidth=0==r?.001:r}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var s=a.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof t.setLineDash?t.setLineDash(s):"undefined"!=typeof t.webkitLineDash?t.webkitLineDash=s:"undefined"==typeof t.mozDash||1==s.length&&0==s[0]||(t.mozDash=s);var o=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof t.lineDashOffset?t.lineDashOffset=o:"undefined"!=typeof t.webkitLineDashOffset?t.webkitLineDashOffset=o:"undefined"!=typeof t.mozDashOffset&&(t.mozDashOffset=o)}if("undefined"!=typeof t.font&&(t.font=a.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()){var h=new a.Transform(this.style("transform",!1,!0).value);h.apply(t)}if(this.style("clip-path",!1,!0).hasValue()){var u=this.style("clip-path",!1,!0).getDefinition();null!=u&&u.apply(t)}this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},a.Element.RenderedElementBase.prototype=new a.Element.ElementBase,a.Element.PathElementBase=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new a.BoundingBox},this.renderChildren=function(t){this.path(t),a.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var e=this.getMarkers();if(null!=e){if(this.style("marker-start").isUrlDefinition()){var i=this.style("marker-start").getDefinition();i.render(t,e[0][0],e[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),n=1;n<e.length-1;n++)i.render(t,e[n][0],e[n][1]);if(this.style("marker-end").isUrlDefinition()){var i=this.style("marker-end").getDefinition();i.render(t,e[e.length-1][0],e[e.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},a.Element.PathElementBase.prototype=new a.Element.RenderedElementBase,a.Element.svg=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),a.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,"undefined"!=typeof t.font&&"undefined"!=typeof window.getComputedStyle&&(t.font=window.getComputedStyle(t.canvas).getPropertyValue("font")),this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var e=a.ViewPort.width(),i=a.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){e=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var n=0,r=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(n=-this.attribute("refX").toPixels("x"),r=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(n,r),t.lineTo(e,r),t.lineTo(e,i),t.lineTo(n,i),t.closePath(),t.clip())}if(a.ViewPort.SetCurrent(e,i),this.attribute("viewBox").hasValue()){var s=a.ToNumberArray(this.attribute("viewBox").value),o=s[0],h=s[1];e=s[2],i=s[3],a.AspectRatio(t,this.attribute("preserveAspectRatio").value,a.ViewPort.width(),e,a.ViewPort.height(),i,o,h,this.attribute("refX").value,this.attribute("refY").value),a.ViewPort.RemoveCurrent(),a.ViewPort.SetCurrent(s[2],s[3])}}},a.Element.svg.prototype=new a.Element.RenderedElementBase,a.Element.rect=function(t){this.base=a.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y"),s=this.attribute("rx").toPixels("x"),o=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(o=s),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(s=o),s=Math.min(s,n/2),o=Math.min(o,r/2),null!=t&&(t.beginPath(),t.moveTo(e+s,i),t.lineTo(e+n-s,i),t.quadraticCurveTo(e+n,i,e+n,i+o),t.lineTo(e+n,i+r-o),t.quadraticCurveTo(e+n,i+r,e+n-s,i+r),t.lineTo(e+s,i+r),t.quadraticCurveTo(e,i+r,e,i+r-o),t.lineTo(e,i+o),t.quadraticCurveTo(e,i,e+s,i),t.closePath()),new a.BoundingBox(e,i,e+n,i+r)}},a.Element.rect.prototype=new a.Element.PathElementBase,a.Element.circle=function(t){this.base=a.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),n=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(e,i,n,0,2*Math.PI,!0),t.closePath()),new a.BoundingBox(e-n,i-n,e+n,i+n)}},a.Element.circle.prototype=new a.Element.PathElementBase,a.Element.ellipse=function(t){this.base=a.Element.PathElementBase,this.base(t),this.path=function(t){var e=4*((Math.sqrt(2)-1)/3),i=this.attribute("rx").toPixels("x"),n=this.attribute("ry").toPixels("y"),r=this.attribute("cx").toPixels("x"),s=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(r,s-n),t.bezierCurveTo(r+e*i,s-n,r+i,s-e*n,r+i,s),t.bezierCurveTo(r+i,s+e*n,r+e*i,s+n,r,s+n),t.bezierCurveTo(r-e*i,s+n,r-i,s+e*n,r-i,s),t.bezierCurveTo(r-i,s-e*n,r-e*i,s-n,r,s-n),t.closePath()),new a.BoundingBox(r-i,s-n,r+i,s+n)}},a.Element.ellipse.prototype=new a.Element.PathElementBase,a.Element.line=function(t){this.base=a.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new a.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new a.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var e=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y)),new a.BoundingBox(e[0].x,e[0].y,e[1].x,e[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},a.Element.line.prototype=new a.Element.PathElementBase,a.Element.polyline=function(t){this.base=a.Element.PathElementBase,this.base(t),this.points=a.CreatePath(this.attribute("points").value),this.path=function(t){var e=new a.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)e.addPoint(this.points[i].x,this.points[i].y),null!=t&&t.lineTo(this.points[i].x,this.points[i].y);return e},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.length>0&&t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},a.Element.polyline.prototype=new a.Element.PathElementBase,a.Element.polygon=function(t){this.base=a.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},a.Element.polygon.prototype=new a.Element.polyline,a.Element.path=function(t){this.base=a.Element.PathElementBase,this.base(t);var e=this.attribute("d").value;e=e.replace(/,/gm," ");for(var i=0;2>i;i++)e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([0-9])([+\-])/gm,"$1 $2");for(var i=0;2>i;i++)e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),e=a.compressSpaces(e),e=a.trim(e),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new a.Point(0,0),this.control=new a.Point(0,0),this.current=new a.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new a.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var t=new a.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return t},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,i){null!=i&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(i)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(e),this.path=function(t){var e=this.PathParser;e.reset();var i=new a.BoundingBox;for(null!=t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":var n=e.getAsCurrentPoint();for(e.addMarker(n),i.addPoint(n.x,n.y),null!=t&&t.moveTo(n.x,n.y),e.start=e.current;!e.isCommandOrEnd();){var n=e.getAsCurrentPoint();e.addMarker(n,e.start),i.addPoint(n.x,n.y),null!=t&&t.lineTo(n.x,n.y)}break;case"L":case"l":for(;!e.isCommandOrEnd();){var r=e.current,n=e.getAsCurrentPoint();e.addMarker(n,r),i.addPoint(n.x,n.y),null!=t&&t.lineTo(n.x,n.y)}break;case"H":case"h":for(;!e.isCommandOrEnd();){var s=new a.Point((e.isRelativeCommand()?e.current.x:0)+e.getScalar(),e.current.y);e.addMarker(s,e.current),e.current=s,i.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y)}break;case"V":case"v":for(;!e.isCommandOrEnd();){var s=new a.Point(e.current.x,(e.isRelativeCommand()?e.current.y:0)+e.getScalar());e.addMarker(s,e.current),e.current=s,i.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y)}break;case"C":case"c":for(;!e.isCommandOrEnd();){var o=e.current,h=e.getPoint(),u=e.getAsControlPoint(),l=e.getAsCurrentPoint();e.addMarker(l,u,h),i.addBezierCurve(o.x,o.y,h.x,h.y,u.x,u.y,l.x,l.y),null!=t&&t.bezierCurveTo(h.x,h.y,u.x,u.y,l.x,l.y)}break;case"S":case"s":for(;!e.isCommandOrEnd();){var o=e.current,h=e.getReflectedControlPoint(),u=e.getAsControlPoint(),l=e.getAsCurrentPoint();e.addMarker(l,u,h),i.addBezierCurve(o.x,o.y,h.x,h.y,u.x,u.y,l.x,l.y),null!=t&&t.bezierCurveTo(h.x,h.y,u.x,u.y,l.x,l.y)}break;case"Q":case"q":for(;!e.isCommandOrEnd();){var o=e.current,u=e.getAsControlPoint(),l=e.getAsCurrentPoint();e.addMarker(l,u,u),i.addQuadraticCurve(o.x,o.y,u.x,u.y,l.x,l.y),null!=t&&t.quadraticCurveTo(u.x,u.y,l.x,l.y)}break;case"T":case"t":for(;!e.isCommandOrEnd();){var o=e.current,u=e.getReflectedControlPoint();e.control=u;var l=e.getAsCurrentPoint();e.addMarker(l,u,u),i.addQuadraticCurve(o.x,o.y,u.x,u.y,l.x,l.y),null!=t&&t.quadraticCurveTo(u.x,u.y,l.x,l.y)}break;case"A":case"a":for(;!e.isCommandOrEnd();){var o=e.current,c=e.getScalar(),f=e.getScalar(),d=e.getScalar()*(Math.PI/180),p=e.getScalar(),m=e.getScalar(),l=e.getAsCurrentPoint(),y=new a.Point(Math.cos(d)*(o.x-l.x)/2+Math.sin(d)*(o.y-l.y)/2,-Math.sin(d)*(o.x-l.x)/2+Math.cos(d)*(o.y-l.y)/2),g=Math.pow(y.x,2)/Math.pow(c,2)+Math.pow(y.y,2)/Math.pow(f,2);g>1&&(c*=Math.sqrt(g),f*=Math.sqrt(g));var v=(p==m?-1:1)*Math.sqrt((Math.pow(c,2)*Math.pow(f,2)-Math.pow(c,2)*Math.pow(y.y,2)-Math.pow(f,2)*Math.pow(y.x,2))/(Math.pow(c,2)*Math.pow(y.y,2)+Math.pow(f,2)*Math.pow(y.x,2)));isNaN(v)&&(v=0);var b=new a.Point(v*c*y.y/f,v*-f*y.x/c),x=new a.Point((o.x+l.x)/2+Math.cos(d)*b.x-Math.sin(d)*b.y,(o.y+l.y)/2+Math.sin(d)*b.x+Math.cos(d)*b.y),w=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(w(t)*w(e))},M=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},E=M([1,0],[(y.x-b.x)/c,(y.y-b.y)/f]),P=[(y.x-b.x)/c,(y.y-b.y)/f],S=[(-y.x-b.x)/c,(-y.y-b.y)/f],k=M(P,S);_(P,S)<=-1&&(k=Math.PI),_(P,S)>=1&&(k=0);var C=1-m?1:-1,A=E+C*(k/2),I=new a.Point(x.x+c*Math.cos(A),x.y+f*Math.sin(A));if(e.addMarkerAngle(I,A-C*Math.PI/2),e.addMarkerAngle(l,A-C*Math.PI),i.addPoint(l.x,l.y),null!=t){var _=c>f?c:f,T=c>f?1:c/f,L=c>f?f/c:1;t.translate(x.x,x.y),t.rotate(d),t.scale(T,L),t.arc(0,0,_,E,E+k,1-m),t.scale(1/T,1/L),t.rotate(-d),t.translate(-x.x,-x.y)}}break;case"Z":case"z":null!=t&&t.closePath(),e.current=e.start}return i},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),i=[],n=0;n<t.length;n++)i.push([t[n],e[n]]);return i}},a.Element.path.prototype=new a.Element.PathElementBase,a.Element.pattern=function(t){this.base=a.Element.ElementBase,this.base(t),this.createPattern=function(t,e){var i=this.attribute("width").toPixels("x",!0),n=this.attribute("height").toPixels("y",!0),r=new a.Element.svg;r.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new a.Property("width",i+"px"),r.attributes.height=new a.Property("height",n+"px"),r.attributes.transform=new a.Property("transform",this.attribute("patternTransform").value),r.children=this.children;var s=document.createElement("canvas");s.width=i,s.height=n;var o=s.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&o.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var h=-1;1>=h;h++)for(var u=-1;1>=u;u++)o.save(),r.attributes.x=new a.Property("x",h*s.width),r.attributes.y=new a.Property("y",u*s.height),r.render(o),o.restore();var l=t.createPattern(s,"repeat");return l}},a.Element.pattern.prototype=new a.Element.ElementBase,a.Element.marker=function(t){this.base=a.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,e,i){t.translate(e.x,e.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var n=new a.Element.svg;n.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value),n.attributes.refX=new a.Property("refX",this.attribute("refX").value),n.attributes.refY=new a.Property("refY",this.attribute("refY").value),n.attributes.width=new a.Property("width",this.attribute("markerWidth").value),n.attributes.height=new a.Property("height",this.attribute("markerHeight").value),n.attributes.fill=new a.Property("fill",this.attribute("fill").valueOrDefault("black")),n.attributes.stroke=new a.Property("stroke",this.attribute("stroke").valueOrDefault("none")),n.children=this.children,n.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-i),t.translate(-e.x,-e.y)}},a.Element.marker.prototype=new a.Element.ElementBase,a.Element.defs=function(t){this.base=a.Element.ElementBase,this.base(t),this.render=function(t){}},a.Element.defs.prototype=new a.Element.ElementBase,a.Element.GradientBase=function(t){this.base=a.Element.ElementBase,this.base(t),this.stops=[];for(var e=0;e<this.children.length;e++){var i=this.children[e];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(t){for(var e=0;e<this.attributesToInherit.length;e++){var i=this.attributesToInherit[e];!this.attribute(i).hasValue()&&t.attribute(i).hasValue()&&(this.attribute(i,!0).value=t.attribute(i).value)}},this.createGradient=function(t,e,i){var n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(n));var r=function(t){if(i.hasValue()){var e=new a.Property("color",t);return e.addOpacity(i).value}return t},s=this.getGradient(t,e);if(null==s)return r(n.stops[n.stops.length-1].color);for(var o=0;o<n.stops.length;o++)s.addColorStop(n.stops[o].offset,r(n.stops[o].color));if(this.attribute("gradientTransform").hasValue()){var h=a.ViewPort.viewPorts[0],u=new a.Element.rect;u.attributes.x=new a.Property("x",-a.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new a.Property("y",-a.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new a.Property("width",a.MAX_VIRTUAL_PIXELS),u.attributes.height=new a.Property("height",a.MAX_VIRTUAL_PIXELS);var l=new a.Element.g;l.attributes.transform=new a.Property("transform",this.attribute("gradientTransform").value),l.children=[u];var c=new a.Element.svg;c.attributes.x=new a.Property("x",0),c.attributes.y=new a.Property("y",0),c.attributes.width=new a.Property("width",h.width),c.attributes.height=new a.Property("height",h.height),c.children=[l];var f=document.createElement("canvas");f.width=h.width,f.height=h.height;var d=f.getContext("2d");return d.fillStyle=s,c.render(d),d.createPattern(f,"no-repeat")}return s}},a.Element.GradientBase.prototype=new a.Element.ElementBase,a.Element.linearGradient=function(t){this.base=a.Element.GradientBase,this.base(t),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(t,e){var i="objectBoundingBox"==this.gradientUnits()?e.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var n="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),s="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),a="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return n==s&&r==a?null:t.createLinearGradient(n,r,s,a)}},a.Element.linearGradient.prototype=new a.Element.GradientBase,a.Element.radialGradient=function(t){this.base=a.Element.GradientBase,this.base(t),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(t,e){var i=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var n="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),s=n,a=r;this.attribute("fx").hasValue()&&(s="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(a="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var o="objectBoundingBox"==this.gradientUnits()?(i.width()+i.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(s,a,0,n,r,o)}},a.Element.radialGradient.prototype=new a.Element.GradientBase,a.Element.stop=function(t){this.base=a.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var e=this.style("stop-color",!0);""===e.value&&(e.value="#000"),this.style("stop-opacity").hasValue()&&(e=e.addOpacity(this.style("stop-opacity"))),this.color=e.value},a.Element.stop.prototype=new a.Element.ElementBase,a.Element.AnimateBase=function(t){this.base=a.Element.ElementBase,this.base(t),a.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var i=this.calcValue();if(this.attribute("type").hasValue()){var n=this.attribute("type").value;i=n+"("+i+")"}this.getProperty().value=i,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var e=t.progress*(this.values.value.length-1),i=Math.floor(e),n=Math.ceil(e);t.from=new a.Property("from",parseFloat(this.values.value[i])),t.to=new a.Property("to",parseFloat(this.values.value[n])),t.progress=(e-i)/(n-i)}else t.from=this.from,t.to=this.to;return t}},a.Element.AnimateBase.prototype=new a.Element.ElementBase,a.Element.animate=function(t){this.base=a.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return e+this.initialUnits}},a.Element.animate.prototype=new a.Element.AnimateBase,a.Element.animateColor=function(e){this.base=a.Element.AnimateBase,this.base(e),this.calcValue=function(){var e=this.progress(),i=new t(e.from.value),n=new t(e.to.value);if(i.ok&&n.ok){var r=i.r+(n.r-i.r)*e.progress,s=i.g+(n.g-i.g)*e.progress,a=i.b+(n.b-i.b)*e.progress;return"rgb("+parseInt(r,10)+","+parseInt(s,10)+","+parseInt(a,10)+")"}return this.attribute("from").value}},a.Element.animateColor.prototype=new a.Element.AnimateBase,a.Element.animateTransform=function(t){this.base=a.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),e=a.ToNumberArray(t.from.value),i=a.ToNumberArray(t.to.value),n="",r=0;r<e.length;r++)n+=e[r]+(i[r]-e[r])*t.progress+" ";return n}},a.Element.animateTransform.prototype=new a.Element.animate,a.Element.font=function(t){this.base=a.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var e=0;e<this.children.length;e++){var i=this.children[e];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(a.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},a.Element.font.prototype=new a.Element.ElementBase,a.Element.fontface=function(t){this.base=a.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},a.Element.fontface.prototype=new a.Element.ElementBase,a.Element.missingglyph=function(t){this.base=a.Element.path,this.base(t),this.horizAdvX=0},a.Element.missingglyph.prototype=new a.Element.path,a.Element.glyph=function(t){this.base=a.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},a.Element.glyph.prototype=new a.Element.path,a.Element.text=function(t){this.captureTextNodes=!0,this.base=a.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),i=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize);return new a.BoundingBox(t,e-i,t+Math.floor(2*i/3)*this.children[0].getText().length,e)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),
this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,this,e)},this.getAnchorDelta=function(t,e,i){var n=this.style("text-anchor").valueOrDefault("start");if("start"!=n){for(var r=0,s=i;s<e.children.length;s++){var a=e.children[s];if(s>i&&a.attribute("x").hasValue())break;r+=a.measureTextRecursive(t)}return-1*("end"==n?r:r/2)}return 0},this.renderChild=function(t,e,i,n){var r=i.children[n];r.attribute("x").hasValue()?(r.x=r.attribute("x").toPixels("x")+e.getAnchorDelta(t,i,n),r.attribute("dx").hasValue()&&(r.x+=r.attribute("dx").toPixels("x"))):(r.attribute("dx").hasValue()&&(e.x+=r.attribute("dx").toPixels("x")),r.x=e.x),e.x=r.x+r.measureText(t),r.attribute("y").hasValue()?(r.y=r.attribute("y").toPixels("y"),r.attribute("dy").hasValue()&&(r.y+=r.attribute("dy").toPixels("y"))):(r.attribute("dy").hasValue()&&(e.y+=r.attribute("dy").toPixels("y")),r.y=e.y),e.y=r.y,r.render(t);for(var n=0;n<r.children.length;n++)e.renderChild(t,e,r,n)}},a.Element.text.prototype=new a.Element.RenderedElementBase,a.Element.TextElementBase=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,i){var n=e[i],r=null;if(t.isArabic){var s="isolated";(0==i||" "==e[i-1])&&i<e.length-2&&" "!=e[i+1]&&(s="terminal"),i>0&&" "!=e[i-1]&&i<e.length-2&&" "!=e[i+1]&&(s="medial"),i>0&&" "!=e[i-1]&&(i==e.length-1||" "==e[i+1])&&(s="initial"),"undefined"!=typeof t.glyphs[n]&&(r=t.glyphs[n][s],null==r&&"glyph"==t.glyphs[n].type&&(r=t.glyphs[n]))}else r=t.glyphs[n];return null==r&&(r=t.missingGlyph),r},this.renderChildren=function(t){var e=this.parent.style("font-family").getDefinition();if(null==e)""!=t.fillStyle&&t.fillText(a.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(a.compressSpaces(this.getText()),this.x,this.y);else{var i=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),n=this.parent.style("font-style").valueOrDefault(a.Font.Parse(a.ctx.font).fontStyle),r=this.getText();e.isRTL&&(r=r.split("").reverse().join(""));for(var s=a.ToNumberArray(this.parent.attribute("dx").value),o=0;o<r.length;o++){var h=this.getGlyph(e,r,o),u=i/e.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(u,-u);var l=t.lineWidth;t.lineWidth=t.lineWidth*e.fontFace.unitsPerEm/i,"italic"==n&&t.transform(1,0,.4,1,0,0),h.render(t),"italic"==n&&t.transform(1,0,-.4,1,0,0),t.lineWidth=l,t.scale(1/u,-1/u),t.translate(-this.x,-this.y),this.x+=i*(h.horizAdvX||e.horizAdvX)/e.fontFace.unitsPerEm,"undefined"==typeof s[o]||isNaN(s[o])||(this.x+=s[o])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),i=0;i<this.children.length;i++)e+=this.children[i].measureTextRecursive(t);return e},this.measureText=function(t){var e=this.parent.style("font-family").getDefinition();if(null!=e){var i=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),n=0,r=this.getText();e.isRTL&&(r=r.split("").reverse().join(""));for(var s=a.ToNumberArray(this.parent.attribute("dx").value),o=0;o<r.length;o++){var h=this.getGlyph(e,r,o);n+=(h.horizAdvX||e.horizAdvX)*i/e.fontFace.unitsPerEm,"undefined"==typeof s[o]||isNaN(s[o])||(n+=s[o])}return n}var u=a.compressSpaces(this.getText());if(!t.measureText)return 10*u.length;t.save(),this.setContext(t);var l=t.measureText(u).width;return t.restore(),l}},a.Element.TextElementBase.prototype=new a.Element.RenderedElementBase,a.Element.tspan=function(t){this.captureTextNodes=!0,this.base=a.Element.TextElementBase,this.base(t),this.text=a.compressSpaces(t.value||t.text||t.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},a.Element.tspan.prototype=new a.Element.TextElementBase,a.Element.tref=function(t){this.base=a.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();return null!=t?t.children[0].getText():void 0}},a.Element.tref.prototype=new a.Element.TextElementBase,a.Element.a=function(t){this.base=a.Element.TextElementBase,this.base(t),this.hasText=t.childNodes.length>0;for(var e=0;e<t.childNodes.length;e++)3!=t.childNodes[e].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var e=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);a.Mouse.checkBoundingBox(this,new a.BoundingBox(this.x,this.y-e.toPixels("y"),this.x+this.measureText(t),this.y))}else if(this.children.length>0){var i=new a.Element.g;i.children=this.children,i.parent=this,i.render(t)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){a.ctx.canvas.style.cursor="pointer"}},a.Element.a.prototype=new a.Element.TextElementBase,a.Element.image=function(t){this.base=a.Element.RenderedElementBase,this.base(t);var e=this.getHrefAttribute().value;if(""!=e){var i=e.match(/\.svg$/);if(a.Images.push(this),this.loaded=!1,i)this.img=a.ajax(e),this.loaded=!0;else{this.img=document.createElement("img"),1==a.opts.useCORS&&(this.img.crossOrigin="Anonymous");var n=this;this.img.onload=function(){n.loaded=!0},this.img.onerror=function(){a.log('ERROR: image "'+e+'" not found'),n.loaded=!0},this.img.src=e}this.renderChildren=function(t){var e=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");0!=r&&0!=s&&(t.save(),i?t.drawSvg(this.img,e,n,r,s):(t.translate(e,n),a.AspectRatio(t,this.attribute("preserveAspectRatio").value,r,this.img.width,s,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y");return new a.BoundingBox(t,e,t+i,e+n)}}},a.Element.image.prototype=new a.Element.RenderedElementBase,a.Element.g=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(){for(var t=new a.BoundingBox,e=0;e<this.children.length;e++)t.addBoundingBox(this.children[e].getBoundingBox());return t}},a.Element.g.prototype=new a.Element.RenderedElementBase,a.Element.symbol=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.render=function(t){}},a.Element.symbol.prototype=new a.Element.RenderedElementBase,a.Element.style=function(t){this.base=a.Element.ElementBase,this.base(t);for(var e="",i=0;i<t.childNodes.length;i++)e+=t.childNodes[i].data;e=e.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),e=a.compressSpaces(e);for(var r=e.split("}"),i=0;i<r.length;i++)if(""!=a.trim(r[i]))for(var s=r[i].split("{"),o=s[0].split(","),h=s[1].split(";"),u=0;u<o.length;u++){var l=a.trim(o[u]);if(""!=l){for(var c=a.Styles[l]||{},f=0;f<h.length;f++){var d=h[f].indexOf(":"),p=h[f].substr(0,d),m=h[f].substr(d+1,h[f].length-d);null!=p&&null!=m&&(c[a.trim(p)]=new a.Property(a.trim(p),a.trim(m)))}if(a.Styles[l]=c,a.StylesSpecificity[l]=n(l),"@font-face"==l)for(var y=c["font-family"].value.replace(/"/g,""),g=c.src.value.split(","),v=0;v<g.length;v++)if(g[v].indexOf('format("svg")')>0)for(var b=g[v].indexOf("url"),x=g[v].indexOf(")",b),w=g[v].substr(b+5,x-b-6),_=a.parseXml(a.ajax(w)),M=_.getElementsByTagName("font"),E=0;E<M.length;E++){var P=a.CreateElement(M[E]);a.Definitions[y]=P}}}},a.Element.style.prototype=new a.Element.ElementBase,a.Element.use=function(t){this.base=a.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var e=this.getHrefAttribute().getDefinition();this.path=function(t){null!=e&&e.path(t)},this.getBoundingBox=function(){return null!=e?e.getBoundingBox():void 0},this.renderChildren=function(t){if(null!=e){var i=e;"symbol"==e.type&&(i=new a.Element.svg,i.type="svg",i.attributes.viewBox=new a.Property("viewBox",e.attribute("viewBox").value),i.attributes.preserveAspectRatio=new a.Property("preserveAspectRatio",e.attribute("preserveAspectRatio").value),i.attributes.overflow=new a.Property("overflow",e.attribute("overflow").value),i.children=e.children),"svg"==i.type&&(this.attribute("width").hasValue()&&(i.attributes.width=new a.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(i.attributes.height=new a.Property("height",this.attribute("height").value)));var n=i.parent;i.parent=null,i.render(t),i.parent=n}}},a.Element.use.prototype=new a.Element.RenderedElementBase,a.Element.mask=function(t){this.base=a.Element.ElementBase,this.base(t),this.apply=function(t,e){var i=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==r&&0==s){for(var o=new a.BoundingBox,h=0;h<this.children.length;h++)o.addBoundingBox(this.children[h].getBoundingBox());var i=Math.floor(o.x1),n=Math.floor(o.y1),r=Math.floor(o.width()),s=Math.floor(o.height())}var u=e.attribute("mask").value;e.attribute("mask").value="";var l=document.createElement("canvas");l.width=i+r,l.height=n+s;var c=l.getContext("2d");this.renderChildren(c);var f=document.createElement("canvas");f.width=i+r,f.height=n+s;var d=f.getContext("2d");e.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=c.createPattern(l,"no-repeat"),d.fillRect(0,0,i+r,n+s),t.fillStyle=d.createPattern(f,"no-repeat"),t.fillRect(0,0,i+r,n+s),e.attribute("mask").value=u},this.render=function(t){}},a.Element.mask.prototype=new a.Element.ElementBase,a.Element.clipPath=function(t){this.base=a.Element.ElementBase,this.base(t),this.apply=function(t){var e=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var i=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},e.call(t);for(var n=0;n<this.children.length;n++){var r=this.children[n];if("undefined"!=typeof r.path){var s=null;r.style("transform",!1,!0).hasValue()&&(s=new a.Transform(r.style("transform",!1,!0).value),s.apply(t)),r.path(t),CanvasRenderingContext2D.prototype.closePath=i,s&&s.unapply(t)}}i.call(t),t.clip(),CanvasRenderingContext2D.prototype.beginPath=e,CanvasRenderingContext2D.prototype.closePath=i},this.render=function(t){}},a.Element.clipPath.prototype=new a.Element.ElementBase,a.Element.filter=function(t){this.base=a.Element.ElementBase,this.base(t),this.apply=function(t,e){var i=e.getBoundingBox(),n=Math.floor(i.x1),r=Math.floor(i.y1),s=Math.floor(i.width()),a=Math.floor(i.height()),o=e.style("filter").value;e.style("filter").value="";for(var h=0,u=0,l=0;l<this.children.length;l++){var c=this.children[l].extraFilterDistance||0;h=Math.max(h,c),u=Math.max(u,c)}var f=document.createElement("canvas");f.width=s+2*h,f.height=a+2*u;var d=f.getContext("2d");d.translate(-n+h,-r+u),e.render(d);for(var l=0;l<this.children.length;l++)"function"==typeof this.children[l].apply&&this.children[l].apply(d,0,0,s+2*h,a+2*u);t.drawImage(f,0,0,s+2*h,a+2*u,n-h,r-u,s+2*h,a+2*u),e.style("filter",!0).value=o},this.render=function(t){}},a.Element.filter.prototype=new a.Element.ElementBase,a.Element.feMorphology=function(t){this.base=a.Element.ElementBase,this.base(t),this.apply=function(t,e,i,n,r){}},a.Element.feMorphology.prototype=new a.Element.ElementBase,a.Element.feComposite=function(t){this.base=a.Element.ElementBase,this.base(t),this.apply=function(t,e,i,n,r){}},a.Element.feComposite.prototype=new a.Element.ElementBase,a.Element.feColorMatrix=function(t){function e(t,e,i,n,r,s){return t[i*n*4+4*e+s]}function i(t,e,i,n,r,s,a){t[i*n*4+4*e+s]=a}function n(t,e){var i=r[t];return i*(0>i?e-255:e)}this.base=a.Element.ElementBase,this.base(t);var r=a.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var s=r[0];r=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var o=r[0]*Math.PI/180,h=function(t,e,i){return t+Math.cos(o)*e+Math.sin(o)*i};r=[h(.213,.787,-.213),h(.715,-.715,-.715),h(.072,-.072,.928),0,0,h(.213,-.213,.143),h(.715,.285,.14),h(.072,-.072,-.283),0,0,h(.213,-.213,-.787),h(.715,-.715,.715),h(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(t,r,s,a,o){for(var h=t.getImageData(0,0,a,o),s=0;o>s;s++)for(var r=0;a>r;r++){var u=e(h.data,r,s,a,o,0),l=e(h.data,r,s,a,o,1),c=e(h.data,r,s,a,o,2),f=e(h.data,r,s,a,o,3);i(h.data,r,s,a,o,0,n(0,u)+n(1,l)+n(2,c)+n(3,f)+n(4,1)),i(h.data,r,s,a,o,1,n(5,u)+n(6,l)+n(7,c)+n(8,f)+n(9,1)),i(h.data,r,s,a,o,2,n(10,u)+n(11,l)+n(12,c)+n(13,f)+n(14,1)),i(h.data,r,s,a,o,3,n(15,u)+n(16,l)+n(17,c)+n(18,f)+n(19,1))}t.clearRect(0,0,a,o),t.putImageData(h,0,0)}},a.Element.feColorMatrix.prototype=new a.Element.ElementBase,a.Element.feGaussianBlur=function(t){this.base=a.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,i,n,r,s){return"undefined"==typeof e.canvasRGBA?void a.log("ERROR: StackBlur.js must be included for blur to work"):(t.canvas.id=a.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),e.canvasRGBA(t.canvas.id,i,n,r,s,this.blurRadius),void document.body.removeChild(t.canvas))}},a.Element.feGaussianBlur.prototype=new a.Element.ElementBase,a.Element.title=function(t){},a.Element.title.prototype=new a.Element.ElementBase,a.Element.desc=function(t){},a.Element.desc.prototype=new a.Element.ElementBase,a.Element.MISSING=function(t){a.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},a.Element.MISSING.prototype=new a.Element.ElementBase,a.CreateElement=function(t){var e=t.nodeName.replace(/^[^:]+:/,"");e=e.replace(/\-/g,"");var i=null;return i="undefined"!=typeof a.Element[e]?new a.Element[e](t):new a.Element.MISSING(t),i.type=t.nodeName,i},a.load=function(t,e){a.loadXml(t,a.ajax(e))},a.loadXml=function(t,e){a.loadXmlDoc(t,a.parseXml(e))},a.loadXmlDoc=function(t,e){a.init(t);var i=function(e){for(var i=t.canvas;i;)e.x-=i.offsetLeft,e.y-=i.offsetTop,i=i.offsetParent;return window.scrollX&&(e.x+=window.scrollX),window.scrollY&&(e.y+=window.scrollY),e};1!=a.opts.ignoreMouse&&(t.canvas.onclick=function(t){var e=i(new a.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));a.Mouse.onclick(e.x,e.y)},t.canvas.onmousemove=function(t){var e=i(new a.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));a.Mouse.onmousemove(e.x,e.y)});var n=a.CreateElement(e.documentElement);n.root=!0,n.addStylesFromStyleDefinition();var r=!0,s=function(){a.ViewPort.Clear(),t.canvas.parentNode&&a.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=a.opts.ignoreDimensions&&(n.style("width").hasValue()&&(t.canvas.width=n.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),n.style("height").hasValue()&&(t.canvas.height=n.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px"));var i=t.canvas.clientWidth||t.canvas.width,s=t.canvas.clientHeight||t.canvas.height;if(1==a.opts.ignoreDimensions&&n.style("width").hasValue()&&n.style("height").hasValue()&&(i=n.style("width").toPixels("x"),s=n.style("height").toPixels("y")),a.ViewPort.SetCurrent(i,s),null!=a.opts.offsetX&&(n.attribute("x",!0).value=a.opts.offsetX),null!=a.opts.offsetY&&(n.attribute("y",!0).value=a.opts.offsetY),null!=a.opts.scaleWidth||null!=a.opts.scaleHeight){var o=null,h=null,u=a.ToNumberArray(n.attribute("viewBox").value);null!=a.opts.scaleWidth&&(n.attribute("width").hasValue()?o=n.attribute("width").toPixels("x")/a.opts.scaleWidth:isNaN(u[2])||(o=u[2]/a.opts.scaleWidth)),null!=a.opts.scaleHeight&&(n.attribute("height").hasValue()?h=n.attribute("height").toPixels("y")/a.opts.scaleHeight:isNaN(u[3])||(h=u[3]/a.opts.scaleHeight)),null==o&&(o=h),null==h&&(h=o),n.attribute("width",!0).value=a.opts.scaleWidth,n.attribute("height",!0).value=a.opts.scaleHeight,n.style("transform",!0,!0).value+=" scale("+1/o+","+1/h+")"}1!=a.opts.ignoreClear&&t.clearRect(0,0,i,s),n.render(t),r&&(r=!1,"function"==typeof a.opts.renderCallback&&a.opts.renderCallback(e))},o=!0;a.ImagesLoaded()&&(o=!1,s()),a.intervalID=setInterval(function(){var t=!1;if(o&&a.ImagesLoaded()&&(o=!1,t=!0),1!=a.opts.ignoreMouse&&(t|=a.Mouse.hasEvents()),1!=a.opts.ignoreAnimation)for(var e=0;e<a.Animations.length;e++)t|=a.Animations[e].update(1e3/a.FRAMERATE);"function"==typeof a.opts.forceRedraw&&1==a.opts.forceRedraw()&&(t=!0),t&&(s(),a.Mouse.runEvents())},1e3/a.FRAMERATE)},a.stop=function(){a.intervalID&&clearInterval(a.intervalID)},a.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var i=0;i<this.events.length;i++){var n=this.events[i];e.isPointInPath&&e.isPointInPath(n.x,n.y)&&(this.eventElements[i]=t)}},this.checkBoundingBox=function(t,e){for(var i=0;i<this.events.length;i++){var n=this.events[i];e.isPointInBox(n.x,n.y)&&(this.eventElements[i]=t)}},this.runEvents=function(){a.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var e=this.events[t],i=this.eventElements[t];i;)e.run(i),i=i.parent;this.events=[],this.eventElements=[]}},a}var s,a=function(t,e,i){if(null!=t||null!=e||null!=i){"string"==typeof t&&(t=document.getElementById(t)),null!=t.svg&&t.svg.stop();var n=r(i||{});(1!=t.childNodes.length||"OBJECT"!=t.childNodes[0].nodeName)&&(t.svg=n);var s=t.getContext("2d");"undefined"!=typeof e.documentElement?n.loadXmlDoc(s,e):"<"==e.substr(0,1)?n.loadXml(s,e):n.load(s,e)}else for(var o=document.querySelectorAll("svg"),h=0;h<o.length;h++){var u=o[h],l=document.createElement("canvas");l.width=u.clientWidth,l.height=u.clientHeight,u.parentNode.insertBefore(l,u),u.parentNode.removeChild(u);var c=document.createElement("div");c.appendChild(u),a(l,c.innerHTML)}};"undefined"!=typeof Element.prototype.matches?s=function(t,e){return t.matches(e)}:"undefined"!=typeof Element.prototype.webkitMatchesSelector?s=function(t,e){return t.webkitMatchesSelector(e)}:"undefined"!=typeof Element.prototype.mozMatchesSelector?s=function(t,e){return t.mozMatchesSelector(e)}:"undefined"!=typeof Element.prototype.msMatchesSelector?s=function(t,e){return t.msMatchesSelector(e)}:"undefined"!=typeof Element.prototype.oMatchesSelector?s=function(t,e){return t.oMatchesSelector(e)}:(("function"==typeof jQuery||"function"==typeof Zepto)&&(s=function(t,e){return $(t).is(e)}),"undefined"==typeof s&&(s=Sizzle.matchesSelector));var o=/(\[[^\]]+\])/g,h=/(#[^\s\+>~\.\[:]+)/g,u=/(\.[^\s\+>~\.\[:]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,c=/(:[\w-]+\([^\)]*\))/gi,f=/(:[^\s\+>~\.\[:]+)/g,d=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,i,n,r,s){var o={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:i,scaleWidth:n,scaleHeight:r};for(var h in s)s.hasOwnProperty(h)&&(o[h]=s[h]);a(this.canvas,t,o)}),a})},{rgbcolor:134,stackblur:141}],5:[function(t,e,i){function n(t){return!!t.match(/(Lat)(itude)?/gi)}function r(t){return!!t.match(/(L)(on|ng)(gitude)?/i)}function s(t){return"object"==typeof t?Object.keys(t).length:0}function a(t){var e=[",",";","	","|"],i=[];return e.forEach(function(e){var n=c(e).parse(t);if(n.length>=1){for(var r=s(n[0]),a=0;a<n.length;a++)if(s(n[a])!==r)return;i.push({delimiter:e,arity:Object.keys(n[0]).length})}}),i.length?i.sort(function(t,e){return e.arity-t.arity})[0].delimiter:null}function o(t){var e=a(t);return e?c(e).parse(t):null}function h(t,e,i){i||(i=e,e={}),e.delimiter=e.delimiter||",";var s=e.latfield||"",o=e.lonfield||"",h=e.crs||"",u=[],l={type:"FeatureCollection",features:u};if(""!==h&&(l.crs={type:"name",properties:{name:h}}),"auto"===e.delimiter&&"string"==typeof t&&(e.delimiter=a(t),!e.delimiter))return i({type:"Error",message:"Could not autodetect delimiter"});var d="string"==typeof t?c(e.delimiter).parse(t):t;if(!d.length)return i(null,l);if(!s||!o){for(var p in d[0])!s&&n(p)&&(s=p),!o&&r(p)&&(o=p);if(!s||!o){var m=[];for(var y in d[0])m.push(y);return i({type:"Error",message:"Latitude and longitude fields not present",data:d,fields:m})}}for(var g=[],v=0;v<d.length;v++)if(void 0!==d[v][o]&&void 0!==d[v][o]){var b,x,w,_=d[v][o],M=d[v][s];w=f(_,"EW"),w&&(_=w),w=f(M,"NS"),w&&(M=w),b=parseFloat(_),x=parseFloat(M),isNaN(b)||isNaN(x)?g.push({message:"A row contained an invalid value for latitude or longitude",row:d[v]}):(e.includeLatLon||(delete d[v][o],delete d[v][s]),u.push({type:"Feature",properties:d[v],geometry:{type:"Point",coordinates:[parseFloat(b),parseFloat(x)]}}))}i(g.length?g:null,l)}function u(t){for(var e=t.features,i={type:"Feature",geometry:{type:"LineString",coordinates:[]}},n=0;n<e.length;n++)i.geometry.coordinates.push(e[n].geometry.coordinates);return i.properties=e.reduce(function(t,e){for(var i in e.properties)t[i]||(t[i]=[]),t[i].push(e.properties[i]);return t},{}),{type:"FeatureCollection",features:[i]}}function l(t){for(var e=t.features,i={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},n=0;n<e.length;n++)i.geometry.coordinates[0].push(e[n].geometry.coordinates);return i.properties=e.reduce(function(t,e){for(var i in e.properties)t[i]||(t[i]=[]),t[i].push(e.properties[i]);return t},{}),{type:"FeatureCollection",features:[i]}}var c=t("dsv"),f=t("sexagesimal");e.exports={isLon:r,isLat:n,csv:c.csv.parse,tsv:c.tsv.parse,dsv:c,auto:o,csv2geojson:h,toLine:u,toPolygon:l}},{dsv:6,sexagesimal:135}],6:[function(t,e,i){e.exports=new Function('dsv.version = "0.0.3";\n\ndsv.tsv = dsv("\\t");\ndsv.csv = dsv(",");\n\nfunction dsv(delimiter) {\n  var dsv = {},\n      reFormat = new RegExp("[\\"" + delimiter + "\\n]"),\n      delimiterCode = delimiter.charCodeAt(0);\n\n  dsv.parse = function(text, f) {\n    var o;\n    return dsv.parseRows(text, function(row, i) {\n      if (o) return o(row, i - 1);\n      var a = new Function("d", "return {" + row.map(function(name, i) {\n        return JSON.stringify(name) + ": d[" + i + "]";\n      }).join(",") + "}");\n      o = f ? function(row, i) { return f(a(row), i); } : a;\n    });\n  };\n\n  dsv.parseRows = function(text, f) {\n    var EOL = {}, // sentinel value for end-of-line\n        EOF = {}, // sentinel value for end-of-file\n        rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // the current line number\n        t, // the current token\n        eol; // is the current token followed by EOL?\n\n    function token() {\n      if (I >= N) return EOF; // special case: end of file\n      if (eol) return eol = false, EOL; // special case: end of line\n\n      // special case: quotes\n      var j = I;\n      if (text.charCodeAt(j) === 34) {\n        var i = j;\n        while (i++ < N) {\n          if (text.charCodeAt(i) === 34) {\n            if (text.charCodeAt(i + 1) !== 34) break;\n            ++i;\n          }\n        }\n        I = i + 2;\n        var c = text.charCodeAt(i + 1);\n        if (c === 13) {\n          eol = true;\n          if (text.charCodeAt(i + 2) === 10) ++I;\n        } else if (c === 10) {\n          eol = true;\n        }\n        return text.substring(j + 1, i).replace(/""/g, "\\"");\n      }\n\n      // common case: find next delimiter or newline\n      while (I < N) {\n        var c = text.charCodeAt(I++), k = 1;\n        if (c === 10) eol = true; // \\n\n        else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n        else if (c !== delimiterCode) continue;\n        return text.substring(j, I - k);\n      }\n\n      // special case: last token before EOF\n      return text.substring(j);\n    }\n\n    while ((t = token()) !== EOF) {\n      var a = [];\n      while (t !== EOL && t !== EOF) {\n        a.push(t);\n        t = token();\n      }\n      if (f && !(a = f(a, n++))) continue;\n      rows.push(a);\n    }\n\n    return rows;\n  };\n\n  dsv.format = function(rows) {\n    if (Array.isArray(rows[0])) return dsv.formatRows(rows); // deprecated; use formatRows\n    var fieldSet = {}, fields = [];\n\n    // Compute unique fields in order of discovery.\n    rows.forEach(function(row) {\n      for (var field in row) {\n        if (!(field in fieldSet)) {\n          fields.push(fieldSet[field] = field);\n        }\n      }\n    });\n\n    return [fields.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n      return fields.map(function(field) {\n        return formatValue(row[field]);\n      }).join(delimiter);\n    })).join("\\n");\n  };\n\n  dsv.formatRows = function(rows) {\n    return rows.map(formatRow).join("\\n");\n  };\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return reFormat.test(text) ? "\\"" + text.replace(/\\"/g, "\\"\\"") + "\\"" : text;\n  }\n\n  return dsv;\n}\n;return dsv')()},{}],7:[function(t,e,i){i.read=function(t,e,i,n,r){var s,a,o=8*r-n-1,h=(1<<o)-1,u=h>>1,l=-7,c=i?r-1:0,f=i?-1:1,d=t[e+c];for(c+=f,s=d&(1<<-l)-1,d>>=-l,l+=o;l>0;s=256*s+t[e+c],c+=f,l-=8);for(a=s&(1<<-l)-1,s>>=-l,l+=n;l>0;a=256*a+t[e+c],c+=f,l-=8);if(0===s)s=1-u;else{if(s===h)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,n),s-=u}return(d?-1:1)*a*Math.pow(2,s-n)},i.write=function(t,e,i,n,r,s){var a,o,h,u=8*s-r-1,l=(1<<u)-1,c=l>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),e+=a+c>=1?f/h:f*Math.pow(2,1-c),e*h>=2&&(a++,h/=2),a+c>=l?(o=0,a=l):a+c>=1?(o=(e*h-1)*Math.pow(2,r),a+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,r),a=0));r>=8;t[i+d]=255&o,d+=p,o/=256,r-=8);for(a=a<<r|o,u+=r;u>0;t[i+d]=255&a,d+=p,a/=256,u-=8);t[i+d-p]|=128*m}},{}],8:[function(t,e,i){(function(t){"use strict";function i(){l=!0;for(var t,e,i=c.length;i;){for(e=c,c=[],t=-1;++t<i;)e[t]();i=c.length}l=!1}function n(t){1!==c.push(t)||l||r()}var r,s=t.MutationObserver||t.WebKitMutationObserver;if(s){var a=0,o=new s(i),h=t.document.createTextNode("");o.observe(h,{characterData:!0}),r=function(){h.data=a=++a%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){i(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(i,0)};else{var u=new t.MessageChannel;u.port1.onmessage=i,r=function(){u.port2.postMessage(0)}}var l,c=[];e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,i){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}e.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}},{}],10:[function(t,e,i){"use strict";function n(t){if(t){this.data=t,this.length=this.data.length,this.index=0,this.zero=0;for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}}var r=t("./dataReader");n.prototype=new r,n.prototype.byteAt=function(t){return this.data[this.zero+t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),r=t.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===e&&this.data[s+1]===i&&this.data[s+2]===n&&this.data[s+3]===r)return s-this.zero;return-1},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"./dataReader":15}],11:[function(t,e,i){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(t,e){for(var i,r,s,a,o,h,u,l="",c=0;c<t.length;)i=t.charCodeAt(c++),r=t.charCodeAt(c++),s=t.charCodeAt(c++),a=i>>2,o=(3&i)<<4|r>>4,h=(15&r)<<2|s>>6,u=63&s,isNaN(r)?h=u=64:isNaN(s)&&(u=64),l=l+n.charAt(a)+n.charAt(o)+n.charAt(h)+n.charAt(u);return l},i.decode=function(t,e){var i,r,s,a,o,h,u,l="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)a=n.indexOf(t.charAt(c++)),o=n.indexOf(t.charAt(c++)),h=n.indexOf(t.charAt(c++)),u=n.indexOf(t.charAt(c++)),i=a<<2|o>>4,r=(15&o)<<4|h>>2,s=(3&h)<<6|u,l+=String.fromCharCode(i),64!=h&&(l+=String.fromCharCode(r)),64!=u&&(l+=String.fromCharCode(s));return l}},{}],12:[function(t,e,i){"use strict";function n(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}n.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=n},{}],13:[function(t,e,i){"use strict";i.STORE={magic:"\x00\x00",compress:function(t,e){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},i.DEFLATE=t("./flate")},{"./flate":18}],14:[function(t,e,i){"use strict";var n=t("./utils"),r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];
e.exports=function(t,e){if("undefined"==typeof t||!t.length)return 0;var i="string"!==n.getTypeOf(t);"undefined"==typeof e&&(e=0);var s=0,a=0,o=0;e=-1^e;for(var h=0,u=t.length;u>h;h++)o=i?t[h]:t.charCodeAt(h),a=255&(e^o),s=r[a],e=e>>>8^s;return-1^e}},{"./utils":31}],15:[function(t,e,i){"use strict";function n(t){this.data=null,this.length=0,this.index=0,this.zero=0}var r=t("./utils");n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||0>t)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,i=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=n},{"./utils":31}],16:[function(t,e,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!1,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],17:[function(t,e,i){"use strict";var n=t("./utils");i.string2binary=function(t){return n.string2binary(t)},i.string2Uint8Array=function(t){return n.transformTo("uint8array",t)},i.uint8Array2String=function(t){return n.transformTo("string",t)},i.string2Blob=function(t){var e=n.transformTo("arraybuffer",t);return n.arrayBuffer2Blob(e)},i.arrayBuffer2Blob=function(t){return n.arrayBuffer2Blob(t)},i.transformTo=function(t,e){return n.transformTo(t,e)},i.getTypeOf=function(t){return n.getTypeOf(t)},i.checkSupport=function(t){return n.checkSupport(t)},i.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,i.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,i.pretty=function(t){return n.pretty(t)},i.findCompression=function(t){return n.findCompression(t)},i.isRegExp=function(t){return n.isRegExp(t)}},{"./utils":31}],18:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako");i.uncompressInputType=n?"uint8array":"array",i.compressInputType=n?"uint8array":"array",i.magic="\b\x00",i.compress=function(t,e){return r.deflateRaw(t,{level:e.level||-1})},i.uncompress=function(t){return r.inflateRaw(t)}},{pako:34}],19:[function(t,e,i){"use strict";function n(t,e){return this instanceof n?(this.files={},this.comment=null,this.root="",t&&this.load(t,e),void(this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t})):new n(t,e)}var r=t("./base64");n.prototype=t("./object"),n.prototype.load=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.utils=t("./deprecatedPublicUtils"),n.base64={encode:function(t){return r.encode(t)},decode:function(t){return r.decode(t)}},n.compressions=t("./compressions"),e.exports=n},{"./base64":11,"./compressions":13,"./defaults":16,"./deprecatedPublicUtils":17,"./load":20,"./object":23,"./support":27}],20:[function(t,e,i){"use strict";var n=t("./base64"),r=t("./utf8"),s=t("./utils"),a=t("./zipEntries");e.exports=function(t,e){var i,o,h,u;for(e=s.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),e.base64&&(t=n.decode(t)),o=new a(t,e),i=o.files,h=0;h<i.length;h++)u=i[h],this.file(u.fileNameStr,u.decompressed,{binary:!0,optimizedBinaryString:!0,date:u.date,dir:u.dir,comment:u.fileCommentStr.length?u.fileCommentStr:null,unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions,createFolders:e.createFolders});return o.zipComment.length&&(this.comment=o.zipComment),this}},{"./base64":11,"./utf8":30,"./utils":31,"./zipEntries":32}],21:[function(t,e,i){(function(t){"use strict";e.exports=function(e,i){return new t(e,i)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,t("buffer").Buffer)},{buffer:2}],22:[function(t,e,i){"use strict";function n(t){this.data=t,this.length=this.data.length,this.index=0,this.zero=0}var r=t("./uint8ArrayReader");n.prototype=new r,n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"./uint8ArrayReader":28}],23:[function(t,e,i){"use strict";var n=t("./support"),r=t("./utils"),s=t("./crc32"),a=t("./signature"),o=t("./defaults"),h=t("./base64"),u=t("./compressions"),l=t("./compressedObject"),c=t("./nodeBuffer"),f=t("./utf8"),d=t("./stringWriter"),p=t("./uint8ArrayWriter"),m=function(t){if(t._data instanceof l&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===r.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},y=function(t){var e=m(t),i=r.getTypeOf(e);return"string"===i?!t.options.binary&&n.nodebuffer?c(e,"utf-8"):t.asBinary():e},g=function(t){var e=m(this);return null===e||"undefined"==typeof e?"":(this.options.base64&&(e=h.decode(e)),e=t&&this.options.binary?A.utf8decode(e):r.transformTo("string",e),t||this.options.binary||(e=r.transformTo("string",A.utf8encode(e))),e)},v=function(t,e,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this.options=i,this._initialMetadata={dir:i.dir,date:i.date}};v.prototype={asText:function(){return g.call(this,!0)},asBinary:function(){return g.call(this,!1)},asNodeBuffer:function(){var t=y(this);return r.transformTo("nodebuffer",t)},asUint8Array:function(){var t=y(this);return r.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var b=function(t,e){var i,n="";for(i=0;e>i;i++)n+=String.fromCharCode(255&t),t>>>=8;return n},x=function(t){return t=t||{},t.base64!==!0||null!==t.binary&&void 0!==t.binary||(t.binary=!0),t=r.extend(t,o),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},w=function(t,e,i){var n,s=r.getTypeOf(e);if(i=x(i),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(t=M(t)),i.createFolders&&(n=_(t))&&E.call(this,n,!0),i.dir||null===e||"undefined"==typeof e)i.base64=!1,i.binary=!1,e=null,s=null;else if("string"===s)i.binary&&!i.base64&&i.optimizedBinaryString!==!0&&(e=r.string2binary(e));else{if(i.base64=!1,i.binary=!0,!(s||e instanceof l))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===s&&(e=r.transformTo("uint8array",e))}var a=new v(t,e,i);return this.files[t]=a,a},_=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},M=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},E=function(t,e){return e="undefined"!=typeof e?e:!1,t=M(t),this.files[t]||w.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},P=function(t,e,i){var n,a=new l;return t._data instanceof l?(a.uncompressedSize=t._data.uncompressedSize,a.crc32=t._data.crc32,0===a.uncompressedSize||t.dir?(e=u.STORE,a.compressedContent="",a.crc32=0):t._data.compressionMethod===e.magic?a.compressedContent=t._data.getCompressedContent():(n=t._data.getContent(),a.compressedContent=e.compress(r.transformTo(e.compressInputType,n),i))):(n=y(t),(!n||0===n.length||t.dir)&&(e=u.STORE,n=""),a.uncompressedSize=n.length,a.crc32=s(n),a.compressedContent=e.compress(r.transformTo(e.compressInputType,n),i)),a.compressedSize=a.compressedContent.length,a.compressionMethod=e.magic,a},S=function(t,e){var i=t;return t||(i=e?16893:33204),(65535&i)<<16},k=function(t,e){return 63&(t||0)},C=function(t,e,i,n,o,h){var u,l,c,d,p=(i.compressedContent,h!==f.utf8encode),m=r.transformTo("string",h(e.name)),y=r.transformTo("string",f.utf8encode(e.name)),g=e.comment||"",v=r.transformTo("string",h(g)),x=r.transformTo("string",f.utf8encode(g)),w=y.length!==e.name.length,_=x.length!==g.length,M=e.options,E="",P="",C="";c=e._initialMetadata.dir!==e.dir?e.dir:M.dir,d=e._initialMetadata.date!==e.date?e.date:M.date;var A=0,I=0;c&&(A|=16),"UNIX"===o?(I=798,A|=S(e.unixPermissions,c)):(I=20,A|=k(e.dosPermissions,c)),u=d.getHours(),u<<=6,u|=d.getMinutes(),u<<=5,u|=d.getSeconds()/2,l=d.getFullYear()-1980,l<<=4,l|=d.getMonth()+1,l<<=5,l|=d.getDate(),w&&(P=b(1,1)+b(s(m),4)+y,E+="up"+b(P.length,2)+P),_&&(C=b(1,1)+b(this.crc32(v),4)+x,E+="uc"+b(C.length,2)+C);var T="";T+="\n\x00",T+=p||!w&&!_?"\x00\x00":"\x00\b",T+=i.compressionMethod,T+=b(u,2),T+=b(l,2),T+=b(i.crc32,4),T+=b(i.compressedSize,4),T+=b(i.uncompressedSize,4),T+=b(m.length,2),T+=b(E.length,2);var L=a.LOCAL_FILE_HEADER+T+m+E,B=a.CENTRAL_FILE_HEADER+b(I,2)+T+b(v.length,2)+"\x00\x00\x00\x00"+b(A,4)+b(n,4)+m+E+v;return{fileRecord:L,dirRecord:B,compressedObject:i}},A={load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,i,n,s,a=[];for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],s=new v(n.name,n._data,r.extend(n.options)),i=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(i,s)&&a.push(s));return a},file:function(t,e,i){if(1===arguments.length){if(r.isRegExp(t)){var n=t;return this.filter(function(t,e){return!e.dir&&n.test(t)})}return this.filter(function(e,i){return!i.dir&&e===t})[0]||null}return t=this.root+t,w.call(this,t,e,i),this},folder:function(t){if(!t)return this;if(r.isRegExp(t))return this.filter(function(e,i){return i.dir&&t.test(e)});var e=this.root+t,i=E.call(this,e),n=this.clone();return n.root=i.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var i=this.filter(function(e,i){return i.name.slice(0,t.length)===t}),n=0;n<i.length;n++)delete this.files[i[n].name];return this},generate:function(t){t=r.extend(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode}),r.checkSupport(t.type),("darwin"===t.platform||"freebsd"===t.platform||"linux"===t.platform||"sunos"===t.platform)&&(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e,i,n=[],s=0,o=0,l=r.transformTo("string",t.encodeFileName(t.comment||this.comment||""));for(var c in this.files)if(this.files.hasOwnProperty(c)){var m=this.files[c],y=m.options.compression||t.compression.toUpperCase(),g=u[y];if(!g)throw new Error(y+" is not a valid compression method !");var v=m.options.compressionOptions||t.compressionOptions||{},x=P.call(this,m,g,v),w=C.call(this,c,m,x,s,t.platform,t.encodeFileName);s+=w.fileRecord.length+x.compressedSize,o+=w.dirRecord.length,n.push(w)}var _="";_=a.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+b(n.length,2)+b(n.length,2)+b(o,4)+b(s,4)+b(l.length,2)+l;var M=t.type.toLowerCase();for(e="uint8array"===M||"arraybuffer"===M||"blob"===M||"nodebuffer"===M?new p(s+o+_.length):new d(s+o+_.length),i=0;i<n.length;i++)e.append(n[i].fileRecord),e.append(n[i].compressedObject.compressedContent);for(i=0;i<n.length;i++)e.append(n[i].dirRecord);e.append(_);var E=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return r.transformTo(t.type.toLowerCase(),E);case"blob":return r.arrayBuffer2Blob(r.transformTo("arraybuffer",E),t.mimeType);case"base64":return t.base64?h.encode(E):E;default:return E}},crc32:function(t,e){return s(t,e)},utf8encode:function(t){return r.transformTo("string",f.utf8encode(t))},utf8decode:function(t){return f.utf8decode(t)}};e.exports=A},{"./base64":11,"./compressedObject":12,"./compressions":13,"./crc32":14,"./defaults":16,"./nodeBuffer":21,"./signature":24,"./stringWriter":26,"./support":27,"./uint8ArrayWriter":29,"./utf8":30,"./utils":31}],24:[function(t,e,i){"use strict";i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],25:[function(t,e,i){"use strict";function n(t,e){this.data=t,e||(this.data=s.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}var r=t("./dataReader"),s=t("./utils");n.prototype=new r,n.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"./dataReader":15,"./utils":31}],26:[function(t,e,i){"use strict";var n=t("./utils"),r=function(){this.data=[]};r.prototype={append:function(t){t=n.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=r},{"./utils":31}],27:[function(t,e,i){(function(t){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof t,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var e=new ArrayBuffer(0);try{i.blob=0===new Blob([e],{type:"application/zip"}).size}catch(n){try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,s=new r;s.append(e),i.blob=0===s.getBlob("application/zip").size}catch(n){i.blob=!1}}}}).call(this,t("buffer").Buffer)},{buffer:2}],28:[function(t,e,i){"use strict";function n(t){t&&(this.data=t,this.length=this.data.length,this.index=0,this.zero=0)}var r=t("./arrayReader");n.prototype=new r,n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{"./arrayReader":10}],29:[function(t,e,i){"use strict";var n=t("./utils"),r=function(t){this.data=new Uint8Array(t),this.index=0};r.prototype={append:function(t){0!==t.length&&(t=n.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=r},{"./utils":31}],30:[function(t,e,i){"use strict";for(var n=t("./utils"),r=t("./support"),s=t("./nodeBuffer"),a=new Array(256),o=0;256>o;o++)a[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;a[254]=a[254]=1;var h=function(t){var e,i,n,s,a,o=t.length,h=0;for(s=0;o>s;s++)i=t.charCodeAt(s),55296===(64512&i)&&o>s+1&&(n=t.charCodeAt(s+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),h+=128>i?1:2048>i?2:65536>i?3:4;for(e=r.uint8array?new Uint8Array(h):new Array(h),a=0,s=0;h>a;s++)i=t.charCodeAt(s),55296===(64512&i)&&o>s+1&&(n=t.charCodeAt(s+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),128>i?e[a++]=i:2048>i?(e[a++]=192|i>>>6,e[a++]=128|63&i):65536>i?(e[a++]=224|i>>>12,e[a++]=128|i>>>6&63,e[a++]=128|63&i):(e[a++]=240|i>>>18,e[a++]=128|i>>>12&63,e[a++]=128|i>>>6&63,e[a++]=128|63&i);return e},u=function(t,e){var i;for(e=e||t.length,e>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return 0>i?e:0===i?e:i+a[t[i]]>e?i:e},l=function(t){var e,i,r,s,o=t.length,h=new Array(2*o);for(i=0,e=0;o>e;)if(r=t[e++],128>r)h[i++]=r;else if(s=a[r],s>4)h[i++]=65533,e+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&o>e;)r=r<<6|63&t[e++],s--;s>1?h[i++]=65533:65536>r?h[i++]=r:(r-=65536,h[i++]=55296|r>>10&1023,h[i++]=56320|1023&r)}return h.length!==i&&(h.subarray?h=h.subarray(0,i):h.length=i),n.applyFromCharCode(h)};i.utf8encode=function(t){return r.nodebuffer?s(t,"utf-8"):h(t)},i.utf8decode=function(t){if(r.nodebuffer)return n.transformTo("nodebuffer",t).toString("utf-8");t=n.transformTo(r.uint8array?"uint8array":"array",t);for(var e=[],i=0,s=t.length,a=65536;s>i;){var o=u(t,Math.min(i+a,s));r.uint8array?e.push(l(t.subarray(i,o))):e.push(l(t.slice(i,o))),i=o}return e.join("")}},{"./nodeBuffer":21,"./support":27,"./utils":31}],31:[function(t,e,i){"use strict";function n(t){return t}function r(t,e){for(var i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e}function s(t){var e=65536,n=[],r=t.length,s=i.getTypeOf(t),a=0,o=!0;try{switch(s){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,u(0))}}catch(h){o=!1}if(!o){for(var l="",c=0;c<t.length;c++)l+=String.fromCharCode(t[c]);return l}for(;r>a&&e>1;)try{"array"===s||"nodebuffer"===s?n.push(String.fromCharCode.apply(null,t.slice(a,Math.min(a+e,r)))):n.push(String.fromCharCode.apply(null,t.subarray(a,Math.min(a+e,r)))),a+=e}catch(h){e=Math.floor(e/2)}return n.join("")}function a(t,e){for(var i=0;i<t.length;i++)e[i]=t[i];return e}var o=t("./support"),h=t("./compressions"),u=t("./nodeBuffer");i.string2binary=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i));return e},i.arrayBuffer2Blob=function(t,e){i.checkSupport("blob"),e=e||"application/zip";try{return new Blob([t],{type:e})}catch(n){try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,s=new r;return s.append(t),s.getBlob(e)}catch(n){throw new Error("Bug : can't construct the Blob.")}}},i.applyFromCharCode=s;var l={};l.string={string:n,array:function(t){return r(t,new Array(t.length))},arraybuffer:function(t){return l.string.uint8array(t).buffer},uint8array:function(t){return r(t,new Uint8Array(t.length))},nodebuffer:function(t){return r(t,u(t.length))}},l.array={string:s,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return u(t)}},l.arraybuffer={string:function(t){return s(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return u(new Uint8Array(t))}},l.uint8array={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return u(t)}},l.nodebuffer={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return l.nodebuffer.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:n},i.transformTo=function(t,e){if(e||(e=""),!t)return e;i.checkSupport(t);var n=i.getTypeOf(e),r=l[n][t](e);return r},i.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":o.nodebuffer&&u.test(t)?"nodebuffer":o.uint8array&&t instanceof Uint8Array?"uint8array":o.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(t){var e=o[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this browser")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(t){var e,i,n="";for(i=0;i<(t||"").length;i++)e=t.charCodeAt(i),n+="\\x"+(16>e?"0":"")+e.toString(16).toUpperCase();return n},i.findCompression=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null},i.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},i.extend=function(){var t,e,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&"undefined"==typeof i[e]&&(i[e]=arguments[t][e]);return i}},{"./compressions":13,"./nodeBuffer":21,"./support":27}],32:[function(t,e,i){"use strict";function n(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var r=t("./stringReader"),s=t("./nodeBufferReader"),a=t("./uint8ArrayReader"),o=t("./arrayReader"),h=t("./utils"),u=t("./signature"),l=t("./zipEntry"),c=t("./support");t("./object");n.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+h.pretty(e)+", expected "+h.pretty(t)+")")},isSignature:function(t,e){var i=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4),r=n===e;return this.reader.setIndex(i),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=c.uint8array?"uint8array":"array",i=h.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,n=this.zip64EndOfCentralSize-44,r=0;n>r;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===u.CENTRAL_FILE_HEADER;)t=new l({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(0>t){var e=!this.isSignature(0,u.LOCAL_FILE_HEADER);throw e?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(t);var i=t;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===h.MAX_VALUE_16BITS||this.diskWithCentralDirStart===h.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===h.MAX_VALUE_16BITS||this.centralDirRecords===h.MAX_VALUE_16BITS||this.centralDirSize===h.MAX_VALUE_32BITS||this.centralDirOffset===h.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>t)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=i-n;if(r>0)this.isSignature(i,u.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(0>r)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){var e=h.getTypeOf(t);if(h.checkSupport(e),"string"!==e||c.uint8array)if("nodebuffer"===e)this.reader=new s(t);else if(c.uint8array)this.reader=new a(h.transformTo("uint8array",t));else{if(!c.array)throw new Error("Unexpected error: unsupported type '"+e+"'");this.reader=new o(h.transformTo("array",t))}else this.reader=new r(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=n},{"./arrayReader":10,"./nodeBufferReader":22,"./object":23,"./signature":24,"./stringReader":25,"./support":27,"./uint8ArrayReader":28,"./utils":31,"./zipEntry":33}],33:[function(t,e,i){"use strict";function n(t,e){this.options=t,this.loadOptions=e}var r=t("./stringReader"),s=t("./utils"),a=t("./compressedObject"),o=t("./object"),h=t("./support"),u=0,l=3;n.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(t,e,i){return function(){var n=t.index;t.setIndex(e);var r=t.readData(i);return t.setIndex(n),r}},prepareContent:function(t,e,i,n,r){return function(){var t=s.transformTo(n.uncompressInputType,this.getCompressedContent()),e=n.uncompress(t);if(e.length!==r)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,i;if(t.skip(22),this.fileNameLength=t.readInt(2),i=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(i),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(e=s.findCompression(this.compressionMethod),null===e)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=s.transformTo("string",this.decompressed.getContent()),o.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readData(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=16&this.externalFileAttributes?!0:!1,t===u&&(this.dosPermissions=63&this.externalFileAttributes),t===l&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=new r(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,i,n,r=t.index;for(this.extraFields=this.extraFields||{};t.index<r+this.extraFieldsLength;)e=t.readInt(2),i=t.readInt(2),n=t.readString(i),this.extraFields[e]={id:e,length:i,value:n}},handleUTF8:function(){var t=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var i=s.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var r=s.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new r(t.value);return 1!==e.readInt(1)?null:o.crc32(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new r(t.value);return 1!==e.readInt(1)?null:o.crc32(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readString(t.length-5))}return null}},e.exports=n},{"./compressedObject":12,"./object":23,"./stringReader":25,"./support":27,"./utils":31}],34:[function(t,e,i){"use strict";var n=t("./lib/utils/common").assign,r=t("./lib/deflate"),s=t("./lib/inflate"),a=t("./lib/zlib/constants"),o={};n(o,r,s,a),e.exports=o},{"./lib/deflate":35,"./lib/inflate":36,"./lib/utils/common":37,"./lib/zlib/constants":40}],35:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=h.assign({level:v,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==m)throw new Error(l[i]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?u.string2buf(e.dictionary):"[object ArrayBuffer]"===f.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,i=o.deflateSetDictionary(this.strm,r),i!==m)throw new Error(l[i]);this._dict_set=!0}}function r(t,e){var i=new n(e);if(i.push(t,!0),i.err)throw i.msg||l[i.err];return i.result}function s(t,e){return e=e||{},e.raw=!0,r(t,e)}function a(t,e){return e=e||{},e.gzip=!0,r(t,e)}var o=t("./zlib/deflate"),h=t("./utils/common"),u=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),f=Object.prototype.toString,d=0,p=4,m=0,y=1,g=2,v=-1,b=0,x=8;n.prototype.push=function(t,e){var i,n,r=this.strm,s=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?p:d,"string"==typeof t?r.input=u.string2buf(t):"[object ArrayBuffer]"===f.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new h.Buf8(s),r.next_out=0,r.avail_out=s),i=o.deflate(r,n),i!==y&&i!==m)return this.onEnd(i),this.ended=!0,!1;(0===r.avail_out||0===r.avail_in&&(n===p||n===g))&&("string"===this.options.to?this.onData(u.buf2binstring(h.shrinkBuf(r.output,r.next_out))):this.onData(h.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&i!==y);return n===p?(i=o.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===m):n===g?(this.onEnd(m),r.avail_out=0,!0):!0},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===m&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=n,i.deflate=r,i.deflateRaw=s,i.gzip=a},{"./utils/common":37,"./utils/strings":38,"./zlib/deflate":42,"./zlib/messages":47,
"./zlib/zstream":49}],36:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=a.inflateInit2(this.strm,e.windowBits);if(i!==u.Z_OK)throw new Error(l[i]);this.header=new f,a.inflateGetHeader(this.strm,this.header)}function r(t,e){var i=new n(e);if(i.push(t,!0),i.err)throw i.msg||l[i.err];return i.result}function s(t,e){return e=e||{},e.raw=!0,r(t,e)}var a=t("./zlib/inflate"),o=t("./utils/common"),h=t("./utils/strings"),u=t("./zlib/constants"),l=t("./zlib/messages"),c=t("./zlib/zstream"),f=t("./zlib/gzheader"),d=Object.prototype.toString;n.prototype.push=function(t,e){var i,n,r,s,l,c,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,y=!1;if(this.ended)return!1;n=e===~~e?e:e===!0?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof t?f.input=h.binstring2buf(t):"[object ArrayBuffer]"===d.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new o.Buf8(p),f.next_out=0,f.avail_out=p),i=a.inflate(f,u.Z_NO_FLUSH),i===u.Z_NEED_DICT&&m&&(c="string"==typeof m?h.string2buf(m):"[object ArrayBuffer]"===d.call(m)?new Uint8Array(m):m,i=a.inflateSetDictionary(this.strm,c)),i===u.Z_BUF_ERROR&&y===!0&&(i=u.Z_OK,y=!1),i!==u.Z_STREAM_END&&i!==u.Z_OK)return this.onEnd(i),this.ended=!0,!1;f.next_out&&(0===f.avail_out||i===u.Z_STREAM_END||0===f.avail_in&&(n===u.Z_FINISH||n===u.Z_SYNC_FLUSH))&&("string"===this.options.to?(r=h.utf8border(f.output,f.next_out),s=f.next_out-r,l=h.buf2string(f.output,r),f.next_out=s,f.avail_out=p-s,s&&o.arraySet(f.output,f.output,r,s,0),this.onData(l)):this.onData(o.shrinkBuf(f.output,f.next_out))),0===f.avail_in&&0===f.avail_out&&(y=!0)}while((f.avail_in>0||0===f.avail_out)&&i!==u.Z_STREAM_END);return i===u.Z_STREAM_END&&(n=u.Z_FINISH),n===u.Z_FINISH?(i=a.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===u.Z_OK):n===u.Z_SYNC_FLUSH?(this.onEnd(u.Z_OK),f.avail_out=0,!0):!0},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=n,i.inflate=r,i.inflateRaw=s,i.ungzip=r},{"./utils/common":37,"./utils/strings":38,"./zlib/constants":40,"./zlib/gzheader":43,"./zlib/inflate":45,"./zlib/messages":47,"./zlib/zstream":49}],37:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)return void t.set(e.subarray(i,i+n),r);for(var s=0;n>s;s++)t[r+s]=e[i+s]},flattenChunks:function(t){var e,i,n,r,s,a;for(n=0,e=0,i=t.length;i>e;e++)n+=t[e].length;for(a=new Uint8Array(n),r=0,e=0,i=t.length;i>e;e++)s=t[e],a.set(s,r),r+=s.length;return a}},s={arraySet:function(t,e,i,n,r){for(var s=0;n>s;s++)t[r+s]=e[i+s]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(n)},{}],38:[function(t,e,i){"use strict";function n(t,e){if(65537>e&&(t.subarray&&a||!t.subarray&&s))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var i="",n=0;e>n;n++)i+=String.fromCharCode(t[n]);return i}var r=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(o){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(o){a=!1}for(var h=new r.Buf8(256),u=0;256>u;u++)h[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;h[254]=h[254]=1,i.string2buf=function(t){var e,i,n,s,a,o=t.length,h=0;for(s=0;o>s;s++)i=t.charCodeAt(s),55296===(64512&i)&&o>s+1&&(n=t.charCodeAt(s+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),h+=128>i?1:2048>i?2:65536>i?3:4;for(e=new r.Buf8(h),a=0,s=0;h>a;s++)i=t.charCodeAt(s),55296===(64512&i)&&o>s+1&&(n=t.charCodeAt(s+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),128>i?e[a++]=i:2048>i?(e[a++]=192|i>>>6,e[a++]=128|63&i):65536>i?(e[a++]=224|i>>>12,e[a++]=128|i>>>6&63,e[a++]=128|63&i):(e[a++]=240|i>>>18,e[a++]=128|i>>>12&63,e[a++]=128|i>>>6&63,e[a++]=128|63&i);return e},i.buf2binstring=function(t){return n(t,t.length)},i.binstring2buf=function(t){for(var e=new r.Buf8(t.length),i=0,n=e.length;n>i;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,r,s,a,o=e||t.length,u=new Array(2*o);for(r=0,i=0;o>i;)if(s=t[i++],128>s)u[r++]=s;else if(a=h[s],a>4)u[r++]=65533,i+=a-1;else{for(s&=2===a?31:3===a?15:7;a>1&&o>i;)s=s<<6|63&t[i++],a--;a>1?u[r++]=65533:65536>s?u[r++]=s:(s-=65536,u[r++]=55296|s>>10&1023,u[r++]=56320|1023&s)}return n(u,r)},i.utf8border=function(t,e){var i;for(e=e||t.length,e>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return 0>i?e:0===i?e:i+h[t[i]]>e?i:e}},{"./common":37}],39:[function(t,e,i){"use strict";function n(t,e,i,n){for(var r=65535&t|0,s=t>>>16&65535|0,a=0;0!==i;){a=i>2e3?2e3:i,i-=a;do r=r+e[n++]|0,s=s+r|0;while(--a);r%=65521,s%=65521}return r|s<<16|0}e.exports=n},{}],40:[function(t,e,i){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],41:[function(t,e,i){"use strict";function n(){for(var t,e=[],i=0;256>i;i++){t=i;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}function r(t,e,i,n){var r=s,a=n+i;t^=-1;for(var o=n;a>o;o++)t=t>>>8^r[255&(t^e[o])];return-1^t}var s=n();e.exports=r},{}],42:[function(t,e,i){"use strict";function n(t,e){return t.msg=j[e],e}function r(t){return(t<<1)-(t>4?9:0)}function s(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(I.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function o(t,e){T._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function h(t,e){t.pending_buf[t.pending++]=e}function u(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function l(t,e,i,n){var r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,I.arraySet(e,t.input,t.next_in,r,i),1===t.state.wrap?t.adler=L(t.adler,e,r,i):2===t.state.wrap&&(t.adler=B(t.adler,e,r,i)),t.next_in+=r,t.total_in+=r,r)}function c(t,e){var i,n,r=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,u=t.window,l=t.w_mask,c=t.prev,f=t.strstart+lt,d=u[s+a-1],p=u[s+a];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do if(i=e,u[i+a]===p&&u[i+a-1]===d&&u[i]===u[s]&&u[++i]===u[s+1]){s+=2,i++;do;while(u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&f>s);if(n=lt-(f-s),s=f-lt,n>a){if(t.match_start=e,a=n,n>=o)break;d=u[s+a-1],p=u[s+a]}}while((e=c[e&l])>h&&0!==--r);return a<=t.lookahead?a:t.lookahead}function f(t){var e,i,n,r,s,a=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-ct)){I.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,i=t.hash_size,e=i;do n=t.head[--e],t.head[e]=n>=a?n-a:0;while(--i);i=a,e=i;do n=t.prev[--e],t.prev[e]=n>=a?n-a:0;while(--i);r+=a}if(0===t.strm.avail_in)break;if(i=l(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=i,t.lookahead+t.insert>=ut)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+ut-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<ut)););}while(t.lookahead<ct&&0!==t.strm.avail_in)}function d(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(f(t),0===t.lookahead&&e===N)return xt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,o(t,!1),0===t.strm.avail_out))return xt;if(t.strstart-t.block_start>=t.w_size-ct&&(o(t,!1),0===t.strm.avail_out))return xt}return t.insert=0,e===O?(o(t,!0),0===t.strm.avail_out?_t:Mt):t.strstart>t.block_start&&(o(t,!1),0===t.strm.avail_out)?xt:xt}function p(t,e){for(var i,n;;){if(t.lookahead<ct){if(f(t),t.lookahead<ct&&e===N)return xt;if(0===t.lookahead)break}if(i=0,t.lookahead>=ut&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ut-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-ct&&(t.match_length=c(t,i)),t.match_length>=ut)if(n=T._tr_tally(t,t.strstart-t.match_start,t.match_length-ut),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ut){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ut-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=T._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(o(t,!1),0===t.strm.avail_out))return xt}return t.insert=t.strstart<ut-1?t.strstart:ut-1,e===O?(o(t,!0),0===t.strm.avail_out?_t:Mt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?xt:wt}function m(t,e){for(var i,n,r;;){if(t.lookahead<ct){if(f(t),t.lookahead<ct&&e===N)return xt;if(0===t.lookahead)break}if(i=0,t.lookahead>=ut&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ut-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ut-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-ct&&(t.match_length=c(t,i),t.match_length<=5&&(t.strategy===Y||t.match_length===ut&&t.strstart-t.match_start>4096)&&(t.match_length=ut-1)),t.prev_length>=ut&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-ut,n=T._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ut),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ut-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=ut-1,t.strstart++,n&&(o(t,!1),0===t.strm.avail_out))return xt}else if(t.match_available){if(n=T._tr_tally(t,0,t.window[t.strstart-1]),n&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return xt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=T._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ut-1?t.strstart:ut-1,e===O?(o(t,!0),0===t.strm.avail_out?_t:Mt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?xt:wt}function y(t,e){for(var i,n,r,s,a=t.window;;){if(t.lookahead<=lt){if(f(t),t.lookahead<=lt&&e===N)return xt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ut&&t.strstart>0&&(r=t.strstart-1,n=a[r],n===a[++r]&&n===a[++r]&&n===a[++r])){s=t.strstart+lt;do;while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&s>r);t.match_length=lt-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ut?(i=T._tr_tally(t,1,t.match_length-ut),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=T._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(o(t,!1),0===t.strm.avail_out))return xt}return t.insert=0,e===O?(o(t,!0),0===t.strm.avail_out?_t:Mt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?xt:wt}function g(t,e){for(var i;;){if(0===t.lookahead&&(f(t),0===t.lookahead)){if(e===N)return xt;break}if(t.match_length=0,i=T._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(o(t,!1),0===t.strm.avail_out))return xt}return t.insert=0,e===O?(o(t,!0),0===t.strm.avail_out?_t:Mt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?xt:wt}function v(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function b(t){t.window_size=2*t.w_size,s(t.head),t.max_lazy_match=A[t.level].max_lazy,t.good_match=A[t.level].good_length,t.nice_match=A[t.level].nice_length,t.max_chain_length=A[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ut-1,t.match_available=0,t.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new I.Buf16(2*ot),this.dyn_dtree=new I.Buf16(2*(2*st+1)),this.bl_tree=new I.Buf16(2*(2*at+1)),s(this.dyn_ltree),s(this.dyn_dtree),s(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new I.Buf16(ht+1),this.heap=new I.Buf16(2*rt+1),s(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new I.Buf16(2*rt+1),s(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=$,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?dt:vt,t.adler=2===e.wrap?0:1,e.last_flush=N,T._tr_init(e),F):n(t,G)}function _(t){var e=w(t);return e===F&&b(t.state),e}function M(t,e){return t&&t.state?2!==t.state.wrap?G:(t.state.gzhead=e,F):G}function E(t,e,i,r,s,a){if(!t)return G;var o=1;if(e===X&&(e=6),0>r?(o=0,r=-r):r>15&&(o=2,r-=16),1>s||s>K||i!==Q||8>r||r>15||0>e||e>9||0>a||a>Z)return n(t,G);8===r&&(r=9);var h=new x;return t.state=h,h.strm=t,h.wrap=o,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+ut-1)/ut),h.window=new I.Buf8(2*h.w_size),h.head=new I.Buf16(h.hash_size),h.prev=new I.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new I.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=a,h.method=i,_(t)}function P(t,e){return E(t,e,Q,tt,et,J)}function S(t,e){var i,o,l,c;if(!t||!t.state||e>D||0>e)return t?n(t,G):G;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===bt&&e!==O)return n(t,0===t.avail_out?q:G);if(o.strm=t,i=o.last_flush,o.last_flush=e,o.status===dt)if(2===o.wrap)t.adler=0,h(o,31),h(o,139),h(o,8),o.gzhead?(h(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),h(o,255&o.gzhead.time),h(o,o.gzhead.time>>8&255),h(o,o.gzhead.time>>16&255),h(o,o.gzhead.time>>24&255),h(o,9===o.level?2:o.strategy>=H||o.level<2?4:0),h(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(h(o,255&o.gzhead.extra.length),h(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=B(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=pt):(h(o,0),h(o,0),h(o,0),h(o,0),h(o,0),h(o,9===o.level?2:o.strategy>=H||o.level<2?4:0),h(o,Et),o.status=vt);else{var f=Q+(o.w_bits-8<<4)<<8,d=-1;d=o.strategy>=H||o.level<2?0:o.level<6?1:6===o.level?2:3,f|=d<<6,0!==o.strstart&&(f|=ft),f+=31-f%31,o.status=vt,u(o,f),0!==o.strstart&&(u(o,t.adler>>>16),u(o,65535&t.adler)),t.adler=1}if(o.status===pt)if(o.gzhead.extra){for(l=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>l&&(t.adler=B(t.adler,o.pending_buf,o.pending-l,l)),a(t),l=o.pending,o.pending!==o.pending_buf_size));)h(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>l&&(t.adler=B(t.adler,o.pending_buf,o.pending-l,l)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=mt)}else o.status=mt;if(o.status===mt)if(o.gzhead.name){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(t.adler=B(t.adler,o.pending_buf,o.pending-l,l)),a(t),l=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,h(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>l&&(t.adler=B(t.adler,o.pending_buf,o.pending-l,l)),0===c&&(o.gzindex=0,o.status=yt)}else o.status=yt;if(o.status===yt)if(o.gzhead.comment){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(t.adler=B(t.adler,o.pending_buf,o.pending-l,l)),a(t),l=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,h(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>l&&(t.adler=B(t.adler,o.pending_buf,o.pending-l,l)),0===c&&(o.status=gt)}else o.status=gt;if(o.status===gt&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&a(t),o.pending+2<=o.pending_buf_size&&(h(o,255&t.adler),h(o,t.adler>>8&255),t.adler=0,o.status=vt)):o.status=vt),0!==o.pending){if(a(t),0===t.avail_out)return o.last_flush=-1,F}else if(0===t.avail_in&&r(e)<=r(i)&&e!==O)return n(t,q);if(o.status===bt&&0!==t.avail_in)return n(t,q);if(0!==t.avail_in||0!==o.lookahead||e!==N&&o.status!==bt){var p=o.strategy===H?g(o,e):o.strategy===W?y(o,e):A[o.level].func(o,e);if((p===_t||p===Mt)&&(o.status=bt),p===xt||p===_t)return 0===t.avail_out&&(o.last_flush=-1),F;if(p===wt&&(e===R?T._tr_align(o):e!==D&&(T._tr_stored_block(o,0,0,!1),e===z&&(s(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),a(t),0===t.avail_out))return o.last_flush=-1,F}return e!==O?F:o.wrap<=0?U:(2===o.wrap?(h(o,255&t.adler),h(o,t.adler>>8&255),h(o,t.adler>>16&255),h(o,t.adler>>24&255),h(o,255&t.total_in),h(o,t.total_in>>8&255),h(o,t.total_in>>16&255),h(o,t.total_in>>24&255)):(u(o,t.adler>>>16),u(o,65535&t.adler)),a(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?F:U)}function k(t){var e;return t&&t.state?(e=t.state.status,e!==dt&&e!==pt&&e!==mt&&e!==yt&&e!==gt&&e!==vt&&e!==bt?n(t,G):(t.state=null,e===vt?n(t,V):F)):G}function C(t,e){var i,n,r,a,o,h,u,l,c=e.length;if(!t||!t.state)return G;if(i=t.state,a=i.wrap,2===a||1===a&&i.status!==dt||i.lookahead)return G;for(1===a&&(t.adler=L(t.adler,e,c,0)),i.wrap=0,c>=i.w_size&&(0===a&&(s(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new I.Buf8(i.w_size),I.arraySet(l,e,c-i.w_size,i.w_size,0),e=l,c=i.w_size),o=t.avail_in,h=t.next_in,u=t.input,t.avail_in=c,t.next_in=0,t.input=e,f(i);i.lookahead>=ut;){n=i.strstart,r=i.lookahead-(ut-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+ut-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++;while(--r);i.strstart=n,i.lookahead=ut-1,f(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=ut-1,i.match_available=0,t.next_in=h,t.input=u,t.avail_in=o,i.wrap=a,F}var A,I=t("../utils/common"),T=t("./trees"),L=t("./adler32"),B=t("./crc32"),j=t("./messages"),N=0,R=1,z=3,O=4,D=5,F=0,U=1,G=-2,V=-3,q=-5,X=-1,Y=1,H=2,W=3,Z=4,J=0,$=2,Q=8,K=9,tt=15,et=8,it=29,nt=256,rt=nt+1+it,st=30,at=19,ot=2*rt+1,ht=15,ut=3,lt=258,ct=lt+ut+1,ft=32,dt=42,pt=69,mt=73,yt=91,gt=103,vt=113,bt=666,xt=1,wt=2,_t=3,Mt=4,Et=3;A=[new v(0,0,0,0,d),new v(4,4,8,4,p),new v(4,5,16,8,p),new v(4,6,32,32,p),new v(4,4,16,16,m),new v(8,16,32,32,m),new v(8,16,128,128,m),new v(8,32,128,256,m),new v(32,128,258,1024,m),new v(32,258,258,4096,m)],i.deflateInit=P,i.deflateInit2=E,i.deflateReset=_,i.deflateResetKeep=w,i.deflateSetHeader=M,i.deflate=S,i.deflateEnd=k,i.deflateSetDictionary=C,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":37,"./adler32":39,"./crc32":41,"./messages":47,"./trees":48}],43:[function(t,e,i){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=n},{}],44:[function(t,e,i){"use strict";var n=30,r=12;e.exports=function(t,e){var i,s,a,o,h,u,l,c,f,d,p,m,y,g,v,b,x,w,_,M,E,P,S,k,C;i=t.state,s=t.next_in,k=t.input,a=s+(t.avail_in-5),o=t.next_out,C=t.output,h=o-(e-t.avail_out),u=o+(t.avail_out-257),l=i.dmax,c=i.wsize,f=i.whave,d=i.wnext,p=i.window,m=i.hold,y=i.bits,g=i.lencode,v=i.distcode,b=(1<<i.lenbits)-1,x=(1<<i.distbits)-1;t:do{15>y&&(m+=k[s++]<<y,y+=8,m+=k[s++]<<y,y+=8),w=g[m&b];e:for(;;){if(_=w>>>24,m>>>=_,y-=_,_=w>>>16&255,0===_)C[o++]=65535&w;else{if(!(16&_)){if(0===(64&_)){w=g[(65535&w)+(m&(1<<_)-1)];continue e}if(32&_){i.mode=r;break t}t.msg="invalid literal/length code",i.mode=n;break t}M=65535&w,_&=15,_&&(_>y&&(m+=k[s++]<<y,y+=8),M+=m&(1<<_)-1,m>>>=_,y-=_),15>y&&(m+=k[s++]<<y,y+=8,m+=k[s++]<<y,y+=8),w=v[m&x];i:for(;;){if(_=w>>>24,m>>>=_,y-=_,_=w>>>16&255,!(16&_)){if(0===(64&_)){w=v[(65535&w)+(m&(1<<_)-1)];continue i}t.msg="invalid distance code",i.mode=n;break t}if(E=65535&w,_&=15,_>y&&(m+=k[s++]<<y,y+=8,_>y&&(m+=k[s++]<<y,y+=8)),E+=m&(1<<_)-1,E>l){t.msg="invalid distance too far back",i.mode=n;break t}if(m>>>=_,y-=_,_=o-h,E>_){if(_=E-_,_>f&&i.sane){t.msg="invalid distance too far back",i.mode=n;break t}if(P=0,S=p,0===d){if(P+=c-_,M>_){M-=_;do C[o++]=p[P++];while(--_);P=o-E,S=C}}else if(_>d){if(P+=c+d-_,_-=d,M>_){M-=_;do C[o++]=p[P++];while(--_);if(P=0,M>d){_=d,M-=_;do C[o++]=p[P++];while(--_);P=o-E,S=C}}}else if(P+=d-_,M>_){M-=_;do C[o++]=p[P++];while(--_);P=o-E,S=C}for(;M>2;)C[o++]=S[P++],C[o++]=S[P++],C[o++]=S[P++],M-=3;M&&(C[o++]=S[P++],M>1&&(C[o++]=S[P++]))}else{P=o-E;do C[o++]=C[P++],C[o++]=C[P++],C[o++]=C[P++],M-=3;while(M>2);M&&(C[o++]=C[P++],M>1&&(C[o++]=C[P++]))}break}}break}}while(a>s&&u>o);M=y>>3,s-=M,y-=M<<3,m&=(1<<y)-1,t.next_in=s,t.next_out=o,t.avail_in=a>s?5+(a-s):5-(s-a),t.avail_out=u>o?257+(u-o):257-(o-u),i.hold=m,i.bits=y}},{}],45:[function(t,e,i){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=z,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new v.Buf32(mt),e.distcode=e.distdyn=new v.Buf32(yt),e.sane=1,e.back=-1,A):L}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,s(t)):L}function o(t,e){var i,n;return t&&t.state?(n=t.state,0>e?(i=0,e=-e):(i=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?L:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,a(t))):L}function h(t,e){var i,n;return t?(n=new r,t.state=n,n.window=null,i=o(t,e),i!==A&&(t.state=null),i):L}function u(t){return h(t,vt)}function l(t){if(bt){var e;for(y=new v.Buf32(512),g=new v.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(_(E,t.lens,0,288,y,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;_(P,t.lens,0,32,g,0,t.work,{bits:5}),bt=!1}t.lencode=y,t.lenbits=9,t.distcode=g,t.distbits=5}function c(t,e,i,n){var r,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new v.Buf8(s.wsize)),n>=s.wsize?(v.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>n&&(r=n),v.arraySet(s.window,e,i-n,r,s.wnext),n-=r,n?(v.arraySet(s.window,e,i-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}function f(t,e){var i,r,s,a,o,h,u,f,d,p,m,y,g,mt,yt,gt,vt,bt,xt,wt,_t,Mt,Et,Pt,St=0,kt=new v.Buf8(4),Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return L;i=t.state,i.mode===W&&(i.mode=Z),o=t.next_out,s=t.output,u=t.avail_out,a=t.next_in,r=t.input,h=t.avail_in,f=i.hold,d=i.bits,p=h,m=u,Mt=A;t:for(;;)switch(i.mode){case z:if(0===i.wrap){i.mode=Z;break}for(;16>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(2&i.wrap&&35615===f){i.check=0,kt[0]=255&f,kt[1]=f>>>8&255,i.check=x(i.check,kt,2,0),f=0,d=0,i.mode=O;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&f)<<8)+(f>>8))%31){t.msg="incorrect header check",i.mode=ft;break}if((15&f)!==R){t.msg="unknown compression method",i.mode=ft;break}if(f>>>=4,d-=4,_t=(15&f)+8,0===i.wbits)i.wbits=_t;else if(_t>i.wbits){t.msg="invalid window size",i.mode=ft;break}i.dmax=1<<_t,t.adler=i.check=1,i.mode=512&f?Y:W,f=0,d=0;break;case O:for(;16>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(i.flags=f,(255&i.flags)!==R){t.msg="unknown compression method",i.mode=ft;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=ft;break}i.head&&(i.head.text=f>>8&1),512&i.flags&&(kt[0]=255&f,kt[1]=f>>>8&255,i.check=x(i.check,kt,2,0)),f=0,d=0,i.mode=D;case D:for(;32>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}i.head&&(i.head.time=f),512&i.flags&&(kt[0]=255&f,kt[1]=f>>>8&255,kt[2]=f>>>16&255,kt[3]=f>>>24&255,i.check=x(i.check,kt,4,0)),f=0,d=0,i.mode=F;case F:for(;16>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}i.head&&(i.head.xflags=255&f,i.head.os=f>>8),512&i.flags&&(kt[0]=255&f,kt[1]=f>>>8&255,i.check=x(i.check,kt,2,0)),f=0,d=0,i.mode=U;case U:if(1024&i.flags){for(;16>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}i.length=f,i.head&&(i.head.extra_len=f),512&i.flags&&(kt[0]=255&f,kt[1]=f>>>8&255,i.check=x(i.check,kt,2,0)),f=0,d=0}else i.head&&(i.head.extra=null);i.mode=G;case G:if(1024&i.flags&&(y=i.length,y>h&&(y=h),y&&(i.head&&(_t=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),v.arraySet(i.head.extra,r,a,y,_t)),512&i.flags&&(i.check=x(i.check,r,y,a)),h-=y,a+=y,i.length-=y),i.length))break t;i.length=0,i.mode=V;case V:if(2048&i.flags){if(0===h)break t;y=0;do _t=r[a+y++],i.head&&_t&&i.length<65536&&(i.head.name+=String.fromCharCode(_t));while(_t&&h>y);if(512&i.flags&&(i.check=x(i.check,r,y,a)),h-=y,a+=y,_t)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=q;case q:if(4096&i.flags){if(0===h)break t;y=0;do _t=r[a+y++],i.head&&_t&&i.length<65536&&(i.head.comment+=String.fromCharCode(_t));while(_t&&h>y);if(512&i.flags&&(i.check=x(i.check,r,y,a)),h-=y,a+=y,_t)break t}else i.head&&(i.head.comment=null);i.mode=X;case X:if(512&i.flags){for(;16>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(f!==(65535&i.check)){t.msg="header crc mismatch",i.mode=ft;break}f=0,d=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=W;break;case Y:for(;32>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}t.adler=i.check=n(f),f=0,d=0,i.mode=H;case H:if(0===i.havedict)return t.next_out=o,t.avail_out=u,t.next_in=a,t.avail_in=h,i.hold=f,i.bits=d,T;t.adler=i.check=1,i.mode=W;case W:if(e===k||e===C)break t;case Z:if(i.last){f>>>=7&d,d-=7&d,i.mode=ut;break}for(;3>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}switch(i.last=1&f,f>>>=1,d-=1,3&f){case 0:i.mode=J;break;case 1:if(l(i),i.mode=it,e===C){f>>>=2,d-=2;break t}break;case 2:i.mode=K;break;case 3:t.msg="invalid block type",i.mode=ft}f>>>=2,d-=2;break;case J:for(f>>>=7&d,d-=7&d;32>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if((65535&f)!==(f>>>16^65535)){t.msg="invalid stored block lengths",i.mode=ft;break}if(i.length=65535&f,f=0,d=0,i.mode=$,e===C)break t;case $:i.mode=Q;case Q:if(y=i.length){if(y>h&&(y=h),y>u&&(y=u),0===y)break t;v.arraySet(s,r,a,y,o),h-=y,a+=y,u-=y,o+=y,i.length-=y;break}i.mode=W;break;case K:for(;14>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(i.nlen=(31&f)+257,f>>>=5,d-=5,i.ndist=(31&f)+1,f>>>=5,d-=5,i.ncode=(15&f)+4,f>>>=4,d-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=ft;break}i.have=0,i.mode=tt;case tt:for(;i.have<i.ncode;){for(;3>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}i.lens[Ct[i.have++]]=7&f,f>>>=3,d-=3}for(;i.have<19;)i.lens[Ct[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Et={bits:i.lenbits},Mt=_(M,i.lens,0,19,i.lencode,0,i.work,Et),i.lenbits=Et.bits,Mt){t.msg="invalid code lengths set",i.mode=ft;break}i.have=0,i.mode=et;case et:for(;i.have<i.nlen+i.ndist;){for(;St=i.lencode[f&(1<<i.lenbits)-1],yt=St>>>24,gt=St>>>16&255,vt=65535&St,!(d>=yt);){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(16>vt)f>>>=yt,d-=yt,i.lens[i.have++]=vt;else{if(16===vt){for(Pt=yt+2;Pt>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(f>>>=yt,d-=yt,0===i.have){t.msg="invalid bit length repeat",i.mode=ft;break}_t=i.lens[i.have-1],y=3+(3&f),f>>>=2,d-=2}else if(17===vt){for(Pt=yt+3;Pt>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}f>>>=yt,d-=yt,_t=0,y=3+(7&f),f>>>=3,d-=3}else{for(Pt=yt+7;Pt>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}f>>>=yt,d-=yt,_t=0,y=11+(127&f),f>>>=7,d-=7}if(i.have+y>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=ft;break}for(;y--;)i.lens[i.have++]=_t}}if(i.mode===ft)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=ft;break}if(i.lenbits=9,Et={bits:i.lenbits},Mt=_(E,i.lens,0,i.nlen,i.lencode,0,i.work,Et),i.lenbits=Et.bits,Mt){t.msg="invalid literal/lengths set",i.mode=ft;break}if(i.distbits=6,i.distcode=i.distdyn,Et={bits:i.distbits},Mt=_(P,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Et),i.distbits=Et.bits,Mt){t.msg="invalid distances set",i.mode=ft;break}if(i.mode=it,e===C)break t;case it:i.mode=nt;case nt:if(h>=6&&u>=258){t.next_out=o,t.avail_out=u,t.next_in=a,t.avail_in=h,i.hold=f,i.bits=d,w(t,m),o=t.next_out,s=t.output,u=t.avail_out,a=t.next_in,r=t.input,h=t.avail_in,f=i.hold,d=i.bits,i.mode===W&&(i.back=-1);break}for(i.back=0;St=i.lencode[f&(1<<i.lenbits)-1],yt=St>>>24,gt=St>>>16&255,vt=65535&St,!(d>=yt);){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(gt&&0===(240&gt)){for(bt=yt,xt=gt,wt=vt;St=i.lencode[wt+((f&(1<<bt+xt)-1)>>bt)],yt=St>>>24,gt=St>>>16&255,vt=65535&St,!(d>=bt+yt);){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}f>>>=bt,d-=bt,i.back+=bt}if(f>>>=yt,d-=yt,i.back+=yt,i.length=vt,0===gt){i.mode=ht;break}if(32&gt){i.back=-1,i.mode=W;break}if(64&gt){t.msg="invalid literal/length code",i.mode=ft;break}i.extra=15&gt,i.mode=rt;case rt:if(i.extra){for(Pt=i.extra;Pt>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}i.length+=f&(1<<i.extra)-1,f>>>=i.extra,d-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=st;case st:for(;St=i.distcode[f&(1<<i.distbits)-1],yt=St>>>24,gt=St>>>16&255,vt=65535&St,!(d>=yt);){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(0===(240&gt)){for(bt=yt,xt=gt,wt=vt;St=i.distcode[wt+((f&(1<<bt+xt)-1)>>bt)],yt=St>>>24,gt=St>>>16&255,vt=65535&St,!(d>=bt+yt);){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}f>>>=bt,d-=bt,i.back+=bt;
}if(f>>>=yt,d-=yt,i.back+=yt,64&gt){t.msg="invalid distance code",i.mode=ft;break}i.offset=vt,i.extra=15&gt,i.mode=at;case at:if(i.extra){for(Pt=i.extra;Pt>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}i.offset+=f&(1<<i.extra)-1,f>>>=i.extra,d-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=ft;break}i.mode=ot;case ot:if(0===u)break t;if(y=m-u,i.offset>y){if(y=i.offset-y,y>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=ft;break}y>i.wnext?(y-=i.wnext,g=i.wsize-y):g=i.wnext-y,y>i.length&&(y=i.length),mt=i.window}else mt=s,g=o-i.offset,y=i.length;y>u&&(y=u),u-=y,i.length-=y;do s[o++]=mt[g++];while(--y);0===i.length&&(i.mode=nt);break;case ht:if(0===u)break t;s[o++]=i.length,u--,i.mode=nt;break;case ut:if(i.wrap){for(;32>d;){if(0===h)break t;h--,f|=r[a++]<<d,d+=8}if(m-=u,t.total_out+=m,i.total+=m,m&&(t.adler=i.check=i.flags?x(i.check,s,m,o-m):b(i.check,s,m,o-m)),m=u,(i.flags?f:n(f))!==i.check){t.msg="incorrect data check",i.mode=ft;break}f=0,d=0}i.mode=lt;case lt:if(i.wrap&&i.flags){for(;32>d;){if(0===h)break t;h--,f+=r[a++]<<d,d+=8}if(f!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=ft;break}f=0,d=0}i.mode=ct;case ct:Mt=I;break t;case ft:Mt=B;break t;case dt:return j;case pt:default:return L}return t.next_out=o,t.avail_out=u,t.next_in=a,t.avail_in=h,i.hold=f,i.bits=d,(i.wsize||m!==t.avail_out&&i.mode<ft&&(i.mode<ut||e!==S))&&c(t,t.output,t.next_out,m-t.avail_out)?(i.mode=dt,j):(p-=t.avail_in,m-=t.avail_out,t.total_in+=p,t.total_out+=m,i.total+=m,i.wrap&&m&&(t.adler=i.check=i.flags?x(i.check,s,m,t.next_out-m):b(i.check,s,m,t.next_out-m)),t.data_type=i.bits+(i.last?64:0)+(i.mode===W?128:0)+(i.mode===it||i.mode===$?256:0),(0===p&&0===m||e===S)&&Mt===A&&(Mt=N),Mt)}function d(t){if(!t||!t.state)return L;var e=t.state;return e.window&&(e.window=null),t.state=null,A}function p(t,e){var i;return t&&t.state?(i=t.state,0===(2&i.wrap)?L:(i.head=e,e.done=!1,A)):L}function m(t,e){var i,n,r,s=e.length;return t&&t.state?(i=t.state,0!==i.wrap&&i.mode!==H?L:i.mode===H&&(n=1,n=b(n,e,s,0),n!==i.check)?B:(r=c(t,e,s,s))?(i.mode=dt,j):(i.havedict=1,A)):L}var y,g,v=t("../utils/common"),b=t("./adler32"),x=t("./crc32"),w=t("./inffast"),_=t("./inftrees"),M=0,E=1,P=2,S=4,k=5,C=6,A=0,I=1,T=2,L=-2,B=-3,j=-4,N=-5,R=8,z=1,O=2,D=3,F=4,U=5,G=6,V=7,q=8,X=9,Y=10,H=11,W=12,Z=13,J=14,$=15,Q=16,K=17,tt=18,et=19,it=20,nt=21,rt=22,st=23,at=24,ot=25,ht=26,ut=27,lt=28,ct=29,ft=30,dt=31,pt=32,mt=852,yt=592,gt=15,vt=gt,bt=!0;i.inflateReset=a,i.inflateReset2=o,i.inflateResetKeep=s,i.inflateInit=u,i.inflateInit2=h,i.inflate=f,i.inflateEnd=d,i.inflateGetHeader=p,i.inflateSetDictionary=m,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":37,"./adler32":39,"./crc32":41,"./inffast":44,"./inftrees":46}],46:[function(t,e,i){"use strict";var n=t("../utils/common"),r=15,s=852,a=592,o=0,h=1,u=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,p,m,y,g,v){var b,x,w,_,M,E,P,S,k,C=v.bits,A=0,I=0,T=0,L=0,B=0,j=0,N=0,R=0,z=0,O=0,D=null,F=0,U=new n.Buf16(r+1),G=new n.Buf16(r+1),V=null,q=0;for(A=0;r>=A;A++)U[A]=0;for(I=0;p>I;I++)U[e[i+I]]++;for(B=C,L=r;L>=1&&0===U[L];L--);if(B>L&&(B=L),0===L)return m[y++]=20971520,m[y++]=20971520,v.bits=1,0;for(T=1;L>T&&0===U[T];T++);for(T>B&&(B=T),R=1,A=1;r>=A;A++)if(R<<=1,R-=U[A],0>R)return-1;if(R>0&&(t===o||1!==L))return-1;for(G[1]=0,A=1;r>A;A++)G[A+1]=G[A]+U[A];for(I=0;p>I;I++)0!==e[i+I]&&(g[G[e[i+I]]++]=I);if(t===o?(D=V=g,E=19):t===h?(D=l,F-=257,V=c,q-=257,E=256):(D=f,V=d,E=-1),O=0,I=0,A=T,M=y,j=B,N=0,w=-1,z=1<<B,_=z-1,t===h&&z>s||t===u&&z>a)return 1;for(;;){P=A-N,g[I]<E?(S=0,k=g[I]):g[I]>E?(S=V[q+g[I]],k=D[F+g[I]]):(S=96,k=0),b=1<<A-N,x=1<<j,T=x;do x-=b,m[M+(O>>N)+x]=P<<24|S<<16|k|0;while(0!==x);for(b=1<<A-1;O&b;)b>>=1;if(0!==b?(O&=b-1,O+=b):O=0,I++,0===--U[A]){if(A===L)break;A=e[i+g[I]]}if(A>B&&(O&_)!==w){for(0===N&&(N=B),M+=T,j=A-N,R=1<<j;L>j+N&&(R-=U[j+N],!(0>=R));)j++,R<<=1;if(z+=1<<j,t===h&&z>s||t===u&&z>a)return 1;w=O&_,m[w]=B<<24|j<<16|M-y|0}}return 0!==O&&(m[M+O]=A-N<<24|64<<16|0),v.bits=B,0}},{"../utils/common":37}],47:[function(t,e,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],48:[function(t,e,i){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function r(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function s(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return 256>t?ht[t]:ht[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function h(t,e,i){t.bi_valid>Z-i?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>Z-t.bi_valid,t.bi_valid+=i-Z):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function u(t,e,i){h(t,i[2*e],i[2*e+1])}function l(t,e){var i=0;do i|=1&t,t>>>=1,i<<=1;while(--e>0);return i>>>1}function c(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function f(t,e){var i,n,r,s,a,o,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(s=0;W>=s;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;H>i;i++)n=t.heap[i],s=h[2*h[2*n+1]+1]+1,s>p&&(s=p,m++),h[2*n+1]=s,n>u||(t.bl_count[s]++,a=0,n>=d&&(a=f[n-d]),o=h[2*n],t.opt_len+=o*(s+a),c&&(t.static_len+=o*(l[2*n+1]+a)));if(0!==m){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)r=t.heap[--i],r>u||(h[2*r+1]!==s&&(t.opt_len+=(s-h[2*r+1])*h[2*r],h[2*r+1]=s),n--)}}function d(t,e,i){var n,r,s=new Array(W+1),a=0;for(n=1;W>=n;n++)s[n]=a=a+i[n-1]<<1;for(r=0;e>=r;r++){var o=t[2*r+1];0!==o&&(t[2*r]=l(s[o]++,o))}}function p(){var t,e,i,n,s,a=new Array(W+1);for(i=0,n=0;G-1>n;n++)for(lt[n]=i,t=0;t<1<<et[n];t++)ut[i++]=n;for(ut[i-1]=n,s=0,n=0;16>n;n++)for(ct[n]=s,t=0;t<1<<it[n];t++)ht[s++]=n;for(s>>=7;X>n;n++)for(ct[n]=s<<7,t=0;t<1<<it[n]-7;t++)ht[256+s++]=n;for(e=0;W>=e;e++)a[e]=0;for(t=0;143>=t;)at[2*t+1]=8,t++,a[8]++;for(;255>=t;)at[2*t+1]=9,t++,a[9]++;for(;279>=t;)at[2*t+1]=7,t++,a[7]++;for(;287>=t;)at[2*t+1]=8,t++,a[8]++;for(d(at,q+1,a),t=0;X>t;t++)ot[2*t+1]=5,ot[2*t]=l(t,5);ft=new r(at,et,V+1,q,W),dt=new r(ot,it,0,X,W),pt=new r(new Array(0),nt,0,Y,J)}function m(t){var e;for(e=0;q>e;e++)t.dyn_ltree[2*e]=0;for(e=0;X>e;e++)t.dyn_dtree[2*e]=0;for(e=0;Y>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*$]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function y(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function g(t,e,i,n){y(t),n&&(o(t,i),o(t,~i)),L.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}function v(t,e,i,n){var r=2*e,s=2*i;return t[r]<t[s]||t[r]===t[s]&&n[e]<=n[i]}function b(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&v(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!v(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function x(t,e,i){var n,r,s,o,l=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],r=t.pending_buf[t.l_buf+l],l++,0===n?u(t,r,e):(s=ut[r],u(t,s+V+1,e),o=et[s],0!==o&&(r-=lt[s],h(t,r,o)),n--,s=a(n),u(t,s,i),o=it[s],0!==o&&(n-=ct[s],h(t,n,o)));while(l<t.last_lit);u(t,$,e)}function w(t,e){var i,n,r,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=H,i=0;h>i;i++)0!==s[2*i]?(t.heap[++t.heap_len]=u=i,t.depth[i]=0):s[2*i+1]=0;for(;t.heap_len<2;)r=t.heap[++t.heap_len]=2>u?++u:0,s[2*r]=1,t.depth[r]=0,t.opt_len--,o&&(t.static_len-=a[2*r+1]);for(e.max_code=u,i=t.heap_len>>1;i>=1;i--)b(t,s,i);r=h;do i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],b(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,s[2*r]=s[2*i]+s[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,s[2*i+1]=s[2*n+1]=r,t.heap[1]=r++,b(t,s,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],f(t,e),d(s,u,t.bl_count)}function _(t,e,i){var n,r,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),e[2*(i+1)+1]=65535,n=0;i>=n;n++)r=a,a=e[2*(n+1)+1],++o<h&&r===a||(u>o?t.bl_tree[2*r]+=o:0!==r?(r!==s&&t.bl_tree[2*r]++,t.bl_tree[2*Q]++):10>=o?t.bl_tree[2*K]++:t.bl_tree[2*tt]++,o=0,s=r,0===a?(h=138,u=3):r===a?(h=6,u=3):(h=7,u=4))}function M(t,e,i){var n,r,s=-1,a=e[1],o=0,l=7,c=4;for(0===a&&(l=138,c=3),n=0;i>=n;n++)if(r=a,a=e[2*(n+1)+1],!(++o<l&&r===a)){if(c>o){do u(t,r,t.bl_tree);while(0!==--o)}else 0!==r?(r!==s&&(u(t,r,t.bl_tree),o--),u(t,Q,t.bl_tree),h(t,o-3,2)):10>=o?(u(t,K,t.bl_tree),h(t,o-3,3)):(u(t,tt,t.bl_tree),h(t,o-11,7));o=0,s=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4)}}function E(t){var e;for(_(t,t.dyn_ltree,t.l_desc.max_code),_(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=Y-1;e>=3&&0===t.bl_tree[2*rt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function P(t,e,i,n){var r;for(h(t,e-257,5),h(t,i-1,5),h(t,n-4,4),r=0;n>r;r++)h(t,t.bl_tree[2*rt[r]+1],3);M(t,t.dyn_ltree,e-1),M(t,t.dyn_dtree,i-1)}function S(t){var e,i=4093624447;for(e=0;31>=e;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return j;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return N;for(e=32;V>e;e++)if(0!==t.dyn_ltree[2*e])return N;return j}function k(t){mt||(p(),mt=!0),t.l_desc=new s(t.dyn_ltree,ft),t.d_desc=new s(t.dyn_dtree,dt),t.bl_desc=new s(t.bl_tree,pt),t.bi_buf=0,t.bi_valid=0,m(t)}function C(t,e,i,n){h(t,(z<<1)+(n?1:0),3),g(t,e,i,!0)}function A(t){h(t,O<<1,3),u(t,$,at),c(t)}function I(t,e,i,n){var r,s,a=0;t.level>0?(t.strm.data_type===R&&(t.strm.data_type=S(t)),w(t,t.l_desc),w(t,t.d_desc),a=E(t),r=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,r>=s&&(r=s)):r=s=i+5,r>=i+4&&-1!==e?C(t,e,i,n):t.strategy===B||s===r?(h(t,(O<<1)+(n?1:0),3),x(t,at,ot)):(h(t,(D<<1)+(n?1:0),3),P(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),x(t,t.dyn_ltree,t.dyn_dtree)),m(t),n&&y(t)}function T(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(ut[i]+V+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1}var L=t("../utils/common"),B=4,j=0,N=1,R=2,z=0,O=1,D=2,F=3,U=258,G=29,V=256,q=V+1+G,X=30,Y=19,H=2*q+1,W=15,Z=16,J=7,$=256,Q=16,K=17,tt=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],it=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=512,at=new Array(2*(q+2));n(at);var ot=new Array(2*X);n(ot);var ht=new Array(st);n(ht);var ut=new Array(U-F+1);n(ut);var lt=new Array(G);n(lt);var ct=new Array(X);n(ct);var ft,dt,pt,mt=!1;i._tr_init=k,i._tr_stored_block=C,i._tr_flush_block=I,i._tr_tally=T,i._tr_align=A},{"../utils/common":37}],49:[function(t,e,i){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},{}],50:[function(t,e,i){"use strict";function n(){}e.exports=n},{}],51:[function(t,e,i){"use strict";function n(t){function e(t,e){function r(t){u[e]=t,++l===i&!n&&(n=!0,h.resolve(f,u))}a(t).then(r,function(t){n||(n=!0,h.reject(f,t))})}if("[object Array]"!==Object.prototype.toString.call(t))return s(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return a([]);for(var u=new Array(i),l=0,c=-1,f=new r(o);++c<i;)e(t[c],c);return f}var r=t("./promise"),s=t("./reject"),a=t("./resolve"),o=t("./INTERNAL"),h=t("./handlers");e.exports=n},{"./INTERNAL":50,"./handlers":52,"./promise":54,"./reject":57,"./resolve":58}],52:[function(t,e,i){"use strict";function n(t){var e=t&&t.then;return t&&"object"==typeof t&&"function"==typeof e?function(){e.apply(t,arguments)}:void 0}var r=t("./tryCatch"),s=t("./resolveThenable"),a=t("./states");i.resolve=function(t,e){var o=r(n,e);if("error"===o.status)return i.reject(t,o.value);var h=o.value;if(h)s.safely(t,h);else{t.state=a.FULFILLED,t.outcome=e;for(var u=-1,l=t.queue.length;++u<l;)t.queue[u].callFulfilled(e)}return t},i.reject=function(t,e){t.state=a.REJECTED,t.outcome=e;for(var i=-1,n=t.queue.length;++i<n;)t.queue[i].callRejected(e);return t}},{"./resolveThenable":59,"./states":60,"./tryCatch":61}],53:[function(t,e,i){e.exports=i=t("./promise"),i.resolve=t("./resolve"),i.reject=t("./reject"),i.all=t("./all"),i.race=t("./race")},{"./all":51,"./promise":54,"./race":56,"./reject":57,"./resolve":58}],54:[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=o.PENDING,this.queue=[],this.outcome=void 0,t!==s&&a.safely(this,t)}var r=t("./unwrap"),s=t("./INTERNAL"),a=t("./resolveThenable"),o=t("./states"),h=t("./queueItem");e.exports=n,n.prototype["catch"]=function(t){return this.then(null,t)},n.prototype.then=function(t,e){if("function"!=typeof t&&this.state===o.FULFILLED||"function"!=typeof e&&this.state===o.REJECTED)return this;var i=new n(s);if(this.state!==o.PENDING){var a=this.state===o.FULFILLED?t:e;r(i,a,this.outcome)}else this.queue.push(new h(i,t,e));return i}},{"./INTERNAL":50,"./queueItem":55,"./resolveThenable":59,"./states":60,"./unwrap":62}],55:[function(t,e,i){"use strict";function n(t,e,i){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}var r=t("./handlers"),s=t("./unwrap");e.exports=n,n.prototype.callFulfilled=function(t){r.resolve(this.promise,t)},n.prototype.otherCallFulfilled=function(t){s(this.promise,this.onFulfilled,t)},n.prototype.callRejected=function(t){r.reject(this.promise,t)},n.prototype.otherCallRejected=function(t){s(this.promise,this.onRejected,t)}},{"./handlers":52,"./unwrap":62}],56:[function(t,e,i){"use strict";function n(t){function e(t){a(t).then(function(t){n||(n=!0,h.resolve(l,t))},function(t){n||(n=!0,h.reject(l,t))})}if("[object Array]"!==Object.prototype.toString.call(t))return s(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return a([]);for(var u=-1,l=new r(o);++u<i;)e(t[u]);return l}var r=t("./promise"),s=t("./reject"),a=t("./resolve"),o=t("./INTERNAL"),h=t("./handlers");e.exports=n},{"./INTERNAL":50,"./handlers":52,"./promise":54,"./reject":57,"./resolve":58}],57:[function(t,e,i){"use strict";function n(t){var e=new r(s);return a.reject(e,t)}var r=t("./promise"),s=t("./INTERNAL"),a=t("./handlers");e.exports=n},{"./INTERNAL":50,"./handlers":52,"./promise":54}],58:[function(t,e,i){"use strict";function n(t){if(t)return t instanceof r?t:a.resolve(new r(s),t);var e=typeof t;switch(e){case"boolean":return o;case"undefined":return u;case"object":return h;case"number":return l;case"string":return c}}var r=t("./promise"),s=t("./INTERNAL"),a=t("./handlers");e.exports=n;var o=a.resolve(new r(s),!1),h=a.resolve(new r(s),null),u=a.resolve(new r(s),void 0),l=a.resolve(new r(s),0),c=a.resolve(new r(s),"")},{"./INTERNAL":50,"./handlers":52,"./promise":54}],59:[function(t,e,i){"use strict";function n(t,e){function i(e){o||(o=!0,r.reject(t,e))}function n(e){o||(o=!0,r.resolve(t,e))}function a(){e(n,i)}var o=!1,h=s(a);"error"===h.status&&i(h.value)}var r=t("./handlers"),s=t("./tryCatch");i.safely=n},{"./handlers":52,"./tryCatch":61}],60:[function(t,e,i){i.REJECTED=["REJECTED"],i.FULFILLED=["FULFILLED"],i.PENDING=["PENDING"]},{}],61:[function(t,e,i){"use strict";function n(t,e){var i={};try{i.value=t(e),i.status="success"}catch(n){i.status="error",i.value=n}return i}e.exports=n},{}],62:[function(t,e,i){"use strict";function n(t,e,i){r(function(){var n;try{n=e(i)}catch(r){return s.reject(t,r)}n===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,n)})}var r=t("immediate"),s=t("./handlers");e.exports=n},{"./handlers":52,immediate:8}],63:[function(t,e,i){!function(){function t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function i(){return 1}function n(t){f||"string"==typeof t||"number"==typeof t||(f=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof t).stack))}function r(t){return this instanceof r?("number"==typeof t&&(t={max:t}),t||(t={}),this._max=t.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=t.length||i,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=i),this._allowStale=t.stale||!1,this._maxAge=t.maxAge||null,this._dispose=t.dispose,void this.reset()):new r(t)}function s(t,e,i){n(e);var r=t._cache[e];return r&&(a(t,r)?(l(t,r),t._allowStale||(r=void 0)):i&&o(t,r),r&&(r=r.value)),r}function a(t,e){if(!e||!e.maxAge&&!t._maxAge)return!1;var i=!1,n=Date.now()-e.now;return i=e.maxAge?n>e.maxAge:t._maxAge&&n>t._maxAge}function o(t,e){u(t,e),e.lu=t._mru++,t._lruList[e.lu]=e}function h(t){for(;t._lru<t._mru&&t._length>t._max;)l(t,t._lruList[t._lru])}function u(t,e){for(delete t._lruList[e.lu];t._lru<t._mru&&!t._lruList[t._lru];)t._lru++}function l(t,e){e&&(t._dispose&&t._dispose(e.key,e.value),t._length-=e.length,t._itemCount--,delete t._cache[e.key],u(t,e))}function c(t,e,i,n,r,s){this.key=t,this.value=e,this.lu=i,this.length=n,this.now=r,s&&(this.maxAge=s)}"object"==typeof e&&e.exports?e.exports=r:this.LRUCache=r;var f=!1;Object.defineProperty(r.prototype,"max",{set:function(t){(!t||"number"!=typeof t||0>=t)&&(t=1/0),this._max=t,this._length>this._max&&h(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(r.prototype,"lengthCalculator",{set:function(t){if("function"!=typeof t){this._lengthCalculator=i,this._length=this._itemCount;for(var e in this._cache)this._cache[e].length=1}else{this._lengthCalculator=t,this._length=0;for(var e in this._cache)this._cache[e].length=this._lengthCalculator(this._cache[e].value),this._length+=this._cache[e].length}this._length>this._max&&h(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(r.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),r.prototype.forEach=function(t,e){e=e||this;for(var i=0,n=this._itemCount,r=this._mru-1;r>=0&&n>i;r--)if(this._lruList[r]){i++;var s=this._lruList[r];a(this,s)&&(l(this,s),this._allowStale||(s=void 0)),s&&t.call(e,s.value,s.key,this)}},r.prototype.keys=function(){for(var t=new Array(this._itemCount),e=0,i=this._mru-1;i>=0&&e<this._itemCount;i--)if(this._lruList[i]){var n=this._lruList[i];t[e++]=n.key}return t},r.prototype.values=function(){for(var t=new Array(this._itemCount),e=0,i=this._mru-1;i>=0&&e<this._itemCount;i--)if(this._lruList[i]){var n=this._lruList[i];t[e++]=n.value}return t},r.prototype.reset=function(){if(this._dispose&&this._cache)for(var t in this._cache)this._dispose(t,this._cache[t].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},r.prototype.dump=function(){for(var t=[],e=0,i=this._mru-1;i>=0&&e<this._itemCount;i--)if(this._lruList[i]){var n=this._lruList[i];a(this,n)||(++e,t.push({k:n.key,v:n.value,e:n.now+(n.maxAge||0)}))}return t},r.prototype.dumpLru=function(){return this._lruList},r.prototype.set=function(e,i,r){r=r||this._maxAge,n(e);var s=r?Date.now():0,a=this._lengthCalculator(i);if(t(this._cache,e))return a>this._max?(l(this,this._cache[e]),!1):(this._dispose&&this._dispose(e,this._cache[e].value),this._cache[e].now=s,this._cache[e].maxAge=r,this._cache[e].value=i,this._length+=a-this._cache[e].length,this._cache[e].length=a,this.get(e),this._length>this._max&&h(this),!0);var o=new c(e,i,this._mru++,a,s,r);return o.length>this._max?(this._dispose&&this._dispose(e,i),!1):(this._length+=o.length,this._lruList[o.lu]=this._cache[e]=o,this._itemCount++,this._length>this._max&&h(this),!0)},r.prototype.has=function(e){if(n(e),!t(this._cache,e))return!1;var i=this._cache[e];return a(this,i)?!1:!0},r.prototype.get=function(t){return n(t),s(this,t,!0)},r.prototype.peek=function(t){return n(t),s(this,t,!1)},r.prototype.pop=function(){var t=this._lruList[this._lru];return l(this,t),t||null},r.prototype.del=function(t){n(t),l(this,this._cache[t])},r.prototype.load=function(t){this.reset();for(var e=Date.now(),i=t.length-1;i>=0;i--){var r=t[i];n(r.k);var s=r.e||0;if(0===s)this.set(r.k,r.v);else{var a=s-e;a>0&&this.set(r.k,r.v,a)}}}}()},{}],64:[function(t,e,i){function n(t){return t*(Math.PI/180)}function r(t){return 180*(t/Math.PI)}function s(t){var e,i,r,s,a,h,u,l,c,f=t.lat,d=t.lon,p=6378137,m=.00669438,y=.9996,g=n(f),v=n(d);c=Math.floor((d+180)/6)+1,180===d&&(c=60),f>=56&&64>f&&d>=3&&12>d&&(c=32),f>=72&&84>f&&(d>=0&&9>d?c=31:d>=9&&21>d?c=33:d>=21&&33>d?c=35:d>=33&&42>d&&(c=37)),e=6*(c-1)-180+3,l=n(e),i=m/(1-m),r=p/Math.sqrt(1-m*Math.sin(g)*Math.sin(g)),s=Math.tan(g)*Math.tan(g),a=i*Math.cos(g)*Math.cos(g),h=Math.cos(g)*(v-l),u=p*((1-m/4-3*m*m/64-5*m*m*m/256)*g-(3*m/8+3*m*m/32+45*m*m*m/1024)*Math.sin(2*g)+(15*m*m/256+45*m*m*m/1024)*Math.sin(4*g)-35*m*m*m/3072*Math.sin(6*g));var b=y*r*(h+(1-s+a)*h*h*h/6+(5-18*s+s*s+72*a-58*i)*h*h*h*h*h/120)+5e5,x=y*(u+r*Math.tan(g)*(h*h/2+(5-s+9*a+4*a*a)*h*h*h*h/24+(61-58*s+s*s+600*a-330*i)*h*h*h*h*h*h/720));return 0>f&&(x+=1e7),{northing:Math.round(x),easting:Math.round(b),zoneNumber:c,zoneLetter:o(f)}}function a(t){var e=t.northing,i=t.easting,n=t.zoneLetter,s=t.zoneNumber;if(0>s||s>60)return null;var o,h,u,l,c,f,d,p,m,y,g=.9996,v=6378137,b=.00669438,x=(1-Math.sqrt(1-b))/(1+Math.sqrt(1-b)),w=i-5e5,_=e;"N">n&&(_-=1e7),p=6*(s-1)-180+3,o=b/(1-b),d=_/g,m=d/(v*(1-b/4-3*b*b/64-5*b*b*b/256)),y=m+(3*x/2-27*x*x*x/32)*Math.sin(2*m)+(21*x*x/16-55*x*x*x*x/32)*Math.sin(4*m)+151*x*x*x/96*Math.sin(6*m),h=v/Math.sqrt(1-b*Math.sin(y)*Math.sin(y)),u=Math.tan(y)*Math.tan(y),l=o*Math.cos(y)*Math.cos(y),c=v*(1-b)/Math.pow(1-b*Math.sin(y)*Math.sin(y),1.5),f=w/(h*g);var M=y-h*Math.tan(y)/c*(f*f/2-(5+3*u+10*l-4*l*l-9*o)*f*f*f*f/24+(61+90*u+298*l+45*u*u-252*o-3*l*l)*f*f*f*f*f*f/720);M=r(M);var E=(f-(1+2*u+l)*f*f*f/6+(5-2*l+28*u-3*l*l+8*o+24*u*u)*f*f*f*f*f/120)/Math.cos(y);E=p+r(E);var P;if(t.accuracy){var S=a({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});P={top:S.lat,right:S.lon,bottom:M,left:E}}else P={lat:M,lon:E};return P}function o(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function h(t,e){var i="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+u(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+n.substr(n.length-5,e)}function u(t,e,i){var n=l(i),r=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return c(r,s,n)}function l(t){var e=t%y;return 0===e&&(e=y),e}function c(t,e,i){var n=i-1,r=g.charCodeAt(n),s=v.charCodeAt(n),a=r+t-1,o=s+e,h=!1;a>M&&(a=a-M+b-1,h=!0),(a===x||x>r&&a>x||(a>x||x>r)&&h)&&a++,(a===w||w>r&&a>w||(a>w||w>r)&&h)&&(a++,a===x&&a++),a>M&&(a=a-M+b-1),o>_?(o=o-_+b-1,h=!0):h=!1,(o===x||x>s&&o>x||(o>x||x>s)&&h)&&o++,(o===w||w>s&&o>w||(o>w||w>s)&&h)&&(o++,o===x&&o++),o>_&&(o=o-_+b-1);var u=String.fromCharCode(a)+String.fromCharCode(o);return u}function f(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,r="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,s++}var a=parseInt(r,10);if(0===s||s+3>i)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(s++);if("A">=o||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+t;n=t.substring(s,s+=2);for(var h=l(a),u=d(n.charAt(0),h),c=p(n.charAt(1),h);c<m(o);)c+=2e6;var f=i-s;if(f%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var y,g,v,b,x,w=f/2,_=0,M=0;return w>0&&(y=1e5/Math.pow(10,w),g=t.substring(s,s+w),_=parseFloat(g)*y,v=t.substring(s+w),M=parseFloat(v)*y),b=_+u,x=M+c,{easting:b,northing:x,zoneLetter:o,zoneNumber:a,accuracy:y}}function d(t,e){for(var i=g.charCodeAt(e-1),n=1e5,r=!1;i!==t.charCodeAt(0);){if(i++,i===x&&i++,i===w&&i++,i>M){if(r)throw"Bad character: "+t;i=b,r=!0}n+=1e5}return n}function p(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=v.charCodeAt(e-1),n=0,r=!1;i!==t.charCodeAt(0);){if(i++,i===x&&i++,i===w&&i++,i>_){if(r)throw"Bad character: "+t;i=b,r=!0}n+=1e5}return n}function m(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}var y=6,g="AJSAJS",v="AFAFAF",b=65,x=73,w=79,_=86,M=90;i.forward=function(t,e){return e=e||5,h(s({lat:t[1],lon:t[0]}),e)},i.inverse=function(t){var e=a(f(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},i.toPoint=function(t){var e=a(f(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}},{}],65:[function(t,e,i){function n(t){var e=new DataView(t),i={};return i.lastUpdated=new Date(e.getUint8(1,!0)+1900,e.getUint8(2,!0),e.getUint8(3,!0)),i.records=e.getUint32(4,!0),i.headerLen=e.getUint16(8,!0),i.recLen=e.getUint16(10,!0),i}function r(t){for(var e=new DataView(t),i=[],n=32;;){if(i.push({name:String.fromCharCode.apply(this,new Uint8Array(t,n,10)).replace(/\0|\s+$/g,""),dataType:String.fromCharCode(e.getUint8(n+11)),len:e.getUint8(n+16),decimal:e.getUint8(n+17)}),13===e.getUint8(n+32))break;n+=32}return i}function s(t,e,i,n){var r=new Uint8Array(t,e,i),s=String.fromCharCode.apply(this,r).replace(/\0|\s+$/g,"");switch(n){case"N":case"F":case"O":return parseFloat(s,10);case"D":return new Date(s.slice(0,4),parseInt(s.slice(4,6),10)-1,s.slice(6,8));case"L":return"y"===s.toLowerCase()||"t"===s.toLowerCase();default:return s}}function a(t,e,i){for(var n,r,a={},o=0,h=i.length;h>o;)r=i[o],n=s(t,e,r.len,r.dataType),e+=r.len,"undefined"!=typeof n&&(a[r.name]=n),o++;return a}e.exports=function(t){for(var e=r(t),i=n(t),s=(e.length+1<<5)+2,o=i.recLen,h=i.records,u=[];h;)u.push(a(t,s,e)),s+=o,h--;return u}},{}],66:[function(t,e,i){function n(t,e,i){if(!(this instanceof n))return new n(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&"undefined"==typeof e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var r=t("mgrs");n.fromMGRS=function(t){return new n(r.toPoint(t))},n.prototype.toMGRS=function(t){return r.forward([this.x,this.y],t)},e.exports=n},{mgrs:64}],67:[function(t,e,i){function n(t,e){if(!(this instanceof n))return new n(t);e=e||function(t){if(t)throw t};var i=r(t);if("object"!=typeof i)return void e(t);var a=o(i),h=n.projections.get(a.projName);h?(s(this,a),s(this,h),this.init(),e(null,this)):e(t)}var r=t("./parseCode"),s=t("./extend"),a=t("./projections"),o=t("./deriveConstants");n.projections=a,n.projections.start(),e.exports=n},{"./deriveConstants":98,"./extend":99,"./parseCode":103,"./projections":105}],68:[function(t,e,i){e.exports=function(t,e,i){var n,r,s,a=i.x,o=i.y,h=i.z||0;for(s=0;3>s;s++)if(!e||2!==s||void 0!==i.z)switch(0===s?(n=a,r="x"):1===s?(n=o,r="y"):(n=h,r="z"),t.axis[s]){case"e":i[r]=n;break;case"w":i[r]=-n;break;case"n":i[r]=n;break;case"s":i[r]=-n;break;case"u":void 0!==i[r]&&(i.z=n);break;case"d":void 0!==i[r]&&(i.z=-n);break;default:return null}return i}},{}],69:[function(t,e,i){var n=Math.PI/2,r=t("./sign");e.exports=function(t){return Math.abs(t)<n?t:t-r(t)*Math.PI}},{"./sign":86}],70:[function(t,e,i){var n=2*Math.PI,r=3.14159265359,s=t("./sign");e.exports=function(t){return Math.abs(t)<=r?t:t-s(t)*n}},{"./sign":86}],71:[function(t,e,i){e.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},{}],72:[function(t,e,i){e.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},{}],73:[function(t,e,i){e.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},{}],74:[function(t,e,i){e.exports=function(t){return.05859375*t*t*(1+.75*t)}},{}],75:[function(t,e,i){e.exports=function(t){return t*t*t*(35/3072)}},{}],76:[function(t,e,i){e.exports=function(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}},{}],77:[function(t,e,i){e.exports=function(t,e,i,n,r){var s,a;s=t/e;for(var o=0;15>o;o++)if(a=(t-(e*s-i*Math.sin(2*s)+n*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*i*Math.cos(2*s)+4*n*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}},{}],78:[function(t,e,i){var n=Math.PI/2;e.exports=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return 0>e?-1*n:n;for(var r,s,a,o,h=Math.asin(.5*e),u=0;30>u;u++)if(s=Math.sin(h),a=Math.cos(h),o=t*s,r=Math.pow(1-o*o,2)/(2*a)*(e/(1-t*t)-s/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),h+=r,Math.abs(r)<=1e-10)return h;return NaN}},{}],79:[function(t,e,i){e.exports=function(t,e,i,n,r){return t*r-e*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)}},{}],80:[function(t,e,i){e.exports=function(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}},{}],81:[function(t,e,i){var n=Math.PI/2;e.exports=function(t,e){for(var i,r,s=.5*t,a=n-2*Math.atan(e),o=0;15>=o;o++)if(i=t*Math.sin(a),r=n-2*Math.atan(e*Math.pow((1-i)/(1+i),s))-a,a+=r,Math.abs(r)<=1e-10)return a;return-9999}},{}],82:[function(t,e,i){var n=1,r=.25,s=.046875,a=.01953125,o=.01068115234375,h=.75,u=.46875,l=.013020833333333334,c=.007120768229166667,f=.3645833333333333,d=.005696614583333333,p=.3076171875;e.exports=function(t){var e=[];e[0]=n-t*(r+t*(s+t*(a+t*o))),e[1]=t*(h-t*(s+t*(a+t*o)));var i=t*t;return e[2]=i*(u-t*(l+t*c)),i*=t,e[3]=i*(f-t*d),e[4]=i*t*p,e}},{}],83:[function(t,e,i){var n=t("./pj_mlfn"),r=1e-10,s=20;e.exports=function(t,e,i){for(var a=1/(1-e),o=t,h=s;h;--h){var u=Math.sin(o),l=1-e*u*u;if(l=(n(o,u,Math.cos(o),i)-t)*(l*Math.sqrt(l))*a,o-=l,Math.abs(l)<r)return o}return o}},{"./pj_mlfn":84}],84:[function(t,e,i){e.exports=function(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}},{}],85:[function(t,e,i){e.exports=function(t,e){var i;return t>1e-7?(i=t*e,(1-t*t)*(e/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*e}},{}],86:[function(t,e,i){e.exports=function(t){return 0>t?-1:1}},{}],87:[function(t,e,i){e.exports=function(t,e){return Math.pow((1-t)/(1+t),e)}},{}],88:[function(t,e,i){e.exports=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}},{}],89:[function(t,e,i){var n=Math.PI/2;e.exports=function(t,e,i){var r=t*i,s=.5*t;return r=Math.pow((1-r)/(1+r),s),Math.tan(.5*(n-e))/r}},{}],90:[function(t,e,i){i.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"
},i.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},i.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},i.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},i.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},i.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},i.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},i.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},i.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},i.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},i.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},i.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},i.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},i.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},i.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},i.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],91:[function(t,e,i){i.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},i.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},i.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},i.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},i.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},i.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},i.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},i.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},i.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},i.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},i.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},i.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},i.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},i.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},i.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},i.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},i.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},i.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},i.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},i.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},i.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},i.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},i.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},i.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},i.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},i.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},i.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},i.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},i.hough={a:6378270,rf:297,ellipseName:"Hough"},i.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},i.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},i.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},i.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},i.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},i.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},i.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},i.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},i.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},i.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},i.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},i.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},i.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},i.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],92:[function(t,e,i){i.greenwich=0,i.lisbon=-9.131906111111,i.paris=2.337229166667,i.bogota=-74.080916666667,i.madrid=-3.687938888889,i.rome=12.452333333333,i.bern=7.439583333333,i.jakarta=106.807719444444,i.ferro=-17.666666666667,i.brussels=4.367975,i.stockholm=18.058277777778,i.athens=23.7163375,i.oslo=10.722916666667},{}],93:[function(t,e,i){i.ft={to_meter:.3048},i["us-ft"]={to_meter:1200/3937}},{}],94:[function(t,e,i){function n(t,e,i){var n;return Array.isArray(i)?(n=o(t,e,i),3===i.length?[n.x,n.y,n.z]:[n.x,n.y]):o(t,e,i)}function r(t){return t instanceof a?t:t.oProj?t.oProj:a(t)}function s(t,e,i){t=r(t);var s,a=!1;return"undefined"==typeof e?(e=t,t=h,a=!0):("undefined"!=typeof e.x||Array.isArray(e))&&(i=e,e=t,t=h,a=!0),e=r(e),i?n(t,e,i):(s={forward:function(i){return n(t,e,i)},inverse:function(i){return n(e,t,i)}},a&&(s.oProj=e),s)}var a=t("./Proj"),o=t("./transform"),h=a("WGS84");e.exports=s},{"./Proj":67,"./transform":131}],95:[function(t,e,i){var n=Math.PI/2,r=1,s=2,a=3,o=4,h=5,u=484813681109536e-20,l=1.0026,c=.3826834323650898,f=function(t){return this instanceof f?(this.datum_type=o,void(t&&(t.datumCode&&"none"===t.datumCode&&(this.datum_type=h),t.datum_params&&(this.datum_params=t.datum_params.map(parseFloat),(0!==this.datum_params[0]||0!==this.datum_params[1]||0!==this.datum_params[2])&&(this.datum_type=r),this.datum_params.length>3&&(0!==this.datum_params[3]||0!==this.datum_params[4]||0!==this.datum_params[5]||0!==this.datum_params[6])&&(this.datum_type=s,this.datum_params[3]*=u,this.datum_params[4]*=u,this.datum_params[5]*=u,this.datum_params[6]=this.datum_params[6]/1e6+1)),this.datum_type=t.grids?a:this.datum_type,this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,this.datum_type===a&&(this.grids=t.grids)))):new f(t)};f.prototype={compare_datums:function(t){return this.datum_type!==t.datum_type?!1:this.a!==t.a||Math.abs(this.es-t.es)>5e-11?!1:this.datum_type===r?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:this.datum_type===s?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:this.datum_type===a||t.datum_type===a?this.nadgrids===t.nadgrids:!0},geodetic_to_geocentric:function(t){var e,i,r,s,a,o,h,u=t.x,l=t.y,c=t.z?t.z:0,f=0;if(-n>l&&l>-1.001*n)l=-n;else if(l>n&&1.001*n>l)l=n;else if(-n>l||l>n)return null;return u>Math.PI&&(u-=2*Math.PI),a=Math.sin(l),h=Math.cos(l),o=a*a,s=this.a/Math.sqrt(1-this.es*o),e=(s+c)*h*Math.cos(u),i=(s+c)*h*Math.sin(u),r=(s*(1-this.es)+c)*a,t.x=e,t.y=i,t.z=r,f},geocentric_to_geodetic:function(t){var e,i,r,s,a,o,h,u,l,c,f,d,p,m,y,g,v,b=1e-12,x=b*b,w=30,_=t.x,M=t.y,E=t.z?t.z:0;if(p=!1,e=Math.sqrt(_*_+M*M),i=Math.sqrt(_*_+M*M+E*E),e/this.a<b){if(p=!0,y=0,i/this.a<b)return g=n,void(v=-this.b)}else y=Math.atan2(M,_);r=E/i,s=e/i,a=1/Math.sqrt(1-this.es*(2-this.es)*s*s),u=s*(1-this.es)*a,l=r*a,m=0;do m++,h=this.a/Math.sqrt(1-this.es*l*l),v=e*u+E*l-h*(1-this.es*l*l),o=this.es*h/(h+v),a=1/Math.sqrt(1-o*(2-o)*s*s),c=s*(1-o)*a,f=r*a,d=f*u-c*l,u=c,l=f;while(d*d>x&&w>m);return g=Math.atan(f/Math.abs(c)),t.x=y,t.y=g,t.z=v,t},geocentric_to_geodetic_noniter:function(t){var e,i,r,s,a,o,h,u,f,d,p,m,y,g,v,b,x,w=t.x,_=t.y,M=t.z?t.z:0;if(w=parseFloat(w),_=parseFloat(_),M=parseFloat(M),x=!1,0!==w)e=Math.atan2(_,w);else if(_>0)e=n;else if(0>_)e=-n;else if(x=!0,e=0,M>0)i=n;else{if(!(0>M))return i=n,void(r=-this.b);i=-n}return a=w*w+_*_,s=Math.sqrt(a),o=M*l,u=Math.sqrt(o*o+a),d=o/u,m=s/u,p=d*d*d,h=M+this.b*this.ep2*p,b=s-this.a*this.es*m*m*m,f=Math.sqrt(h*h+b*b),y=h/f,g=b/f,v=this.a/Math.sqrt(1-this.es*y*y),r=g>=c?s/g-v:-c>=g?s/-g-v:M/y+v*(this.es-1),x===!1&&(i=Math.atan(y/g)),t.x=e,t.y=i,t.z=r,t},geocentric_to_wgs84:function(t){if(this.datum_type===r)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(this.datum_type===s){var e=this.datum_params[0],i=this.datum_params[1],n=this.datum_params[2],a=this.datum_params[3],o=this.datum_params[4],h=this.datum_params[5],u=this.datum_params[6],l=u*(t.x-h*t.y+o*t.z)+e,c=u*(h*t.x+t.y-a*t.z)+i,f=u*(-o*t.x+a*t.y+t.z)+n;t.x=l,t.y=c,t.z=f}},geocentric_from_wgs84:function(t){if(this.datum_type===r)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(this.datum_type===s){var e=this.datum_params[0],i=this.datum_params[1],n=this.datum_params[2],a=this.datum_params[3],o=this.datum_params[4],h=this.datum_params[5],u=this.datum_params[6],l=(t.x-e)/u,c=(t.y-i)/u,f=(t.z-n)/u;t.x=l+h*c-o*f,t.y=-h*l+c+a*f,t.z=o*l-a*c+f}}},e.exports=f},{}],96:[function(t,e,i){var n=1,r=2,s=3,a=5,o=6378137,h=.006694379990141316;e.exports=function(t,e,i){function u(t){return t===n||t===r}var l,c,f;if(t.compare_datums(e))return i;if(t.datum_type===a||e.datum_type===a)return i;var d=t.a,p=t.es,m=e.a,y=e.es,g=t.datum_type;if(g===s)if(0===this.apply_gridshift(t,0,i))t.a=o,t.es=h;else{if(!t.datum_params)return t.a=d,t.es=t.es,i;for(l=1,c=0,f=t.datum_params.length;f>c;c++)l*=t.datum_params[c];if(0===l)return t.a=d,t.es=t.es,i;g=t.datum_params.length>3?r:n}return e.datum_type===s&&(e.a=o,e.es=h),(t.es!==e.es||t.a!==e.a||u(g)||u(e.datum_type))&&(t.geodetic_to_geocentric(i),u(t.datum_type)&&t.geocentric_to_wgs84(i),u(e.datum_type)&&e.geocentric_from_wgs84(i),e.geocentric_to_geodetic(i)),e.datum_type===s&&this.apply_gridshift(e,1,i),t.a=d,t.es=p,e.a=m,e.es=y,i}},{}],97:[function(t,e,i){function n(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?n[t]=s(arguments[1]):n[t]=a(arguments[1]):n[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?n.apply(e,t):n(t)});if("string"==typeof t){if(t in n)return n[t]}else"EPSG"in t?n["EPSG:"+t.EPSG]=t:"ESRI"in t?n["ESRI:"+t.ESRI]=t:"IAU2000"in t?n["IAU2000:"+t.IAU2000]=t:console.log(t);return}}var r=t("./global"),s=t("./projString"),a=t("./wkt");r(n),e.exports=n},{"./global":100,"./projString":104,"./wkt":132}],98:[function(t,e,i){var n=t("./constants/Datum"),r=t("./constants/Ellipsoid"),s=t("./extend"),a=t("./datum"),o=1e-10,h=.16666666666666666,u=.04722222222222222,l=.022156084656084655;e.exports=function(t){if(t.datumCode&&"none"!==t.datumCode){var e=n[t.datumCode];e&&(t.datum_params=e.towgs84?e.towgs84.split(","):null,t.ellps=e.ellipse,t.datumName=e.datumName?e.datumName:t.datumCode)}if(!t.a){var i=r[t.ellps]?r[t.ellps]:r.WGS84;s(t,i)}return t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<o)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(h+t.es*(u+t.es*l)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum||(t.datum=a(t)),t}},{"./constants/Datum":90,"./constants/Ellipsoid":91,"./datum":95,"./extend":99}],99:[function(t,e,i){e.exports=function(t,e){t=t||{};var i,n;if(!e)return t;for(n in e)i=e[n],void 0!==i&&(t[n]=i);return t}},{}],100:[function(t,e,i){e.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},{}],101:[function(t,e,i){var n=[t("./projections/tmerc"),t("./projections/utm"),t("./projections/sterea"),t("./projections/stere"),t("./projections/somerc"),t("./projections/omerc"),t("./projections/lcc"),t("./projections/krovak"),t("./projections/cass"),t("./projections/laea"),t("./projections/aea"),t("./projections/gnom"),t("./projections/cea"),t("./projections/eqc"),t("./projections/poly"),t("./projections/nzmg"),t("./projections/mill"),t("./projections/sinu"),t("./projections/moll"),t("./projections/eqdc"),t("./projections/vandg"),t("./projections/aeqd")];e.exports=function(t){n.forEach(function(e){t.Proj.projections.add(e)})}},{"./projections/aea":106,"./projections/aeqd":107,"./projections/cass":108,"./projections/cea":109,"./projections/eqc":110,"./projections/eqdc":111,"./projections/gnom":113,"./projections/krovak":114,"./projections/laea":115,"./projections/lcc":116,"./projections/mill":119,"./projections/moll":120,"./projections/nzmg":121,"./projections/omerc":122,"./projections/poly":123,"./projections/sinu":124,"./projections/somerc":125,"./projections/stere":126,"./projections/sterea":127,"./projections/tmerc":128,"./projections/utm":129,"./projections/vandg":130}],102:[function(t,e,i){var n=t("./core");n.defaultDatum="WGS84",n.Proj=t("./Proj"),n.WGS84=new n.Proj("WGS84"),n.Point=t("./Point"),n.toPoint=t("./common/toPoint"),n.defs=t("./defs"),n.transform=t("./transform"),n.mgrs=t("mgrs"),n.version=t("../package.json").version,t("./includedProjections")(n),e.exports=n},{"../package.json":133,"./Point":66,"./Proj":67,"./common/toPoint":88,"./core":94,"./defs":97,"./includedProjections":101,"./transform":131,mgrs:64}],103:[function(t,e,i){function n(t){return"string"==typeof t}function r(t){return t in h}function s(t){var e=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return e.reduce(function(e,i){return e+1+t.indexOf(i)},0)}function a(t){return"+"===t[0]}function o(t){return n(t)?r(t)?h[t]:s(t)?u(t):a(t)?l(t):void 0:t}var h=t("./defs"),u=t("./wkt"),l=t("./projString");e.exports=o},{"./defs":97,"./projString":104,"./wkt":132}],104:[function(t,e,i){var n=.017453292519943295,r=t("./constants/PrimeMeridian"),s=t("./constants/units");e.exports=function(t){var e={},i={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var e=t.split("=");e.push(!0),i[e[0].toLowerCase()]=e[1]});var a,o,h,u={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t)},lat_0:function(t){e.lat0=t*n},lat_1:function(t){e.lat1=t*n},lat_2:function(t){e.lat2=t*n},lat_ts:function(t){e.lat_ts=t*n},lon_0:function(t){e.long0=t*n},lon_1:function(t){e.long1=t*n},lon_2:function(t){e.long2=t*n},alpha:function(t){e.alpha=parseFloat(t)*n},lonc:function(t){e.longc=t*n},x_0:function(t){e.x0=parseFloat(t)},y_0:function(t){e.y0=parseFloat(t)},k_0:function(t){e.k0=parseFloat(t)},k:function(t){e.k0=parseFloat(t)},a:function(t){e.a=parseFloat(t)},b:function(t){e.b=parseFloat(t)},r_a:function(){e.R_A=!0},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=!0},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){e.to_meter=parseFloat(t)},units:function(t){e.units=t,s[t]&&(e.to_meter=s[t].to_meter)},from_greenwich:function(t){e.from_greenwich=t*n},pm:function(t){e.from_greenwich=(r[t]?r[t]:parseFloat(t))*n},nadgrids:function(t){"@null"===t?e.datumCode="none":e.nadgrids=t},axis:function(t){var i="ewnsud";3===t.length&&-1!==i.indexOf(t.substr(0,1))&&-1!==i.indexOf(t.substr(1,1))&&-1!==i.indexOf(t.substr(2,1))&&(e.axis=t)}};for(a in i)o=i[a],a in u?(h=u[a],"function"==typeof h?h(o):e[h]=o):e[a]=o;return"string"==typeof e.datumCode&&"WGS84"!==e.datumCode&&(e.datumCode=e.datumCode.toLowerCase()),e}},{"./constants/PrimeMeridian":92,"./constants/units":93}],105:[function(t,e,i){function n(t,e){var i=a.length;return t.names?(a[i]=t,t.names.forEach(function(t){s[t.toLowerCase()]=i}),this):(console.log(e),!0)}var r=[t("./projections/merc"),t("./projections/longlat")],s={},a=[];i.add=n,i.get=function(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!=typeof s[e]&&a[s[e]]?a[s[e]]:void 0},i.start=function(){r.forEach(n)}},{"./projections/longlat":117,"./projections/merc":118}],106:[function(t,e,i){var n=1e-10,r=t("../common/msfnz"),s=t("../common/qsfnz"),a=t("../common/adjust_lon"),o=t("../common/asinz");i.init=function(){Math.abs(this.lat1+this.lat2)<n||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=r(this.e3,this.sin_po,this.cos_po),this.qs1=s(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=r(this.e3,this.sin_po,this.cos_po),this.qs2=s(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=s(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>n?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},i.forward=function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=s(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*a(e-this.long0),h=r*Math.sin(o)+this.x0,u=this.rh-r*Math.cos(o)+this.y0;return t.x=h,t.y=u,t},i.inverse=function(t){var e,i,n,r,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),r=0,0!==e&&(r=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,i)),s=a(r/this.ns0+this.long0),t.x=s,t.y=o,t},i.phi1z=function(t,e){var i,r,s,a,h,u=o(.5*e);if(n>t)return u;for(var l=t*t,c=1;25>=c;c++)if(i=Math.sin(u),r=Math.cos(u),s=t*i,a=1-s*s,h=.5*a*a/r*(e/(1-l)-i/a+.5/t*Math.log((1-s)/(1+s))),u+=h,Math.abs(h)<=1e-7)return u;return null},i.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":70,"../common/asinz":71,"../common/msfnz":80,"../common/qsfnz":85}],107:[function(t,e,i){var n=t("../common/adjust_lon"),r=Math.PI/2,s=1e-10,a=t("../common/mlfn"),o=t("../common/e0fn"),h=t("../common/e1fn"),u=t("../common/e2fn"),l=t("../common/e3fn"),c=t("../common/gN"),f=t("../common/asinz"),d=t("../common/imlfn");i.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},i.forward=function(t){var e,i,f,d,p,m,y,g,v,b,x,w,_,M,E,P,S,k,C,A,I,T,L,B=t.x,j=t.y,N=Math.sin(t.y),R=Math.cos(t.y),z=n(B-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=s?(t.x=this.x0+this.a*(r-j)*Math.sin(z),t.y=this.y0-this.a*(r-j)*Math.cos(z),t):Math.abs(this.sin_p12+1)<=s?(t.x=this.x0+this.a*(r+j)*Math.sin(z),t.y=this.y0+this.a*(r+j)*Math.cos(z),t):(k=this.sin_p12*N+this.cos_p12*R*Math.cos(z),P=Math.acos(k),S=P/Math.sin(P),t.x=this.x0+this.a*S*R*Math.sin(z),t.y=this.y0+this.a*S*(this.cos_p12*N-this.sin_p12*R*Math.cos(z)),t):(e=o(this.es),i=h(this.es),f=u(this.es),d=l(this.es),Math.abs(this.sin_p12-1)<=s?(p=this.a*a(e,i,f,d,r),m=this.a*a(e,i,f,d,j),t.x=this.x0+(p-m)*Math.sin(z),t.y=this.y0-(p-m)*Math.cos(z),t):Math.abs(this.sin_p12+1)<=s?(p=this.a*a(e,i,f,d,r),m=this.a*a(e,i,f,d,j),t.x=this.x0+(p+m)*Math.sin(z),t.y=this.y0+(p+m)*Math.cos(z),t):(y=N/R,g=c(this.a,this.e,this.sin_p12),v=c(this.a,this.e,N),b=Math.atan((1-this.es)*y+this.es*g*this.sin_p12/(v*R)),x=Math.atan2(Math.sin(z),this.cos_p12*Math.tan(b)-this.sin_p12*Math.cos(z)),C=0===x?Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math.abs(Math.abs(x)-Math.PI)<=s?-Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math.asin(Math.sin(z)*Math.cos(b)/Math.sin(x)),w=this.e*this.sin_p12/Math.sqrt(1-this.es),_=this.e*this.cos_p12*Math.cos(x)/Math.sqrt(1-this.es),M=w*_,E=_*_,A=C*C,I=A*C,T=I*C,L=T*C,P=g*C*(1-A*E*(1-E)/6+I/8*M*(1-2*E)+T/120*(E*(4-7*E)-3*w*w*(1-7*E))-L/48*M),t.x=this.x0+P*Math.sin(x),t.y=this.y0+P*Math.cos(x),t))},i.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,i,p,m,y,g,v,b,x,w,_,M,E,P,S,k,C,A,I,T,L,B,j;if(this.sphere){if(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*r*this.a)return;return i=e/this.a,p=Math.sin(i),m=Math.cos(i),y=this.long0,Math.abs(e)<=s?g=this.lat0:(g=f(m*this.sin_p12+t.y*p*this.cos_p12/e),v=Math.abs(this.lat0)-r,y=n(Math.abs(v)<=s?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*p,e*this.cos_p12*m-t.y*this.sin_p12*p))),t.x=y,t.y=g,t}return b=o(this.es),x=h(this.es),w=u(this.es),_=l(this.es),Math.abs(this.sin_p12-1)<=s?(M=this.a*a(b,x,w,_,r),e=Math.sqrt(t.x*t.x+t.y*t.y),E=M-e,g=d(E/this.a,b,x,w,_),y=n(this.long0+Math.atan2(t.x,-1*t.y)),t.x=y,t.y=g,t):Math.abs(this.sin_p12+1)<=s?(M=this.a*a(b,x,w,_,r),e=Math.sqrt(t.x*t.x+t.y*t.y),E=e-M,g=d(E/this.a,b,x,w,_),y=n(this.long0+Math.atan2(t.x,t.y)),t.x=y,t.y=g,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),k=Math.atan2(t.x,t.y),P=c(this.a,this.e,this.sin_p12),C=Math.cos(k),A=this.e*this.cos_p12*C,I=-A*A/(1-this.es),T=3*this.es*(1-I)*this.sin_p12*this.cos_p12*C/(1-this.es),L=e/P,B=L-I*(1+I)*Math.pow(L,3)/6-T*(1+3*I)*Math.pow(L,4)/24,j=1-I*B*B/2-L*B*B*B/6,S=Math.asin(this.sin_p12*Math.cos(B)+this.cos_p12*Math.sin(B)*C),y=n(this.long0+Math.asin(Math.sin(k)*Math.sin(B)/Math.cos(S))),g=Math.atan((1-this.es*j*this.sin_p12/Math.sin(S))*Math.tan(S)/(1-this.es)),t.x=y,t.y=g,t)},i.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":70,"../common/asinz":71,"../common/e0fn":72,"../common/e1fn":73,"../common/e2fn":74,"../common/e3fn":75,"../common/gN":76,"../common/imlfn":77,"../common/mlfn":79}],108:[function(t,e,i){var n=t("../common/mlfn"),r=t("../common/e0fn"),s=t("../common/e1fn"),a=t("../common/e2fn"),o=t("../common/e3fn"),h=t("../common/gN"),u=t("../common/adjust_lon"),l=t("../common/adjust_lat"),c=t("../common/imlfn"),f=Math.PI/2,d=1e-10;i.init=function(){this.sphere||(this.e0=r(this.es),this.e1=s(this.es),this.e2=a(this.es),this.e3=o(this.es),this.ml0=this.a*n(this.e0,this.e1,this.e2,this.e3,this.lat0))},i.forward=function(t){var e,i,r=t.x,s=t.y;if(r=u(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(r)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(r))-this.lat0);else{var a=Math.sin(s),o=Math.cos(s),l=h(this.a,this.e,a),c=Math.tan(s)*Math.tan(s),f=r*Math.cos(s),d=f*f,p=this.es*o*o/(1-this.es),m=this.a*n(this.e0,this.e1,this.e2,this.e3,s);e=l*f*(1-d*c*(1/6-(8-c+8*p)*d/120)),i=m-this.ml0+l*a/o*d*(.5+(5-c+6*p)*d/24)}return t.x=e+this.x0,t.y=i+this.y0,t},i.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,r=t.y/this.a;if(this.sphere){var s=r+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(s))}else{var a=this.ml0/this.a+r,o=c(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-f)<=d)return t.x=this.long0,t.y=f,0>r&&(t.y*=-1),t;var p=h(this.a,this.e,Math.sin(o)),m=p*p*p/this.a/this.a*(1-this.es),y=Math.pow(Math.tan(o),2),g=n*this.a/p,v=g*g;e=o-p*Math.tan(o)/m*g*g*(.5-(1+3*y)*g*g/24),i=g*(1-v*(y/3+(1+3*y)*y*v/15))/Math.cos(o)}return t.x=u(i+this.long0),t.y=l(e),t},i.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":69,"../common/adjust_lon":70,"../common/e0fn":72,"../common/e1fn":73,"../common/e2fn":74,"../common/e3fn":75,"../common/gN":76,"../common/imlfn":77,"../common/mlfn":79}],109:[function(t,e,i){var n=t("../common/adjust_lon"),r=t("../common/qsfnz"),s=t("../common/msfnz"),a=t("../common/iqsfnz");i.init=function(){this.sphere||(this.k0=s(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},i.forward=function(t){var e,i,s=t.x,a=t.y,o=n(s-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var h=r(this.e,Math.sin(a));e=this.x0+this.a*this.k0*o,i=this.y0+this.a*h*.5/this.k0}return t.x=e,t.y=i,t},i.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,i;return this.sphere?(e=n(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=a(this.e,2*t.y*this.k0/this.a),e=n(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},i.names=["cea"]},{"../common/adjust_lon":70,"../common/iqsfnz":78,"../common/msfnz":80,"../common/qsfnz":85}],110:[function(t,e,i){var n=t("../common/adjust_lon"),r=t("../common/adjust_lat");i.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},i.forward=function(t){var e=t.x,i=t.y,s=n(e-this.long0),a=r(i-this.lat0);return t.x=this.x0+this.a*s*this.rc,t.y=this.y0+this.a*a,t},i.inverse=function(t){var e=t.x,i=t.y;return t.x=n(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=r(this.lat0+(i-this.y0)/this.a),t},i.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":69,"../common/adjust_lon":70}],111:[function(t,e,i){var n=t("../common/e0fn"),r=t("../common/e1fn"),s=t("../common/e2fn"),a=t("../common/e3fn"),o=t("../common/msfnz"),h=t("../common/mlfn"),u=t("../common/adjust_lon"),l=t("../common/adjust_lat"),c=t("../common/imlfn"),f=1e-10;i.init=function(){Math.abs(this.lat1+this.lat2)<f||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=n(this.es),this.e1=r(this.es),this.e2=s(this.es),this.e3=a(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=o(this.e,this.sinphi,this.cosphi),this.ml1=h(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<f?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=o(this.e,this.sinphi,this.cosphi),this.ml2=h(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=h(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},i.forward=function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var r=h(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-r)}var s=this.ns*u(i-this.long0),a=this.x0+e*Math.sin(s),o=this.y0+this.rh-e*Math.cos(s);return t.x=a,t.y=o,t},i.inverse=function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,i,n,r;this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(0!==i&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=u(this.long0+s/this.ns),n=l(this.g-i/this.a),t.x=r,t.y=n,t;var a=this.g-i/this.a;return n=c(a,this.e0,this.e1,this.e2,this.e3),r=u(this.long0+s/this.ns),t.x=r,t.y=n,t},i.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":69,"../common/adjust_lon":70,"../common/e0fn":72,"../common/e1fn":73,"../common/e2fn":74,"../common/e3fn":75,"../common/imlfn":77,"../common/mlfn":79,"../common/msfnz":80}],112:[function(t,e,i){var n=Math.PI/4,r=t("../common/srat"),s=Math.PI/2,a=20;i.init=function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+n)/(Math.pow(Math.tan(.5*this.lat0+n),this.C)*r(this.e*t,this.ratexp))},i.forward=function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+n),this.C)*r(this.e*Math.sin(i),this.ratexp))-s,t.x=this.C*e,t},i.inverse=function(t){for(var e=1e-14,i=t.x/this.C,o=t.y,h=Math.pow(Math.tan(.5*o+n)/this.K,1/this.C),u=a;u>0&&(o=2*Math.atan(h*r(this.e*Math.sin(t.y),-.5*this.e))-s,!(Math.abs(o-t.y)<e));--u)t.y=o;return u?(t.x=i,t.y=o,t):null},i.names=["gauss"]},{"../common/srat":87}],113:[function(t,e,i){var n=t("../common/adjust_lon"),r=1e-10,s=t("../common/asinz");i.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},i.forward=function(t){var e,i,s,a,o,h,u,l,c=t.x,f=t.y;return s=n(c-this.long0),e=Math.sin(f),i=Math.cos(f),a=Math.cos(s),h=this.sin_p14*e+this.cos_p14*i*a,o=1,h>0||Math.abs(h)<=r?(u=this.x0+this.a*o*i*Math.sin(s)/h,l=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*i*a)/h):(u=this.x0+this.infinity_dist*i*Math.sin(s),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*a)),t.x=u,t.y=l,t},i.inverse=function(t){var e,i,r,a,o,h;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(a=Math.atan2(e,this.rc),i=Math.sin(a),r=Math.cos(a),h=s(r*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i),o=n(this.long0+o)):(h=this.phic0,o=0),t.x=o,t.y=h,t},i.names=["gnom"]},{"../common/adjust_lon":70,"../common/asinz":71}],114:[function(t,e,i){var n=t("../common/adjust_lon");i.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},i.forward=function(t){var e,i,r,s,a,o,h,u=t.x,l=t.y,c=n(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),a=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(s)),o=this.n*a,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=h*Math.cos(o)/1,t.x=h*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},i.inverse=function(t){var e,i,n,r,s,a,o,h,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),r=s/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),i=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),t.x=this.long0-i/this.alfa,o=e,h=0;var l=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(h=1),o=t.y,l+=1;while(0===h&&15>l);return l>=15?null:t},i.names=["Krovak","krovak"]},{"../common/adjust_lon":70}],115:[function(t,e,i){var n=Math.PI/2,r=Math.PI/4,s=1e-10,a=t("../common/qsfnz"),o=t("../common/adjust_lon");i.S_POLE=1,i.N_POLE=2,i.EQUIT=3,i.OBLIQ=4,i.init=function(){var t=Math.abs(this.lat0);if(Math.abs(t-n)<s?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<s?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=a(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=a(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},i.forward=function(t){var e,i,h,u,l,c,f,d,p,m,y=t.x,g=t.y;if(y=o(y-this.long0),this.sphere){if(l=Math.sin(g),m=Math.cos(g),h=Math.cos(y),this.mode===this.OBLIQ||this.mode===this.EQUIT){
if(i=this.mode===this.EQUIT?1+m*h:1+this.sinph0*l+this.cosph0*m*h,s>=i)return null;i=Math.sqrt(2/i),e=i*m*Math.sin(y),i*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*m*h}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),Math.abs(g+this.phi0)<s)return null;i=r-.5*g,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),e=i*Math.sin(y),i*=h}}else{switch(f=0,d=0,p=0,h=Math.cos(y),u=Math.sin(y),l=Math.sin(g),c=a(this.e,l),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=c/this.qp,d=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:p=1+this.sinb1*f+this.cosb1*d*h;break;case this.EQUIT:p=1+d*h;break;case this.N_POLE:p=n+g,c=this.qp-c;break;case this.S_POLE:p=g-n,c=this.qp+c}if(Math.abs(p)<s)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:p=Math.sqrt(2/p),i=this.mode===this.OBLIQ?this.ymf*p*(this.cosb1*f-this.sinb1*d*h):(p=Math.sqrt(2/(1+d*h)))*f*this.ymf,e=this.xmf*p*d*u;break;case this.N_POLE:case this.S_POLE:c>=0?(e=(p=Math.sqrt(c))*u,i=h*(this.mode===this.S_POLE?p:-p)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},i.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,i,r,a,h,u,l,c=t.x/this.a,f=t.y/this.a;if(this.sphere){var d,p=0,m=0;if(d=Math.sqrt(c*c+f*f),i=.5*d,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(m=Math.sin(i),p=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=s?0:Math.asin(f*m/d),c*=m,f=p*d;break;case this.OBLIQ:i=Math.abs(d)<=s?this.phi0:Math.asin(p*this.sinph0+f*m*this.cosph0/d),c*=m*this.cosph0,f=(p-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:f=-f,i=n-i;break;case this.S_POLE:i-=n}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,f):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,f*=this.dd,u=Math.sqrt(c*c+f*f),s>u)return t.x=0,t.y=this.phi0,t;a=2*Math.asin(.5*u/this.rq),r=Math.cos(a),c*=a=Math.sin(a),this.mode===this.OBLIQ?(l=r*this.sinb1+f*a*this.cosb1/u,h=this.qp*l,f=u*this.cosb1*r-f*this.sinb1*a):(l=f*a/u,h=this.qp*l,f=u*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),h=c*c+f*f,!h)return t.x=0,t.y=this.phi0,t;l=1-h/this.qp,this.mode===this.S_POLE&&(l=-l)}e=Math.atan2(c,f),i=this.authlat(Math.asin(l),this.apa)}return t.x=o(this.long0+e),t.y=i,t},i.P00=.3333333333333333,i.P01=.17222222222222222,i.P02=.10257936507936508,i.P10=.06388888888888888,i.P11=.0664021164021164,i.P20=.016415012942191543,i.authset=function(t){var e,i=[];return i[0]=t*this.P00,e=t*t,i[0]+=e*this.P01,i[1]=e*this.P10,e*=t,i[0]+=e*this.P02,i[1]+=e*this.P11,i[2]=e*this.P20,i},i.authlat=function(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)},i.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":70,"../common/qsfnz":85}],116:[function(t,e,i){var n=1e-10,r=t("../common/msfnz"),s=t("../common/tsfnz"),a=Math.PI/2,o=t("../common/sign"),h=t("../common/adjust_lon"),u=t("../common/phi2z");i.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<n)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),a=r(this.e,e,i),o=s(this.e,this.lat1,e),h=Math.sin(this.lat2),u=Math.cos(this.lat2),l=r(this.e,h,u),c=s(this.e,this.lat2,h),f=s(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>n?this.ns=Math.log(a/l)/Math.log(o/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}},i.forward=function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=n&&(i=o(i)*(a-2*n));var r,u,l=Math.abs(Math.abs(i)-a);if(l>n)r=s(this.e,i,Math.sin(i)),u=this.a*this.f0*Math.pow(r,this.ns);else{if(l=i*this.ns,0>=l)return null;u=0}var c=this.ns*h(e-this.long0);return t.x=this.k0*(u*Math.sin(c))+this.x0,t.y=this.k0*(this.rh-u*Math.cos(c))+this.y0,t},i.inverse=function(t){var e,i,n,r,s,o=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+l*l),i=1):(e=-Math.sqrt(o*o+l*l),i=-1);var c=0;if(0!==e&&(c=Math.atan2(i*o,i*l)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),r=u(this.e,n),-9999===r)return null}else r=-a;return s=h(c/this.ns+this.long0),t.x=s,t.y=r,t},i.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":70,"../common/msfnz":80,"../common/phi2z":81,"../common/sign":86,"../common/tsfnz":89}],117:[function(t,e,i){function n(t){return t}i.init=function(){},i.forward=n,i.inverse=n,i.names=["longlat","identity"]},{}],118:[function(t,e,i){var n=t("../common/msfnz"),r=Math.PI/2,s=1e-10,a=57.29577951308232,o=t("../common/adjust_lon"),h=Math.PI/4,u=t("../common/tsfnz"),l=t("../common/phi2z");i.init=function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=n(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},i.forward=function(t){var e=t.x,i=t.y;if(i*a>90&&-90>i*a&&e*a>180&&-180>e*a)return null;var n,l;if(Math.abs(Math.abs(i)-r)<=s)return null;if(this.sphere)n=this.x0+this.a*this.k0*o(e-this.long0),l=this.y0+this.a*this.k0*Math.log(Math.tan(h+.5*i));else{var c=Math.sin(i),f=u(this.e,i,c);n=this.x0+this.a*this.k0*o(e-this.long0),l=this.y0-this.a*this.k0*Math.log(f)}return t.x=n,t.y=l,t},i.inverse=function(t){var e,i,n=t.x-this.x0,s=t.y-this.y0;if(this.sphere)i=r-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var a=Math.exp(-s/(this.a*this.k0));if(i=l(this.e,a),-9999===i)return null}return e=o(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},i.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":70,"../common/msfnz":80,"../common/phi2z":81,"../common/tsfnz":89}],119:[function(t,e,i){var n=t("../common/adjust_lon");i.init=function(){},i.forward=function(t){var e=t.x,i=t.y,r=n(e-this.long0),s=this.x0+this.a*r,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=s,t.y=a,t},i.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e=n(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},i.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":70}],120:[function(t,e,i){var n=t("../common/adjust_lon"),r=1e-10;i.init=function(){},i.forward=function(t){for(var e=t.x,i=t.y,s=n(e-this.long0),a=i,o=Math.PI*Math.sin(i),h=0;!0;h++){var u=-(a+Math.sin(a)-o)/(1+Math.cos(a));if(a+=u,Math.abs(u)<r)break}a/=2,Math.PI/2-Math.abs(i)<r&&(s=0);var l=.900316316158*this.a*s*Math.cos(a)+this.x0,c=1.4142135623731*this.a*Math.sin(a)+this.y0;return t.x=l,t.y=c,t},i.inverse=function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var r=n(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return t.x=r,t.y=s,t},i.names=["Mollweide","moll"]},{"../common/adjust_lon":70}],121:[function(t,e,i){var n=484813681109536e-20;i.iterations=1,i.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},i.forward=function(t){var e,i=t.x,r=t.y,s=r-this.lat0,a=i-this.long0,o=s/n*1e-5,h=a,u=1,l=0;for(e=1;10>=e;e++)u*=o,l+=this.A[e]*u;var c,f,d=l,p=h,m=1,y=0,g=0,v=0;for(e=1;6>=e;e++)c=m*d-y*p,f=y*d+m*p,m=c,y=f,g=g+this.B_re[e]*m-this.B_im[e]*y,v=v+this.B_im[e]*m+this.B_re[e]*y;return t.x=v*this.a+this.x0,t.y=g*this.a+this.y0,t},i.inverse=function(t){var e,i,r,s=t.x,a=t.y,o=s-this.x0,h=a-this.y0,u=h/this.a,l=o/this.a,c=1,f=0,d=0,p=0;for(e=1;6>=e;e++)i=c*u-f*l,r=f*u+c*l,c=i,f=r,d=d+this.C_re[e]*c-this.C_im[e]*f,p=p+this.C_im[e]*c+this.C_re[e]*f;for(var m=0;m<this.iterations;m++){var y,g,v=d,b=p,x=u,w=l;for(e=2;6>=e;e++)y=v*d-b*p,g=b*d+v*p,v=y,b=g,x+=(e-1)*(this.B_re[e]*v-this.B_im[e]*b),w+=(e-1)*(this.B_im[e]*v+this.B_re[e]*b);v=1,b=0;var _=this.B_re[1],M=this.B_im[1];for(e=2;6>=e;e++)y=v*d-b*p,g=b*d+v*p,v=y,b=g,_+=e*(this.B_re[e]*v-this.B_im[e]*b),M+=e*(this.B_im[e]*v+this.B_re[e]*b);var E=_*_+M*M;d=(x*_+w*M)/E,p=(w*_-x*M)/E}var P=d,S=p,k=1,C=0;for(e=1;9>=e;e++)k*=P,C+=this.D[e]*k;var A=this.lat0+C*n*1e5,I=this.long0+S;return t.x=I,t.y=A,t},i.names=["New_Zealand_Map_Grid","nzmg"]},{}],122:[function(t,e,i){var n=t("../common/tsfnz"),r=t("../common/adjust_lon"),s=t("../common/phi2z"),a=Math.PI/2,o=Math.PI/4,h=1e-10;i.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),i=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var s=n(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-i*i));1>a*a&&(a=1);var o,h;if(isNaN(this.longc)){var u=n(this.e,this.lat1,Math.sin(this.lat1)),l=n(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(s,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(s,this.bl);var c=Math.pow(u,this.bl),f=Math.pow(l,this.bl);o=this.el/c,h=.5*(o-1/o);var d=(this.el*this.el-f*c)/(this.el*this.el+f*c),p=(f-c)/(f+c),m=r(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(d*Math.tan(.5*this.bl*m)/p)/this.bl,this.long0=r(this.long0);var y=r(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*y)/h),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else o=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=o*Math.pow(s,this.bl),h=.5*(o-1/o),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(h*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},i.forward=function(t){var e,i,s,u=t.x,l=t.y,c=r(u-this.long0);if(Math.abs(Math.abs(l)-a)<=h)s=l>0?-1:1,i=this.al/this.bl*Math.log(Math.tan(o+s*this.gamma0*.5)),e=-1*s*a*this.al/this.bl;else{var f=n(this.e,l,Math.sin(l)),d=this.el/Math.pow(f,this.bl),p=.5*(d-1/d),m=.5*(d+1/d),y=Math.sin(this.bl*c),g=(p*Math.sin(this.gamma0)-y*Math.cos(this.gamma0))/m;i=Math.abs(Math.abs(g)-1)<=h?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-g)/(1+g))/this.bl,e=Math.abs(Math.cos(this.bl*c))<=h?this.al*this.bl*c:this.al*Math.atan2(p*Math.cos(this.gamma0)+y*Math.sin(this.gamma0),Math.cos(this.bl*c))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+i):(e-=this.uc,t.x=this.x0+i*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-i*Math.sin(this.alpha)),t},i.inverse=function(t){var e,i;this.no_rot?(i=t.y-this.y0,e=t.x-this.x0):(i=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var n=Math.exp(-1*this.bl*i/this.al),o=.5*(n-1/n),u=.5*(n+1/n),l=Math.sin(this.bl*e/this.al),c=(l*Math.cos(this.gamma0)+o*Math.sin(this.gamma0))/u,f=Math.pow(this.el/Math.sqrt((1+c)/(1-c)),1/this.bl);return Math.abs(c-1)<h?(t.x=this.long0,t.y=a):Math.abs(c+1)<h?(t.x=this.long0,t.y=-1*a):(t.y=s(this.e,f),t.x=r(this.long0-Math.atan2(o*Math.cos(this.gamma0)-l*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},i.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":70,"../common/phi2z":81,"../common/tsfnz":89}],123:[function(t,e,i){var n=t("../common/e0fn"),r=t("../common/e1fn"),s=t("../common/e2fn"),a=t("../common/e3fn"),o=t("../common/adjust_lon"),h=t("../common/adjust_lat"),u=t("../common/mlfn"),l=1e-10,c=t("../common/gN"),f=20;i.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=n(this.es),this.e1=r(this.es),this.e2=s(this.es),this.e3=a(this.es),this.ml0=this.a*u(this.e0,this.e1,this.e2,this.e3,this.lat0)},i.forward=function(t){var e,i,n,r=t.x,s=t.y,a=o(r-this.long0);if(n=a*Math.sin(s),this.sphere)Math.abs(s)<=l?(e=this.a*a,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(s),i=this.a*(h(s-this.lat0)+(1-Math.cos(n))/Math.tan(s)));else if(Math.abs(s)<=l)e=this.a*a,i=-1*this.ml0;else{var f=c(this.a,this.e,Math.sin(s))/Math.tan(s);e=f*Math.sin(n),i=this.a*u(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+f*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},i.inverse=function(t){var e,i,n,r,s,a,h,c,d;if(n=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=l)e=o(n/this.a+this.long0),i=0;else{a=this.lat0+r/this.a,h=n*n/this.a/this.a+a*a,c=a;var p;for(s=f;s;--s)if(p=Math.tan(c),d=-1*(a*(c*p+1)-c-.5*(c*c+h)*p)/((c-a)/p-1),c+=d,Math.abs(d)<=l){i=c;break}e=o(this.long0+Math.asin(n*Math.tan(c)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=l)i=0,e=o(this.long0+n/this.a);else{a=(this.ml0+r)/this.a,h=n*n/this.a/this.a+a*a,c=a;var m,y,g,v,b;for(s=f;s;--s)if(b=this.e*Math.sin(c),m=Math.sqrt(1-b*b)*Math.tan(c),y=this.a*u(this.e0,this.e1,this.e2,this.e3,c),g=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),v=y/this.a,d=(a*(m*v+1)-v-.5*m*(v*v+h))/(this.es*Math.sin(2*c)*(v*v+h-2*a*v)/(4*m)+(a-v)*(m*g-2/Math.sin(2*c))-g),c-=d,Math.abs(d)<=l){i=c;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=o(this.long0+Math.asin(n*m/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},i.names=["Polyconic","poly"]},{"../common/adjust_lat":69,"../common/adjust_lon":70,"../common/e0fn":72,"../common/e1fn":73,"../common/e2fn":74,"../common/e3fn":75,"../common/gN":76,"../common/mlfn":79}],124:[function(t,e,i){var n=t("../common/adjust_lon"),r=t("../common/adjust_lat"),s=t("../common/pj_enfn"),a=20,o=t("../common/pj_mlfn"),h=t("../common/pj_inv_mlfn"),u=Math.PI/2,l=1e-10,c=t("../common/asinz");i.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=s(this.es)},i.forward=function(t){var e,i,r=t.x,s=t.y;if(r=n(r-this.long0),this.sphere){if(this.m)for(var h=this.n*Math.sin(s),u=a;u;--u){var c=(this.m*s+Math.sin(s)-h)/(this.m+Math.cos(s));if(s-=c,Math.abs(c)<l)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;e=this.a*this.C_x*r*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var f=Math.sin(s),d=Math.cos(s);i=this.a*o(s,f,d,this.en),e=this.a*r*d/Math.sqrt(1-this.es*f*f)}return t.x=e,t.y=i,t},i.inverse=function(t){var e,i,s,a;return t.x-=this.x0,s=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,s/=this.C_x*(this.m+Math.cos(e)),this.m?e=c((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=c(Math.sin(e)/this.n)),s=n(s+this.long0),e=r(e)):(e=h(t.y/this.a,this.es,this.en),a=Math.abs(e),u>a?(a=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(e)),s=n(i)):u>a-l&&(s=this.long0)),t.x=s,t.y=e,t},i.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":69,"../common/adjust_lon":70,"../common/asinz":71,"../common/pj_enfn":82,"../common/pj_inv_mlfn":83,"../common/pj_mlfn":84}],125:[function(t,e,i){i.init=function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=this.rf,r=1/n,s=2*r-Math.pow(r,2),a=this.e=Math.sqrt(s);this.R=this.k0*i*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*h+this.alpha*a/2*u},i.forward=function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*a+this.x0,t},i.inverse=function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),o=this.lambda0+a/this.alpha,h=0,u=s,l=-1e3,c=0;Math.abs(u-l)>1e-7;){if(++c>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),l=u,u=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=o,t.y=u,t},i.names=["somerc"]},{}],126:[function(t,e,i){var n=Math.PI/2,r=1e-10,s=t("../common/sign"),a=t("../common/msfnz"),o=t("../common/tsfnz"),h=t("../common/phi2z"),u=t("../common/adjust_lon");i.ssfn_=function(t,e,i){return e*=i,Math.tan(.5*(n+t))*Math.pow((1-e)/(1+e),.5*i)},i.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r&&(this.k0=.5*(1+s(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=r&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r&&(this.k0=.5*this.cons*a(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/o(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=a(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-n,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},i.forward=function(t){var e,i,s,a,h,l,c=t.x,f=t.y,d=Math.sin(f),p=Math.cos(f),m=u(c-this.long0);return Math.abs(Math.abs(c-this.long0)-Math.PI)<=r&&Math.abs(f+this.lat0)<=r?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*d+this.coslat0*p*Math.cos(m)),t.x=this.a*e*p*Math.sin(m)+this.x0,t.y=this.a*e*(this.coslat0*d-this.sinlat0*p*Math.cos(m))+this.y0,t):(i=2*Math.atan(this.ssfn_(f,d,this.e))-n,a=Math.cos(i),s=Math.sin(i),Math.abs(this.coslat0)<=r?(h=o(this.e,f*this.con,this.con*d),l=2*this.a*this.k0*h/this.cons,t.x=this.x0+l*Math.sin(c-this.long0),t.y=this.y0-this.con*l*Math.cos(c-this.long0),t):(Math.abs(this.sinlat0)<r?(e=2*this.a*this.k0/(1+a*Math.cos(m)),t.y=e*s):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*a*Math.cos(m))),t.y=e*(this.cosX0*s-this.sinX0*a*Math.cos(m))+this.y0),t.x=e*a*Math.sin(m)+this.x0,t))},i.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,i,s,a,o,l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(l/(.5*this.a*this.k0));return e=this.long0,i=this.lat0,r>=l?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/l),e=u(Math.abs(this.coslat0)<r?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(c),l*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=r){if(r>=l)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,s=l*this.cons/(2*this.a*this.k0),i=this.con*h(this.e,s),e=this.con*u(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else a=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,r>=l?o=this.X0:(o=Math.asin(Math.cos(a)*this.sinX0+t.y*Math.sin(a)*this.cosX0/l),e=u(this.long0+Math.atan2(t.x*Math.sin(a),l*this.cosX0*Math.cos(a)-t.y*this.sinX0*Math.sin(a)))),i=-1*h(this.e,Math.tan(.5*(n+o)));return t.x=e,t.y=i,t},i.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},{"../common/adjust_lon":70,"../common/msfnz":80,"../common/phi2z":81,"../common/sign":86,"../common/tsfnz":89}],127:[function(t,e,i){var n=t("./gauss"),r=t("../common/adjust_lon");i.init=function(){n.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},i.forward=function(t){var e,i,s,a;return t.x=r(t.x-this.long0),n.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),s=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*s),t.x=a*i*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*i*s),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},i.inverse=function(t){var e,i,s,a,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var h=2*Math.atan2(o,this.R2);e=Math.sin(h),i=Math.cos(h),a=Math.asin(i*this.sinc0+t.y*e*this.cosc0/o),s=Math.atan2(t.x*e,o*this.cosc0*i-t.y*this.sinc0*e)}else a=this.phic0,s=0;return t.x=s,t.y=a,n.inverse.apply(this,[t]),t.x=r(t.x+this.long0),t},i.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":70,"./gauss":112}],128:[function(t,e,i){var n=t("../common/e0fn"),r=t("../common/e1fn"),s=t("../common/e2fn"),a=t("../common/e3fn"),o=t("../common/mlfn"),h=t("../common/adjust_lon"),u=Math.PI/2,l=1e-10,c=t("../common/sign"),f=t("../common/asinz");i.init=function(){this.e0=n(this.es),this.e1=r(this.es),this.e2=s(this.es),this.e3=a(this.es),this.ml0=this.a*o(this.e0,this.e1,this.e2,this.e3,this.lat0)},i.forward=function(t){var e,i,n,r=t.x,s=t.y,a=h(r-this.long0),u=Math.sin(s),l=Math.cos(s);if(this.sphere){var c=l*Math.sin(a);if(Math.abs(Math.abs(c)-1)<1e-10)return 93;i=.5*this.a*this.k0*Math.log((1+c)/(1-c)),e=Math.acos(l*Math.cos(a)/Math.sqrt(1-c*c)),0>s&&(e=-e),n=this.a*this.k0*(e-this.lat0)}else{var f=l*a,d=Math.pow(f,2),p=this.ep2*Math.pow(l,2),m=Math.tan(s),y=Math.pow(m,2);e=1-this.es*Math.pow(u,2);var g=this.a/Math.sqrt(e),v=this.a*o(this.e0,this.e1,this.e2,this.e3,s);i=this.k0*g*f*(1+d/6*(1-y+p+d/20*(5-18*y+Math.pow(y,2)+72*p-58*this.ep2)))+this.x0,n=this.k0*(v-this.ml0+g*m*(d*(.5+d/24*(5-y+9*p+4*Math.pow(p,2)+d/30*(61-58*y+Math.pow(y,2)+600*p-330*this.ep2)))))+this.y0}return t.x=i,t.y=n,t},i.inverse=function(t){var e,i,n,r,s,a,o=6;if(this.sphere){var d=Math.exp(t.x/(this.a*this.k0)),p=.5*(d-1/d),m=this.lat0+t.y/(this.a*this.k0),y=Math.cos(m);e=Math.sqrt((1-y*y)/(1+p*p)),s=f(e),0>m&&(s=-s),a=0===p&&0===y?this.long0:h(Math.atan2(p,y)+this.long0)}else{var g=t.x-this.x0,v=t.y-this.y0;for(e=(this.ml0+v/this.k0)/this.a,i=e,r=0;!0&&(n=(e+this.e1*Math.sin(2*i)-this.e2*Math.sin(4*i)+this.e3*Math.sin(6*i))/this.e0-i,i+=n,!(Math.abs(n)<=l));r++)if(r>=o)return 95;if(Math.abs(i)<u){var b=Math.sin(i),x=Math.cos(i),w=Math.tan(i),_=this.ep2*Math.pow(x,2),M=Math.pow(_,2),E=Math.pow(w,2),P=Math.pow(E,2);e=1-this.es*Math.pow(b,2);var S=this.a/Math.sqrt(e),k=S*(1-this.es)/e,C=g/(S*this.k0),A=Math.pow(C,2);s=i-S*w*A/k*(.5-A/24*(5+3*E+10*_-4*M-9*this.ep2-A/30*(61+90*E+298*_+45*P-252*this.ep2-3*M))),a=h(this.long0+C*(1-A/6*(1+2*E+_-A/20*(5-2*_+28*E-3*M+8*this.ep2+24*P)))/x)}else s=u*c(v),a=this.long0}return t.x=a,t.y=s,t},i.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":70,"../common/asinz":71,"../common/e0fn":72,"../common/e1fn":73,"../common/e2fn":74,"../common/e3fn":75,"../common/mlfn":79,"../common/sign":86}],129:[function(t,e,i){var n=.017453292519943295,r=t("./tmerc");i.dependsOn="tmerc",i.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*n,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,r.init.apply(this),this.forward=r.forward,this.inverse=r.inverse)},i.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":128}],130:[function(t,e,i){var n=t("../common/adjust_lon"),r=Math.PI/2,s=1e-10,a=t("../common/asinz");i.init=function(){this.R=this.a},i.forward=function(t){var e,i,o=t.x,h=t.y,u=n(o-this.long0);Math.abs(h)<=s&&(e=this.x0+this.R*u,i=this.y0);var l=a(2*Math.abs(h/Math.PI));(Math.abs(u)<=s||Math.abs(Math.abs(h)-r)<=s)&&(e=this.x0,i=h>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var c=.5*Math.abs(Math.PI/u-u/Math.PI),f=c*c,d=Math.sin(l),p=Math.cos(l),m=p/(d+p-1),y=m*m,g=m*(2/d-1),v=g*g,b=Math.PI*this.R*(c*(m-v)+Math.sqrt(f*(m-v)*(m-v)-(v+f)*(y-v)))/(v+f);0>u&&(b=-b),e=this.x0+b;var x=f+m;return b=Math.PI*this.R*(g*x-c*Math.sqrt((v+f)*(f+1)-x*x))/(v+f),i=h>=0?this.y0+b:this.y0-b,t.x=e,t.y=i,t},i.inverse=function(t){var e,i,r,a,o,h,u,l,c,f,d,p,m;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,r=t.x/d,a=t.y/d,o=r*r+a*a,h=-Math.abs(a)*(1+o),u=h-2*a*a+r*r,l=-2*h+1+2*a*a+o*o,m=a*a/l+(2*u*u*u/l/l/l-9*h*u/l/l)/27,c=(h-u*u/3/l)/l,f=2*Math.sqrt(-c/3),d=3*m/c/f,Math.abs(d)>1&&(d=d>=0?1:-1),p=Math.acos(d)/3,i=t.y>=0?(-f*Math.cos(p+Math.PI/3)-u/3/l)*Math.PI:-(-f*Math.cos(p+Math.PI/3)-u/3/l)*Math.PI,e=Math.abs(r)<s?this.long0:n(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-a*a)+o*o))/2/r),t.x=e,t.y=i,t},i.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":70,"../common/asinz":71}],131:[function(t,e,i){var n=.017453292519943295,r=57.29577951308232,s=1,a=2,o=t("./datum_transform"),h=t("./adjust_axis"),u=t("./Proj"),l=t("./common/toPoint");e.exports=function c(t,e,i){function f(t,e){return(t.datum.datum_type===s||t.datum.datum_type===a)&&"WGS84"!==e.datumCode}var d;return Array.isArray(i)&&(i=l(i)),t.datum&&e.datum&&(f(t,e)||f(e,t))&&(d=new u("WGS84"),c(t,d,i),t=d),"enu"!==t.axis&&h(t,!1,i),"longlat"===t.projName?(i.x*=n,i.y*=n):(t.to_meter&&(i.x*=t.to_meter,i.y*=t.to_meter),t.inverse(i)),t.from_greenwich&&(i.x+=t.from_greenwich),i=o(t.datum,e.datum,i),e.from_greenwich&&(i.x-=e.from_greenwich),"longlat"===e.projName?(i.x*=r,i.y*=r):(e.forward(i),e.to_meter&&(i.x/=e.to_meter,i.y/=e.to_meter)),"enu"!==e.axis&&h(e,!0,i),i}},{"./Proj":67,"./adjust_axis":68,"./common/toPoint":88,"./datum_transform":96}],132:[function(t,e,i){function n(t,e,i){t[e]=i.map(function(t){var e={};return r(t,e),e}).reduce(function(t,e){return u(t,e)},{})}function r(t,e){var i;return Array.isArray(t)?(i=t.shift(),"PARAMETER"===i&&(i=t.shift()),1===t.length?Array.isArray(t[0])?(e[i]={},r(t[0],e[i])):e[i]=t[0]:t.length?"TOWGS84"===i?e[i]=t:(e[i]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(i)>-1?(e[i]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(e[i].auth=t[2])):"SPHEROID"===i?(e[i]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(e[i].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(i)>-1?(t[0]=["name",t[0]],n(e,i,t)):t.every(function(t){return Array.isArray(t)})?n(e,i,t):r(t,e[i])):e[i]=!0,void 0):void(e[t]=!0)}function s(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],3===e.length&&(t[i]=e[2](t[i])))}function a(t){return t*h}function o(t){function e(e){var i=t.to_meter||1;return parseFloat(e,10)*i}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=parseFloat(t.UNIT.convert,10)*t.DATUM.SPHEROID.a):t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a);var i=function(e){return s(t,e)},n=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",a],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["alpha","azimuth",a],["srsCode","name"]];n.forEach(i),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=a(t.lat1>0?90:-90),t.lat_ts=t.lat1)}var h=.017453292519943295,u=t("./extend");e.exports=function(t,e){var i=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),n=i.shift(),s=i.shift();i.unshift(["name",s]),i.unshift(["type",n]),i.unshift("output");var a={};return r(i,a),o(a.output),u(e,a.output)}},{"./extend":99}],133:[function(t,e,i){e.exports={_args:[[{raw:"proj4@^2.3.12",scope:null,escapedName:"proj4",name:"proj4",rawSpec:"^2.3.12",spec:">=2.3.12 <3.0.0",type:"range"},"C:\\Users\\Miles.Petrov\\Repo\\geoApi"]],_from:"proj4@>=2.3.12 <3.0.0",_id:"proj4@2.3.15",_inCache:!0,_location:"/proj4",_nodeVersion:"6.1.0",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/proj4-2.3.15.tgz_1471808262546_0.6752060337457806"},_npmUser:{name:"ahocevar",email:"andreas.hocevar@gmail.com"},_npmVersion:"3.8.6",_phantomChildren:{},_requested:{raw:"proj4@^2.3.12",scope:null,escapedName:"proj4",name:"proj4",rawSpec:"^2.3.12",spec:">=2.3.12 <3.0.0",type:"range"},_requiredBy:["#DEV:/","/shpjs"],_resolved:"https://registry.npmjs.org/proj4/-/proj4-2.3.15.tgz",_shasum:"5ad06e8bca30be0ffa389a49e4565f51f06d089e",_shrinkwrap:null,_spec:"proj4@^2.3.12",_where:"C:\\Users\\Miles.Petrov\\Repo\\geoApi",author:"",bugs:{url:"https://github.com/proj4js/proj4js/issues"},contributors:[{name:"Mike Adair",email:"madair@dmsolutions.ca"},{name:"Richard Greenwood",email:"rich@greenwoodmap.com"},{name:"Calvin Metcalf",email:"calvin.metcalf@gmail.com"},{name:"Richard Marsden",url:"http://www.winwaed.com"},{name:"T. Mittan"},{name:"D. Steinwand"},{name:"S. Nelson"}],dependencies:{mgrs:"~0.0.2"},description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",devDependencies:{browserify:"~12.0.1",chai:"~1.8.1",curl:"git://github.com/cujojs/curl.git",grunt:"~0.4.2","grunt-browserify":"~4.0.1",
"grunt-cli":"~0.1.13","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0","grunt-contrib-uglify":"~0.11.1","grunt-mocha-phantomjs":"~0.4.0",istanbul:"~0.2.4",mocha:"~1.17.1",tin:"~0.4.0"},directories:{test:"test",doc:"docs"},dist:{shasum:"5ad06e8bca30be0ffa389a49e4565f51f06d089e",tarball:"https://registry.npmjs.org/proj4/-/proj4-2.3.15.tgz"},gitHead:"9fa5249c1f4183d5ddee3c4793dfd7b9f29f1886",homepage:"https://github.com/proj4js/proj4js#readme",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},license:"MIT",main:"lib/index.js",maintainers:[{name:"cwmma",email:"calvin.metcalf@gmail.com"},{name:"ahocevar",email:"andreas.hocevar@gmail.com"}],name:"proj4",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},version:"2.3.15"}},{}],134:[function(t,e,i){e.exports=function(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=e[t]||t;for(var i=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],n=0;n<i.length;n++){var r=i[n].re,s=i[n].process,a=r.exec(t);if(a){var o=s(a);this.r=o[0],this.g=o[1],this.b=o[2],o.length>3&&(this.alpha=o[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i},this.getHelpXML=function(){for(var t=new Array,n=0;n<i.length;n++)for(var r=i[n].example,s=0;s<r.length;s++)t[t.length]=r[s];for(var a in e)t[t.length]=a;var o=document.createElement("ul");o.setAttribute("id","rgbcolor-examples");for(var n=0;n<t.length;n++)try{var h=document.createElement("li"),u=new RGBColor(t[n]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),l.appendChild(document.createTextNode("test"));var c=document.createTextNode(" "+t[n]+" -> "+u.toRGB()+" -> "+u.toHex());h.appendChild(l),h.appendChild(c),o.appendChild(h)}catch(f){}return o}}},{}],135:[function(t,e,i){function n(t,e){return a(t,e).val}function r(t){return s(t.lat,"lat")+" "+s(t.lon,"lon")}function s(t,e){var i={lat:["N","S"],lon:["E","W"]}[e]||"",n=i[t>=0?0:1],r=Math.abs(t),s=Math.floor(r),a=r-s,o=60*a,h=Math.floor(o),u=Math.floor(60*(o-h));return s+"° "+(h?h+"' ":"")+(u?u+'" ':"")+n}function a(t,e,i){if(e||(e="NSEW"),"string"!=typeof t)return{val:null,regex:i};i=i||/[\s\,]*([\-|\—|\―]?[0-9.]+)°? *(?:([0-9.]+)['’′‘] *)?(?:([0-9.]+)(?:''|"|”|″) *)?([NSEW])?/gi;var n=i.exec(t);return n?n[4]&&-1===e.indexOf(n[4])?{val:null,regex:i}:{val:((n[1]?parseFloat(n[1]):0)+(n[2]?parseFloat(n[2])/60:0)+(n[3]?parseFloat(n[3])/3600:0))*(n[4]&&"S"===n[4]||"W"===n[4]?-1:1),regex:i,raw:n[0],dim:n[4]}:{val:null,regex:i}}function o(t,e){t=t.trim();var i=a(t,e);if(null===i.val)return null;var n=a(t,e,i.regex);return null===n.val?null:i.raw+n.raw!==t?null:i.dim?h(i.val,n.val,i.dim):[i.val,n.val]}function h(t,e,i){return"N"==i||"S"==i?[t,e]:"W"==i||"E"==i?[e,t]:void 0}e.exports=n,e.exports.pair=o,e.exports.format=s,e.exports.formatPair=r},{}],136:[function(t,e,i){"use strict";function n(t){return new r(function(e,i){var n=t.slice(-3),r=new XMLHttpRequest;r.open("GET",t,!0),"prj"!==n&&(r.responseType="arraybuffer"),r.addEventListener("load",function(){return r.status>399?"prj"===n?e(!1):i(new Error(r.status)):void e(r.response)},!1),r.send()})}var r=t("lie");e.exports=n},{lie:53}],137:[function(t,e,i){(function(i){"use strict";function n(t,e){return"string"==typeof t&&d.has(t)?c.resolve(d.get(t)):n.getShapefile(t,e).then(function(e){return"string"==typeof t&&d.set(t,e),e})}function r(t,e){return o(t).then(function(t){return n.parseZip(t,e)})}var s=t("proj4"),a=t("./unzip"),o=t("./binaryajax"),h=t("./parseShp"),u=t("./toArrayBuffer"),l=t("parsedbf"),c=t("lie"),f=t("lru-cache"),d=new f({max:20});n.combine=function(t){var e={};e.type="FeatureCollection",e.features=[];for(var i=0,n=t[0].length;n>i;)e.features.push({type:"Feature",geometry:t[0][i],properties:t[1][i]}),i++;return e},n.parseZip=function(t,e){var i,r=a(t),o=[];e=e||[];for(i in r)-1===i.indexOf("__MACOSX")&&("shp"===i.slice(-3).toLowerCase()?o.push(i.slice(0,-4)):"dbf"===i.slice(-3).toLowerCase()?r[i.slice(0,-3)+i.slice(-3).toLowerCase()]=l(r[i]):"prj"===i.slice(-3).toLowerCase()?r[i.slice(0,-3)+i.slice(-3).toLowerCase()]=s(r[i]):("json"===i.slice(-4).toLowerCase()||e.indexOf(i.split(".").pop())>-1)&&o.push(i.slice(0,-3)+i.slice(-3).toLowerCase()));if(!o.length)throw new Error("no layers founds");var u=o.map(function(t){var i;return"json"===t.slice(-4).toLowerCase()?(i=JSON.parse(r[t]),i.fileName=t.slice(0,t.lastIndexOf("."))):e.indexOf(t.slice(t.lastIndexOf(".")+1))>-1?(i=r[t],i.fileName=t):(i=n.combine([h(r[t+".shp"],r[t+".prj"]),r[t+".dbf"]]),i.fileName=t),i});return 1===u.length?u[0]:u},n.getShapefile=function(t,e){return"string"==typeof t?".zip"===t.slice(-4)?r(t,e):c.all([c.all([o(t+".shp"),o(t+".prj")]).then(function(t){return h(t[0],t[1]?s(t[1]):!1)}),o(t+".dbf").then(l)]).then(n.combine):new c(function(e){e(n.parseZip(t))})},n.parseShp=function(t,e){return i.isBuffer(t)&&(t=u(t)),i.isBuffer(e)&&(e=e.toString()),"string"==typeof e?(e=s(e),h(t,e)):h(t)},n.parseDbf=function(t){return i.isBuffer(t)&&(t=u(t)),l(t)},e.exports=n}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":9,"./binaryajax":136,"./parseShp":138,"./toArrayBuffer":139,"./unzip":140,lie:53,"lru-cache":63,parsedbf:65,proj4:102}],138:[function(t,e,i){"use strict";function n(t){for(var e,i,n=0,r=1,s=t.length;s>r;)e=i||t[0],i=t[r],n+=(i[0]-e[0])*(i[1]+e[1]),r++;return n>0}function r(t,e){return n(e)||!t.length?t.push([e]):t[t.length-1].push(e),t}function s(t){return t?function(e,i){return t.inverse([e.getFloat64(i,!0),e.getFloat64(i+8,!0)])}:function(t,e){return[t.getFloat64(e,!0),t.getFloat64(e+8,!0)]}}function a(t,e){return this instanceof a?(this.buffer=t,this.shpFuncs(e),void(this.rows=this.getRows())):new a(t,e)}a.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}},a.prototype.parseZPoint=function(t){var e=this.parsePoint(t);return e.coordinates.push(this.parseCoord(t,16)),e},a.prototype.parsePointArray=function(t,e,i){for(var n=[],r=0;i>r;)n.push(this.parseCoord(t,e)),e+=16,r++;return n},a.prototype.parseZPointArray=function(t,e,i,n){for(var r=0;i>r;)n[r].push(t.getFloat64(e,!0)),r++,e+=8;return n},a.prototype.parseArrayGroup=function(t,e,i,n,r){for(var s,a,o=[],h=0,u=0;n>h;)h++,i+=4,s=u,u=h===n?r:t.getInt32(i,!0),a=u-s,a&&(o.push(this.parsePointArray(t,e,a)),e+=a<<4);return o},a.prototype.parseZArrayGroup=function(t,e,i,n){for(var r=0;i>r;)n[r]=this.parseZPointArray(t,e,n[r].length,n[r]),e+=n[r].length<<3,r++;return n},a.prototype.parseMultiPoint=function(t){var e={},i=this.parseCoord(t,0),n=this.parseCoord(t,16);e.bbox=[i[0],i[1],n[0],n[1]];var r=t.getInt32(32,!0),s=36;return 1===r?(e.type="Point",e.coordinates=this.parseCoord(t,s)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,s,r)),e},a.prototype.parseZMultiPoint=function(t){var e,i=this.parseMultiPoint(t);if("Point"===i.type)return i.coordinates.push(t.getFloat64(72,!0)),i;e=i.coordinates.length;var n=56+(e<<4);return i.coordinates=this.parseZPointArray(t,n,e,i.coordinates),i},a.prototype.parsePolyline=function(t){var e={},i=this.parseCoord(t,0),n=this.parseCoord(t,16);e.bbox=[i[0],i[1],n[0],n[1]];var r,s,a=t.getInt32(32,!0),o=t.getInt32(36,!0);return 1===a?(e.type="LineString",r=44,e.coordinates=this.parsePointArray(t,r,o)):(e.type="MultiLineString",r=40+(a<<2),s=40,e.coordinates=this.parseArrayGroup(t,r,s,a,o)),e},a.prototype.parseZPolyline=function(t){var e=this.parsePolyline(t),i=e.coordinates.length,n=60+(i<<4);return"LineString"===e.type?(e.coordinates=this.parseZPointArray(t,n,i,e.coordinates),e):(e.coordinates=this.parseZArrayGroup(t,n,i,e.coordinates),e)},a.prototype.polyFuncs=function(t){return"LineString"===t.type?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=t.coordinates.reduce(r,[]),1===t.coordinates.length?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t))},a.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))},a.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};var o={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};a.prototype.shpFuncs=function(t){var e=this.getShpCode();if(e>20&&(e-=20),!(e in o))throw new Error("I don't know that shp type");this.parseFunc=this[o[e]],this.parseCoord=s(t)},a.prototype.getShpCode=function(){return this.parseHeader().shpCode},a.prototype.parseHeader=function(){var t=new DataView(this.buffer,0,100);return{length:t.getInt32(24,!1),version:t.getInt32(28,!0),shpCode:t.getInt32(32,!0),bbox:[t.getFloat64(36,!0),t.getFloat64(44,!0),t.getFloat64(52,!0),t.getFloat64(52,!0)]}},a.prototype.getRows=function(){for(var t,e=100,i=this.buffer.byteLength,n=[];i>e;)t=this.getRow(e),e+=8,e+=t.len,t.type&&n.push(this.parseFunc(t.data));return n},a.prototype.getRow=function(t){var e=new DataView(this.buffer,t,12),i=e.getInt32(4,!1)<<1,n=new DataView(this.buffer,t+12,i-4);return{id:e.getInt32(0,!1),len:i,data:n,type:e.getInt32(8,!0)}},e.exports=function(t,e){return new a(t,e).rows}},{}],139:[function(t,e,i){"use strict";function n(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=-1,r=t.length;++n<r;)i[n]=t[n];return e}e.exports=n},{}],140:[function(t,e,i){"use strict";var n=t("jszip");e.exports=function(t){var e=new n(t),i=e.file(/.+/),r={};return i.forEach(function(t){"shp"===t.name.slice(-3).toLowerCase()||"dbf"===t.name.slice(-3).toLowerCase()?(r[t.name]=t.asText(),r[t.name]=t.asArrayBuffer()):r[t.name]=t.asText()}),r}},{jszip:19}],141:[function(t,e,i){function n(t,e,i,n){if(!(isNaN(n)||1>n)){n|=0;var o,h,u,l,c,f,d,p,m,y,g,v,b,x,w,_,M,E,P,S,k,C,A,I,T=n+n+1,L=e-1,B=i-1,j=n+1,N=j*(j+1)/2,R=new r,z=R;for(u=1;T>u;u++)if(z=z.next=new r,u==j)var O=z;z.next=R;var D=null,F=null;d=f=0;var U=s[n],G=a[n];for(h=0;i>h;h++){for(_=M=E=P=p=m=y=g=0,v=j*(S=t[f]),b=j*(k=t[f+1]),x=j*(C=t[f+2]),w=j*(A=t[f+3]),p+=N*S,m+=N*k,y+=N*C,g+=N*A,z=R,u=0;j>u;u++)z.r=S,z.g=k,z.b=C,z.a=A,z=z.next;for(u=1;j>u;u++)l=f+((u>L?L:u)<<2),p+=(z.r=S=t[l])*(I=j-u),m+=(z.g=k=t[l+1])*I,y+=(z.b=C=t[l+2])*I,g+=(z.a=A=t[l+3])*I,_+=S,M+=k,E+=C,P+=A,z=z.next;for(D=R,F=O,o=0;e>o;o++)t[f+3]=A=g*U>>G,0!=A?(A=255/A,t[f]=(p*U>>G)*A,t[f+1]=(m*U>>G)*A,t[f+2]=(y*U>>G)*A):t[f]=t[f+1]=t[f+2]=0,p-=v,m-=b,y-=x,g-=w,v-=D.r,b-=D.g,x-=D.b,w-=D.a,l=d+((l=o+n+1)<L?l:L)<<2,_+=D.r=t[l],M+=D.g=t[l+1],E+=D.b=t[l+2],P+=D.a=t[l+3],p+=_,m+=M,y+=E,g+=P,D=D.next,v+=S=F.r,b+=k=F.g,x+=C=F.b,w+=A=F.a,_-=S,M-=k,E-=C,P-=A,F=F.next,f+=4;d+=e}for(o=0;e>o;o++){for(M=E=P=_=m=y=g=p=0,f=o<<2,v=j*(S=t[f]),b=j*(k=t[f+1]),x=j*(C=t[f+2]),w=j*(A=t[f+3]),p+=N*S,m+=N*k,y+=N*C,g+=N*A,z=R,u=0;j>u;u++)z.r=S,z.g=k,z.b=C,z.a=A,z=z.next;for(c=e,u=1;n>=u;u++)f=c+o<<2,p+=(z.r=S=t[f])*(I=j-u),m+=(z.g=k=t[f+1])*I,y+=(z.b=C=t[f+2])*I,g+=(z.a=A=t[f+3])*I,_+=S,M+=k,E+=C,P+=A,z=z.next,B>u&&(c+=e);for(f=o,D=R,F=O,h=0;i>h;h++)l=f<<2,t[l+3]=A=g*U>>G,A>0?(A=255/A,t[l]=(p*U>>G)*A,t[l+1]=(m*U>>G)*A,t[l+2]=(y*U>>G)*A):t[l]=t[l+1]=t[l+2]=0,p-=v,m-=b,y-=x,g-=w,v-=D.r,b-=D.g,x-=D.b,w-=D.a,l=o+((l=h+j)<B?l:B)*e<<2,p+=_+=D.r=t[l],m+=M+=D.g=t[l+1],y+=E+=D.b=t[l+2],g+=P+=D.a=t[l+3],D=D.next,v+=S=F.r,b+=k=F.g,x+=C=F.b,w+=A=F.a,_-=S,M-=k,E-=C,P-=A,F=F.next,f+=e}}}function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.exports=n},{}],142:[function(e,i,n){!function(e,r){"function"==typeof t&&t.amd?t(function(){return r(e,e.document)}):"object"==typeof n?i.exports=e.document?r(e,e.document):function(t){return r(t,t.document)}:e.SVG=r(e,e.document)}("undefined"!=typeof window?window:this,function(t,e){function i(t,e){return t instanceof e}function n(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}function r(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t){return 4==t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}function o(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function h(t,e,i){if(null==e||null==i){var n=t.bbox();null==e?e=n.width/n.height*i:null==i&&(i=n.height/n.width*e)}return{width:e,height:i}}function u(t,e,i){return{x:e*t.a+i*t.c+0,y:e*t.b+i*t.d+0}}function l(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function c(t){return t instanceof v.Matrix||(t=new v.Matrix(t)),t}function f(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function d(t){return t=t.replace(v.regex.whitespace,"").replace(v.regex.matrix,"").split(v.regex.matrixElements),l(v.utils.map(t,function(t){return parseFloat(t)}))}function p(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e][0],null!=t[e][1]&&(n+=t[e][1],null!=t[e][2]&&(n+=" ",n+=t[e][2],null!=t[e][3]&&(n+=" ",n+=t[e][3],n+=" ",n+=t[e][4],null!=t[e][5]&&(n+=" ",n+=t[e][5],n+=" ",n+=t[e][6],null!=t[e][7]&&(n+=" ",n+=t[e][7])))));return n+" "}function m(t){for(var e=t.childNodes.length-1;e>=0;e--)t.childNodes[e]instanceof SVGElement&&m(t.childNodes[e]);return v.adopt(t).id(v.eid(t.nodeName))}function y(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function g(t){var e=t.toString().match(v.regex.reference);return e?e[1]:void 0}var v=this.SVG=function(t){return v.supported?(t=new v.Doc(t),v.parser.draw||v.prepare(),t):void 0};if(v.ns="http://www.w3.org/2000/svg",v.xmlns="http://www.w3.org/2000/xmlns/",v.xlink="http://www.w3.org/1999/xlink",v.svgjs="http://svgjs.com/svgjs",v.supported=function(){return!!e.createElementNS&&!!e.createElementNS(v.ns,"svg").createSVGRect}(),!v.supported)return!1;v.did=1e3,v.eid=function(t){return"Svgjs"+s(t)+v.did++},v.create=function(t){var i=e.createElementNS(this.ns,t);return i.setAttribute("id",this.eid(t)),i},v.extend=function(){var t,e,i,n;for(t=[].slice.call(arguments),e=t.pop(),n=t.length-1;n>=0;n--)if(t[n])for(i in e)t[n].prototype[i]=e[i];v.Set&&v.Set.inherit&&v.Set.inherit()},v.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,v.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&v.extend(e,t.extend),t.construct&&v.extend(t.parent||v.Container,t.construct),e},v.adopt=function(t){if(!t)return null;if(t.instance)return t.instance;var e;return e="svg"==t.nodeName?t.parentNode instanceof SVGElement?new v.Nested:new v.Doc:"linearGradient"==t.nodeName?new v.Gradient("linear"):"radialGradient"==t.nodeName?new v.Gradient("radial"):v[s(t.nodeName)]?new(v[s(t.nodeName)]):new v.Element(t),e.type=t.nodeName,e.node=t,t.instance=e,e instanceof v.Doc&&e.namespace().defs(),e.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),e},v.prepare=function(){var t=e.getElementsByTagName("body")[0],i=(t?new v.Doc(t):new v.Doc(e.documentElement).nested()).size(2,0);v.parser={body:t||e.documentElement,draw:i.style("opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),poly:i.polyline().node,path:i.path().node,"native":v.create("svg")}},v.parser={"native":v.create("svg")},e.addEventListener("DOMContentLoaded",function(){v.parser.draw||v.prepare()},!1),v.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,matrix:/matrix\(|\)/g,matrixElements:/,*\s+|,/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,negExp:/e\-/gi,comma:/,/g,hyphen:/\-/g,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,whitespaces:/\s+/,X:/X/g},v.utils={map:function(t,e){var i,n=t.length,r=[];for(i=0;n>i;i++)r.push(e(t[i]));return r},filter:function(t,e){var i,n=t.length,r=[];for(i=0;n>i;i++)e(t[i])&&r.push(t[i]);return r},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(t){return this.filter(t,function(t){return t instanceof SVGElement})}},v.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},v.Color=function(t){var e;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?v.regex.isRgb.test(t)?(e=v.regex.rgb.exec(t.replace(/\s/g,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):v.regex.isHex.test(t)&&(e=v.regex.hex.exec(a(t)),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},v.extend(v.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+o(this.r)+o(this.g)+o(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new v.Color(t),this},at:function(t){return this.destination?(t=0>t?0:t>1?1:t,new v.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),v.Color.test=function(t){return t+="",v.regex.isHex.test(t)||v.regex.isRgb.test(t)},v.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},v.Color.isColor=function(t){return v.Color.isRgb(t)||v.Color.test(t)},v.Array=function(t,e){t=(t||[]).valueOf(),0==t.length&&e&&(t=e.valueOf()),this.value=this.parse(t)},v.extend(v.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],i=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(i);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,i=[];e>t;t++)-1==i.indexOf(this.value[t])&&i.push(this.value[t]);return this.value=i},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,n=[];i>e;e++)n.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new v.Array(n)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(/\s+/)},reverse:function(){return this.value.reverse(),this}}),v.PointArray=function(t,e){this.constructor.call(this,t,e||[[0,0]])},v.PointArray.prototype=new v.Array,v.extend(v.PointArray,{toString:function(){for(var t=0,e=this.value.length,i=[];e>t;t++)i.push(this.value[t].join(","));return i.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,n=[];i>e;e++)n.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new v.PointArray(n)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t))return t;t=t.trim().split(/\s+|,/),t.length%2!==0&&t.pop();for(var i=0,n=t.length;n>i;i+=2)e.push([parseFloat(t[i]),parseFloat(t[i+1])]);return e},move:function(t,e){var i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(var n=this.value.length-1;n>=0;n--)this.value[n]=[this.value[n][0]+t,this.value[n][1]+e];return this},size:function(t,e){var i,n=this.bbox();for(i=this.value.length-1;i>=0;i--)this.value[i][0]=(this.value[i][0]-n.x)*t/n.width+n.x,this.value[i][1]=(this.value[i][1]-n.y)*e/n.height+n.y;return this},bbox:function(){return v.parser.poly.setAttribute("points",this.toString()),v.parser.poly.getBBox()}}),v.PathArray=function(t,e){this.constructor.call(this,t,e||[["M",0,0]])},v.PathArray.prototype=new v.Array,v.extend(v.PathArray,{toString:function(){return p(this.value)},move:function(t,e){var i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(var n,r=this.value.length-1;r>=0;r--)n=this.value[r][0],"M"==n||"L"==n||"T"==n?(this.value[r][1]+=t,this.value[r][2]+=e):"H"==n?this.value[r][1]+=t:"V"==n?this.value[r][1]+=e:"C"==n||"S"==n||"Q"==n?(this.value[r][1]+=t,this.value[r][2]+=e,this.value[r][3]+=t,this.value[r][4]+=e,"C"==n&&(this.value[r][5]+=t,this.value[r][6]+=e)):"A"==n&&(this.value[r][6]+=t,this.value[r][7]+=e);return this},size:function(t,e){var i,n,r=this.bbox();for(i=this.value.length-1;i>=0;i--)n=this.value[i][0],"M"==n||"L"==n||"T"==n?(this.value[i][1]=(this.value[i][1]-r.x)*t/r.width+r.x,this.value[i][2]=(this.value[i][2]-r.y)*e/r.height+r.y):"H"==n?this.value[i][1]=(this.value[i][1]-r.x)*t/r.width+r.x:"V"==n?this.value[i][1]=(this.value[i][1]-r.y)*e/r.height+r.y:"C"==n||"S"==n||"Q"==n?(this.value[i][1]=(this.value[i][1]-r.x)*t/r.width+r.x,this.value[i][2]=(this.value[i][2]-r.y)*e/r.height+r.y,this.value[i][3]=(this.value[i][3]-r.x)*t/r.width+r.x,this.value[i][4]=(this.value[i][4]-r.y)*e/r.height+r.y,"C"==n&&(this.value[i][5]=(this.value[i][5]-r.x)*t/r.width+r.x,this.value[i][6]=(this.value[i][6]-r.y)*e/r.height+r.y)):"A"==n&&(this.value[i][1]=this.value[i][1]*t/r.width,this.value[i][2]=this.value[i][2]*e/r.height,this.value[i][6]=(this.value[i][6]-r.x)*t/r.width+r.x,this.value[i][7]=(this.value[i][7]-r.y)*e/r.height+r.y);return this},equalCommands:function(t){var e,i,n;for(t=new v.PathArray(t),n=this.value.length===t.value.length,e=0,i=this.value.length;n&&i>e;e++)n=this.value[e][0]===t.value[e][0];return n},morph:function(t){return t=new v.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,i,n,r,s=this.value,a=this.destination.value,o=[],h=new v.PathArray;for(e=0,i=s.length;i>e;e++){for(o[e]=[s[e][0]],n=1,r=s[e].length;r>n;n++)o[e][n]=s[e][n]+(a[e][n]-s[e][n])*t;"A"===o[e][0]&&(o[e][4]=+(0!=o[e][4]),o[e][5]=+(0!=o[e][5]))}return h.value=o,h},parse:function(t){if(t instanceof v.PathArray)return t.valueOf();var e,i,n,r,s,a,o=0,h=0,u={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7};if("string"==typeof t){for(t=t.replace(v.regex.negExp,"X").replace(v.regex.pathLetters," $& ").replace(v.regex.hyphen," -").replace(v.regex.comma," ").replace(v.regex.X,"e-").trim().split(v.regex.whitespaces),e=t.length;--e;)if(t[e].indexOf(".")!=t[e].lastIndexOf(".")){var l=t[e].split("."),c=[l.shift(),l.shift()].join(".");t.splice.apply(t,[e,1].concat(c,l.map(function(t){return"."+t})))}}else t=t.reduce(function(t,e){return[].concat.apply(t,e)},[]);var a=[];do{for(v.regex.isPathLetter.test(t[0])?(r=t[0],t.shift()):"M"==r?r="L":"m"==r&&(r="l"),s=[r.toUpperCase()],e=0;e<u[s[0]];++e)s.push(parseFloat(t.shift()));r==s[0]?"M"==r||"L"==r||"C"==r||"Q"==r||"S"==r||"T"==r?(o=s[u[s[0]]-1],h=s[u[s[0]]]):"V"==r?h=s[1]:"H"==r?o=s[1]:"A"==r&&(o=s[6],h=s[7]):"m"==r||"l"==r||"c"==r||"s"==r||"q"==r||"t"==r?(s[1]+=o,s[2]+=h,null!=s[3]&&(s[3]+=o,s[4]+=h),null!=s[5]&&(s[5]+=o,s[6]+=h),o=s[u[s[0]]-1],h=s[u[s[0]]]):"v"==r?(s[1]+=h,h=s[1]):"h"==r?(s[1]+=o,o=s[1]):"a"==r&&(s[6]+=o,s[7]+=h,o=s[6],h=s[7]),"M"==s[0]&&(i=o,n=h),"Z"==s[0]&&(o=i,h=n),a.push(s)}while(t.length);return a},bbox:function(){return v.parser.path.setAttribute("d",this.toString()),v.parser.path.getBBox()}}),v.Number=v.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:0>t?-3.4e38:3.4e38:"string"==typeof t?(e=t.match(v.regex.numberAndUnit),e&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5])):t instanceof v.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return new v.Number(this+new v.Number(t),this.unit)},minus:function(t){return this.plus(-new v.Number(t))},times:function(t){return new v.Number(this*new v.Number(t),this.unit)},divide:function(t){return new v.Number(this/new v.Number(t),this.unit)},to:function(t){var e=new v.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new v.Number(t),this},at:function(t){return this.destination?new v.Number(this.destination).minus(this).times(t).plus(this):this}}}),v.Element=v.invent({create:function(t){this._stroke=v.defaults.attrs.stroke,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var i=h(this,t,e);return this.width(new v.Number(i.width)).height(new v.Number(i.height))},clone:function(t){var e=m(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var i=this.bbox();return t>i.x&&e>i.y&&t<i.x+i.width&&e<i.y+i.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(/\s+/)},hasClass:function(t){return-1!=this.classes().indexOf(t);
},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return v.get(this.attr(t))},parent:function(t){var e=this;if(!e.node.parentNode)return null;if(e=v.adopt(e.node.parentNode),!t)return e;for(;e&&e.node instanceof SVGElement;){if("string"==typeof t?e.matches(t):e instanceof t)return e;e=v.adopt(e.node.parentNode)}},doc:function(){return this instanceof v.Doc?this:this.parent(v.Doc)},parents:function(t){var e=[],i=this;do{if(i=i.parent(t),!i||!i.node)break;e.push(i)}while(i.parent);return e},matches:function(t){return n(this.node,t)},"native":function(){return this.node},svg:function(t){var i=e.createElement("svg");if(!(t&&this instanceof v.Parent))return i.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),i.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");i.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var n=0,r=i.firstChild.childNodes.length;r>n;n++)this.node.appendChild(i.firstChild.firstChild);return this},writeDataToDom:function(){if(this.each||this.lines){var t=this.each?this:this.lines();t.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return i(this,t)}}}),v.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return-Math.cos(t*Math.PI/2)+1}},v.morph=function(t){return function(e,i){return new v.MorphObj(e,i).at(t)}},v.Situation=v.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new v.Number(t.duration).valueOf(),this.delay=new v.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),v.FX=v.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,i){"object"==typeof t&&(e=t.ease,i=t.delay,t=t.duration);var n=new v.Situation({duration:t||1e3,delay:i||0,ease:v.easing[e||"-"]||e});return this.queue(n),this},delay:function(t){var e=new v.Situation({duration:t,delay:0,ease:v.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof v.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof v.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.situation&&this.situation.stop&&this.situation.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof v.Situation?this.startCurrent():this.situation.call(this)),this},initAnimations:function(){var t,e=this.situation;if(e.init)return this;for(t in e.animations)"viewbox"==t?e.animations[t]=this.target().viewbox().morph(e.animations[t]):(e.animations[t].value="plot"==t?this.target().array().value:this.target()[t](),e.animations[t].value.value&&(e.animations[t].value=e.animations[t].value.value),e.animations[t].relative&&(e.animations[t].destination.value=e.animations[t].destination.value+e.animations[t].value));for(t in e.attrs)if(e.attrs[t]instanceof v.Color){var i=new v.Color(this.target().attr(t));e.attrs[t].r=i.r,e.attrs[t].g=i.g,e.attrs[t].b=i.b}else e.attrs[t].value=this.target().attr(t);for(t in e.styles)e.styles[t].value=this.target().style(t);return e.initialTransformation=this.target().matrixify(),e.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){return this.active||this.start(),e&&this.clearQueue(),this.active=!1,t&&this.situation&&this.atEnd(),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0?this.at(this.situation.loop+1,!0):"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var i=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*i,this.situation.finish=this.situation.start+i,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var i=this.last();return i.loops=null!=t?t:!0,i.loop=0,e&&(i.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return"undefined"==typeof t?e.reversed=!e.reversed:e.reversed=t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var e=this.last(),i=function n(i){i.detail.situation==e&&(t.call(this,e),this.off("finished.fx",n))};return this.target().on("finished.fx",i),this},during:function(t){var e=this.last(),i=function(i){i.detail.situation==e&&t.call(this,i.detail.pos,v.morph(i.detail.pos),i.detail.eased,e)};return this.target().off("during.fx",i).on("during.fx",i),this.after(function(){this.off("during.fx",i)})},afterAll:function(t){var e=function i(e){t.call(this),this.off("allfinished.fx",i)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this},duringAll:function(t){var e=function(e){t.call(this,e.detail.pos,v.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",e).on("during.fx",e),this.afterAll(function(){this.off("during.fx",e)})},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,i){return this.last()[i||"animations"][t]=e,setTimeout(function(){this.start()}.bind(this),0),this},step:function(t){if(t||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var e,i,n;e=Math.max(this.absPos,0),i=Math.floor(e),this.situation.loops===!0||i<this.situation.loops?(this.pos=e-i,n=this.situation.loop,this.situation.loop=i):(this.absPos=this.situation.loops,this.pos=1,n=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-n)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var s in this.situation.once)s>this.lastPos&&r>=s&&(this.situation.once[s].call(this.target(),this.pos,r),delete this.situation.once[s]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.target().off(".fx"),this.active=!1),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var t,e,i=this,n=this.target(),r=this.situation;for(t in r.animations)e=[].concat(r.animations[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(r.ease(i.pos),i.pos):t}),n[t].apply(n,e);for(t in r.attrs)e=[t].concat(r.attrs[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(r.ease(i.pos),i.pos):t}),n.attr.apply(n,e);for(t in r.styles)e=[t].concat(r.styles[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(r.ease(i.pos),i.pos):t}),n.style.apply(n,e);if(r.transforms.length){for(e=r.initialTransformation,t=0,len=r.transforms.length;t<len;t++){var s=r.transforms[t];s instanceof v.Matrix?e=s.relative?e.multiply((new v.Matrix).morph(s).at(r.ease(this.pos))):e.morph(s).at(r.ease(this.pos)):(s.relative||s.undo(e.extract()),e=e.multiply(s.at(r.ease(this.pos))))}n.matrix(e)}return this},once:function(t,e,i){return i||(t=this.situation.ease(t)),this.situation.once[t]=e,this}},parent:v.Element,construct:{animate:function(t,e,i){return(this.fx||(this.fx=new v.FX(this))).animate(t,e,i)},delay:function(t){return(this.fx||(this.fx=new v.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),v.MorphObj=v.invent({create:function(t,e){return v.Color.isColor(e)?new v.Color(t).morph(e):v.regex.numberAndUnit.test(e)?new v.Number(t).morph(e):(this.value=0,void(this.destination=e))},extend:{at:function(t,e){return 1>e?this.value:this.destination},valueOf:function(){return this.value}}}),v.extend(v.FX,{attr:function(t,e,i){if("object"==typeof t)for(var n in t)this.attr(n,t[n]);else this.add(t,new v.MorphObj(null,e),"attrs");return this},style:function(t,e){if("object"==typeof t)for(var i in t)this.style(i,t[i]);else this.add(t,new v.MorphObj(null,e),"styles");return this},x:function(t,e){if(this.target()instanceof v.G)return this.transform({x:t},e),this;var i=(new v.Number).morph(t);return i.relative=e,this.add("x",i)},y:function(t,e){if(this.target()instanceof v.G)return this.transform({y:t},e),this;var i=(new v.Number).morph(t);return i.relative=e,this.add("y",i)},cx:function(t){return this.add("cx",(new v.Number).morph(t))},cy:function(t){return this.add("cy",(new v.Number).morph(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){if(this.target()instanceof v.Text)this.attr("font-size",t);else{var i;t&&e||(i=this.target().bbox()),t||(t=i.width/i.height*e),e||(e=i.height/i.width*t),this.add("width",(new v.Number).morph(t)).add("height",(new v.Number).morph(e))}return this},plot:function(t){return this.add("plot",this.target().array().morph(t))},leading:function(t){return this.target().leading?this.add("leading",(new v.Number).morph(t)):this},viewbox:function(t,e,i,n){return this.target()instanceof v.Container&&this.add("viewbox",new v.ViewBox(t,e,i,n)),this},update:function(t){if(this.target()instanceof v.Stop){if("number"==typeof t||t instanceof v.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),v.BBox=v.invent({create:function(t){if(t){var i;try{if(!e.documentElement.contains(t.node))throw new Exception("Element not in the dom");i=t.node.getBBox()}catch(n){if(t instanceof v.Shape){var r=t.clone(v.parser.draw).show();i=r.bbox(),r.remove()}else i={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height}y(this)},parent:v.Element,construct:{bbox:function(){return new v.BBox(this)}}}),v.TBox=v.invent({create:function(t){if(t){var e=t.ctm().extract(),i=t.bbox();this.width=i.width*e.scaleX,this.height=i.height*e.scaleY,this.x=i.x+e.x,this.y=i.y+e.y}y(this)},parent:v.Element,construct:{tbox:function(){return new v.TBox(this)}}}),v.RBox=v.invent({create:function(e){if(e){var i=e.doc().parent(),n=e.node.getBoundingClientRect(),r=1;for(this.x=n.left,this.y=n.top,this.x-=i.offsetLeft,this.y-=i.offsetTop;i=i.offsetParent;)this.x-=i.offsetLeft,this.y-=i.offsetTop;for(i=e;i.parent&&(i=i.parent());)i.viewbox&&(r*=i.viewbox().zoom,this.x-=i.x()||0,this.y-=i.y()||0);this.width=n.width/=r,this.height=n.height/=r}y(this),this.x+=t.pageXOffset,this.y+=t.pageYOffset},parent:v.Element,construct:{rbox:function(){return new v.RBox(this)}}}),[v.BBox,v.TBox,v.RBox].forEach(function(t){v.extend(t,{merge:function(e){var i=new t;return i.x=Math.min(this.x,e.x),i.y=Math.min(this.y,e.y),i.width=Math.max(this.x+this.width,e.x+e.width)-i.x,i.height=Math.max(this.y+this.height,e.y+e.height)-i.y,y(i)}})}),v.Matrix=v.invent({create:function(t){var e,i=l([1,0,0,1,0,0]);for(t=t instanceof v.Element?t.matrixify():"string"==typeof t?d(t):6==arguments.length?l([].slice.call(arguments)):"object"==typeof t?t:i,e=x.length-1;e>=0;--e)this[x[e]]=t&&"number"==typeof t[x[e]]?t[x[e]]:i[x[e]]},extend:{extract:function(){var t=u(this,0,1),e=u(this,1,0),i=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(i*Math.PI/180)+this.f*Math.sin(i*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(i*Math.PI/180)+this.e*Math.sin(-i*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-i,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:i,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new v.Matrix(this)}},clone:function(){return new v.Matrix(this)},morph:function(t){return this.destination=new v.Matrix(t),this},at:function(t){if(!this.destination)return this;var e=new v.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t});if(this.param&&this.param.to){var i={rotation:this.param.from.rotation+(this.param.to.rotation-this.param.from.rotation)*t,cx:this.param.from.cx,cy:this.param.from.cy};e=e.rotate((this.param.to.rotation-2*this.param.from.rotation)*t,i.cx,i.cy),e.param=i}return e},multiply:function(t){return new v.Matrix(this["native"]().multiply(c(t)["native"]()))},inverse:function(){return new v.Matrix(this["native"]().inverse())},translate:function(t,e){return new v.Matrix(this["native"]().translate(t||0,e||0))},scale:function(t,e,i,n){return 1==arguments.length?e=t:3==arguments.length&&(n=i,i=e,e=t),this.around(i,n,new v.Matrix(t,0,0,e,0,0))},rotate:function(t,e,i){return t=v.utils.radians(t),this.around(e,i,new v.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):this.scale(1,-1,0,e)},skew:function(t,e,i,n){return 1==arguments.length?e=t:3==arguments.length&&(n=i,i=e,e=t),t=v.utils.radians(t),e=v.utils.radians(e),this.around(i,n,new v.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,i){return this.skew(t,0,e,i)},skewY:function(t,e,i){return this.skew(0,t,e,i)},around:function(t,e,i){return this.multiply(new v.Matrix(1,0,0,1,t||0,e||0)).multiply(i).multiply(new v.Matrix(1,0,0,1,-t||0,-e||0))},"native":function(){for(var t=v.parser["native"].createSVGMatrix(),e=x.length-1;e>=0;e--)t[x[e]]=this[x[e]];return t},toString:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},parent:v.Element,construct:{ctm:function(){return new v.Matrix(this.node.getCTM())},screenCTM:function(){return new v.Matrix(this.node.getScreenCTM())}}}),v.Point=v.invent({create:function(t,e){var i,n={x:0,y:0};i=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:n,this.x=i.x,this.y=i.y},extend:{clone:function(){return new v.Point(this)},morph:function(t,e){return this.destination=new v.Point(t,e),this},at:function(t){if(!this.destination)return this;var e=new v.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t});return e},"native":function(){var t=v.parser["native"].createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new v.Point(this["native"]().matrixTransform(t["native"]()))}}}),v.extend(v.Element,{point:function(t,e){return new v.Point(t,e).transform(this.screenCTM().inverse())}}),v.extend(v.Element,{attr:function(t,e,i){if(null==t){for(t={},e=this.node.attributes,i=e.length-1;i>=0;i--)t[e[i].nodeName]=v.regex.isNumber.test(e[i].nodeValue)?parseFloat(e[i].nodeValue):e[i].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return e=this.node.getAttribute(t),null==e?v.defaults.attrs[t]:v.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),("fill"==t||"stroke"==t)&&(v.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof v.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new v.Number(e):v.Color.isColor(e)?e=new v.Color(e):Array.isArray(e)?e=new v.Array(e):e instanceof v.Matrix&&e.param&&(this.param=e.param),"leading"==t?this.leading&&this.leading(e):"string"==typeof i?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),v.extend(v.Element,{transform:function(t,e){var i,n=this;if("object"!=typeof t)return i=new v.Matrix(n).extract(),"string"==typeof t?i[t]:i;if(i=new v.Matrix(n),e=!!e||!!t.relative,null!=t.a)i=e?i.multiply(new v.Matrix(t)):new v.Matrix(t);else if(null!=t.rotation)f(t,n),i=e?i.rotate(t.rotation,t.cx,t.cy):i.rotate(t.rotation-i.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(f(t,n),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var r=i.extract();t.scaleX=1*t.scaleX/r.scaleX,t.scaleY=1*t.scaleY/r.scaleY}i=i.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else if(null!=t.skew||null!=t.skewX||null!=t.skewY){if(f(t,n),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,!e){var r=i.extract();i=i.multiply((new v.Matrix).skew(r.skewX,r.skewY,t.cx,t.cy).inverse())}i=i.skew(t.skewX,t.skewY,t.cx,t.cy)}else t.flip?i=i.flip(t.flip,null==t.offset?n.bbox()["c"+t.flip]:t.offset):(null!=t.x||null!=t.y)&&(e?i=i.translate(t.x,t.y):(null!=t.x&&(i.e=t.x),null!=t.y&&(i.f=t.y)));return this.attr("transform",i)}}),v.extend(v.FX,{transform:function(t,e){var i,n=this.target();return"object"!=typeof t?(i=new v.Matrix(n).extract(),"string"==typeof t?i[t]:i):(e=!!e||!!t.relative,null!=t.a?i=new v.Matrix(t):null!=t.rotation?(f(t,n),i=new v.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(f(t,n),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,i=new v.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(f(t,n),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,i=new v.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?i=(new v.Matrix).morph((new v.Matrix).flip(t.flip,null==t.offset?n.bbox()["c"+t.flip]:t.offset)):(null!=t.x||null!=t.y)&&(i=new v.Translate(t.x,t.y)),i?(i.relative=e,this.last().transforms.push(i),setTimeout(function(){this.start()}.bind(this),0),this):this)}}),v.extend(v.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var t=(this.attr("transform")||"").split(/\)\s*,?\s*/).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(v.regex.matrixElements).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(l(e[1])):t[e[0]].apply(t,e[1])},new v.Matrix);return t},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),i=t.rect(1,1),n=i.screenCTM().inverse();return i.remove(),this.addTo(t).untransform().transform(n.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),v.Transformation=v.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.create([].slice.call(arguments));if("object"==typeof t)for(var i=0,n=this.arguments.length;n>i;++i)this[this.arguments[i]]=t[this.arguments[i]];if(Array.isArray(t))for(var i=0,n=this.arguments.length;n>i;++i)this[this.arguments[i]]=t[i];this.inversed=!1,e===!0&&(this.inversed=!0)},extend:{at:function(t){for(var e=[],i=0,n=this.arguments.length;n>i;++i)e.push(this[this.arguments[i]]);var r=this._undo||new v.Matrix;return r=(new v.Matrix).morph(v.Matrix.prototype[this.method].apply(r,e)).at(t),this.inversed?r.inverse():r},undo:function(t){for(var e=0,i=this.arguments.length;i>e;++e)t[this.arguments[e]]="undefined"==typeof this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(v[s(this.method)])(t,!0).at(1),this}}}),v.Translate=v.invent({parent:v.Matrix,inherit:v.Transformation,create:function(t,e){"object"==typeof t?this.constructor.call(this,t,e):this.constructor.call(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),v.Rotate=v.invent({parent:v.Matrix,inherit:v.Transformation,create:function(t,e){"object"==typeof t?this.constructor.call(this,t,e):this.constructor.call(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new v.Matrix).rotate((new v.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){this._undo=t}}}),v.Scale=v.invent({parent:v.Matrix,inherit:v.Transformation,create:function(t,e){"object"==typeof t?this.constructor.call(this,t,e):this.constructor.call(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),v.Skew=v.invent({parent:v.Matrix,inherit:v.Transformation,create:function(t,e){"object"==typeof t?this.constructor.call(this,t,e):this.constructor.call(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),v.extend(v.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!v.regex.isCss.test(t))return this.node.style[r(t)];t=t.split(";");for(var i=0;i<t.length;i++)e=t[i].split(":"),this.style(e[0].replace(/\s+/g,""),e[1])}else this.node.style[r(t)]=null===e||v.regex.isBlank.test(e)?"":e;return this}}),v.Parent=v.invent({create:function(t){this.constructor.call(this,t)},inherit:v.Element,extend:{children:function(){return v.utils.map(v.utils.filterSVGElements(this.node.childNodes),function(t){return v.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return v.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var i,n,r=this.children();for(i=0,n=r.length;n>i;i++)r[i]instanceof v.Element&&t.apply(r[i],[i,r]),e&&r[i]instanceof v.Container&&r[i].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),v.extend(v.Parent,{ungroup:function(t,e){return 0===e||this instanceof v.Defs?this:(t=t||(this instanceof v.Doc?this:this.parent(v.Parent)),e=e||1/0,this.each(function(){return this instanceof v.Defs?this:this instanceof v.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove(),this)},flatten:function(t,e){return this.ungroup(t,e)}}),v.Container=v.invent({create:function(t){this.constructor.call(this,t)},inherit:v.Parent}),v.ViewBox=v.invent({create:function(t){var e,i,n,r,s,a,o,h,u=[0,0,0,0],l=1,c=1,f=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof v.Element){for(o=t,h=t,a=(t.attr("viewBox")||"").match(f),s=t.bbox,n=new v.Number(t.width()),r=new v.Number(t.height());"%"==n.unit;)l*=n.value,n=new v.Number(o instanceof v.Doc?o.parent().offsetWidth:o.parent().width()),o=o.parent();for(;"%"==r.unit;)c*=r.value,r=new v.Number(h instanceof v.Doc?h.parent().offsetHeight:h.parent().height()),h=h.parent();this.x=0,this.y=0,this.width=n*l,this.height=r*c,this.zoom=1,a&&(e=parseFloat(a[0]),i=parseFloat(a[1]),n=parseFloat(a[2]),r=parseFloat(a[3]),this.zoom=this.width/this.height>n/r?this.height/r:this.width/n,this.x=e,this.y=i,this.width=n,this.height=r)}else t="string"==typeof t?t.match(f).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):u,this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t){var t=1==arguments.length?[t.x,t.y,t.width,t.height]:[].slice.call(arguments);return this.destination=new v.ViewBox(t),this},at:function(t){return this.destination?new v.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:v.Container,construct:{viewbox:function(t){return 0==arguments.length?new v.ViewBox(this):(t=1==arguments.length?[t.x,t.y,t.width,t.height]:[].slice.call(arguments),this.attr("viewBox",t))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){v.Element.prototype[t]=function(e){var i=this;return this.node["on"+t]="function"==typeof e?function(){return e.apply(i,arguments)}:null,this}}),v.listeners=[],v.handlerMap=[],v.listenerId=0,v.on=function(t,e,i,n){var r=i.bind(n||t.instance||t),s=(v.handlerMap.indexOf(t)+1||v.handlerMap.push(t))-1,a=e.split(".")[0],o=e.split(".")[1]||"*";v.listeners[s]=v.listeners[s]||{},v.listeners[s][a]=v.listeners[s][a]||{},v.listeners[s][a][o]=v.listeners[s][a][o]||{},i._svgjsListenerId||(i._svgjsListenerId=++v.listenerId),v.listeners[s][a][o][i._svgjsListenerId]=r,t.addEventListener(a,r,!1)},v.off=function(t,e,i){var n=v.handlerMap.indexOf(t),r=e&&e.split(".")[0],s=e&&e.split(".")[1];if(-1!=n)if(i){if("function"==typeof i&&(i=i._svgjsListenerId),!i)return;v.listeners[n][r]&&v.listeners[n][r][s||"*"]&&(t.removeEventListener(r,v.listeners[n][r][s||"*"][i],!1),delete v.listeners[n][r][s||"*"][i])}else if(s&&r){if(v.listeners[n][r]&&v.listeners[n][r][s]){for(i in v.listeners[n][r][s])v.off(t,[r,s].join("."),i);delete v.listeners[n][r][s]}}else if(s)for(e in v.listeners[n])for(namespace in v.listeners[n][e])s===namespace&&v.off(t,[e,s].join("."));else if(r){if(v.listeners[n][r]){for(namespace in v.listeners[n][r])v.off(t,[r,namespace].join("."));delete v.listeners[n][r]}}else{for(e in v.listeners[n])v.off(t,e);delete v.listeners[n]}},v.extend(v.Element,{on:function(t,e,i){return v.on(this.node,t,e,i),this},off:function(t,e){return v.off(this.node,t,e),this},fire:function(t,e){return t instanceof Event?this.node.dispatchEvent(t):this.node.dispatchEvent(new w(t,{detail:e})),this}}),v.Defs=v.invent({create:"defs",inherit:v.Container}),v.G=v.invent({create:"g",inherit:v.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new v.G)}}}),v.extend(v.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof v.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof v.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),v.Mask=v.invent({create:function(){this.constructor.call(this,v.create("mask")),this.targets=[]},inherit:v.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],this.parent().removeElement(this),this}},construct:{mask:function(){return this.defs().put(new v.Mask)}}}),v.extend(v.Element,{maskWith:function(t){return this.masker=t instanceof v.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),v.ClipPath=v.invent({create:function(){this.constructor.call(this,v.create("clipPath")),this.targets=[]},inherit:v.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new v.ClipPath)}}}),v.extend(v.Element,{clipWith:function(t){return this.clipper=t instanceof v.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),v.Gradient=v.invent({create:function(t){this.constructor.call(this,v.create(t+"Gradient")),this.type=t},inherit:v.Container,extend:{at:function(t,e,i){return this.put(new v.Stop).update(t,e,i)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="gradientTransform"),v.Container.prototype.attr.call(this,t,e,i)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),v.extend(v.Gradient,v.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new v.Number(t),fy:new v.Number(e)}):this.attr({x1:new v.Number(t),y1:new v.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new v.Number(t),
cy:new v.Number(e)}):this.attr({x2:new v.Number(t),y2:new v.Number(e)})}}),v.extend(v.Defs,{gradient:function(t,e){return this.put(new v.Gradient(t)).update(e)}}),v.Stop=v.invent({create:"stop",inherit:v.Element,extend:{update:function(t){return("number"==typeof t||t instanceof v.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new v.Number(t.offset)),this}}}),v.Pattern=v.invent({create:"pattern",inherit:v.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="patternTransform"),v.Container.prototype.attr.call(this,t,e,i)}},construct:{pattern:function(t,e,i){return this.defs().pattern(t,e,i)}}}),v.extend(v.Defs,{pattern:function(t,e,i){return this.put(new v.Pattern).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),v.Doc=v.invent({create:function(t){t&&(t="string"==typeof t?e.getElementById(t):t,"svg"==t.nodeName?this.constructor.call(this,t):(this.constructor.call(this,v.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:v.Container,extend:{namespace:function(){return this.attr({xmlns:v.ns,version:"1.1"}).attr("xmlns:xlink",v.xlink,v.xmlns).attr("xmlns:svgjs",v.svgjs,v.xmlns)},defs:function(){if(!this._defs){var t;(t=this.node.getElementsByTagName("defs")[0])?this._defs=v.adopt(t):this._defs=new v.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return"#document"==this.node.parentNode.nodeName?null:this.node.parentNode},spof:function(t){var e=this.node.getScreenCTM();return e&&this.style("left",-e.e%1+"px").style("top",-e.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this}}}),v.Shape=v.invent({create:function(t){this.constructor.call(this,t)},inherit:v.Element}),v.Bare=v.invent({create:function(t,e){if(this.constructor.call(this,v.create(t)),e)for(var i in e.prototype)"function"==typeof e.prototype[i]&&(this[i]=e.prototype[i])},inherit:v.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(t)),this}}}),v.extend(v.Parent,{element:function(t,e){return this.put(new v.Bare(t,e))},symbol:function(){return this.defs().element("symbol",v.Container)}}),v.Use=v.invent({create:"use",inherit:v.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,v.xlink)}},construct:{use:function(t,e){return this.put(new v.Use).element(t,e)}}}),v.Rect=v.invent({create:"rect",inherit:v.Shape,construct:{rect:function(t,e){return this.put(new v.Rect).size(t,e)}}}),v.Circle=v.invent({create:"circle",inherit:v.Shape,construct:{circle:function(t){return this.put(new v.Circle).rx(new v.Number(t).divide(2)).move(0,0)}}}),v.extend(v.Circle,v.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),v.Ellipse=v.invent({create:"ellipse",inherit:v.Shape,construct:{ellipse:function(t,e){return this.put(new v.Ellipse).size(t,e).move(0,0)}}}),v.extend(v.Ellipse,v.Rect,v.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),v.extend(v.Circle,v.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new v.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new v.Number(t).divide(2))},size:function(t,e){var i=h(this,t,e);return this.rx(new v.Number(i.width).divide(2)).ry(new v.Number(i.height).divide(2))}}),v.Line=v.invent({create:"line",inherit:v.Shape,extend:{array:function(){return new v.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,i,n){return t="undefined"!=typeof e?{x1:t,y1:e,x2:i,y2:n}:new v.PointArray(t).toLine(),this.attr(t)},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var i=h(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}},construct:{line:function(t,e,i,n){return this.put(new v.Line).plot(t,e,i,n)}}}),v.Polyline=v.invent({create:"polyline",inherit:v.Shape,construct:{polyline:function(t){return this.put(new v.Polyline).plot(t)}}}),v.Polygon=v.invent({create:"polygon",inherit:v.Shape,construct:{polygon:function(t){return this.put(new v.Polygon).plot(t)}}}),v.extend(v.Polyline,v.Polygon,{array:function(){return this._array||(this._array=new v.PointArray(this.attr("points")))},plot:function(t){return this.attr("points",this._array=new v.PointArray(t))},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var i=h(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}}),v.extend(v.Line,v.Polyline,v.Polygon,{morphArray:v.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),v.Path=v.invent({create:"path",inherit:v.Shape,extend:{morphArray:v.PathArray,array:function(){return this._array||(this._array=new v.PathArray(this.attr("d")))},plot:function(t){return this.attr("d",this._array=new v.PathArray(t))},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var i=h(this,t,e);return this.attr("d",this.array().size(i.width,i.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new v.Path).plot(t)}}}),v.Image=v.invent({create:"image",inherit:v.Shape,extend:{load:function(t){if(!t)return this;var i=this,n=e.createElement("img");return n.onload=function(){var e=i.parent(v.Pattern);null!==e&&(0==i.width()&&0==i.height()&&i.size(n.width,n.height),e&&0==e.width()&&0==e.height()&&e.size(i.width(),i.height()),"function"==typeof i._loaded&&i._loaded.call(i,{width:n.width,height:n.height,ratio:n.width/n.height,url:t}))},n.onerror=function(t){"function"==typeof i._error&&i._error.call(i,t)},this.attr("href",n.src=this.src=t,v.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,i){return this.put(new v.Image).load(t).size(e||0,i||e||0)}}}),v.Text=v.invent({create:function(){this.constructor.call(this,v.create("text")),this.dom.leading=new v.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",v.defaults.attrs["font-family"])},inherit:v.Shape,extend:{x:function(t){return null==t?this.attr("x"):(this.textPath||this.lines().each(function(){this.dom.newLined&&this.x(t)}),this.attr("x",t))},y:function(t){var e=this.attr("y"),i="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-i:e:this.attr("y","number"==typeof t?t+i:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if("undefined"==typeof t){for(var t="",e=this.node.childNodes,i=0,n=e.length;n>i;++i)0!=i&&3!=e[i].nodeType&&1==v.adopt(e[i]).dom.newLined&&(t+="\n"),t+=e[i].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{t=t.split("\n");for(var i=0,r=t.length;r>i;i++)this.tspan(t[i]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new v.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=v.utils.map(v.utils.filterSVGElements(t.childNodes),function(t){return v.adopt(t)});return new v.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,i=0,n=this.dom.leading*new v.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(this.textPath||this.attr("x",e.attr("x")),"\n"==this.text()?i+=n:(this.attr("dy",n+i),i=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new v.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new v.Text).text(t)},plain:function(t){return this.put(new v.Text).plain(t)}}}),v.Tspan=v.invent({create:"tspan",inherit:v.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(v.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),v.extend(v.Text,v.Tspan,{plain:function(t){return this._build===!1&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,i=new v.Tspan;return this._build===!1&&this.clear(),e.appendChild(i.node),i.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),v.TextPath=v.invent({create:"textPath",inherit:v.Parent,parent:v.Text,construct:{path:function(t){for(var e=new v.TextPath,i=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+i,v.xlink),this},plot:function(t){var e=this.track();return e&&e.plot(t),this},track:function(){var t=this.textPath();return t?t.reference("href"):void 0},textPath:function(){return this.node.firstChild&&"textPath"==this.node.firstChild.nodeName?v.adopt(this.node.firstChild):void 0}}}),v.Nested=v.invent({create:function(){this.constructor.call(this,v.create("svg")),this.style("overflow","visible")},inherit:v.Container,construct:{nested:function(){return this.put(new v.Nested)}}}),v.A=v.invent({create:"a",inherit:v.Container,extend:{to:function(t){return this.attr("href",t,v.xlink)},show:function(t){return this.attr("show",t,v.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new v.A).to(t)}}}),v.extend(v.Element,{linkTo:function(t){var e=new v.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),v.Marker=v.invent({create:"marker",inherit:v.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,i){return this.defs().marker(t,e,i)}}}),v.extend(v.Defs,{marker:function(t,e,i){return this.put(new v.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(i)}}),v.extend(v.Line,v.Polyline,v.Polygon,v.Path,{marker:function(t,e,i,n){var r=["marker"];return"all"!=t&&r.push(t),r=r.join("-"),t=arguments[1]instanceof v.Marker?arguments[1]:this.doc().marker(e,i,n),this.attr(r,t)}});var b={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};["fill","stroke"].forEach(function(t){var e,i={};i[t]=function(i){if("undefined"==typeof i)return this;if("string"==typeof i||v.Color.isRgb(i)||i&&"function"==typeof i.fill)this.attr(t,i);else for(e=b[t].length-1;e>=0;e--)null!=i[b[t][e]]&&this.attr(b.prefix(t,b[t][e]),i[b[t][e]]);return this},v.extend(v.Element,v.FX,i)}),v.extend(v.Element,v.FX,{rotate:function(t,e,i){return this.transform({rotation:t,cx:e,cy:i})},skew:function(t,e,i,n){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:i}):this.transform({skewX:t,skewY:e,cx:i,cy:n})},scale:function(t,e,i,n){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:i}):this.transform({scaleX:t,scaleY:e,cx:i,cy:n})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return this.transform({flip:t,offset:e})},matrix:function(t){return this.attr("transform",new v.Matrix(t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x((this instanceof v.FX?0:this.x())+t,!0)},dy:function(t){return this.y((this instanceof v.FX?0:this.y())+t,!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),v.extend(v.Rect,v.Ellipse,v.Circle,v.Gradient,v.FX,{radius:function(t,e){var i=(this._target||this).type;return"radial"==i||"circle"==i?this.attr("r",new v.Number(t)):this.rx(t).ry(null==e?t:e)}}),v.extend(v.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),v.extend(v.Parent,v.Text,v.FX,{font:function(t){for(var e in t)"leading"==e?this.leading(t[e]):"anchor"==e?this.attr("text-anchor",t[e]):"size"==e||"family"==e||"weight"==e||"stretch"==e||"variant"==e||"style"==e?this.attr("font-"+e,t[e]):this.attr(e,t[e]);return this}}),v.Set=v.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,i=[].slice.call(arguments);for(t=0,e=i.length;e>t;t++)this.members.push(i[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,i=this.members.length;i>e;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){var t=new v.BBox;if(0==this.members.length)return t;var e=this.members[0].rbox();return t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,this.each(function(){t=t.merge(this.rbox())}),t}},construct:{set:function(t){return new v.Set(t)}}}),v.FX.Set=v.invent({create:function(t){this.set=t}}),v.Set.inherit=function(){var t,e=[];for(var t in v.Shape.prototype)"function"==typeof v.Shape.prototype[t]&&"function"!=typeof v.Set.prototype[t]&&e.push(t);e.forEach(function(t){v.Set.prototype[t]=function(){for(var e=0,i=this.members.length;i>e;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new v.FX.Set(this)):this}}),e=[];for(var t in v.FX.prototype)"function"==typeof v.FX.prototype[t]&&"function"!=typeof v.FX.Set.prototype[t]&&e.push(t);e.forEach(function(t){v.FX.Set.prototype[t]=function(){for(var e=0,i=this.set.members.length;i>e;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},v.extend(v.Element,{data:function(t,e,i){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(n){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:i===!0||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),v.extend(v.Element,{remember:function(t,e){if("object"==typeof arguments[0])for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),v.get=function(t){var i=e.getElementById(g(t)||t);return v.adopt(i)},v.select=function(t,i){return new v.Set(v.utils.map((i||e).querySelectorAll(t),function(t){return v.adopt(t)}))},v.extend(v.Parent,{select:function(t){return v.select(t,this.node)}});var x="abcdef".split("");if("function"!=typeof w){var w=function(t,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var n=e.createEvent("CustomEvent");return n.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),n};w.prototype=t.Event.prototype,t.CustomEvent=w}return function(e){for(var i=0,n=["moz","webkit"],r=0;r<n.length&&!t.requestAnimationFrame;++r)e.requestAnimationFrame=e[n[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[r]+"CancelAnimationFrame"]||e[n[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame=e.requestAnimationFrame||function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-i)),s=e.setTimeout(function(){t(n+r)},r);return i=n+r,s},e.cancelAnimationFrame=e.cancelAnimationFrame||e.clearTimeout}(t),v})},{}],143:[function(t,e,i){!function(n,r){if("object"==typeof e&&"object"==typeof e.exports&&(i=e.exports=r(t("terraformer"))),"object"==typeof n.navigator){if(!n.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");n.Terraformer.ArcGIS=r(n.Terraformer)}}(this,function(t){function e(t){var e,i,n,r,s=0,a=0,o=[];n=t.match(/((\+|\-)[^\+\-]+)/g),r=parseInt(n[0],32);for(var h=1;h<n.length;h+=2)e=parseInt(n[h],32)+s,s=e,i=parseInt(n[h+1],32)+a,a=i,o.push([e/r,i/r]);return o}function i(t){return n(t[0],t[t.length-1])||t.push(t[0]),t}function n(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function r(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function s(t){var e,i=0,n=0,r=t.length,s=t[n];for(n;r-1>n;n++)e=t[n+1],i+=(e[0]-s[0])*(e[1]+s[1]),s=e;return i>=0}function a(t){var e=[],n=t.slice(0),r=i(n.shift().slice(0));if(r.length>=4){s(r)||r.reverse(),e.push(r);for(var a=0;a<n.length;a++){var o=i(n[a].slice(0));o.length>=4&&(s(o)&&o.reverse(),e.push(o))}}return e}function o(t){for(var e=[],i=0;i<t.length;i++)for(var n=a(t[i]),r=n.length-1;r>=0;r--){var s=n[r].slice(0);e.push(s)}return e}function h(e,i){var n=t.Tools.arraysIntersectArrays(e,i),r=t.Tools.coordinatesContainPoint(e,i[0]);return!n&&r?!0:!1}function u(e){for(var n,r,a,o=[],u=[],l=0;l<e.length;l++){var c=i(e[l].slice(0));if(!(c.length<4))if(s(c)){var f=[c];o.push(f)}else u.push(c)}for(var d=[];u.length;){a=u.pop();var p=!1;for(n=o.length-1;n>=0;n--)if(r=o[n][0],h(r,a)){o[n].push(a),p=!0;break}p||d.push(a)}for(;d.length;){a=d.pop();var m=!1;for(n=o.length-1;n>=0;n--)if(r=o[n][0],t.Tools.arraysIntersectArrays(r,a)){o[n].push(a),m=!0;break}m||o.push([a.reverse()])}return 1===o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}function l(i,n){var s={};n=n||{},n.idAttribute=n.idAttribute||void 0,"number"==typeof i.x&&"number"==typeof i.y&&(s.type="Point",s.coordinates=[i.x,i.y],(i.z||i.m)&&s.coordinates.push(i.z),i.m&&s.coordinates.push(i.m)),i.points&&(s.type="MultiPoint",s.coordinates=i.points.slice(0)),i.paths&&(1===i.paths.length?(s.type="LineString",s.coordinates=i.paths[0].slice(0)):(s.type="MultiLineString",s.coordinates=i.paths.slice(0))),i.rings&&(s=u(i.rings.slice(0))),(i.compressedGeometry||i.geometry||i.attributes)&&(s.type="Feature",i.compressedGeometry&&(i.geometry={paths:[e(i.compressedGeometry)]}),s.geometry=i.geometry?l(i.geometry):null,s.properties=i.attributes?r(i.attributes):null,i.attributes&&(s.id=i.attributes[n.idAttribute]||i.attributes.OBJECTID||i.attributes.FID));var a=i.geometry?i.geometry.spatialReference:i.spatialReference;return a&&102100===a.wkid&&(s=t.toGeographic(s)),new t.Primitive(s)}function c(e,i){var n;i=i||{};var s=i.idAttribute||"OBJECTID";n=i.sr?{wkid:i.sr}:e&&e.crs===t.MercatorCRS?{wkid:102100}:{wkid:4326};var h,u={};switch(e.type){case"Point":u.x=e.coordinates[0],u.y=e.coordinates[1],e.coordinates[2]&&(u.z=e.coordinates[2]),e.coordinates[3]&&(u.m=e.coordinates[3]),u.spatialReference=n;break;case"MultiPoint":u.points=e.coordinates.slice(0),u.spatialReference=n;break;case"LineString":u.paths=[e.coordinates.slice(0)],u.spatialReference=n;break;case"MultiLineString":u.paths=e.coordinates.slice(0),u.spatialReference=n;break;case"Polygon":u.rings=a(e.coordinates.slice(0)),u.spatialReference=n;break;case"MultiPolygon":u.rings=o(e.coordinates.slice(0)),u.spatialReference=n;break;case"Feature":e.geometry&&(u.geometry=c(e.geometry,i)),u.attributes=e.properties?r(e.properties):{},e.id&&(u.attributes[s]=e.id);break;case"FeatureCollection":for(u=[],h=0;h<e.features.length;h++)u.push(c(e.features[h],i));break;case"GeometryCollection":for(u=[],h=0;h<e.geometries.length;h++)u.push(c(e.geometries[h],i))}return u}function f(i){return new t.LineString(e(i))}var d={};return d.parse=l,d.convert=c,d.toGeoJSON=l,d.fromGeoJSON=c,d.parseCompressedGeometry=f,d})},{terraformer:145}],144:[function(e,i,n){(function(r){"use strict";!function(e){if("object"==typeof n&&"undefined"!=typeof i)i.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var s;s="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:this,s.terraformerProj4js=e()}}(function(){return function t(i,n,r){function s(o,h){if(!n[o]){if(!i[o]){var u="function"==typeof e&&e;if(!h&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};i[o][0].call(c.exports,function(t){var e=i[o][1][t];return s(e?e:t)},c,c.exports,t,i,n,r)}return n[o].exports}for(var a="function"==typeof e&&e,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(t,e,i){function n(t,e){function i(t){return!e.defs(t)&&0===t.indexOf("EPSG:")}return function(n,r,s){var a=s,o=r,h=/urn:ogc:def:crs:EPSG::(\d+)/;if(!a&&n.crs&&"name"===n.crs.type){var u=n.crs.properties.name.match(h);a=u?"EPSG:"+u[1]:n.crs.properties.name}if(a){if(i(a))throw new Error("Projection: "+a+" could not be found in proj4.defs")}else a="EPSG:4326";if(o){if(i(o))throw new Error("Projection: "+o+" could not be found in proj4.defs")}else if(o="EPSG:4326",o===a)return;var l=e(a,o).forward;return t.Tools.applyConverter(n,l)}}e.exports=n},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],145:[function(t,e,i){!function(t,n){"object"==typeof e&&"object"==typeof e.exports&&(i=e.exports=n()),"object"==typeof window&&(t.Terraformer=n())}(this,function(){function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(){var t=Array.prototype.slice.apply(arguments);void 0!==typeof console&&console.warn&&console.warn.apply(console,t)}function i(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function n(t){if(t.type)switch(t.type){case"Point":return[t.coordinates[0],t.coordinates[1],t.coordinates[0],t.coordinates[1]];case"MultiPoint":return a(t.coordinates);case"LineString":return a(t.coordinates);case"MultiLineString":return r(t.coordinates);case"Polygon":return r(t.coordinates);case"MultiPolygon":return s(t.coordinates);case"Feature":return t.geometry?n(t.geometry):null;case"FeatureCollection":return o(t);case"GeometryCollection":return h(t);default:throw new Error("Unknown type: "+t.type)}return null}function r(t){for(var e=null,i=null,n=null,r=null,s=0;s<t.length;s++)for(var a=t[s],o=0;o<a.length;o++){var h=a[o],u=h[0],l=h[1];null===e?e=u:e>u&&(e=u),null===i?i=u:u>i&&(i=u),null===n?n=l:n>l&&(n=l),null===r?r=l:l>r&&(r=l)}return[e,n,i,r]}function s(t){for(var e=null,i=null,n=null,r=null,s=0;s<t.length;s++)for(var a=t[s],o=0;o<a.length;o++)for(var h=a[o],u=0;u<h.length;u++){var l=h[u],c=l[0],f=l[1];null===e?e=c:e>c&&(e=c),null===i?i=c:c>i&&(i=c),null===n?n=f:n>f&&(n=f),null===r?r=f:f>r&&(r=f)}return[e,n,i,r]}function a(t){for(var e=null,i=null,n=null,r=null,s=0;s<t.length;s++){var a=t[s],o=a[0],h=a[1];null===e?e=o:e>o&&(e=o),null===i?i=o:o>i&&(i=o),null===n?n=h:n>h&&(n=h),null===r?r=h:h>r&&(r=h)}return[e,n,i,r]}function o(t){for(var e,i=[],r=t.features.length-1;r>=0;r--)e=n(t.features[r].geometry),i.push([e[0],e[1]]),i.push([e[2],e[3]]);return a(i)}function h(t){for(var e,i=[],r=t.geometries.length-1;r>=0;r--)e=n(t.geometries[r]),i.push([e[0],e[1]]),i.push([e[2],e[3]]);return a(i)}function u(t){var e=n(t);return{x:e[0],y:e[1],w:Math.abs(e[0]-e[2]),h:Math.abs(e[1]-e[3])}}function l(t){return t*W}function c(t){return t*Z}function f(t,e){for(var i=0;i<t.length;i++)"number"==typeof t[i][0]&&(t[i]=e(t[i])),"object"==typeof t[i]&&(t[i]=f(t[i],e));return t}function d(t){var e=t[0],i=t[1];return[l(e/H)-360*Math.floor((l(e/H)+180)/360),l(Math.PI/2-2*Math.atan(Math.exp(-1*i/H)))]}function p(t){var e=t[0],i=Math.max(Math.min(t[1],89.99999),-89.99999);return[c(e)*H,H/2*Math.log((1+Math.sin(c(i)))/(1-Math.sin(c(i))))]}function m(t,e,i){if("Point"===t.type)t.coordinates=e(t.coordinates);else if("Feature"===t.type)t.geometry=m(t.geometry,e,!0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)t.features[n]=m(t.features[n],e,!0);else if("GeometryCollection"===t.type)for(var r=0;r<t.geometries.length;r++)t.geometries[r]=m(t.geometries[r],e,!0);else t.coordinates=f(t.coordinates,e);return i||e===p&&(t.crs=J),e===d&&delete t.crs,t}function y(t){return m(t,p)}function g(t){return m(t,d)}function v(t,e){return e>t?-1:t>e?1:0}function b(t,e){return t[0]>e[0]?-1:t[0]<e[0]?1:t[1]>e[1]?-1:t[1]<e[1]?1:0}function x(t,e,i){return v((e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1]),0)}function w(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function _(t,e){var i=e;for(var n in t){var r=x(e,i,t[n]);(-1===r||0===r&&w(e,t[n])>w(e,i))&&(i=t[n])}return i}function M(t){if(0===t.length)return[];if(1===t.length)return t;for(var e=[t.sort(b)[0]],i=0;i<e.length;i++){var n=_(t,e[i]);n!==e[0]&&e.push(n)}return e}function E(t){for(var e,i=0;i<t.length-3;i++){var n=t[i],r=t[i+1],s=t[i+2],a=[r[0]-n[0],r[1]-n[1]],o=s[0]*a[1]-s[1]*a[0]+a[0]*n[1]-a[1]*n[0];if(0===i)e=0>o?!0:!1;else if(e&&o>0||!e&&0>o)return!1}return!0}function P(t,e){for(var i=!1,n=-1,r=t.length,s=r-1;++n<r;s=n)(t[n][1]<=e[1]&&e[1]<t[s][1]||t[s][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[s][0]-t[n][0])*(e[1]-t[n][1])/(t[s][1]-t[n][1])+t[n][0]&&(i=!i);return i}function S(t,e){if(t&&t.length){if(1===t.length)return P(t[0],e);if(P(t[0],e)){for(var i=1;i<t.length;i++)if(P(t[i],e))return!1;return!0}return!1}return!1}function k(t,e,i,n){var r=(n[0]-i[0])*(t[1]-i[1])-(n[1]-i[1])*(t[0]-i[0]),s=(e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]),a=(n[1]-i[1])*(e[0]-t[0])-(n[0]-i[0])*(e[1]-t[1]);if(0!==a){var o=r/a,h=s/a;if(o>=0&&1>=o&&h>=0&&1>=h)return!0}return!1}function C(t){return!isNaN(parseFloat(t))&&isFinite(t)}function A(t,e){if(C(t[0][0])){if(C(e[0][0])){for(var i=0;i<t.length-1;i++)for(var n=0;n<e.length-1;n++)if(k(t[i],t[i+1],e[n],e[n+1]))return!0}else for(var r=0;r<e.length;r++)if(A(t,e[r]))return!0}else for(var s=0;s<t.length;s++)if(A(t[s],e))return!0;return!1}function I(t){for(var e=[],i=0;i<t.length;i++){var n=t[i].slice();T(n[0],n[n.length-1])===!1&&n.push(n[0]),e.push(n)}return e}function T(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function L(t,e){if(t.length!==e.length)return!1;for(var i=t.slice().sort(b),n=e.slice().sort(b),r=0;r<i.length;r++){if(i[r].length!==n[r].length)return!1;for(var s=0;s<i.length;s++)if(i[r][s]!==n[r][s])return!1}return!0}function B(t){if(t)switch(t.type){case"Point":return new N(t);case"MultiPoint":return new R(t);case"LineString":return new z(t);case"MultiLineString":return new O(t);case"Polygon":return new D(t);case"MultiPolygon":return new F(t);case"Feature":return new U(t);case"FeatureCollection":return new G(t);case"GeometryCollection":return new V(t);default:throw new Error("Unknown type: "+t.type)}}function N(e){var n=Array.prototype.slice.call(arguments);if(e&&"Point"===e.type&&e.coordinates)i(this,e);else if(e&&t(e))this.coordinates=e;else{if(!(n.length>=2))throw"Terraformer: invalid input for Terraformer.Point";this.coordinates=n}this.type="Point"}function R(e){if(e&&"MultiPoint"===e.type&&e.coordinates)i(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.MultiPoint";this.coordinates=e}this.type="MultiPoint"}function z(e){if(e&&"LineString"===e.type&&e.coordinates)i(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.LineString";this.coordinates=e}this.type="LineString"}function O(e){if(e&&"MultiLineString"===e.type&&e.coordinates)i(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.MultiLineString";this.coordinates=e}this.type="MultiLineString"}function D(e){if(e&&"Polygon"===e.type&&e.coordinates)i(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.Polygon";this.coordinates=e}this.type="Polygon"}function F(e){if(e&&"MultiPolygon"===e.type&&e.coordinates)i(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.coordinates=e}this.type="MultiPolygon"}function U(t){if(t&&"Feature"===t.type)i(this,t);else{if(!(t&&t.type&&t.coordinates))throw"Terraformer: invalid input for Terraformer.Feature";this.geometry=t}this.type="Feature"}function G(e){if(e&&"FeatureCollection"===e.type&&e.features)i(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.features=e}this.type="FeatureCollection"}function V(e){if(e&&"GeometryCollection"===e.type&&e.geometries)i(this,e);else if(t(e))this.geometries=e;else{if(!e.coordinates||!e.type)throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection",this.geometries=[e]}this.type="GeometryCollection"}function q(t,e,i){for(var n=p(t),r=i||64,s={type:"Polygon",coordinates:[[]]},a=1;r>=a;a++){var o=a*(360/r)*Math.PI/180;s.coordinates[0].push([n[0]+e*Math.cos(o),n[1]+e*Math.sin(o)])}return s.coordinates=I(s.coordinates),g(s)}function X(t,e,n){var r=n||64,s=e||250;if(!t||t.length<2||!s||!r)throw new Error("Terraformer: missing parameter for Terraformer.Circle");i(this,new U({type:"Feature",geometry:q(t,s,r),properties:{radius:s,center:t,steps:r}}))}var Y={},H=6378137,W=57.29577951308232,Z=.017453292519943,J={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}},$={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}},Q=["length"];return B.prototype.toMercator=function(){return y(this)},B.prototype.toGeographic=function(){return g(this)},B.prototype.envelope=function(){return u(this)},B.prototype.bbox=function(){return n(this)},B.prototype.convexHull=function(){var t,e,i=[];if("Point"===this.type)return null;if("LineString"===this.type||"MultiPoint"===this.type){if(!(this.coordinates&&this.coordinates.length>=3))return null;i=this.coordinates}else if("Polygon"===this.type||"MultiLineString"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(t=0;t<this.coordinates.length;t++)i=i.concat(this.coordinates[t]);if(i.length<3)return null}else if("MultiPolygon"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(t=0;t<this.coordinates.length;t++)for(e=0;e<this.coordinates[t].length;e++)i=i.concat(this.coordinates[t][e]);if(i.length<3)return null}else if("Feature"===this.type){var n=new B(this.geometry);return n.convexHull()}return new D({type:"Polygon",coordinates:I([M(i)])})},B.prototype.toJSON=function(){var t={};for(var e in this)this.hasOwnProperty(e)&&-1===Q.indexOf(e)&&(t[e]=this[e]);return t.bbox=n(this),t},B.prototype.contains=function(t){return new B(t).within(this)},B.prototype.within=function(t){var e,i,n;if("Feature"===t.type&&(t=t.geometry),"Point"===t.type&&"Point"===this.type)return T(this.coordinates,t.coordinates);
if("MultiLineString"===t.type&&"Point"===this.type)for(i=0;i<t.coordinates.length;i++){var r={type:"LineString",coordinates:t.coordinates[i]};if(this.within(r))return!0}if(("LineString"===t.type||"MultiPoint"===t.type)&&"Point"===this.type)for(i=0;i<t.coordinates.length;i++){if(this.coordinates.length!==t.coordinates[i].length)return!1;if(T(this.coordinates,t.coordinates[i]))return!0}if("Polygon"===t.type){if("Polygon"===this.type){if(t.coordinates.length===this.coordinates.length)for(i=0;i<this.coordinates.length;i++)if(L(this.coordinates[i],t.coordinates[i]))return!0;return this.coordinates.length&&S(t.coordinates,this.coordinates[0][0])?!A(I(this.coordinates),I(t.coordinates)):!1}if("Point"===this.type)return S(t.coordinates,this.coordinates);if("LineString"===this.type||"MultiPoint"===this.type){if(!this.coordinates||0===this.coordinates.length)return!1;for(i=0;i<this.coordinates.length;i++)if(S(t.coordinates,this.coordinates[i])===!1)return!1;return!0}if("MultiLineString"===this.type){for(i=0;i<this.coordinates.length;i++){var s=new z(this.coordinates[i]);if(s.within(t)===!1)return n++,!1}return!0}if("MultiPolygon"===this.type){for(i=0;i<this.coordinates.length;i++){var a=new B({type:"Polygon",coordinates:this.coordinates[i]});if(a.within(t)===!1)return!1}return!0}}if("MultiPolygon"===t.type){if("Point"===this.type){if(t.coordinates.length)for(i=0;i<t.coordinates.length;i++)if(e=t.coordinates[i],S(e,this.coordinates)&&A([this.coordinates],t.coordinates)===!1)return!0;return!1}if("Polygon"===this.type){for(i=0;i<this.coordinates.length;i++)if(t.coordinates[i].length===this.coordinates.length)for(j=0;j<this.coordinates.length;j++)if(L(this.coordinates[j],t.coordinates[i][j]))return!0;if(A(this.coordinates,t.coordinates)===!1&&t.coordinates.length){for(i=0;i<t.coordinates.length;i++)e=t.coordinates[i],n=S(e,this.coordinates[0][0])===!1?!1:!0;return n}}else if("LineString"===this.type||"MultiPoint"===this.type)for(i=0;i<t.coordinates.length;i++){var o={type:"Polygon",coordinates:t.coordinates[i]};return this.within(o)?!0:!1}else{if("MultiLineString"===this.type){for(i=0;i<this.coordinates.length;i++){var h=new z(this.coordinates[i]);if(h.within(t)===!1)return!1}return!0}if("MultiPolygon"===this.type){for(i=0;i<t.coordinates.length;i++){var u={type:"Polygon",coordinates:t.coordinates[i]};if(this.within(u)===!1)return!1}return!0}}}return!1},B.prototype.intersects=function(t){"Feature"===t.type&&(t=t.geometry);var i=new B(t);if(this.within(t)||i.within(this))return!0;if("Point"!==this.type&&"MultiPoint"!==this.type&&"Point"!==t.type&&"MultiPoint"!==t.type)return A(this.coordinates,t.coordinates);if("Feature"===this.type){var n=new B(this.geometry);return n.intersects(t)}return e("Type "+this.type+" to "+t.type+" intersection is not supported by intersects"),!1},N.prototype=new B,N.prototype.constructor=N,R.prototype=new B,R.prototype.constructor=R,R.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates]);return this},R.prototype.addPoint=function(t){return this.coordinates.push(t),this},R.prototype.insertPoint=function(t,e){return this.coordinates.splice(e,0,t),this},R.prototype.removePoint=function(t){return"number"==typeof t?this.coordinates.splice(t,1):this.coordinates.splice(this.coordinates.indexOf(t),1),this},R.prototype.get=function(t){return new N(this.coordinates[t])},z.prototype=new B,z.prototype.constructor=z,z.prototype.addVertex=function(t){return this.coordinates.push(t),this},z.prototype.insertVertex=function(t,e){return this.coordinates.splice(e,0,t),this},z.prototype.removeVertex=function(t){return this.coordinates.splice(t,1),this},O.prototype=new B,O.prototype.constructor=O,O.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},O.prototype.get=function(t){return new z(this.coordinates[t])},D.prototype=new B,D.prototype.constructor=D,D.prototype.addVertex=function(t){return this.insertVertex(t,this.coordinates[0].length-1),this},D.prototype.insertVertex=function(t,e){return this.coordinates[0].splice(e,0,t),this},D.prototype.removeVertex=function(t){return this.coordinates[0].splice(t,1),this},D.prototype.close=function(){this.coordinates=I(this.coordinates)},D.prototype.hasHoles=function(){return this.coordinates.length>1},D.prototype.holes=function(){if(holes=[],this.hasHoles())for(var t=1;t<this.coordinates.length;t++)holes.push(new D([this.coordinates[t]]));return holes},F.prototype=new B,F.prototype.constructor=F,F.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},F.prototype.get=function(t){return new D(this.coordinates[t])},F.prototype.close=function(){var t=[];return this.forEach(function(e){t.push(I(e))}),this.coordinates=t,this},U.prototype=new B,U.prototype.constructor=U,G.prototype=new B,G.prototype.constructor=G,G.prototype.forEach=function(t){for(var e=0;e<this.features.length;e++)t.apply(this,[this.features[e],e,this.features])},G.prototype.get=function(t){var e;return this.forEach(function(i){i.id===t&&(e=i)}),new U(e)},V.prototype=new B,V.prototype.constructor=V,V.prototype.forEach=function(t){for(var e=0;e<this.geometries.length;e++)t.apply(this,[this.geometries[e],e,this.geometries])},V.prototype.get=function(t){return new B(this.geometries[t])},X.prototype=new B,X.prototype.constructor=X,X.prototype.recalculate=function(){return this.geometry=q(this.properties.center,this.properties.radius,this.properties.steps),this},X.prototype.center=function(t){return t&&(this.properties.center=t,this.recalculate()),this.properties.center},X.prototype.radius=function(t){return t&&(this.properties.radius=t,this.recalculate()),this.properties.radius},X.prototype.steps=function(t){return t&&(this.properties.steps=t,this.recalculate()),this.properties.steps},X.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return t},Y.Primitive=B,Y.Point=N,Y.MultiPoint=R,Y.LineString=z,Y.MultiLineString=O,Y.Polygon=D,Y.MultiPolygon=F,Y.Feature=U,Y.FeatureCollection=G,Y.GeometryCollection=V,Y.Circle=X,Y.toMercator=y,Y.toGeographic=g,Y.Tools={},Y.Tools.positionToMercator=p,Y.Tools.positionToGeographic=d,Y.Tools.applyConverter=m,Y.Tools.toMercator=y,Y.Tools.toGeographic=g,Y.Tools.createCircle=q,Y.Tools.calculateBounds=n,Y.Tools.calculateEnvelope=u,Y.Tools.coordinatesContainPoint=P,Y.Tools.polygonContainsPoint=S,Y.Tools.arraysIntersectArrays=A,Y.Tools.coordinatesContainPoint=P,Y.Tools.coordinatesEqual=L,Y.Tools.convexHull=M,Y.Tools.isConvex=E,Y.MercatorCRS=J,Y.GeographicCRS=$,Y})},{}],146:[function(t,e,i){"use strict";function n(t){function e(t){t.layerId=i.layerId,i[t.featureIdx.toString()]=t,i.indexes.push(t.featureIdx.toString())}var i={layerId:t,indexes:[],registerData:e};return i}function r(t,e){function i(){return n._attribData?n._attribData:(n._attribData=new Promise(function(t,i){n.layerData.then(function(r){var a=new e.Deferred,h={maxId:-1,batchSize:-1,layerUrl:r.load.layerUrl,oidField:r.oidField,attribs:r.load.attribs,supportsLimit:r.load.supportsLimit,esriBundle:e};o(h,a),a.promise.then(function(e){delete r.load,t(s(r.oidField,e))},function(t){console.warn("error getting attribute data for "+r.load.layerUrl),delete n._attribData,i(t)})})}),n._attribData)}var n={featureIdx:t,getAttribs:i};return n}function s(t,e){var i={features:e,oidIndex:{}};return e.forEach(function(e,n){i.oidIndex[e.attributes[t].toString()]=n}),i}function a(t){var e=/\/(\d+)\/?$/,i=t.match(e);if(i)return parseInt(i[1]);throw new Error("Cannot extract layer index from url "+t)}function o(t,e){var i=t.esriBundle.esriRequest({url:t.layerUrl+"/query",content:{where:t.oidField+">"+t.maxId,outFields:t.attribs,returnGeometry:"false",f:"json"},callbackParamName:"callback",handleAs:"json"});i.then(function(i){if(i.features){var n=i.features.length;if(n>0){var r=void 0;if(t.supportsLimit?r=i.exceededTransferLimit:(-1===t.batchSize&&(t.batchSize=n),r=n>=t.batchSize),r){var s=new t.esriBundle.Deferred;t.maxId=i.features[n-1].attributes[t.oidField],o(t,s),s.then(function(t){e.resolve(i.features.concat(t))},function(t){e.reject(t)})}else e.resolve(i.features)}else e.resolve([])}else e.reject(i.error)},function(t){e.reject(t)})}function h(t,e,i,n,s){var o=r(a(t),n);return o.layerData=new Promise(function(r,a){var o={},h=n.esriRequest({url:t,content:{f:"json"},callbackParamName:"callback",handleAs:"json"});h.then(function(n){n&&"undefined"==typeof n.error?(o.layerType=n.type,o.geometryType=n.geometryType,o.minScale=n.minScale,o.maxScale=n.maxScale,o.supportsFeatures=!1,"Feature Layer"===n.type&&(o.supportsFeatures=!0,o.fields=n.fields,n.fields.every(function(t){return"esriFieldTypeOID"===t.type?(o.oidField=t.name,!1):!0}),"*"!==i&&-1===i.split(",").indexOf(o.oidField)&&(i+=","+o.oidField),o.renderer=n.drawingInfo.renderer,o.legend=s.symbology.rendererToLegend(o.renderer,e),s.symbology.enhanceRenderer(o.renderer,o.legend),o.load={supportsLimit:(n.currentVersion||1)>=10.1,layerUrl:t,attribs:i}),r(o)):(console.warn("Service metadata load error"),a(n&&n.error?n.error:new Error("Unknown error loading service metadata")))},function(t){console.warn("Service metadata load error : "+t),a(t)})}),o}function u(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e[t]||{};return{skip:i.skip||!1,attribs:i.attribs||"*"}}function l(t,e,i,o){var l=n(t.id);if(t.url){var c=a(t.url),f=u(c,e);f.skip||l.registerData(h(t.url,c,f.attribs,i,o))}else{var d=r(0,i);d._attribData=Promise.resolve(s(t.objectIdField,t.graphics.map(function(t){return{attributes:t.attributes}})));var p=t.renderer.toJson(),m=o.symbology.rendererToLegend(p,0);o.symbology.enhanceRenderer(p,m),d.layerData=Promise.resolve({oidField:t.objectIdField,fields:t.fields,geometryType:t.geometryType||JSON.parse(t._json).layerDefinition.drawingInfo.geometryType,minScale:t.minScale,maxScale:t.maxScale,renderer:p,legend:m}),l.registerData(d)}return l}function c(t,e,i,r){for(var s=0,a=void 0,o=n(t.id),l=t.layerInfos;s<l.length;)if(a=u(s,e),l[s].subLayerIds)if(a.skip){for(var c=s;l[c].subLayerIds;)c=l[c].subLayerIds[l[c].subLayerIds.length-1];s=c+1}else s+=1;else a.skip||o.registerData(h(t.url+"/"+s.toString(),s,a.attribs,i,r)),s+=1;return o}function f(t,e){return function(i,n){var r=d(t),s=r.getLayerType(i);switch(s){case"FeatureLayer":return l(i,n,t,e);case"ArcGISDynamicMapServiceLayer":return c(i,n,t,e);default:throw new Error("no support for loading attributes from layer type "+s)}}}var d=t("./shared.js");e.exports=function(t,e){return{loadLayerAttribs:f(t,e)}}},{"./shared.js":162}],147:[function(t,e,i){"use strict";e.exports=function(t){function e(e,i,n){function r(t){a.select(t)}var s=void 0,a=new t.BasemapGallery({showArcGISBasemaps:!1,map:i},n);return e.forEach(function(e){var i=[];e.layers.forEach(function(e){var n=new t.BasemapLayer({url:e.url});i.push(n)}),s=new t.Basemap({id:e.id,layers:i,title:e.name,thumbnailUrl:e.thumbnailUrl,wkid:e.wkid}),a.add(s)}),a.startup(),a.on("error",function(t){console.error("basemap gallery error:",t)}),{setBasemap:r,basemapGallery:a}}return{Basemap:t.Basemap,BasemapGallery:t.BasemapGallery,BasemapLayer:t.BasemapLayer,makeBasemaps:e}}},{}],148:[function(t,e,i){e.exports={pinSymbol:{color:[252,252,0,255],size:24,yoffset:12,type:"esriSMS",style:"esriSMSPath",outline:{color:[0,0,0,255],width:.5,type:"esriSLS",style:"esriSLSSolid"},path:"M18 8c0-3.31-2.69-6-6-6S6 4.69 6 8c0 4.5 6 11 6 11s6-6.5 6-11zm-8 0c0-1.1.9-2 2-2s2 .9 2 2-.89 2-2 2c-1.1 0-2-.9-2-2zM5 20v2h14v-2H5z"},hazeSymbol:{color:[255,255,255,127],type:"esriSFS",style:"esriSFSSolid",outline:{type:"esriSLS",style:"esriSLSNull"}}}},{}],149:[function(t,e,i){e.exports={circlePoint:{geometryType:"esriGeometryPoint",renderer:{type:"simple",symbol:{type:"esriSMS",style:"esriSMSCircle",color:[67,100,255,200],size:7}}},solidLine:{geometryType:"esriGeometryPolyline",renderer:{type:"simple",symbol:{type:"esriSLS",style:"esriSLSSolid",color:[90,90,90,200],width:2}}},outlinedPoly:{geometryType:"esriGeometryPolygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[76,76,125,200],outline:{type:"esriSLS",style:"esriSLSSolid",color:[110,110,110,255],width:1}}}},boundingBoxPoly:{geometryType:"esriGeometryPolygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[255,0,0,64],outline:{type:"esriSLS",style:"esriSLSSolid",color:[240,128,128,255],width:1}}}}}},{}],150:[function(t,e,i){"use strict";function n(t,e){Object.keys(e).forEach(function(i){var n=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();t.on(n,function(t){var r=["update-start","update-end","error"];r.indexOf(n)>=0&&(t.layer=t.target),e[i](t)})})}e.exports=function(){return{wrapEvents:n}}},{}],151:[function(t,e,i){"use strict";function n(t){return function(e){var i=new t.Graphic({geometry:e.geometry});return i.symbol=e.getLayer().renderer.getSymbol(e),i}}function r(t){return function(e,i){var n=new t.Graphic({geometry:e});return n.symbol=t.symbolJsonUtils.fromJson(i),n}}function s(t,e){return function(t,i){return t.map(function(t){if("server"!==t.source)return Promise.resolve(e.hilight.cloneLayerGraphic(t.graphic));var n=function(){var n=t.graphic.geometry;e.proj.isSpatialRefEqual(n.spatialReference,i)||(n=e.proj.localProjectGeometry(i,n));var r=t.layer.attributeBundle;return{v:r[t.featureIdx].layerData.then(function(i){var r=e.symbology.getGraphicSymbol(t.graphic.attributes,i.renderer);return e.hilight.geomToGraphic(n,r)})}}();return"object"==typeof n?n.v:void 0})}}function a(t){return function(e){function i(){a._map.reorderLayer(a,a._map.graphicsLayerIds.length)}var n="rv_hilight",r=127,s=o.pinSymbol;e&&(e.layerId&&(n=e.layerId),e.pinSymbol&&(s=e.pinSymbol),e.hazeOpacity&&(r=e.hazeOpacity));var a=new t.GraphicsLayer({id:n,visible:!0});return a.addPin=function(e){var n=new t.Graphic({symbol:s});n.setGeometry(e),a.add(n),i()},a.addHilight=function(e){var n=Array.isArray(e)?e:[e];if(a._hilightGraphics)a._hilightGraphics.forEach(function(t){return a.remove(t)});else{var s={symbol:o.hazeSymbol};s.symbol.color[3]=r;var h=new t.Graphic(s);h.setGeometry(a._map.extent.expand(1.5)),h.haze=!0,a.add(h)}a._hilightGraphics=n,n.forEach(function(t){return a.add(t)}),i()},a.clearHilight=function(){a._hilightGraphics=null,a.clear()},a.on("graphic-node-add",function(t){var e=t.graphic,i=e.getShape();e.haze?i.moveToBack():i.moveToFront()}),a}}var o=t("./defaultHilightSymbols.json");e.exports=function(t,e){return{makeHilightLayer:a(t),geomToGraphic:r(t),cloneLayerGraphic:n(t),getUnboundGraphics:s(t,e)}}},{"./defaultHilightSymbols.json":148}],152:[function(t,e,i){"use strict";function n(t,e){var i=!1,n={};return n.layer=h(t,n),n.legend=u(),n.proj=f(t),n.basemap=s(t),n.mapManager=l(t,n),n.mapPrint=c(t,n),n.attribs=r(t,n),n.symbology=m(t,n,e),n.hilight=o(t,n),n.events=a(),n.query=d(t),n.shared=p(t),n.debug=function(){return 1===arguments.length&&(i=arguments[0]===!0),i},n.esriBundle=function(){if(i)return t;throw new Error("Must set debug to directly access the bundle")},n}var r=t("./attribute.js"),s=t("./basemap.js"),a=t("./events.js"),o=t("./hilight.js"),h=t("./layer.js"),u=t("./legend.js"),l=t("./mapManager.js"),c=t("./mapPrint.js"),f=t("./proj.js"),d=t("./query.js"),p=t("./shared.js"),m=t("./symbology.js");e.exports=function(t,e){function i(){return new Promise(function(t,i){e.require(r.map(function(t){return t[0]}),function(){for(var e={},i=0;i<arguments.length;++i)e[r[i][1]]=arguments[i];t(e)}),e.require.on("error",i)})}var r=[["dojo/Deferred","Deferred"],["dojo/query","dojoQuery"],["esri/Color","Color"],["esri/config","esriConfig"],["esri/dijit/Basemap","Basemap"],["esri/dijit/BasemapGallery","BasemapGallery"],["esri/dijit/BasemapLayer","BasemapLayer"],["esri/dijit/OverviewMap","OverviewMap"],["esri/dijit/Scalebar","Scalebar"],["esri/geometry/Extent","Extent"],["esri/geometry/Point","Point"],["esri/geometry/ScreenPoint","ScreenPoint"],["esri/graphic","Graphic"],["esri/graphicsUtils","graphicsUtils"],["esri/layers/ArcGISDynamicMapServiceLayer","ArcGISDynamicMapServiceLayer"],["esri/layers/ArcGISImageServiceLayer","ArcGISImageServiceLayer"],["esri/layers/ArcGISTiledMapServiceLayer","ArcGISTiledMapServiceLayer"],["esri/layers/FeatureLayer","FeatureLayer"],["esri/layers/GraphicsLayer","GraphicsLayer"],["esri/layers/LayerDrawingOptions","LayerDrawingOptions"],["esri/layers/WMSLayer","WmsLayer"],["esri/map","Map"],["esri/request","esriRequest"],["esri/SpatialReference","SpatialReference"],["esri/symbols/jsonUtils","symbolJsonUtils"],["esri/tasks/GeometryService","GeometryService"],["esri/tasks/IdentifyParameters","IdentifyParameters"],["esri/tasks/IdentifyTask","IdentifyTask"],["esri/tasks/ProjectParameters","ProjectParameters"],["esri/tasks/query","Query"],["esri/tasks/QueryTask","QueryTask"],["esri/tasks/PrintParameters","PrintParameters"],["esri/tasks/PrintTask","PrintTask"],["esri/tasks/PrintTemplate","PrintTemplate"]];return new Promise(function(i,n){if(e.require)return console.warn("window.require has been set, attempting to reuse existing loader with no new script tag created"),void i();var r=e.document.createElement("script"),s=e.document.head||e.document.getElementsByTagName("head")[0];r.type="text/javascript",r.onerror=function(t){return n(t)},r.onload=function(){return i()},s.appendChild(r),r.src=t,console.log("made a promise")}).then(i).then(function(t){return n(t,e)})}},{"./attribute.js":146,"./basemap.js":147,"./events.js":150,"./hilight.js":151,"./layer.js":153,"./legend.js":157,"./mapManager.js":158,"./mapPrint.js":159,"./proj.js":160,"./query.js":161,"./shared.js":162,"./symbology.js":163}],153:[function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t){var e=t.toLowerCase(),i=[/^http:/,/^https:/,/^ftp:/,/^\/\//];return i.some(function(t){return e.match(t)})}function s(t,e){return new Promise(function(i,n){var r=e.esriRequest({url:t,handleAs:"arraybuffer"});r.then(function(t){i(t)},function(t){n(t)})})}function a(t){return{serviceType:t}}function o(t,e,i){var n=a(t);return n.name=i[e]||"",n}function h(t,e,i){return new Promise(function(n){var o=a(t);e&&r(e)?s(e,i).then(function(t){o.fileData=t,n(o)})["catch"](function(){o.type=R.Error,n(o)}):n(o)})}function u(t){if(t.type){var e={"Feature Layer":R.FeatureLayer,"Raster Layer":R.RasterLayer,"Group Layer":R.GroupLayer};return e[t.type]||R.Unknown}return t.hasOwnProperty("singleFusedMapCache")?t.singleFusedMapCache?R.TileService:R.DynamicService:t.hasOwnProperty("allowGeometryUpdates")?R.FeatureService:t.hasOwnProperty("allowedMosaicMethods")?R.ImageService:R.Unknown}function l(t,e,i){var n={};return n[R.FeatureLayer]=function(t){var e=o(R.FeatureLayer,"name",t);return e.fields=t.fields,e.geometryType=t.geometryType,e.smartDefaults={primary:e.fields[0].name},e},n[R.RasterLayer]=function(t){return o(R.RasterLayer,"name",t)},n[R.GroupLayer]=function(t){return o(R.GroupLayer,"name",t)},n[R.TileService]=function(t){return o(R.TileService,"mapName",t)},n[R.DynamicService]=function(t){var e=o(R.DynamicService,"mapName",t);return e.layers=t.layers,e},n[R.ImageService]=function(t){var e=o(R.ImageService,"name",t);return e.fields=t.fields,e},n[R.Unknown]=function(){return a(R.Unknown)},new Promise(function(r){var s=e.esriRequest({url:t,content:{f:"json"},callbackParamName:"callback",handleAs:"json"});s.then(function(t){var e=u(t);i&&e!==i&&(e=R.Unknown),r(n[e](t))},function(){r(a(R.Error))})})}function c(t,e,i){var n={};return n[R.CSV]=function(){return h(R.CSV,t,e)},n[R.GeoJSON]=function(){return h(R.GeoJSON,t,e)},n[R.Shapefile]=function(){return h(R.Shapefile,t,e)},n[R.Unknown]=function(){return h(R.Unknown)},new Promise(function(e){if(i)e(n[i]());else{var r=R.Unknown;switch(t.substr(t.lastIndexOf(".")+1).toLowerCase()){case"csv":r=R.CSV;break;case"zip":r=R.Shapefile;break;case"json":r=R.GeoJSON}e(n[r]())}})}function f(t,e){return console.log(t,e),Promise.resolve(a(R.WMS))}function d(t){return function(e,i){if(i){var n={},r={};return n[R.CSV]="F_FILE",n[R.GeoJSON]="F_FILE",n[R.Shapefile]="F_FILE",n[R.FeatureLayer]="F_ESRI",n[R.RasterLayer]="F_ESRI",n[R.GroupLayer]="F_ESRI",n[R.TileService]="F_ESRI",n[R.DynamicService]="F_ESRI",n[R.ImageService]="F_ESRI",n[R.WMS]="F_WMS",r.F_FILE=function(){return c(e,t,i)},r.F_ESRI=function(){return l(e,t,i)},r.F_WMS=function(){return f(e,t)},r[n[i]]()}return new Promise(function(i){c(e,t).then(function(n){n.serviceType===R.Unknown||n.serviceType===R.Error?l(e,t).then(function(n){n.serviceType===R.Unknown||n.serviceType===R.Error?i(n):n.serviceType===R.GroupLayer?!function(){var n=e.lastIndexOf("/"),r=parseInt(e.substring(n+1));e=e.substring(0,n),l(e,t).then(function(t){t.groupIdx=r,i(t)})}():i(n)}):i(n)})})}}function p(t){return new TextDecoder("utf-8").decode(new Uint8Array(t))}function m(t){var e={Point:"esriGeometryPoint",MultiPoint:"esriGeometryMultipoint",LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"},i=w(t),n={fields:i,geometryType:e[t.features[0].geometry.type],formattedData:t,smartDefaults:{primary:i[0].name}};return n.geometryType?Promise.resolve(n):Promise.reject(new Error("Unexpected geometry type in GeoJSON"))}function y(t){var e=p(t),i=P(e,","),n=void 0;if(0===i.length)n="File has no rows";else{var r=function(){var t=i[0].length;if(2>t)n="File has less than two columns";else{if(i.every(function(e){return e.length===t})){var r={formattedData:e,smartDefaults:v(i),fields:i[0].map(function(t){return{name:t,type:"esriFieldTypeString"}}),geometryType:"esriGeometryPoint"};return{v:Promise.resolve(r)}}n="File has inconsistent column counts"}}();if("object"==typeof r)return r.v}return Promise.reject(new Error(n))}function g(t,e){var i,r=(i={},n(i,R.CSV,function(t){return y(t)}),n(i,R.GeoJSON,function(t){var e=JSON.parse(p(t));return m(e)}),n(i,R.Shapefile,function(t){return T(t).then(function(t){return m(t)})}),i);return r[t](e)}function v(t){function e(t,e,i){var n=t[0],r=n.filter(function(i,n){return t.every(function(t,i){return 0===i||e.test(t[n])})}).filter(function(t){return i.test(t)});return r}var i=new RegExp(/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)$/),n=new RegExp(/^[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/),r=new RegExp(/^.*(y|la).*$/i),s=new RegExp(/^.*(x|lo).*$/i),a=e(t,i,r),o=e(t,n,s),h=a[0]||null,u=o.find(function(t){return t!==h})||null,l=t[0].find(function(t){return t!==h&&t!==u})||null;return{lat:h,"long":u,primary:l}}function b(t){return function(e,i){var n=new t.IdentifyParameters;if(!i)throw new Error("serverLayerIdentify - missing opts arguement");var r=["geometry","mapExtent","height","width"];return r.forEach(function(t){if(!i[t])throw new Error("serverLayerIdentify - missing opts."+t+" arguement");n[t]=i[t]}),n.layerIds=i.layerIds||e.visibleLayers,n.returnGeometry=i.returnGeometry||!1,n.layerOption=t.IdentifyParameters.LAYER_OPTION_ALL,n.spatialReference=i.geometry.spatialReference,n.tolerance=i.tolerance||5,new Promise(function(i,r){var s=new t.IdentifyTask(e.url);s.on("complete",function(t){i(t.results)}),s.on("error",function(t){r(t.error)}),s.execute(n)})}}function x(t){if("FeatureCollection"!==t.type)throw new Error("Assignment can only be performed on FeatureCollections");var e=!0,i=!0;t.features.forEach(function(t,n){Object.assign(t.properties,{ID_FILE:"",OBJECTID_FILE:""}),"id"in t&&"undefined"!=typeof t.id&&(t.properties.ID_FILE=t.id,e=!1),"OBJECTID"in t.properties&&(t.properties.OBJECTID_FILE=t.properties.OBJECTID,delete t.properties.OBJECTID,i=!1),t.id=n+1}),e&&t.features.forEach(function(t){delete t.properties.ID_FILE}),i&&t.features.forEach(function(t){delete t.properties.OBJECTID_FILE})}function w(t){if(t.features.length<1)throw new Error("Field extraction requires at least one feature");return Object.keys(t.features[0].properties).map(function(t){return{name:t,type:"esriFieldTypeString"}})}function _(t,e,i){return!t.getProjection(e)&&i&&e?i(e).then(function(i){return i&&t.addProjection(e,i),i}):Promise.resolve(null)}function M(t,e){return function(i,n){var r=void 0,s="EPSG:4326",a=void 0,o={objectIdField:"OBJECTID",fields:[{name:"OBJECTID",type:"esriFieldTypeOID"}]};if(x(i),o.drawingInfo=j[N[i.features[0].geometry.type]],i.crs&&"name"===i.crs.type&&(s=i.crs.properties.name),!n)throw new Error("makeGeoJsonLayer - missing opts arguement");if(n.sourceProjection&&(s=n.sourceProjection),!n.targetWkid)throw new Error("makeGeoJsonLayer - missing opts.targetWkid arguement");r=n.targetWkid,n.fields&&(o.fields=o.fields.concat(n.fields)),a=n.layerId?n.layerId:e.shared.generateUUID(),1===o.fields.length&&(o.fields=o.fields.concat(w(i)));var h="EPSG:"+r,u=_(e.proj,s,n.epsgLookup),l=_(e.proj,h,n.epsgLookup),c=new Promise(function(u){e.proj.projectGeojson(i,h,s);var l=I.ArcGIS.convert(i,{sr:r}),c=o.drawingInfo.geometryType,f={features:l,geometryType:c},d=new t.FeatureLayer({layerDefinition:o,featureSet:f},{mode:t.FeatureLayer.MODE_SNAPSHOT,id:a});d.spatialReference=new t.SpatialReference({wkid:r}),n.colour&&(d.renderer.symbol.color=new t.Color(n.colour)),d.geometryType=c,u(d)});return u.then(function(){return l}).then(function(){return c})}}function E(t,e){return function(t,i){var n={latfield:"Lat",lonfield:"Long",delimiter:","};return i&&(i.latfield&&(n.latfield=i.latfield),i.lonfield&&(n.lonfield=i.lonfield),i.delimiter&&(n.delimiter=i.delimiter)),new Promise(function(r,s){A.csv2geojson(t,n,function(t,a){t?(console.warn("csv conversion error"),console.log(t),s(t)):(a.features.map(function(t){t.properties[n.lonfield]=t.geometry.coordinates[0],t.properties[n.latfield]=t.geometry.coordinates[1]}),i.sourceProjection="EPSG:4326",i.renderer="circlePoint",e.layer.makeGeoJsonLayer(a,i).then(function(t){r(t)}))})})}}function P(t,e){return A.dsv(e).parseRows(t)}function S(t,e){return function(t,i){return new Promise(function(n,r){T(t).then(function(t){e.layer.makeGeoJsonLayer(t,i).then(function(t){n(t)})})["catch"](function(t){r(t)})})}}function k(t){return function(e,i){return new Promise(function(n,r){var s=t.esriRequest({url:e+i,content:{f:"json"},callbackParamName:"callback",handleAs:"json"});s.then(function(t){console.log(t),n(t)},function(t){console.warn(t),r(t)})})}}function C(t,e,i){return t.every(function(t){return!(isNaN(t[e])||isNaN(t[i]))})}var A=t("csv2geojson"),I=t("terraformer"),T=t("shpjs"),L=t("./layer/ogc.js"),B=t("./layer/bbox.js"),j=t("./defaultRenderers.json");I.ArcGIS=t("terraformer-arcgis-parser");var N={Point:"circlePoint",MultiPoint:"circlePoint",LineString:"solidLine",MultiLineString:"solidLine",Polygon:"outlinedPoly",MultiPolygon:"outlinedPoly"},R={CSV:"csv",GeoJSON:"geojson",Shapefile:"shapefile",FeatureLayer:"featurelayer",RasterLayer:"rasterlayer",GroupLayer:"grouplayer",TileService:"tileservice",FeatureService:"featureservice",DynamicService:"dynamicservice",ImageService:"imageservice",WMS:"wms",Unknown:"unknown",Error:"error"};e.exports=function(t,e){return{ArcGISDynamicMapServiceLayer:t.ArcGISDynamicMapServiceLayer,ArcGISImageServiceLayer:t.ArcGISImageServiceLayer,GraphicsLayer:t.GraphicsLayer,FeatureLayer:t.FeatureLayer,ScreenPoint:t.ScreenPoint,Query:t.Query,TileLayer:t.ArcGISTiledMapServiceLayer,ogc:L(t),bbox:B(t,e),LayerDrawingOptions:t.LayerDrawingOptions,getFeatureInfo:k(t),makeGeoJsonLayer:M(t,e),makeCsvLayer:E(t,e),makeShapeLayer:S(t,e),serverLayerIdentify:b(t),predictLayerUrl:d(t),validateFile:g,csvPeek:P,serviceType:R,validateLatLong:C}}},{"./defaultRenderers.json":149,"./layer/bbox.js":154,"./layer/ogc.js":155,csv2geojson:5,shpjs:137,terraformer:145,"terraformer-arcgis-parser":143}],154:[function(t,e,i){"use strict";function n(t,e){return function(i,n,s){var a=new t.GraphicsLayer({id:i,visible:!0}),o=n;return e.proj.isSpatialRefEqual(n.spatialReference,s)||(o=e.proj.projectEsriExtent(n,s)),a.add(new t.Graphic({geometry:o,symbol:r.boundingBoxPoly.renderer.symbol})),a}}var r=t("../defaultRenderers.json");e.exports=function(t,e){return{makeBoundingBox:n(t,e)}}},{"../defaultRenderers.json":149}],155:[function(t,e,i){"use strict";function n(t){return function(e,i,n,r){var s=void 0,a=void 0,h=e.getMap(),u=h.extent,l=e.spatialReferences,c=n.join(",");l&&l.length>1?s=l[0]:h.spatialReference.wkid&&(s=h.spatialReference.wkid),"1.3"===e.version||"1.3.0"===e.version?(a={CRS:"EPSG:"+s,I:i.screenPoint.x,J:i.screenPoint.y,STYLES:"",FORMAT:e.imageFormat},o.indexOf(String(s))>-1&&(a.BBOX=u.ymin+","+u.xmin+","+u.ymax+","+u.xmax)):a={SRS:"EPSG:"+s,X:i.screenPoint.x,Y:i.screenPoint.y},a.hasOwnProperty("BBOX")||(a.BBOX=u.xmin+","+u.ymin+","+u.xmax+","+u.ymax);var f={SERVICE:"WMS",REQUEST:"GetFeatureInfo",VERSION:e.version,WIDTH:h.width,HEIGHT:h.height,QUERY_LAYERS:c,LAYERS:c,INFO_FORMAT:r};return Object.keys(f).forEach(function(t){return a[t]=f[t]}),Promise.resolve(t.esriRequest({url:e.url.split("?")[0],content:a,handleAs:"text"}))}}function r(t){var e=t.dojoQuery;return function(i){function n(t,e){for(var i=0;i<t.childNodes.length;++i)if(t.childNodes[i].nodeName===e)return t.childNodes[i];return void 0}function r(t){return e("> Layer",t).map(function(t){var e=n(t,"Name"),i=n(t,"Title");return{name:e?e.textContent:null,desc:i.textContent,queryable:"1"===t.getAttribute("queryable"),layers:r(t)}})}function s(){var e=i;return-1===i.indexOf("?")&&(e+="?service=WMS&version=1.3&request=GetCapabilities"),Promise.resolve(new t.esriRequest({url:e,handleAs:"xml"}).promise)}var a=new Promise(function(t){s().then(function(e){return t(e)})["catch"](function(){console.error("Get capabilities failed; trying the second time;"),t(s())})});return a.then(function(t){return{layers:r(e("Capability",t)[0]),queryTypes:e("GetFeatureInfo > Format",t).map(function(t){return t.textContent})}})}}function s(t,e){t.forEach(function(t){t.name&&e.set(t.name,t.legendURL),t.subLayers.length>0&&s(t.subLayers,e)})}function a(t,e){var i=new Map;return s(t.layerInfos,i),e.map(function(t){return i.get(t)})}var o=t("./reversedAxis.json");e.exports=function(t){return{WmsLayer:t.WmsLayer,getFeatureInfo:n(t),parseCapabilities:r(t),getLegendUrls:a}}},{"./reversedAxis.json":156}],156:[function(t,e,i){e.exports=["4326","4269","4258","31467","31468","31469","2166","2167","2168","2036","2044","2045","2065","2081","2082","2083","2085","2086","2091","2092","2093","2096","2097","2098","2105","2106","2107","2108","2109","2110","2111","2112","2113","2114","2115","2116","2117","2118","2119","2120","2121","2122","2123","2124","2125","2126","2127","2128","2129","2130","2131","2132","2169","2170","2171","2172","2173","2174","2175","2176","2177","2178","2179","2180","2193","2199","2200","2206","2207","2208","2209","2210","2211","2212","2319","2320","2321","2322","2323","2324","2325","2326","2327","2328","2329","2330","2331","2332","2333","2334","2335","2336","2337","2338","2339","2340","2341","2342","2343","2344","2345","2346","2347","2348","2349","2350","2351","2352","2353","2354","2355","2356","2357","2358","2359","2360","2361","2362","2363","2364","2365","2366","2367","2368","2369","2370","2371","2372","2373","2374","2375","2376","2377","2378","2379","2380","2381","2382","2383","2384","2385","2386","2387","2388","2389","2390","2391","2392","2393","2394","2395","2396","2397","2398","2399","2400","2401","2402","2403","2404","2405","2406","2407","2408","2409","2410","2411","2412","2413","2414","2415","2416","2417","2418","2419","2420","2421","2422","2423","2424","2425","2426","2427","2428","2429","2430","2431","2432","2433","2434","2435","2436","2437","2438","2439","2440","2441","2442","2443","2444","2445","2446","2447","2448","2449","2450","2451","2452","2453","2454","2455","2456","2457","2458","2459","2460","2461","2462","2463","2464","2465","2466","2467","2468","2469","2470","2471","2472","2473","2474","2475","2476","2477","2478","2479","2480","2481","2482","2483","2484","2485","2486","2487","2488","2489","2490","2491","2492","2493","2494","2495","2496","2497","2498","2499","2500","2501","2502","2503","2504","2505","2506","2507","2508","2509","2510","2511","2512","2513","2514","2515","2516","2517","2518","2519","2520","2521","2522","2523","2524","2525","2526","2527","2528","2529","2530","2531","2532","2533","2534","2535","2536","2537","2538","2539","2540","2541","2542","2543","2544","2545","2546","2547","2548","2549","2551","2552","2553","2554","2555","2556","2557","2558","2559","2560","2561","2562","2563","2564","2565","2566","2567","2568","2569","2570","2571","2572","2573","2574","2575","2576","2577","2578","2579","2580","2581","2582","2583","2584","2585","2586","2587","2588","2589","2590","2591","2592","2593","2594","2595","2596","2597","2598","2599","2600","2601","2602","2603","2604","2605","2606","2607","2608","2609","2610","2611","2612","2613","2614","2615","2616","2617","2618","2619","2620","2621","2622","2623","2624","2625","2626","2627","2628","2629","2630","2631","2632","2633","2634","2635","2636","2637","2638","2639","2640","2641","2642","2643","2644","2645","2646","2647","2648","2649","2650","2651","2652","2653","2654","2655","2656","2657","2658","2659","2660","2661","2662","2663","2664","2665","2666","2667","2668","2669","2670","2671","2672","2673","2674","2675","2676","2677","2678","2679","2680","2681","2682","2683","2684","2685","2686","2687","2688","2689","2690","2691","2692","2693","2694","2695","2696","2697","2698","2699","2700","2701","2702","2703","2704","2705","2706","2707","2708","2709","2710","2711","2712","2713","2714","2715","2716","2717","2718","2719","2720","2721","2722","2723","2724","2725","2726","2727","2728","2729","2730","2731","2732","2733","2734","2735","2738","2739","2740","2741","2742","2743","2744","2745","2746","2747","2748","2749","2750","2751","2752","2753","2754","2755","2756","2757","2758","2935","2936","2937","2938","2939","2940","2941","2953","2963","3006","3007","3008","3009","3010","3011","3012","3013","3014","3015","3016","3017","3018","3019","3020","3021","3022","3023","3024","3025","3026","3027","3028","3029","3030","3034","3035","3038","3039","3040","3041","3042","3043","3044","3045","3046","3047","3048","3049","3050","3051","3058","3059","3068","3114","3115","3116","3117","3118","3120","3126","3127","3128","3129","3130","3131","3132","3133","3134","3135","3136","3137","3138","3139","3140","3146","3147","3150","3151","3152","3300","3301","3328","3329","3330","3331","3332","3333","3334","3335","3346","3350","3351","3352","3366","3386","3387","3388","3389","3390","3396","3397","3398","3399","3407","3414","3416","3764","3788","3789","3790","3791","3793","3795","3796","3819","3821","3823","3824","3833","3834","3835","3836","3837","3838","3839","3840","3841","3842","3843","3844","3845","3846","3847","3848","3849","3850","3851","3852","3854","3873","3874","3875","3876","3877","3878","3879","3880","3881","3882","3883","3884","3885","3888","3889","3906","3907","3908","3909","3910","3911","4001","4002","4003","4004","4005","4006","4007","4008","4009","4010","4011","4012","4013","4014","4015","4016","4017","4018","4019","4020","4021","4022","4023","4024","4025","4026","4027","4028","4029","4030","4031","4032","4033","4034","4035","4036","4037","4038","4040","4041","4042","4043","4044","4045","4046","4047","4052","4053","4054","4055","4074","4075","4080","4081","4120","4121","4122","4123","4124","4125","4126","4127","4128","4129","4130","4131","4132","4133","4134","4135","4136","4137","4138","4139","4140","4141","4142","4143","4144","4145","4146","4147","4148","4149","4150","4151","4152","4153","4154","4155","4156","4157","4158","4159","4160","4161","4162","4163","4164","4165","4166","4167","4168","4169","4170","4171","4172","4173","4174","4175","4176","4178","4179","4180","4181","4182","4183","4184","4185","4188","4189","4190","4191","4192","4193","4194","4195","4196","4197","4198","4199","4200","4201","4202","4203","4204","4205","4206","4207","4208","4209","4210","4211","4212","4213","4214","4215","4216","4218","4219","4220","4221","4222","4223","4224","4225","4226","4227","4228","4229","4230","4231","4232","4233","4234","4235","4236","4237","4238","4239","4240","4241","4242","4243","4244","4245","4246","4247","4248","4249","4250","4251","4252","4253","4254","4255","4256","4257","4259","4260","4261","4262","4263","4264","4265","4266","4267","4268","4270","4271","4272","4273","4274","4275","4276","4277","4278","4279","4280","4281","4282","4283","4284","4285","4286","4287","4288","4289","4291","4292","4293","4294","4295","4296","4297","4298","4299","4300","4301","4302","4303","4304","4306","4307","4308","4309","4310","4311","4312","4313","4314","4315","4316","4317","4318","4319","4322","4324","4327","4329","4339","4341","4343","4345","4347","4349","4351","4353","4355","4357","4359","4361","4363","4365","4367","4369","4371","4373","4375","4377","4379","4381","4383","4386","4388","4417","4434","4463","4466","4469","4470","4472","4475","4480","4482","4483","4490","4491","4492","4493","4494","4495","4496","4497","4498","4499","4500","4501","4502","4503","4504","4505","4506","4507","4508","4509","4510","4511","4512","4513","4514","4515","4516","4517","4518","4519","4520","4521","4522","4523","4524","4525","4526","4527","4528","4529","4530","4531","4532","4533","4534","4535","4536","4537","4538","4539","4540","4541","4542","4543","4544","4545","4546","4547","4548","4549","4550","4551","4552","4553","4554","4555","4557","4558","4568","4569","4570","4571","4572","4573","4574","4575","4576","4577","4578","4579","4580","4581","4582","4583","4584","4585","4586","4587","4588","4589","4600","4601","4602","4603","4604","4605","4606","4607","4608","4609","4610","4611","4612","4613","4614","4615","4616","4617","4618","4619","4620","4621","4622","4623","4624","4625","4626","4627","4628","4629","4630","4631","4632","4633","4634","4635","4636","4637","4638","4639","4640","4641","4642","4643","4644","4645","4646","4652","4653","4654","4655","4656","4657","4658","4659","4660","4661","4662","4663","4664","4665","4666","4667","4668","4669","4670","4671","4672","4673","4674","4675","4676","4677","4678","4679","4680","4681","4682","4683","4684","4685","4686","4687","4688","4689","4690","4691","4692","4693","4694","4695","4696","4697","4698","4699","4700","4701","4702","4703","4704","4705","4706","4707","4708","4709","4710","4711","4712","4713","4714","4715","4716","4717","4718","4719","4720","4721","4722","4723","4724","4725","4726","4727","4728","4729","4730","4731","4732","4733","4734","4735","4736","4737","4738","4739","4740","4741","4742","4743","4744","4745","4746","4747","4748","4749","4750","4751","4752","4753","4754","4755","4756","4757","4758","4759","4760","4761","4762","4763","4764","4765","4766","4767","4768","4769","4770","4771","4772","4773","4774","4775","4776","4777","4778","4779","4780","4781","4782","4783","4784","4785","4786","4787","4788","4789","4790","4791","4792","4793","4794","4795","4796","4797","4798","4799","4800","4801","4802","4803","4804","4805","4806","4807","4808","4809","4810","4811","4812","4813","4814","4815","4816","4817","4818","4819","4820","4821","4822","4823","4824","4839","4855","4856","4857","4858","4859","4860","4861","4862","4863","4864","4865","4866","4867","4868","4869","4870","4871","4872","4873","4874","4875","4876","4877","4878","4879","4880","4883","4885","4887","4889","4891","4893","4895","4898","4900","4901","4902","4903","4904","4907","4909","4921","4923","4925","4927","4929","4931","4933","4935","4937","4939","4941","4943","4945","4947","4949","4951","4953","4955","4957","4959","4961","4963","4965","4967","4969","4971","4973","4975","4977","4979","4981","4983","4985","4987","4989","4991","4993","4995","4997","4999","5012","5013","5017","5048","5105","5106","5107","5108","5109","5110","5111","5112","5113","5114","5115","5116","5117","5118","5119","5120","5121","5122","5123","5124","5125","5126","5127","5128","5129","5130","5132","5167","5168","5169","5170","5171","5172","5173","5174","5175","5176","5177","5178","5179","5180","5181","5182","5183","5184","5185","5186","5187","5188","5224","5228","5229","5233","5245","5246","5251","5252","5253","5254","5255","5256","5257","5258","5259","5263","5264","5269","5270","5271","5272","5273","5274","5275","5801","5802","5803","5804","5808","5809","5810","5811","5812","5813","5814","5815","5816","20004","20005","20006","20007","20008","20009","20010","20011","20012","20013","20014","20015","20016","20017","20018","20019","20020","20021","20022","20023","20024","20025","20026","20027","20028","20029","20030","20031","20032","20064","20065","20066","20067","20068","20069","20070","20071","20072","20073","20074","20075","20076","20077","20078","20079","20080","20081","20082","20083","20084","20085","20086","20087","20088","20089","20090","20091","20092","21413","21414","21415","21416","21417","21418","21419","21420","21421","21422","21423","21453","21454","21455","21456","21457","21458","21459","21460","21461","21462","21463","21473","21474","21475","21476","21477","21478","21479","21480","21481","21482","21483","21896","21897","21898","21899","22171","22172","22173","22174","22175","22176","22177","22181","22182","22183","22184","22185","22186","22187","22191","22192","22193","22194","22195","22196","22197","25884","27205","27206","27207","27208","27209","27210","27211","27212","27213","27214","27215","27216","27217","27218","27219","27220","27221","27222","27223","27224","27225","27226","27227","27228","27229","27230","27231","27232","27391","27392","27393","27394","27395","27396","27397","27398","27492","28402","28403","28404","28405","28406","28407","28408","28409","28410","28411","28412","28413","28414","28415","28416","28417","28418","28419","28420","28421","28422","28423","28424","28425","28426","28427","28428","28429","28430","28431","28432","28462","28463","28464","28465","28466","28467","28468","28469","28470","28471","28472","28473","28474","28475","28476","28477","28478","28479","28480","28481","28482","28483","28484","28485","28486","28487","28488","28489","28490","28491","28492","29701","29702","30161","30162","30163","30164","30165","30166","30167","30168","30169","30170","30171","30172","30173","30174","30175","30176","30177","30178","30179","30800","31251","31252","31253","31254","31255","31256","31257","31258","31259","31275","31276","31277","31278","31279","31281","31282","31283","31284","31285","31286","31287","31288","31289","31290","31466","31700"];
},{}],157:[function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function r(t,e){for(var i=e,n=t-e,r=[[[[]]]],s=1;t>=s;++s){r[s]=[];for(var a=0;s>=a;++a)if(!(a>i||s-a>n)){var o=a>0?r[s-1][a-1].map(function(t){return t.concat(!0)}):[],h=s>a?r[s-1][a].map(function(t){return t.concat(!1)}):[];r[s][a]=o.concat(h)}}return r[t][e]}function s(t,e){return t[0].splitBefore=!1,e.forEach(function(e,i){return t[i+1].splitBefore=e}),t}function a(t,e){var i=t.length-1,s=e-1,a=r(i,s),o=Number.MAX_VALUE,h=null,u=Array(e);return a.forEach(function(e){u.fill(0);var i=0;t.forEach(function(t,n){u[i]+=t.height,e[n]&&++i});var r=Math.max.apply(Math,n(u));o>=r&&(o=r,h=e)}),{layers:t,sectionsUsed:e,bestPerm:h,bestHeight:o}}function o(t,e){for(var i=Number.MAX_VALUE,n=null,r=-1,o=e;o>1;--o){var h=a(t,o),u=h.bestPerm,l=h.bestHeight;if(.8*l>i)break;i>=l&&(i=l,n=u,r=o)}return s(t,n),{layers:t,sectionsUsed:r}}function h(t,e,i){function n(t){t.forEach(function(t){1!==i&&(o[i-1]=s-r,s=t.y+("group"===t.type?t.headerHeight:t.height),s-r>=e&&(i--,r=t.y,a.push(t)),"group"===t.type&&n(t.items))})}var r=t.y,s=0,a=[],o=Array(i).fill(0);return n(t.items),o[i-1]=t.height-(r-t.y),{whiteSpace:o.reduce(function(t,i){return t+Math.abs(e-i)},0),splits:a}}function u(t,e){if(1===e)return t;for(var i=t.height/e,n=h(t,i,e),r=n.splits,s=n.whiteSpace,a=8,o=s/a,u=1;a>=u;u++){i+=o;var l=h(t,i,e),c=l.splits,f=l.whiteSpace;s>f&&(s=f,r=c)}return r.forEach(function(t){return t.splitBefore=!0}),t}function l(t,e,i){s(t,Array(t.length-1).fill(!0));var r={};r[t.length]={height:Math.max.apply(Math,n(t.map(function(t){return t.height}))),segments:Array(t.length)},r[t.length].segments.fill(1);for(var a=t.length,o=function(){var e=r[a].segments,i=e.map(function(e,i){return t[i].height/e}),s=i.indexOf(Math.max.apply(Math,n(i))),o=e.map(function(t,e){return e===s?t+1:t});++a,r[a]={height:Math.max.apply(Math,n(o.map(function(e,i){return t[i].height/e}))),segments:o}};e>a&&r[a].height>2*i;)o();for(;a>t.length&&!(r[a].height<.9*r[a-1].height);)--a;return t.forEach(function(t,e){return u(t,r[a].segments[e])}),{layers:t,sectionsUsed:a}}function c(t,e,i){if(t.length>f){var n=function(){var i=Math.ceil(t.length/e),n=Array(t.length-1).fill(0).map(function(t,e){return(e+1)%i===0});return s(t,n),{v:{layers:t,sectionsUsed:e}}}();if("object"==typeof n)return n.v}return t.length<=e?l(t,e,i):o(t,e)}var f=15;e.exports=function(){return{makeLegend:c,allComb:r,splitLayer:h,findOptimalSplit:u}}},{}],158:[function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var r=function(){function t(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(h){r=!0,s=h}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=t("./basemap.js");e.exports=function(t,e){function i(e,i){if(i.basemaps){var n=s(t);m=n.makeBasemaps(i.basemaps,e)}else console.warn("warning: basemaps setting does not exist");return i.scalebar?(y=new p.Scalebar({map:e,attachTo:i.scalebar.attachTo,scalebarUnit:i.scalebar.scalebarUnit}),y.show()):console.warn("scalebar setting does not exists"),i.overviewMap&&i.overviewMap.enabled?(g&&(g.destroy(),g=null),g=p.OverviewMap({map:e,expandFactor:1,visible:i.overviewMap.enabled}),g.startup(),m.basemapGallery.on("selection-change",function(){g.destroy(),g=p.OverviewMap({map:e,expandFactor:1,visible:i.overviewMap.enabled}),g.startup()})):console.warn("overviewMap setting does not exist, or it's visible setting is set to false."),{BasemapControl:m,OverviewMapControl:g,ScalebarControl:y}}function a(e){t.esriConfig.defaults.io.proxyUrl=e}function o(e,i){return"undefined"==typeof i?t.esriConfig.defaults.map[e]:void(t.esriConfig.defaults.map[e]=i)}function h(e){return t.Extent({xmin:e.xmin,ymin:e.ymin,xmax:e.xmax,ymax:e.ymax,spatialReference:{wkid:e.spatialReference.wkid}})}function u(t,e){var i=t.map(function(t){return Math.abs(t.scale-e)}),r=i.indexOf(Math.min.apply(Math,n(i)));return t[r]}function l(t){var i=180;if(3857!==t.spatialReference.wkid&&102100!==t.spatialReference.wkid){var n=e.proj.localProjectPoint(t.spatialReference,"EPSG:4326",{x:(t.extent.xmin+t.extent.xmax)/2,y:t.extent.ymin}),r={x:-96,y:90},s=(n.x-r.x)*Math.PI/180,a=r.y*Math.PI/180,o=n.y*Math.PI/180,h=Math.sin(s)*Math.cos(o),u=Math.cos(a)*Math.sin(o)-Math.sin(a)*Math.cos(o)*Math.cos(s),l=180*Math.atan2(h,u)/Math.PI;i=((l+360)%360).toFixed(1)}return i}function c(t){var i=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=e.proj.localProjectPoint(t.spatialReference,"EPSG:4326",{x:t.extent.xmin,y:(t.extent.ymin+t.extent.ymax)/2}),r=e.proj.localProjectPoint(t.spatialReference,"EPSG:4326",{x:t.extent.xmax,y:(t.extent.ymin+t.extent.ymax)/2}),s=6371e3,a=Math.PI/180,o=n.y*a,h=r.y*a,u=(r.y-n.y)*a,l=(r.x-n.x)*a,c=Math.sin(u/2)*Math.sin(u/2)+Math.cos(o)*Math.cos(h)*Math.sin(l/2)*Math.sin(l/2),f=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),d=s*f,p=i?i:t.width,m=[d>1e3?"km":"m",d>1600?"mi":"ft"],y=d>1e3?d/1e3:d,g=y/p;return{distance:y,ratio:g,units:m}}function f(t,e,i,n,r,s){return t>n?(e=n,i=n-s):r>t&&(e=r+s,i=r),[e,i]}function d(e,i){var n=t.Extent(e.toJson()),s=Math.min(e.getHeight(),i.getHeight()),a=Math.min(e.getWidth(),i.getWidth()),o=e.getCenter(),h=f(o.x,n.xmax,n.xmin,i.xmax,i.xmin,a),u=r(h,2);n.xmax=u[0],n.xmin=u[1];var l=f(o.y,n.ymax,n.ymin,i.ymax,i.ymin,s),c=r(l,2);return n.ymax=c[0],n.ymin=c[1],{newExtent:n,adjusted:!e.contains(n)}}var p={Extent:t.Extent,Map:t.Map,OverviewMap:t.OverviewMap,Scalebar:t.Scalebar,getExtentFromJson:h,setupMap:i,setProxy:a,mapDefault:o,findClosestLOD:u,getNorthArrowAngle:l,getScaleRatio:c,enforceBoundary:d,clipExtentCoords:f},m=void 0,y=void 0,g=void 0;return p}},{"./basemap.js":147}],159:[function(t,e,i){"use strict";function n(t,e,i,n){var a=t.PrintTask(n.url,{async:!0}),o=new t.PrintParameters,h=new t.PrintTemplate;h.layout="MAP_ONLY",h.exportOptions={height:n.height||i.height,width:n.width||i.width,dpi:96},h.format=n.format,h.showAttribution=!1,h.preserveScale=!1,o.map=i,o.template=h;var l=r(i),c=new Promise(function(t,e){a.execute(o,function(e){return t(u.convertImageToCanvas(e.url))},function(t){return e(t)})});return s(l),c}function r(t){return t.graphicsLayerIds.map(function(e){return t.getLayer(e)}).filter(function(t){return t.visible}).map(function(t){return t.setVisibility(!1),t})}function s(t){t.forEach(function(t){return t.setVisibility(!0)})}function a(t){function e(t,e){var i=arguments.length<=2||void 0===arguments[2]?null:arguments[2],n={width:t.width.baseVal.value,height:t.height.baseVal.value},r=(t.getAttribute("viewBox")||"0 0 "+n.width+" "+n.height).split(" "),s=o(r,4),a=s[0],h=s[1],u=s[2],l=s[3],c={minX:a,minY:h,width:u,height:l};return t.setAttribute("width",e.width),t.setAttribute("height",e.height),t.setAttribute("viewBox",[(i||c).minX,(i||c).minY,(i||c).width,(i||c).height].join(" ")),{originalSize:n,originalViewbox:c}}var i=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];n=n||document.createElement("canvas");var r=document.getElementById("esri.Map_"+t.id.split("_")[1]+"_gc");r.getAttribute("xmlns")||Object.entries(l).forEach(function(t){var e=o(t,2),i=e[0],n=e[1];return r.setAttribute(i,n)});var s=void 0;i&&(s=e(r,i));var a=new Promise(function(t,a){try{h(n,r.outerHTML,{useCORS:!0,ignoreAnimation:!0,ignoreMouse:!0,renderCallback:function(){i&&e(r,s.originalSize,s.originalViewbox),t(n)}})}catch(o){a(o)}});return a}var o=function(){function t(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(h){r=!0,s=h}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.RGBColor=t("rgbcolor");var h=t("canvg-origin"),u=t("./shared.js")(),l={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};e.exports=function(t,e){return{printLocal:function(t,e){return a(t,e)},printServer:function(i,r){return n(t,e,i,r)}}}},{"./shared.js":162,"canvg-origin":4,rgbcolor:134}],160:[function(t,e,i){"use strict";function n(t,e,i){var n=p(d,f);n(t,e,i)}function r(t){if("object"==typeof t){if(t.wkid)return"EPSG:"+t.wkid;if(t.wkt)return t.wkt}else{if("number"==typeof t)return"EPSG:"+t;if("string"==typeof t)return t}throw new Error("Bad argument type, please provide a string, integer or SpatialReference object.")}function s(t,e,i){return f(r(t),r(e),i)}function a(t,e){var i=e.spatialReference;e.spatialReference={wkid:8888};var s=d.ArcGIS.parse(e,{sr:8888});e.spatialReference=i,n(s,r(t),r(i));var a=d.ArcGIS.convert(s);return a.spatialReference=t,a}function o(t,e){function i(t,e,n){if(0===n)return[t,e];var r=[(t[0]+e[0])/2,(t[1]+e[1])/2];if(1===n)return[t,r,e];if(n>1){var s=i(t,r,n-1),a=i(r,e,n-1);return s.concat(a.slice(1))}}var n=[[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin]],s=[],a=void 0;if([0,1,2,3].map(function(t){return i(n[t],n[t+1],3).slice(1)}).forEach(function(t){return s=s.concat(t)}),t.spatialReference.wkid)a="EPSG:"+t.spatialReference.wkid;else{if(!t.spatialReference.wkt)throw new Error("No WKT or WKID specified on extent.spatialReference");a=t.spatialReference.wkt}var o=r(e);if(t.spatialReference.wkid&&!f.defs(a))throw new Error("Source projection WKID not recognized by proj4 library");var h=f(a,o),u=s.map(function(t){return h.forward(t)}),l=u.map(function(t){return t[0]}),c=u.map(function(t){return t[1]}),d=Math.min.apply(null,l),p=Math.max.apply(null,l),m=Math.min.apply(null,c),y=Math.max.apply(null,c);return{x0:d,y0:m,x1:p,y1:y,sr:e}}function h(t,e){var i=void 0;if(t.wkid)i="EPSG:"+t.wkid;else{if(!t.wkt)return{foundProj:!1,message:"No WKT or WKID specified on extent.spatialReference"};i=t.wkt}return t.wkid&&!f.defs(i)?e?{foundProj:!1,message:"Attempting to lookup WKID",lookupPromise:e(t.wkid).then(function(t){return null===t?!1:(f.defs(i,t),!0)})}:{foundProj:!1,message:"Source projection in WKID and not recognized by proj4 library"}:{foundProj:!0,message:"Source projection OK."}}function u(t){return function(e,i){var n=o(e,i);return new t.Extent(n.x0,n.y0,n.x1,n.y1,n.sr)}}function l(t){return function(e,i,n){return new Promise(function(r,s){var a=new t.ProjectParameters,o=new t.GeometryService(e);a.geometries=i,a.outSR=n,o.project(a,function(t){r(t)},function(t){s(t)})})}}function c(t,e){return t.wkid&&e.wkid?t.wkid===e.wkid:t.wkt&&e.wkt?t.wkt===e.wkt:!1}var f=t("proj4"),d=t("terraformer"),p=t("terraformer-proj4js");e.exports=function(t){return f.defs("EPSG:3978","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),f.defs("EPSG:3979","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),f.defs("EPSG:54004","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),f.defs("EPSG:102100",f.defs("EPSG:3857")),{addProjection:f.defs,checkProj:h,getProjection:f.defs,esriServerProject:l(t),Graphic:t.Graphic,graphicsUtils:t.graphicsUtils,isSpatialRefEqual:c,localProjectExtent:o,localProjectPoint:s,localProjectGeometry:a,projectGeojson:n,Point:t.Point,projectEsriExtent:u(t),SpatialReference:t.SpatialReference}}},{proj4:102,terraformer:145,"terraformer-proj4js":144}],161:[function(t,e,i){"use strict";function n(t){return function(e){var i=new t.Query;return i.returnGeometry=e.returnGeometry||!1,e.returnGeometry&&(i.outSpatialReference=e.outSpatialReference),e.outFields?i.outFields=e.outFields:i.outFields=["*"],e.where&&(i.where=e.where),i.geometry=e.geometry,i.spatialRelationship=t.Query.SPATIAL_REL_INTERSECTS,new Promise(function(n,r){if(e.url){var s=new t.QueryTask(e.url);s.execute(i,function(t){n(t)},function(t){r(t)})}else e.featureLayer&&e.featureLayer.queryFeatures(i,function(t){n(t)},function(t){r(t)})})}}e.exports=function(t){return{queryGeometry:n(t)}}},{}],162:[function(t,e,i){"use strict";function n(t){return function(e){return e instanceof t.FeatureLayer?"FeatureLayer":e instanceof t.WmsLayer?"WmsLayer":e instanceof t.ArcGISDynamicMapServiceLayer?"ArcGISDynamicMapServiceLayer":e instanceof t.ArcGISTiledMapServiceLayer?"ArcGISTiledMapServiceLayer":"UNKNOWN"}}function r(){var t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)})}function s(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];e=e||document.createElement("canvas");var n=document.createElement("img");i&&(n.crossOrigin="Anonymous");var r=new Promise(function(t,i){n.addEventListener("load",function(){e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0),t(e)}),n.addEventListener("error",function(t){return i(t)})});return n.src=t,r}function a(t){var e=arguments.length<=1||void 0===arguments[1]?"image/png":arguments[1];if(t.startsWith("data"))return console.log("ImageUri is already a data url"),Promise.resolve(t);var i=s(t).then(function(t){return console.log("Converting image to dataURL"),t.toDataURL(e)})["catch"](function(e){return console.error("Failed to load crossorigin image",t,e),t});return i}e.exports=function(t){return{getLayerType:n(t),generateUUID:r,convertImageToCanvas:s,convertImagetoDataURL:a}}},{}],163:[function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function r(t,e){var i={},n=e.layers[0].legend.map(function(t){return t.then(function(t){return i[t.label]=t.svgcode})});return Promise.all(n).then(function(){switch(t.type){case w:t.svgcode=i[t.label];break;case _:t.defaultLabel&&(t.defaultsvgcode=i[t.defaultLabel]),t.uniqueValueInfos.forEach(function(t){t.svgcode=i[t.label]});break;case M:t.defaultLabel&&(t.defaultsvgcode=i[t.defaultLabel]),t.classBreakInfos.forEach(function(t){t.svgcode=i[t.label]});break;default:console.warn("encountered unsupported renderer type: "+t.type)}})}function s(t,e){var i=void 0,n={};switch(e.type){case w:i=e.svgcode,n=e.symbol;break;case _:var r=null===t[e.field1]?"":t[e.field1];"string"!=typeof r&&(r=r.toString()),e.field2&&(r=r+", "+t[e.field2],e.field3&&(r=r+", "+t[e.field3]));var s=e.uniqueValueInfos.find(function(t){return t.value===r});s?(i=s.svgcode,n=s.symbol):(i=e.defaultsvgcode,n=e.defaultSymbol);break;case M:var a=parseFloat(t[e.field]),o=e.minValue;if(i=e.defaultsvgcode,n=e.defaultSymbol,o>a)break;var h=e.classBreakInfos.map(function(t){return t.classMaxValue});h.splice(0,0,o-1);var u=e.classBreakInfos.find(function(t,e){return a>h[e]&&a<=t.classMaxValue});if(!u)break;i=u.svgcode,n=u.symbol;break;default:console.warn("Unknown renderer type encountered - "+e.type)}return"undefined"==typeof i&&(i=b(document.createElement("div")).size(E,E).svg()),{svgcode:i,symbol:n}}function a(t,e){var i=s(t,e);return i.svgcode}function o(t,e){var i=s(t,e);return i.symbol}function h(t,e){var i=b(window.document.createElement("div")).size(E,E).viewbox(0,0,0,0),n={name:t,svgcode:null};if(e){var r=x.convertImagetoDataURL(e).then(function(t){return c(i,t)}).then(function(t){var e=t.loader;return i.viewbox(0,0,e.width,e.height),n.svgcode=i.svg(),n})["catch"](function(t){console.error("Cannot draw wms legend image; returning empty",t),n.svgcode=i.svg()});return r}return n.svgcode=i.svg(),Promise.resolve(n)}function u(t){var e=arguments.length<=1||void 0===arguments[1]?"#000":arguments[1],i=b(window.document.createElement("div")).size(E,E).viewbox(0,0,E,E);return i.rect(S,S).center(k,k).fill(e),i.text(t[0].toUpperCase()).size(23).fill("#fff").attr({"font-weight":"bold","font-family":"Roboto"}).center(k,k),Promise.resolve({name:t,svgcode:i.svg()})}function l(t,e,i){function n(t){return Object.assign({},l,t)}function r(t,e){var i=t.node.getBoundingClientRect(),n=e/Math.max(i.width,i.height);1>n&&t.scale(n)}function s(t){return t?{colour:"rgb("+t[0]+","+t[1]+","+t[2]+")",opacity:t[3]/255}:{colour:"rgb(0, 0, 0)",opacity:0}}var a=i.document.createElement("div");a.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),i.document.body.appendChild(a);var o=b(a).size(E,E).viewbox(0,0,E,E),h={esriSMSPath:function(t){var e=t.size,i=t.path;return o.path(i).size(e)},esriSMSCircle:function(t){var e=t.size;return o.circle(e)},esriSMSCross:function(t){var e=t.size;return o.path("M 0,10 L 20,10 M 10,0 L 10,20").size(e)},esriSMSX:function(t){var e=t.size;return o.path("M 0,0 L 20,20 M 20,0 L 0,20").size(e)},esriSMSTriangle:function(t){var e=t.size;return o.path("M 20,20 L 10,0 0,20 Z").size(e)},esriSMSDiamond:function(t){var e=t.size;return o.path("M 20,10 L 10,0 0,10 10,20 Z").size(e)},esriSMSSquare:function(t){var e=t.size;return o.path("M 0,0 20,0 20,20 0,20 Z").size(e)}},u={esriSLSSolid:"none",esriSLSDash:"5.333,4",esriSLSDashDot:"5.333,4,1.333,4",esriSLSLongDashDotDot:"10.666,4,1.333,4,1.333,4",esriSLSDot:"1.333,4",esriSLSLongDash:"10.666,4",esriSLSLongDashDot:"10.666,4,1.333,4",esriSLSShortDash:"5.333,1.333",esriSLSShortDashDot:"5.333,1.333,1.333,1.333",esriSLSShortDashDotDot:"5.333,1.333,1.333,1.333,1.333,1.333",esriSLSShortDot:"1.333,1.333",esriSLSNull:"none"},l={color:"#000",opacity:1,width:1,linecap:"square",linejoin:"miter",miterlimit:4},f={color:[0,0,0,0],width:0,style:u.esriSLSNull},d={esriSFSSolid:function(t){return{color:t.colour,opacity:t.opacity}},esriSFSNull:function(){return"transparent"},esriSFSHorizontal:function(t,e){var i=5;return o.pattern(i,i,function(t){return t.line(0,i/2,i,i/2)}).stroke(e)},esriSFSVertical:function(t,e){var i=5;return o.pattern(i,i,function(t){return t.line(i/2,0,i/2,i)}).stroke(e)},esriSFSForwardDiagonal:function(t,e){var i=5;return o.pattern(i,i,function(t){t.line(0,0,i,i).stroke(e),t.line(0,0,i,i).move(0,i).stroke(e),t.line(0,0,i,i).move(i,0).stroke(e)})},esriSFSBackwardDiagonal:function(t,e){var i=5;return o.pattern(i,i,function(t){t.line(i,0,0,i).stroke(e),t.line(i,0,0,i).move(i/2,i/2).stroke(e),t.line(i,0,0,i).move(-i/2,-i/2).stroke(e)})},esriSFSCross:function(t,e){var i=5;return o.pattern(i,i,function(t){t.line(i/2,0,i/2,i).stroke(e),t.line(0,i/2,i,i/2).stroke(e)})},esriSFSDiagonalCross:function(t,e){var i=7;return o.pattern(i,i,function(t){t.line(0,0,i,i).stroke(e),t.line(i,0,0,i).stroke(e)})}},p={esriSMS:function(){var e=s(t.color);t.outline=t.outline||f;var i=s(t.outline.color),a=n({color:i.colour,opacity:i.opacity,width:t.outline.width,dasharray:u[t.outline.style]}),o=h[t.style](t).fill({color:e.colour,opacity:e.opacity}).stroke(a).center(k,k).rotate(t.angle||0);r(o,P)},esriSLS:function(){var e=s(t.color),i=n({color:e.colour,opacity:e.opacity,width:t.width,linecap:"butt",dasharray:u[t.style]}),r=C,a=E-C;o.line(r,r,a,a).stroke(i)},esriCLS:function(){this.esriSLS()},esriSFS:function(){var e=s(t.color),i=n({color:e.colour,opacity:e.opacity}),r=d[t.style](e,i);t.outline=t.outline||f;var a=s(t.outline.color),h=n({color:a.colour,opacity:a.opacity,width:t.outline.width,linecap:"butt",dasharray:u[t.outline.style]});o.rect(P,P).center(k,k).fill(r).stroke(h)},esriTS:function(){console.error("no support for feature service legend of text symbols")},esriPFS:function(){var e=t.imageData?"data:"+t.contentType+";base64,"+t.imageData:t.url,i=t.width*t.xscale,r=t.height*t.yscale;t.outline=t.outline||f;var a=s(t.outline.color),h=n({color:a.colour,opacity:a.opacity,width:t.outline.width,dasharray:u[t.outline.style]}),l=x.convertImagetoDataURL(e).then(function(t){var e=o.pattern(i,r,function(e){return e.image(t,i,r,!0)});o.rect(P,P).center(k,k).fill(e).stroke(h)});return l},esriPMS:function(){var e=t.imageData?"data:"+t.contentType+";base64,"+t.imageData:t.url,i=x.convertImagetoDataURL(e).then(function(t){return c(o,t)}).then(function(e){var i=e.image;i.center(k,k).rotate(t.angle||0),r(i,S)});return i}};return Promise.resolve(p[t.type]()).then(function(){return i.document.body.removeChild(a),{label:e,svgcode:o.svg()}})["catch"](function(t){return console.log(t)})}function c(t,e){var i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3],r=arguments.length<=4||void 0===arguments[4]?!0:arguments[4],s=new Promise(function(s,a){var o=t.image(e,i,n,r).loaded(function(t){return s({image:o,loader:t})}).error(function(t){a(t),console.error(t)})});return s}function f(t,e,i){var n=e.map(function(t){return l(t.symbol,t.label,i)});return t.defaultSymbol&&n.push(l(t.defaultSymbol,t.defaultLabel||"",i)),n}function d(t){return function(e,i){var n={layers:[{layerId:i,legend:[]}]};switch(e.type){case w:n.layers[0].legend.push(l(e.symbol,e.label,t));break;case _:n.layers[0].legend=f(e,e.uniqueValueInfos,t);break;case M:n.layers[0].legend=f(e,e.classBreakInfos,t);break;default:console.error("encountered unsupported renderer legend type: "+e.type)}return n}}function p(t,e){var i=e.esriRequest({url:t+"/legend",content:{f:"json"},callbackParamName:"callback",handleAs:"json"});return new Promise(function(t,e){i.then(function(i){i.error?e(i.error):t(i)},function(t){e(t)})})}function m(t,e){var i=t.layers.find(function(t){return t.layerId===e});return{type:"uniqueValue",uniqueValueInfos:i.legend.map(function(t){return{label:t.label,symbol:{type:"esriPMS",imageData:t.imageData,contentType:t.contentType}}})}}function y(t){var e,i=t.layers.map(function(t){return t.legend.map(function(t){return{label:t.label,symbol:{type:"esriPMS",imageData:t.imageData,contentType:t.contentType}}})});return{type:"uniqueValue",uniqueValueInfos:(e=[]).concat.apply(e,n(i))}}function g(t,e){return function(i,n){return p(i,t).then(function(t){var i="undefined"==typeof n?y(t):m(t,n);return e.symbology.rendererToLegend(i)})}}function v(t,e){var i=e,n=!1,r=Math.ceil(t.length/2),s=0,a=t.length-1;if(0===e)return t.length-1;for(;!n;)t[r].scale>=i?s=r:a=r,r=Math.floor((a+s)/2),a===s+1&&(n=!0);return r}var b=t("svg.js"),x=t("./shared.js")(),w="simple",_="uniqueValue",M="classBreaks",E=32,P=24,S=28,k=E/2,C=(E-P)/2;e.exports=function(t,e,i){return{getGraphicIcon:a,getGraphicSymbol:o,rendererToLegend:d(i),generatePlaceholderSymbology:u,generateWMSSymbology:h,getZoomLevel:v,enhanceRenderer:r,mapServerToLocalLegend:g(t,e)}}},{"./shared.js":162,"svg.js":142}]},{},[152])(152)});
//# sourceMappingURL=geoapi.min.js.map
